if (self.CavalryLogger) { CavalryLogger.start_js(["lQ0um"]); }

__d("ReactComposerPageCTMSproutNux.react",["fbt","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","PageNuxFrameworkActions","PageNuxIDEnum","PageNuxSurfaceEnum","PagesNuxDispatcher","PagesNuxFrameworkHelper","React","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={shown:!1},this.$1=function(){this.setState({shown:!1}),b("PagesNuxDispatcher").dispatch({type:b("PageNuxFrameworkActions").XOUT,config:{surface:b("PageNuxSurfaceEnum").PAGE_TIMELINE,nuxID:b("PageNuxIDEnum").WWW_PAGE_COMPOSER_CTM_SPROUT_NUX}})}.bind(this),c}a.prototype.componentDidMount=function(){b("PagesNuxFrameworkHelper").registerNux(b("PageNuxIDEnum").WWW_PAGE_COMPOSER_CTM_SPROUT_NUX,b("PageNuxSurfaceEnum").PAGE_TIMELINE,function(){return this.setState({shown:!0})}.bind(this)),b("PagesNuxFrameworkHelper").showNuxAferComponentLoading(b("PageNuxSurfaceEnum").PAGE_TIMELINE)};a.prototype.render=function(){return!this.props.contextRef||!this.props.contextRef()?null:b("React").createElement(b("XUIAmbientNUX.react"),{position:"below",contextRef:this.props.contextRef,behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll")},shown:this.state.shown,offsetX:70,offsetY:30,alignment:"center",onCloseButtonClick:this.$1},g._("Add a Send Message button to your post so people can easily send you messages."))};e.exports=a}),null);
__d("ReactComposerSendMessageAttachmentSproutContainer.react",["AsyncRequest","ExtensibleSproutsItemType","FluxContainer","QE2Logger","React","ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerContextTypes","ReactComposerCTAActions","ReactComposerDisabledSproutItem.react","ReactComposerLoggingName","ReactComposerPageCTMSproutNux.react","ReactComposerPhotoStore","ReactComposerSproutItem.react","ReactComposerSproutsDefaultUIConfig","ReactComposerStore","ReactComposerTaggerActions","ReactComposerTaggerEligibilityUtils","ReactComposerTaggerStore","ReactComposerTaggerType","ShimButton.react","XMessengerMonetizationSmartSendMessageCTAController","getByPath"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=b("React").createRef(),this.$2=function(event){__p&&__p();if(!this.state.isSelected)if(this.state.isTaggerEligible&&!this.context.gks.useCTAStickySetting){b("ReactComposerTaggerActions").selectTagger(this.context.composerID,this.props.uiConfig.loggingName,b("ReactComposerTaggerType").MESSAGING,!1);var a=b("XMessengerMonetizationSmartSendMessageCTAController").getURIBuilder().setBool("auto_select",!0).getURI();new(b("AsyncRequest"))(a).send()}else b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,b("ReactComposerAttachmentType").MESSAGE,!0,b("ExtensibleSproutsItemType").GET_MESSAGES,b("ReactComposerStore").getSproutSurface(this.context.composerID),null,this.props.uiConfig.loggingName);else if(this.state.isTaggerEligible){b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,b("ReactComposerLoggingName").MESSAGING_TAGGER,b("ReactComposerTaggerType").MESSAGING,{hasCTA:!1});a={ctaType:null,ctaValues:{is_cta_share_post:!0,service_config_id:null},ctaMarkup:"",ctaAttachmentConfig:""};b("ReactComposerCTAActions").setConfig(this.context.composerID,a);b("ReactComposerTaggerActions").selectTagger(this.context.composerID,this.props.uiConfig.loggingName,b("ReactComposerTaggerType").MESSAGING,!1);a=b("XMessengerMonetizationSmartSendMessageCTAController").getURIBuilder().setBool("auto_select",!1).getURI();new(b("AsyncRequest"))(a).send()}}.bind(this),c}a.getStores=function(){return[b("ReactComposerAttachmentStore"),b("ReactComposerTaggerStore"),b("ReactComposerPhotoStore")]};a.calculateState=function(a,c,d){__p&&__p();a=b("ReactComposerAttachmentStore").getSelectedAttachmentID(d.composerID);var e=b("ReactComposerTaggerStore").hasData(d.composerID,b("ReactComposerTaggerType").MESSAGING),f=b("getByPath")(c.config,["taggersConfig",b("ReactComposerTaggerType").MESSAGING,"enableSMCTAForMultiPhoto"]);c=b("getByPath")(c.config,["actorConfig","targetID"]);var g=b("ReactComposerTaggerEligibilityUtils").isMessagingEligible(d.composerID,f,c);a=a===b("ReactComposerAttachmentType").MESSAGE||e&&g;c=b("ReactComposerTaggerStore").isDisabled(d.composerID,b("ReactComposerTaggerType").PAGE_CTA,f)||g&&b("ReactComposerTaggerStore").isDisabled(d.composerID,b("ReactComposerTaggerType").MESSAGING,f,c);var h=b("ReactComposerTaggerEligibilityUtils").hasMultiPhoto(d.composerID);if(!g&&e){b("ReactComposerTaggerActions").setTaggerData(d.composerID,b("ReactComposerLoggingName").MESSAGING_TAGGER,b("ReactComposerTaggerType").MESSAGING,{hasCTA:!1});e={ctaType:null,ctaValues:{is_cta_share_post:!0,service_config_id:null},ctaMarkup:"",ctaAttachmentConfig:""};b("ReactComposerCTAActions").setConfig(d.composerID,e)}return{isSelected:a,isDisabled:c,isTaggerEligible:g,hasMultiPhotos:h,enableSMCTAForMultiPhoto:f}};a.prototype.render=function(){return this.state.isDisabled||this.state.hasMultiPhotos&&!this.state.enableSMCTAForMultiPhoto?b("React").createElement(b("ReactComposerDisabledSproutItem.react"),{uiConfig:this.props.uiConfig}):b("React").createElement("div",null,b("React").createElement(b("ShimButton.react"),{onClick:this.$2},b("React").createElement(b("ReactComposerSproutItem.react"),{ref:this.$1,uiConfig:this.props.uiConfig,highlighted:this.state.isSelected})),b("React").createElement(b("ReactComposerPageCTMSproutNux.react"),{contextRef:function(){return this.$1.current}.bind(this)}))};a.prototype.componentDidMount=function(){__p&&__p();if(this.state.isTaggerEligible){var a=b("getByPath")(this.props.config,["taggersConfig",b("ReactComposerTaggerType").MESSAGING,"autoSelect"],!1);if(!a)return;a=b("getByPath")(this.props.config,["taggersConfig",b("ReactComposerTaggerType").MESSAGING,"isPageResponsive"],!1);if(this.state.hasMultiPhotos){a&&b("ReactComposerTaggerActions").selectTagger(this.context.composerID,this.props.uiConfig.loggingName,b("ReactComposerTaggerType").MESSAGING,!1);return}var c=b("getByPath")(this.props.config,["taggersConfig",b("ReactComposerTaggerType").MESSAGING,"enablePageResponsiveness"]),d=b("getByPath")(this.props.config,["actorConfig","targetID"]);b("QE2Logger").logExposureForPage("ctm_ads_page_responsiveness_univ",d);(!c||a)&&b("ReactComposerTaggerActions").selectTagger(this.context.composerID,this.props.uiConfig.loggingName,b("ReactComposerTaggerType").MESSAGING,!1)}};a.defaultProps={uiConfig:b("ReactComposerSproutsDefaultUIConfig")[b("ExtensibleSproutsItemType").GET_MESSAGES]};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);