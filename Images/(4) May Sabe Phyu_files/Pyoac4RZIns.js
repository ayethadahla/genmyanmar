if (self.CavalryLogger) { CavalryLogger.start_js(["b62fx"]); }

__d("FundsAvailability",[],(function(a,b,c,d,e,f){e.exports={NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_ONE_THREE_DAY:79,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69}}),null);
__d("BonfireFeatureGating",["gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={canReceiveBonfireRingInterop:function(){return b("gkx")("678201")},shouldUseH264:function(){return b("gkx")("692620")},stillAroundEnabled:function(){return b("gkx")("678202")},showBulkUserOnboarding:function(){return b("gkx")("678204")},showDeleteAccountSetting:function(){return b("gkx")("678205")},showAudioSettings:function(){return b("gkx")("678206")},showLinkGeneration:function(){return b("gkx")("678207")},showNotifications:function(){return b("gkx")("726030")},logImmediately:function(){return b("gkx")("777163")}};e.exports=a}),null);
__d("AjaxError",[],(function(a,b,c,d,e,f){a={ERROR:"ar:error",TIMEOUT:"ar:timeout",PROXY_ERROR:"ar:proxy error",TRANSPORT_ERROR:"ar:transport error",SERVER_ERROR:"ar:http error",PARSE_ERROR:"ar:parse error",SERVICE_UNAVAILABLE:"ar:noservice"};e.exports=a}),null);
__d("AjaxRequest",["AjaxError","ErrorUtils","Keys","PHPQuerySerializer","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest(),h=[];function a(){var a=h;h=[];a.forEach(function(a){return a.abort()})}function i(a){a.onJSON=a.onError=a.onSuccess=null,b("clearTimeout")(a._timer),a.xhr&&a.xhr.readyState<4&&(a.xhr.abort(),a.xhr=null),h=h.filter(function(b){return b&&b!=a&&b.xhr&&b.xhr.readyState<4})}function c(a,c,d){"use strict";this.timeout=6e4,this.streamMode=!0,this.prelude=/^for \(;;\);/,this.status=null,this.$1=-1,this.$2=null,this.$3=0,this.$4=null,this.json=null,this.errorType=null,this.errorText=null,this.onJSON=null,this.onSuccess=null,this.onError=null,c instanceof b("URI")||(c=new(b("URI"))(c)),this.xhr=b("ZeroRewrites").getTransportBuilderForURI(c)(),d&&a=="GET"&&c.setQueryData(d),this.method=a,this.uri=c,this.xhr.open(a,c)}c.supportsCORS=function(){"use strict";return g};c.prototype.send=function(a){"use strict";__p&&__p();var c=b("TimeSlice").getReusableContinuation("AjaxRequest xhr.onreadystatechange");this.xhr.onreadystatechange=function(){return this.$5(c)}.bind(this);var d=this.timeout;d&&(this.$2=b("setTimeoutAcrossTransitions")(function(){this.errorType=b("AjaxError").TIMEOUT,this.errorText="timeout",this.$4=Date.now()-this.$3,this.onError&&this.onError(this),i(this)}.bind(this),d));h.push(this);this.method=="POST"&&this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this.$3=Date.now();this.xhr.send(a?b("PHPQuerySerializer").serialize(a):"")};c.prototype.abort=function(){"use strict";i(this)};c.prototype.toString=function(){"use strict";var a="[AjaxRequest readyState="+this.xhr.readyState;this.errorType&&(a+=" errorType="+this.errorType,this.errorText&&(a+=" ("+this.errorText+")"));return a+"]"};c.prototype.toJSON=function(){"use strict";var a={};this.json&&(a.json=this.json);this.status&&(a.status=this.status);this.errorType&&(a.errorType=this.errorType,a.uri=this.uri);this.errorText&&(a.errorText=this.errorText);this.$4&&(a.time=this.$4);return a};c.prototype.onJSONSafe=function(){"use strict";this.onJSON&&this.onJSON(this)};c.prototype.onSuccessSafe=function(){"use strict";this.onSuccess&&this.onSuccess(this)};c.prototype.onErrorSafe=function(){"use strict";this.onError&&this.onError(this)};c.prototype.$6=function(){"use strict";__p&&__p();var a;try{this.status=this.xhr.status,a=this.xhr.statusText}catch(a){this.xhr.readyState>=4&&(this.errorType=b("AjaxError").TRANSPORT_ERROR,this.errorText=a.message);return}var c=this.status;if(c==null){this.errorType=b("AjaxError").ERROR;this.errorText="null status code";return}if(c===0&&!/^(file|ftp)/.test(this.uri.toString()))this.errorType=b("AjaxError").TRANSPORT_ERROR;else if(c>=100&&c<200)this.errorType=b("AjaxError").PROXY_ERROR;else if(c>=200&&c<300)return;else if(c>=300&&c<400)this.errorType=b("AjaxError").PROXY_ERROR;else if(c>=400&&c<500)this.errorType=b("AjaxError").SERVER_ERROR;else if(c===503)this.errorType=b("AjaxError").SERVICE_UNAVAILABLE;else if(c>500&&c<600)this.errorType=b("AjaxError").PROXY_ERROR;else if(c==1223)return;else c>=12001&&c<=12156?this.errorType=b("AjaxError").TRANSPORT_ERROR:(a="unrecognized status code: "+c,this.errorType=b("AjaxError").ERROR);this.errorText||(this.errorText=a)};c.prototype.$7=function(){"use strict";__p&&__p();var a,c=this.xhr.readyState;try{a=this.xhr.responseText||""}catch(a){c>=4&&(this.errorType=b("AjaxError").ERROR,this.errorText="responseText not available - "+a.message);return}while(this.xhr){var d=this.$1+1,e=this.streamMode?a.indexOf("\n",d):a.length;e<0&&c==4&&(e=a.length);if(e<=this.$1)break;var f=a;this.streamMode&&(f=a.substr(d,e-d).replace(/^\s*|\s*$/g,""));if(d===0&&this.prelude){var g=this.prelude;g.test(f)&&(f=f.replace(g,""))}this.$1=e;if(f){try{this.json=JSON.parse(f)}catch(c){g=a.match(/(<body[\S\s]+?<\/body>)/i);e=g!=null&&g.length>0?g[0]:null;g={message:c.message,"char":d,excerpt:(d===0&&e||f).substr(512)};this.errorType=b("AjaxError").PARSE_ERROR;this.errorText="parse error - "+JSON.stringify(g);return}b("ErrorUtils").applyWithGuard(this.onJSONSafe,this)}}};c.prototype.$5=function(a){"use strict";var b=this.xhr&&this.xhr.readyState||0;this.status==null&&b>=2&&this.$6();!this.errorType&&this.status!=null&&((b===3&&this.streamMode||b===4)&&a(function(){return this.$7()}.bind(this)));(this.errorType||b===4)&&(this.$4=Date.now()-this.$3,a.last(function(){this.errorType?this.onErrorSafe():this.onSuccessSafe(),i(this)}.bind(this)))};window.addEventListener&&b("UserAgent_DEPRECATED").firefox()&&window.addEventListener("keydown",function(event){event.keyCode===b("Keys").ESC&&event.prevent()},!1);window.attachEvent&&window.attachEvent("onunload",a);e.exports=c}),null);
__d("ChannelSubdomain",["Event","JSLogger","Run","LogHistory","clearTimeout","setTimeoutAcrossTransitions","WebStorage"],(function(a,b,c,d,e,f){__p&&__p();var g=b("LogHistory").getInstance("channel"),h=b("JSLogger").create("channel"),i="channel_sub:",j=7,k=100*1e3,l=null,m=null;function n(){var a=b("WebStorage").getLocalStorage();m&&(b("clearTimeout")(m),m=null);a&&l!=null&&a.removeItem(i+l);l=null}function a(a,c,d){__p&&__p();d===void 0&&(d=!1);a=(a-1)*j;d&&(m&&b("clearTimeout")(m),l=m=null);c==null&&(c=Math.floor(Math.random()*a));if(l==null){var e=b("WebStorage").getLocalStorage();if(e){d=[];for(var f=0;f<e.length;f++){var o=e.key(f);if(o!=null&&o.indexOf(i)===0){var p=parseInt(o.substr(i.length),10);d[p]=parseInt(e.getItem(o),10)}}p=Date.now()-k;for(var o=0;o<a;o++){f=(o+c)%a;if(!d[f]||d[f]<p){l=f;break}}if(l!=null){f=function a(){if(l==null)return;try{e.setItem(i+l,Date.now().toString())}catch(a){g.warn("subdomain set failed",a.message)}m=b("setTimeoutAcrossTransitions")(a,k/2)};f()}else g.warn("no channel subdomain",d),h.error("subdomain_overflow");typeof window.onpageshow!=="undefined"?b("Event").listen(window,"pagehide",n):b("Run").onUnload(n)}else l=c}return l==null?null:l%j}e.exports={allocate:a,clear:n}}),null);
__d("ChatproxyClientErrorsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setBatchSize=function(a){this.$1.batch_size=a;return this};a.prototype.setErrorMessage=function(a){this.$1.error_message=a;return this};a.prototype.setErrorReason=function(a){this.$1.error_reason=a;return this};a.prototype.setErrorText=function(a){this.$1.error_text=a;return this};a.prototype.setJsEventTimeMs=function(a){this.$1.js_event_time_ms=a;return this};a.prototype.setMultiViewSubscription=function(a){this.$1.multi_view_subscription=a;return this};a.prototype.setRequestID=function(a){this.$1.request_id=a;return this};a.prototype.setResponseHeaders=function(a){this.$1.response_headers=a;return this};a.prototype.setSessionID=function(a){this.$1.session_id=a;return this};a.prototype.setSessionIDStr=function(a){this.$1.session_id_str=a;return this};a.prototype.setStatusCode=function(a){this.$1.status_code=a;return this};a.prototype.setSubscriberID=function(a){this.$1.subscriber_id=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTopicPrefixes=function(a){this.$1.topic_prefixes=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setURL=function(a){this.$1.url=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.setXhrReadyState=function(a){this.$1.xhr_ready_state=a;return this};a.prototype.setXhrStatus=function(a){this.$1.xhr_status=a;return this};c={app_version:!0,batch_size:!0,error_message:!0,error_reason:!0,error_text:!0,js_event_time_ms:!0,multi_view_subscription:!0,request_id:!0,response_headers:!0,session_id:!0,session_id_str:!0,status_code:!0,subscriber_id:!0,time:!0,topic_prefixes:!0,url:!0,weight:!0,xhr_ready_state:!0,xhr_status:!0};e.exports=a}),null);
__d("DocRPC",["ErrorUtils","FBLogger"],(function(a,b,c,d,e,f){__p&&__p();var g={_apis:{},_dispatch:function(a){__p&&__p();var c;try{a=JSON.parse(a)}catch(b){throw new Error('DocRPC unparsable dispatch: "'+a+'"')}if(Object.prototype.hasOwnProperty.call(g._apis,a.api)){var d=g._apis[a.api];d[a.method]&&(c=b("ErrorUtils").applyWithGuard(d[a.method],d,a.args))}c===void 0&&(c=null);return JSON.stringify(c)},publish:function(a,b){g._apis[b]=a},proxy:function(a,c,d){__p&&__p();var e={};d.forEach(function(d){__p&&__p();e[d]=function(){__p&&__p();var e={api:c,method:d,args:Array.prototype.slice.call(arguments)},f;try{if(a.closed)throw new Error("DocRPC window closed");f=a.DocRPC._dispatch(JSON.stringify(e))}catch(a){b("FBLogger")("doc_rpc").catching(a).warn("Encountered an error duing proxy call");return}if(typeof f==="string")try{f=JSON.parse(f)}catch(a){b("FBLogger")("doc_rpc").catching(a).mustfix("DocRPC %s.%s unparsable return: %s",c,d,f);throw new Error("DocRPC "+c+"."+d+' unparsable return: "'+f+'"')}return f}});return e}};e.exports=a.DocRPC=g}),null);
__d("ChannelTransport",["AjaxRequest","BanzaiODS","ChannelConstants","ChatproxyClientErrorsTypedLogger","DocRPC","LogHistory","MessengerMQTTGating","TimeSlice","URI","bind","clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g="BROWSER_REFUSED_TO_GET_FAILURE_REASON_HEADER",h=b("LogHistory").getInstance("channel");function i(a){__p&&__p();var c=new(b("ChatproxyClientErrorsTypedLogger"))();c.setStatusCode(a.status);if(a.xhr!=null){var d;try{d=a.xhr.getResponseHeader("x-fb-chat-failure-reason")}catch(a){d=g}d&&c.setErrorReason(d)}c.setErrorMessage(a.errorType);a.uri!==void 0&&c.setURL(a.uri.getPath());c.log()}function j(){return(1048576*Math.random()|0).toString(36)}function k(a){return a!==null&&a!==void 0&&!isNaN(a)&&isFinite(a)&&0<=a&&a<=6}function l(a,c){var d="";k(a.subdomain)&&(d=a.subdomain+"-");var e=a.host;e=e===null||e===void 0?"edge-chat":a.host;c=new(b("URI"))(c).setDomain(d+e+"."+a.domain).setPort(a.port).setSecure(new(b("URI"))(window.location.href).isSecure());return c}function m(a){__p&&__p();var c={partition:a.partition,cb:j(),failure:a.pingFailuresOnSubdomain};a.sticky_token&&(c.sticky_token=a.sticky_token);a.sticky_pool&&(c.sticky_pool=a.sticky_pool);c=l(a,"/p").setQueryData(c);h.log("start_p",{uri:c.toString()});var d=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(d.xhr.withCredentials=!0);var e=function(b){h.log("finish_p",{xhr:b.toJSON?b.toJSON():b,subdomain:a.subdomain,fullHost:a.fullHost})};d.onError=function(c){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendP.error");i(d);e(c);if(a.subdomain===null)return;k(a.subdomain)&&(a.pingFailuresOnSubdomain++,a.subdomain++,a.subdomain>6&&(a.subdomain=0))};d.timeout=a.P_TIMEOUT;d.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendP.success"),e(a)};d.send()}function n(a,c,d){__p&&__p();var e=new Image(),f=0,g=function(a){e.abort();return a?c():d()};e.onload=b("TimeSlice").guard(function(){h.log("ping_ok",{duration:Date.now()-f}),b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPing.success"),g(!0)},"ChannelTransport image.onload");e.onerror=b("TimeSlice").guard(function(){m(a),b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPing.error"),i(e),g(!1)},"ChannelTransport image.onerror");var k=b("setTimeoutAcrossTransitions")(e.onerror,1e4);e.abort=function(){k&&(b("clearTimeout")(k),k=null),e.onload=e.onerror=null};var n={partition:a.partition,cb:j()};a.sticky_token&&(n.sticky_token=a.sticky_token);a.sticky_pool&&(n.sticky_pool=a.sticky_pool);a.lastRequestErrorReason&&(n.reason=a.lastRequestErrorReason,a.lastRequestErrorReason=null);a.uid&&a.viewerUid&&(n.uid=a.uid,n.viewer_uid=a.viewerUid);f=Date.now();e.src=l(a,"/ajax/chatproxy-ping").setQueryData(n);return e}function a(a,c){__p&&__p();var d={channel:a.user_channel,partition:a.partition,clientid:a.sessionID,cb:j(),cap:0,uid:a.uid,viewer_uid:a.viewerUid};a.sticky_token&&(d.sticky_token=a.sticky_token);a.sticky_pool&&(d.sticky_pool=a.sticky_pool);a.profile&&(d.profile=a.profile);a.capabilities&&(d.cap=a.capabilities);d.id=c;c=l(a,"/add_bud").setQueryData(d);var e=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(e.xhr.withCredentials=!0);e.onError=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendAdditionalBuddy.error"),h.warn("add_buddy_error"),i(e)};e.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendAdditionalBuddy.success"),h.log("add_buddy_ok")};e.timeout=a.P_TIMEOUT;e.send()}function c(a){__p&&__p();var c={channel:a.user_channel,partition:a.partition,clientid:a.sessionID,cb:j(),cap:0,uid:a.uid,viewer_uid:a.viewerUid};a.sticky_token&&(c.sticky_token=a.sticky_token);a.sticky_pool&&(c.sticky_pool=a.sticky_pool);a.is_offline||a.shouldSuppressPresence?c.state="offline":c.state="active";if(c.state===a.lastPresenceState)return;a.lastPresenceState=c.state;a.profile&&(c.profile=a.profile);a.capabilities&&(c.cap=a.capabilities);c=l(a,"/active_ping").setQueryData(c);var d=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(d.xhr.withCredentials=!0);d.onError=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendActivePing.error"),h.warn("active_ping_error"),i(d)};d.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendActivePing.success"),h.log("active_ping_ok")};d.timeout=a.P_TIMEOUT;d.send()}function o(a,c,d,e){__p&&__p();var f=new Date(),g=-1;a.userActive>0&&(g=(f-a.userActive)/1e3|0,g<0&&h.warn("idle_regression",{idleTime:g,now:f.getTime(),userActive:a.userActive}));f={channel:a.user_channel,seq:a.seq,partition:a.partition,clientid:a.sessionID,cb:j(),idle:g,qp:"y",cap:0};a.state.aiq&&(f.aiq=a.state.aiq);b("gkx")("719214")&&(f.iris_enabled=!b("MessengerMQTTGating").isEnabled(),b("BanzaiODS").bumpEntityKey("ChannelTransport","iris_enabled."+(f.iris_enabled?"true":"false")));a.ready&&((a.seqTurSentAt==-1||a.seqTurSentAt==a.seq)&&(f.tur=a.timeUntilReady,f.qpmade=a.queueMade,a.seqTurSentAt=a.seq));f.pws=a.pws;a.sequenceId>0&&(f.isq=a.sequenceId);f.msgs_recv=a.estimatedReceived;a.uid&&a.viewerUid&&(f.uid=a.uid,f.viewer_uid=a.viewerUid);a.sticky_token?f.sticky_token=a.sticky_token:(f.request_batch=1,a.msgr_region&&(f.msgr_region=a.msgr_region));a.sticky_pool&&(f.sticky_pool=a.sticky_pool);"trace_id"in a&&(f.traceid=a.trace_id);a.is_offline||a.shouldSuppressPresence?f.state="offline":a.userActive>0&&g<60&&(f.state="active");a.lastPresenceState=f.state;a.streamingCapable&&(f.mode="stream",f.format="json");a.profile&&(f.profile=a.profile);a.capabilities&&(f.cap=a.capabilities);g=l(a,"/pull").setQueryData(f);f="GET";var k=new(b("AjaxRequest"))(f,g);b("AjaxRequest").supportsCORS()&&(k.xhr.withCredentials=!0);k.timeout=a.streamingCapable?a.STREAMING_TIMEOUT:a.LONGPOLL_TIMEOUT;k.onJSON=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.json"),c(a)};k.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.success"),d(a)};k.onError=function(){var c=this.status==12002&&this._time>=a.MIN_12002_TIMEOUT||this.status==504&&this._time>=a.MIN_504_TIMEOUT,f=c?d:e;c?b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.success"):(b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.error"),i(k));return f&&f.apply(this,arguments)};k.send();a.inStreaming=a.streamingCapable;return k}function p(a){this.manager=a,this.init&&this.init()}function d(a){p.apply(this,arguments)}Object.assign(d.prototype,{logName:"CORS",enterState:function(a,c){this._request&&(this._request.abort(),this._request=null);a=="init"&&b("setTimeoutAcrossTransitions")(b("bind")(this.manager,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),0);if(!/pull|ping/.test(a))return;var d=this.manager;a=="ping"?this._request=n(c,b("bind")(d,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(d,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})):a=="pull"&&(this._request=o(c,b("bind")(d,"_processTransportData",c.stateId),b("bind")(d,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(d,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})))}});function f(a){h.log("iframe_init_constructor"),p.apply(this,arguments),this._iframe=document.createElement("iframe"),this._iframe.style.display="none",document.body.appendChild(this._iframe),b("DocRPC").publish(this,"outerTransport")}Object.assign(f.prototype,{logName:"iframe",_initIframe:function(a){__p&&__p();h.log("iframe_init_start");window.onchanneliframeready=function(){h.log("iframe_resources");return a.resources};window.onchanneliframeloaded=function(){h.log("iframe_loaded")};if(a){this._iframeURI=l(a,a.path);if(a.resources){var c=this._iframeURI.getDomain();a.resources=a.resources.map(function(a){var d=new(b("URI"))(a);return d.getPath().startsWith("/intern/rsrc.php")&&d.getQueryData().origin!==void 0?d.addQueryData("origin",c).toString():a})}}else this._iframeURI="about:blank";this._iframeProxy=null;try{this._iframe.contentWindow.location.replace(this._iframeURI),h.log("iframe_uri_set")}catch(c){h.error("iframe_uri_set_error",c),this.exitState({status:b("ChannelConstants").ERROR,stateId:a.stateId},c+"")}},enterState:function(a,c){a=="init"?this._initIframe(c):/idle|ping|pull/.test(a)?this._iframeProxy?this._iframeProxy.enterState.apply(this._iframeProxy,arguments):a!="idle"&&this.exitState({status:b("ChannelConstants").ERROR,stateId:c.stateId},"iframe not yet loaded"):a=="shutdown"&&this._initIframe()},_processTransportData:function(){this.manager._processTransportData.apply(this.manager,arguments)},exitState:function(a){this.manager.state=="init"&&a.status==b("ChannelConstants").OK&&(this._iframeProxy=b("DocRPC").proxy(this._iframe.contentWindow,"innerTransport",["enterState"],(this._iframeURI+"").replace(/iframe.*/,"")));if(/ping|pull/.test(this.manager.state)&&!this._iframeProxy)return;this.manager.exitState.apply(this.manager,arguments)}});function q(){this.init=this.init.bind(this),p.apply(this,arguments)}Object.assign(q.prototype,{logName:"iframe(inner)",init:function(){b("DocRPC").publish(this,"innerTransport");try{var a=b("DocRPC").proxy(window.parent,"outerTransport",["_processTransportData","exitState"],top.DocRPC.origin);Object.assign(this,a);this.exitState({status:b("ChannelConstants").OK,stateId:1e6})}catch(a){h.error("iframe_inner_init_error",a)}},enterState:function(a,c){this._request&&(this._request.abort(),this._request=null),a=="ping"?this._request=n(c,b("bind")(this,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(this,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})):a=="pull"&&(this._request=o(c,b("bind")(this,"_processTransportData",c.stateId),b("bind")(this,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(this,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})))}});e.exports={isSubdomain:k,getURI:l,Transport:p,CORSTransport:d,IframeTransport:f,IframeInnerTransport:q,sendActivePing:c,sendAdditionalBuddyRequest:a}}),null);
__d("ChatProxyConnectionState",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.auxiliaryIrisQueues={},this.aiq=null}a.prototype.subscribeIrisQueue=function(a,b){this.auxiliaryIrisQueues[a]=b,this.updateCaches()};a.prototype.unsubscribeIrisQueue=function(a){delete this.auxiliaryIrisQueues[a],this.updateCaches()};a.prototype.updateCaches=function(){var a=[];for(var b in this.auxiliaryIrisQueues)Object.prototype.hasOwnProperty.call(this.auxiliaryIrisQueues,b)&&(a.push(b),a.push(this.auxiliaryIrisQueues[b]));a.length===0?this.aiq=null:this.aiq=a.join(",")};e.exports=a}),null);
__d("FBAjaxRequest",["AjaxError","AjaxRequest","getAsyncParams"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("AjaxRequest"));g=c&&c.prototype;function a(a,c,d){"use strict";d=babelHelpers["extends"]({},b("getAsyncParams")(a),d);g.constructor.call(this,a,c,d);this.$FBAjaxRequest1=d;this.streamMode=!1}a.prototype.onJSONSafe=function(){"use strict";this.json&&(this.json.error&&(this.errorType=b("AjaxError").SERVER_ERROR,this.errorText="AsyncResponse error: "+this.json.error),this.json=this.json.payload),g.onJSONSafe.call(this)};a.prototype.send=function(a){"use strict";g.send.call(this,babelHelpers["extends"]({},a,this.$FBAjaxRequest1))};e.exports=a}),null);
__d("MovingStat",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a>0?a:6e4,this.$2=0,this.$3=0,this.$5={t:new Date(),count:0,v:0},this.$4=this.$5}a.prototype.add=function(a){"use strict";__p&&__p();this.$2+=a;this.$3++;var b=new Date();if(b-this.$5.t<1e3){this.$5.v+=a;this.$5.count++;return}this.$5.next={t:b,v:a,count:1};this.$5=this.$5.next;this.$6()};a.prototype.tally=function(a){a===void 0&&(a=1e3);this.$6();return{sum:this.$2,count:this.$3,timeAverage:this.$2*a/this.$1}};a.prototype.$6=function(){"use strict";var a=new Date()-this.$1;while(this.$4&&this.$4.next&&this.$4.t<a)this.$2-=this.$4.v,this.$3-=this.$4.count,this.$4=this.$4.next};e.exports=a}),null);
__d("PresenceProperties",["ChannelConstants","InstantGamesPresenceProperties","WorkplaceChatHelper"],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$1=b("ChannelConstants").CAPABILITY_VOIP_INTEROP}a.prototype.getProperties=function(){"use strict";b("WorkplaceChatHelper").isDesktopChatApp()&&(this.$1|=b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP);b("InstantGamesPresenceProperties").isActiveGamePresence()?this.$1|=b("ChannelConstants").CAPABILITY_PLAYING_INSTANT_GAME:this.$1&=~b("ChannelConstants").CAPABILITY_PLAYING_INSTANT_GAME;return this.$1};c=new a();e.exports=c}),null);
__d("RTISession",["invariant","AjaxRequest","BanzaiODS","ChatproxyClientErrorsTypedLogger","ErrorUtils","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b,c,d,e,f,g,h,i,j){this.domain=a,this.topLevelDomain=b,this.port=c,this.edgePoolName=d,this.stickyToken=e,this.loggedInId=f,this.accountId=g,this.clientProfile=h!=null?h:"desktop",this.clientId=i,this.capabilities=j}a.prototype.issueRequest=function(a,c,d,e,f){__p&&__p();var h=this.domain+"."+this.topLevelDomain,i=(1048576*Math.random()|0).toString(36);i={cb:i,sticky_token:this.stickyToken,uid:this.loggedInId,viewer_uid:this.accountId,sticky_pool:this.edgePoolName,profile:this.clientProfile,clientid:this.clientId,cap:this.capabilities};for(var j in i)c[j]&&g(0,1632);Object.assign(i,c);c=new(b("URI"))(a).setDomain(h).setPort(this.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(i);a=d?"POST":"GET";var k=new(b("AjaxRequest"))(a,c);k.timeout=f!=null?f*1e3:3e4;k.streamMode=!1;k.xhr&&(k.xhr.withCredentials=!0);var l={};k.onSuccess=function(){b("BanzaiODS").bumpEntityKey("RTISession","request.success")};k.onJSON=function(){l.data=k.json,l.error=null,b("ErrorUtils").applyWithGuard(e,this,[l])}.bind(this);k.onError=function(){__p&&__p();var a=new Set(),c=null;if(d.subscriptions!=null&&Array.isArray(d.subscriptions)){c=d.subscriptions.length;for(var f=0;f<d.subscriptions.length;f++){var g=d.subscriptions[f].topic.split("/");g.pop();a.add(g.join("/"))}}l.data=null;l.error=k.errorType||"error";b("BanzaiODS").bumpEntityKey("RTISession","request.error");this.$1(k,a,c);b("ErrorUtils").applyWithGuard(e,this,[l])}.bind(this);k.send(JSON.stringify(d));b("BanzaiODS").bumpEntityKey("RTISession","request.attempt")};a.prototype.$1=function(a,c,d){__p&&__p();var e=new(b("ChatproxyClientErrorsTypedLogger"))();e.setStatusCode(a.status);if(a.xhr!=null){var f=a.xhr.getResponseHeader("x-fb-chat-failure-reason");f&&e.setErrorReason(f)}e.setSubscriberID(this.loggedInId);e.setSessionIDStr(this.clientId);e.setErrorMessage(a.errorType);e.setErrorText(a.errorText);e.setTopicPrefixes(c);e.setJsEventTimeMs(Math.floor(Date.now()/1e3));d!=null&&e.setBatchSize(d);a.uri&&e.setURL(a.uri.getPath());e.log()};e.exports=a}),null);
__d("ChannelManager",["errorCode","Promise","AjaxError","AjaxRequest","Arbiter","AsyncRequest","BanzaiODS","ChannelClientID","ChannelConstants","ChannelInitialData","ChannelSubdomain","ChannelTransport","ChatProxyConnectionState","ChatReliabilityInstrumentation","ChatVisibility","DTSG","Env","FantailLogger","FBAjaxRequest","ISB","JSLogger","LogHistory","MovingStat","PresenceCookieManager","PresenceProperties","PresenceState","PresenceUtil","Random","RTISession","SystemEvents","URI","UserActivity","clearTimeout","emptyFunction","requestAnimationFrameAcrossTransitions","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("JSLogger").create("channel"),i=b("LogHistory").getInstance("channel_manager"),j=null,k=b("emptyFunction"),l=new(b("Promise"))(function(a,b){k=a});function a(a){j=a}var m={idle:{ok:"init!"},init:{ok:"pull!",error:"reconnect",sys_online:"init",sys_timetravel:"init"},pull:{ok:"pull!",error:"ping",error_missing:"pull",error_msg_type:"pull",refresh_0:"reconnect",refresh_110:"reconnect",refresh_111:"reconnect",refresh_112:"pull",refresh_113:"pull",refresh_117:"reconnect"},ping:{ok:"pull!",error:"ping",error_stale:"reconnect!"},reconnect:{ok:"init!",error:"reconnect",sys_online:"reconnect",sys_timetravel:"reconnect"},shutdown:{},_all:{error_max:"shutdown!",error_shutdown:"shutdown!",sys_owner:"reconnect",sys_nonowner:"idle!",sys_online:"ping",sys_offline:"idle!",sys_timetravel:"ping"}},n={state:new(b("ChatProxyConnectionState"))(),userActive:Date.now(),created:Date.now(),ready:!1,seqTurSentAt:-1,queueMade:"",sequenceId:0,lastPresenceState:null,lastRequestErrorReason:null,seq:0,pingFailuresOnSubdomain:0,pws:"fresh",estimatedReceived:0,sessionID:b("ChannelClientID").getID(),capabilities:b("PresenceProperties").getProperties(),streamingCapable:!1,inStreaming:!1,shouldSuppressPresence:b("PresenceState").shouldSuppress(),LONGPOLL_TIMEOUT:6e4,STREAMING_TIMEOUT:6e4,P_TIMEOUT:3e4,IFRAME_LOAD_TIMEOUT:3e4,MIN_RETRY_INTERVAL:5e3,MAX_RETRY_INTERVAL:32e4,MIN_12002_TIMEOUT:9e3,MIN_504_TIMEOUT:2e4,STALL_THRESHOLD:18e4,JUMPSTART_THRESHOLD:9e4,MIN_INIT_PROBE_DELAY:3e3,INIT_PROBE_DELAY_RANDOMIZE_RANGE:12e3,CHANNEL_PROXY_REPORTING_MIN_INTERVAL:1e4,PROBE_DELAY:6e4,PROBE_HEARTBEATS_INTERVAL_LOW:1e3,PROBE_HEARTBEATS_INTERVAL_HIGH:5e3,STREAMING_EXIT_STATE_ON_CONTINUE:!1},o=1,p={},q=0;function r(){var a=b("AsyncRequest").lastSuccessTime;return a?Math.round((Date.now()-a)/1e3):-1}function s(a,b){return Object.prototype.hasOwnProperty.call(n,a)?n[a]:b}function t(){var a={};s("host")&&(a[s("user_channel")]=s("seq",0));return a}function u(a){a?(q=0,p={}):q++}c={state:"idle",nextState:null,proxyDown:!1,lastPullTime:Date.now(),lastReportOnMisguidedMsgTime:Date.now(),heartbeats:[],setTestCallback:a,backoff:!1,sessionRegistered:!1,init:function(a,c){__p&&__p();b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"initializing sessionid:%s at iris-seq:%s",n.sessionID,n.sequenceId);this.init=b("emptyFunction");b("Arbiter").subscribe(b("ChannelConstants").GET_RTI_SESSION_REQUEST,function(event,a){this.informCurrentSession()}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").CONSOLE_LOG,function(a,b){});b("requestAnimationFrameAcrossTransitions")(function(){b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"using session id: %s at seq: %s {%s} with sticky: %s/%s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool),b("UserActivity").subscribe(function(){var a=b("ChannelTransport").getURI(n,"/U");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"user activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,this.state,a);this.state=="pull"&&(n.userActive=Date.now(),b("ChannelTransport").sendActivePing(n))}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").ENTITY_PRESENCE_ACTIVE_PING,function(a){a=b("ChannelTransport").getURI(n,"/U");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entity presence activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,this.state,a);this.state=="pull"&&(n.userActive=Date.now())}.bind(this))}.bind(this));b("PresenceCookieManager").register("ch",t);var d=this.getConfig("max_conn",2);n.subdomain=b("ChannelSubdomain").allocate(d);b("ChannelTransport").isSubdomain(n.subdomain)||(b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"invalid subdomain from ChannelSubdomain: %s",n.subdomain),n.subdomain=null);this._transportRate=new(b("MovingStat"))(3e4);var e=b("AjaxRequest").supportsCORS()?"CORSTransport":"IframeTransport";b("BanzaiODS").bumpEntityKey("ChannelManager","transport_chosen."+e);this.transport=new(b("ChannelTransport")[e])(this);k(this.transport);a&&this.enterState(a,c);b("requestAnimationFrameAcrossTransitions")(function(){b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(event,a){this._transportRate&&(a.transportRate=this._transportRate.tally(),a.transportType=e,a.transportVersion=2)}.bind(this)),this._initMonitors()}.bind(this));if(this.getConfig("fullHost")&&b("AjaxRequest").supportsCORS()){if(this.getConfig("tryStreaming")){d=n.MIN_INIT_PROBE_DELAY+b("Random").random()*n.INIT_PROBE_DELAY_RANDOMIZE_RANGE;b("setTimeoutAcrossTransitions")(this._probeTest,d)}if(this.getConfig("trySSEStreaming")){a=n.MIN_INIT_PROBE_DELAY+b("Random").random()*n.INIT_PROBE_DELAY_RANDOMIZE_RANGE;b("setTimeoutAcrossTransitions")(this._sseProbeTest,a)}}},configure:function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];i.log("configure",JSON.stringify(c));c.forEach(function(a){return Object.assign(n,a)});this._indicateLbInfoUpdated("reconnect",JSON.stringify(c));b("Arbiter").inform(b("ChannelConstants").ON_CONFIG,this)},getConfig:function(a,b){return s(a,b)},getCompleteConfig:function(){return n},subscribeIrisQueue:function(a,c){n.state.subscribeIrisQueue(a,c),this.exitState({status:b("ChannelConstants").OK,stateId:o})},unsubscribeIrisQueue:function(a){n.state.unsubscribeIrisQueue(a)},informCurrentSession:function(){var a=null;this.sessionRegistered&&n&&n.fullHost&&n.sticky_token&&n.uid&&(a=new(b("RTISession"))(n.fullHost,n.domain,n.port,n.sticky_pool,n.sticky_token,n.uid,n.viewerUid,n.profile,n.sessionID,n.capabilities));b("Arbiter").inform(b("ChannelConstants").RTI_SESSION,a)},isShutdown:function(){return this.state=="shutdown"},shouldIdle:function(){return!(b("SystemEvents").isPageOwner()&&b("SystemEvents").isOnline())},_sendIframeError:function(a){a=new(b("AsyncRequest"))().setURI("/ajax/presence/reconnect.php").setData({reason:a,fb_dtsg:b("DTSG").getToken()}).setOption("suppressErrorHandlerWarning",!0).setOption("retries",1).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0);a.specifiesWriteRequiredParams()&&a.send()},_getDelay:function(){var a=Math.min(n.MIN_RETRY_INTERVAL*Math.pow(2,Math.max(0,q-1)),n.MAX_RETRY_INTERVAL);this.proxyDown&&"proxy_down_delay_millis"in n&&(a=n.proxy_down_delay_millis);this.proxyDown=!1;return Math.floor(a*(1+Math.random()*.5))},resetDelay:function(){u(!0)},enterState:function(a,c){this._inEnterState&&(i.warn("enterstate_recursion",JSON.stringify({state:this.state,args:arguments})),b("ChatReliabilityInstrumentation").logERROR("enterstate_recursion"));this._inEnterState=!0;try{this._enterState.apply(this,arguments),this._inEnterState=!1}catch(a){this._inEnterState=!1;throw a}},_enterState:function(a){__p&&__p();var c=this.backoff?this._getDelay():0;this.backoff=!1;if(this.isShutdown()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"not executing state due to shutdown mode: %s",a);return}if(a!="idle!"&&this.shouldIdle()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"forced idleness");return}o++;n.stateId=o;b("clearTimeout")(this._deferredTransition);this._deferredTransition=null;!this.transport?(l.then(function(a){return a.enterState("idle")}),b("ChatReliabilityInstrumentation").logERROR("called enterState "+a+" before transport init")):this.transport.enterState("idle");this.state="idle";this.nextState=null;if(/!$/.test(a)){if(this._transportRate){var d=this._transportRate.tally().timeAverage,e=this.getConfig("MAX_CHANNEL_STATES_PER_SEC",1);d>=e&&(this._throttled||(this._throttled=!0,i.warn("throttled","{}"),b("Arbiter").inform(b("ChannelConstants").THROTTLED,d)),h.bump("throttle"),c=1e3/e)}}else/#$/.test(a)||(c=this._getDelay());a=a.replace(/\W*$/,"");if(!m[a]){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"invalid state: %s",a);throw new Error("invalid state:"+a)}var f=Array.from(arguments),g={};if(c<=0){g.state=a;this._transportRate&&this._transportRate.add(1);this.state=a;var j=this["_enter_"+this.state];j&&(f.shift(),j.apply(this,f));/init|idle|pull|ping/.test(this.state)&&(n.streamingCapable&&/pull/.test(this.state)&&(this.heartbeats=[]),n.is_offline=!b("ChatVisibility").isOnline(),n.capabilities=b("PresenceProperties").getProperties(),b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entering transport state: %s",this.state),!this.transport?(l.then(function(a){return a.enterState(this.state,n)}.bind(this)),b("ChatReliabilityInstrumentation").logERROR("called enterState "+a+" before transport init")):this.transport.enterState(this.state,n),this.state=="ping"&&(g.url=b("ChannelTransport").getURI(n).toString(),g.port=n.port||"undefined"))}else this.state="idle",this.nextState=a,g.state=this.state,g.delay=c,g.nextState=a,f[0]=a+"#",this._deferredTransition=b("setTimeoutAcrossTransitions")(function(){this._deferredTransition=null,this.enterState.apply(this,f)}.bind(this),c);/pull/.test(a)&&(g.client_id=n.sessionID,g.streaming=n.inStreaming);b("Arbiter").inform(b("ChannelConstants").ON_ENTER_STATE,g)},exitState:function(a,c){__p&&__p();var d=a.stateId,e=a.status;if(this.isShutdown()||d<o)return;var f=this.state,g=Array.from(arguments);g[0]=a.status;var h={};h.state=f;h.status=e;/pull/.test(f)&&(h.client_id=n.sessionID,h.streaming=n.inStreaming);/ping/.test(f)&&e!=b("ChannelConstants").OK&&(h.url=b("ChannelTransport").getURI(n).toString());this.nextState&&(h.nextState=this.nextState);c&&c.errorType?(n.lastRequestErrorReason=c.errorType,h.xhr=c.toJSON?c.toJSON():c,c.errorType==b("AjaxError").SERVICE_UNAVAILABLE&&(b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"got 5xx http status code, setting long delay"),this.proxyDown=!0),delete h.xhr.json):e!=b("ChannelConstants").OK&&(n.lastRequestErrorReason=e);c&&c.json&&(c.json.t&&(h.t=c.json.t),c.json.reason&&(h.reason=c.json.reason),c.json.seq&&(h.seq=c.json.seq));b("Arbiter").inform(b("ChannelConstants").ON_EXIT_STATE,h);var j=this["_exit_"+f];j&&(e=j.apply(this,g)||e);e!=b("ChannelConstants").OK&&(u(),p[f]=(p[f]||0)+1);var k=m[this.nextState||f][e]||m._all[e],l=k&&k.replace(/!*$/,"");l||(i.error("terminal_transition",JSON.stringify(h)),this._shutdownHint=b("ChannelConstants").HINT_INVALID_STATE,k="shutdown!",b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"entering shutdown state"));this._lastState=f;this._lastStatus=e;this.enterState(k)},_processTransportData:function(a,b){this._processTransportData0(a,b,b.json)},_processTransportData0:function(a,c,d){__p&&__p();var e=d.t;"s"in d&&(d.seq=d.s,delete d.s);if(d.u&&n.user&&d.u!=n.user){i.warn("misguided_msg",JSON.stringify({user:n.user,target:d.u}));this._reportProxyMisguidedMsg(d.u,n.user);return}var f=n.seq;"seq"in d&&(n.seq=d.seq,b("PresenceState").doSync());switch(e){case"continue":n.inStreaming&&this.heartbeats.length<1&&(n.streamingCapable=!1,i.log("switch_to_longpoll","{}"),b("setTimeoutAcrossTransitions")(this._probeTest,n.PROBE_DELAY));u(!0);(!n.inStreaming||n.STREAMING_EXIT_STATE_ON_CONTINUE)&&this.exitState({status:b("ChannelConstants").OK,stateId:a});break;case"refresh":case"refreshDelay":b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"got refresh with reason: %s",d.reason);this.exitState({status:"refresh_"+(d.reason||0),stateId:a},c);break;case"backoff":b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"server told client to back off");u();this.backoff=!0;break;case"lb":var g=d.lb_info;if(g){n.sticky_token=g.sticky;"pool"in g&&(n.sticky_pool=g.pool);if("sd"in g){var h=g.subdomain;b("ChannelTransport").isSubdomain(h)&&(n.subdomain=g.subdomain)}"vip"in g&&(n.host=g.vip);this._indicateLbInfoUpdated("chatproxy",JSON.stringify(d))}else i.error("missing_lb_info","{}");break;case"test_streaming":b("setTimeoutAcrossTransitions")(this._probeTest,500);break;case"fullReload":b("PresenceCookieManager").clear();i.log("full_reload","{}");this.sessionRegistered=!0;this.informCurrentSession();b("Arbiter").inform(b("ChannelConstants").ON_INVALID_HISTORY);u(!0);b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"full reload incurred");h=b("ChannelConstants").OK;this.exitState({status:h,stateId:a},c);"ms"in d&&this._processMessages(d,f);break;case"msg":u(!0);this._processMessages(d,f);break;case"heartbeat":if(n.inStreaming){g=Date.now();var j;this.heartbeats.length>0&&(j=g-this.heartbeats[this.heartbeats.length-1]);i.log("heartbeat_interval",JSON.stringify({client_id:n.sessionID,interval:j}));this.heartbeats.push(g)}break;case"batched":h=d.batches;for(var f=0;f<h.length;f++)this._processTransportData0(a,c,h[f]);break;default:b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"got an unknown protocol message: %s",e);i.error("unknown_msg_type",JSON.stringify({type:e}));break}},_processMessages:function(a,c){__p&&__p();"tr"in a&&(n.trace_id=a.tr);a=a.ms;var d=n.seq-a.length;for(var e=0;e<a.length;e++,d++){n.estimatedReceived++;if(d>=c){var f=a[e];if(f.type){var g=b("ChannelConstants").getArbiterType(f.type);if(f.type==="messaging"){var h={};h.type="messaging";h.event=f.event;f.message&&(h.inbox_unread=f.unread_counts&&f.unread_counts.inbox,h.tid=f.message.tid,h.mid=f.message.mid,b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"got message with id: %s",f.message.mid))}else f.type==="skywalker"?g=b("ChannelConstants").SKYWALKER:f.type==="qprimer"?(f.first=!n.ready,f.first&&(n.ready=!0,n.timeUntilReady=Date.now()-n.created,n.queueMade=f.made),g=b("ChannelConstants").CHANNEL_ESTABLISHED):f.type==="pws"?n.pws=f.pws:f.type==="delta"&&(n.sequenceId=f.iseq);try{f.type=="buddylist_overlay"&&f.buffered==1?(g=b("ChannelConstants").getArbiterType("buddylist_overlay_buffered"),b("Arbiter").inform(g,{obj:f},"persistent")):b("Arbiter").inform(g,{obj:f})}catch(a){b("BanzaiODS").bumpEntityKey("ChannelManager","processMessages.error."+f.type),b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"message threw exception: %s %s",a,f)}}}else i.warn("seq_regression",JSON.stringify({last_seq:c,messages:a.length,seq:d}))}},_enter_init:function(){if(p.init>=this.getConfig("MAX_INIT_FAILS",2))return b("setTimeoutAcrossTransitions")(function(){return this.exitState({status:b("ChannelConstants").ERROR_MAX,stateId:o})}.bind(this),0);this._initTimer=b("setTimeoutAcrossTransitions")(function(){return this.exitState({status:b("ChannelConstants").ERROR,stateId:o},"timeout")}.bind(this),n.IFRAME_LOAD_TIMEOUT)},_enter_reconnect:function(a){__p&&__p();i.warn("enter_reconnect",a);b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entered reconnect with reason: %s",a);var c=o;if(!b("PresenceUtil").hasUserCookie()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"user has no cookie???");i.warn("no_user_cookie","{}");b("setTimeoutAcrossTransitions")(function(){this._shutdownHint=b("ChannelConstants").HINT_AUTH,this.exitState({status:b("ChannelConstants").ERROR_SHUTDOWN,stateId:c})}.bind(this),0);return}var d={};d.reason=a;d.fb_dtsg=b("DTSG").getToken();b("ISB").token&&(d.fb_isb=b("ISB").token);j&&j(d);var e=new(b("FBAjaxRequest"))("GET","/ajax/presence/reconnect.php",d);e.onSuccess=function(){this.configure(e.json),b("PresenceCookieManager").store(),this.exitState({status:b("ChannelConstants").OK,stateId:c})}.bind(this);e.onError=function(){var a=e.json&&e.json.error;b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"reconnect error: %s",e.errorType);(e.errorType==b("AjaxError").TRANSPORT_ERROR||e.errorType==b("AjaxError").PROXY_ERROR||e.errorType==b("AjaxError").SERVICE_UNAVAILABLE)&&(this._shutdownHint=b("ChannelConstants").HINT_CONN);a&&a==1356007?this._shutdownHint=b("ChannelConstants").HINT_MAINT:a==1357001||a==1357004||a==1348009?this._shutdownHint=b("ChannelConstants").HINT_AUTH:this._shutdownHint=null;this.exitState({status:this._shutdownHint?b("ChannelConstants").ERROR_SHUTDOWN:b("ChannelConstants").ERROR,stateId:c},e)}.bind(this);e.send()},_enter_shutdown:function(){b("Arbiter").inform(b("ChannelConstants").ON_SHUTDOWN,{reason:this._shutdownHint});if("shutdown_recovery_interval_seconds"in n&&n.shutdown_recovery_interval_seconds>0){var a=n.shutdown_recovery_interval_seconds*1e3;b("setTimeoutAcrossTransitions")(function(){b("Arbiter").inform(b("ChannelConstants").ATTEMPT_RECONNECT),this._shutdownHint=null,this.state="reconnect!",this.enterState("reconnect!")}.bind(this),a)}},_exit_init:function(a){this._initTimer&&(this._initTimer=b("clearTimeout")(this._initTimer)),a==b("ChannelConstants").ERROR_MAX&&this._sendIframeError(b("ChannelConstants").reason_IFrameLoadGiveUp)},_exit_pull:function(a,c){if(a===b("ChannelConstants").OK){this.lastPullTime=Date.now();return}a="exit status: "+a;c&&c.errorType&&(a+=" ajax request error: "+c.errorType);b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"pull failed with status: %s",a)},_exit_ping:function(a){if(a!==b("ChannelConstants").OK){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"ping failed with status: %s",a);return}a=Date.now()-(this.lastPullTime||b("Env").start);if(a>n.STALL_THRESHOLD){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"didnt complete a successful pull for too long");return b("ChannelConstants").ERROR_STALE}},_reportProxyMisguidedMsg:function(a,c){__p&&__p();b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"misguided message to %s meant for %s",c,a);var d=Date.now();if(d-this.lastReportOnMisguidedMsgTime<=n.CHANNEL_PROXY_REPORTING_MIN_INTERVAL)return;this.lastReportOnMisguidedMsgTime=d;d={};d.received_uid=a;d.expected_uid=c;n.sticky_token&&(d.sticky_token=n.sticky_token);a=new(b("URI"))("/err_misguided_msg").setDomain(n.host+"."+n.domain).setPort(n.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(d);c=new(b("AjaxRequest"))("GET",a);b("AjaxRequest").supportsCORS()&&(c.xhr.withCredentials=!0);c.onSuccess=function(a){};c.onError=function(a){};c.onJSON=function(a){};c.send()},_initMonitors:function(){__p&&__p();var a=Date.now(),c=Date.now(),d={};d.total=0;var e="idle",f=!1;b("SystemEvents").subscribe([b("SystemEvents").USER,b("SystemEvents").ONLINE,b("SystemEvents").TIME_TRAVEL],function(a,d){__p&&__p();u(!0);c=null;this.lastPullTime=Date.now();var e;switch(a){case b("SystemEvents").USER:e=b("SystemEvents").isPageOwner()?b("ChannelConstants").SYS_OWNER:b("ChannelConstants").SYS_NONOWNER;break;case b("SystemEvents").ONLINE:e=d?b("ChannelConstants").SYS_ONLINE:b("ChannelConstants").SYS_OFFLINE;break;case b("SystemEvents").TIME_TRAVEL:if(n.skipTimeTravel)return;if(0<d){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"skipping time travel failure. %s",d);return}e=b("ChannelConstants").SYS_TIMETRAVEL;break}this.exitState({status:e,stateId:o})}.bind(this));var g=function(f,g){__p&&__p();var h=Date.now(),j=null;g?(a=h,j=g.nextState||g.state):j=e;b("SystemEvents").checkTimeTravel();if(c){g=Math.round((h-c)/1e3);g>0&&(d[e]=(d[e]||0)+g,d.total+=g)}e=j;c=h;f||(d.lastSuccessTime=r(),d.online=b("SystemEvents").isOnline(),i.log("rollup",JSON.stringify(d)))};b("Arbiter").subscribe(b("ChannelConstants").ON_ENTER_STATE,g);b("setIntervalAcrossTransitions")(g,6e4);b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.channelRollup=d});g=function(){__p&&__p();if(this.isShutdown()||this.shouldIdle())return;b("SystemEvents").checkTimeTravel();var c=Date.now()-(this.lastPullTime||b("Env").start);if(!f&&c>n.STALL_THRESHOLD){var d=r();i.error("stall",JSON.stringify({lastSuccessTime:d,rollupState:e}));b("ChatReliabilityInstrumentation").logCHANNEL_STALLED(c.toString());f=!0}d=Date.now()-(a||0);this.state=="pull"&&d>n.JUMPSTART_THRESHOLD&&(a=null,i.warn("jumpstart",JSON.stringify({state:this.state,dormant:d})),b("Arbiter").inform(b("ChannelConstants").JUMPSTART,d),this.enterState("init"))}.bind(this);b("setIntervalAcrossTransitions")(g,5e3)},_indicateLbInfoUpdated:function(a,c){var d=!b("AjaxRequest").supportsCORS(),e=b("ChannelTransport").isSubdomain(n.subdomain);!e||d?n.fullHost=n.host:n.fullHost=n.subdomain+"-"+n.host;b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"received lb info: %s at seq: %s{%s} with ".concat("sticky: %s/%s, subdomain: %s, fullHost: %s, state: %s,").concat(" source: %s, args: %s"),n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,n.subdomain,n.fullHost,this.state,a,c)},_probeTest:function(){__p&&__p();n.streamingCapable=!1;var a=[],c={};c.mode="stream";c.format="json";n.sticky_token&&(c.sticky_token=n.sticky_token);c=new(b("URI"))("/probe").setDomain(n.fullHost+"."+n.domain).setPort(n.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(c);b("BanzaiODS").bumpEntityKey("ChannelManager","probe.attempt");c=new(b("AjaxRequest"))("GET",c);c.onJSON=function(c,d){if(c&&c.json&&c.json.t==="heartbeat"){a.push(Date.now());if(a.length>=2){d=a[1]-a[0];d>=n.PROBE_HEARTBEATS_INTERVAL_LOW&&d<=n.PROBE_HEARTBEATS_INTERVAL_HIGH?(n.streamingCapable=!0,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.switch_to_streaming"),i.log("switch_to_streaming","{}")):b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.delayed")}}};c.onSuccess=function(c){a.length!=2&&(n.streamingCapable=!1,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.data_loss"),i.error("probe_error",JSON.stringify({error:"beats.length = "+a.length}))),b("BanzaiODS").bumpEntityKey("ChannelManager","probe.success"),i.log("probe_success","{}")};c.onError=function(a){n.streamingCapable=!1,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.error"),i.error("probe_error",JSON.stringify(a))};c.send()},_sseProbeTest:function(){__p&&__p();if(!window.EventSource){b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.no_event_source");i.log("sse_probe.failure.no_event_source","{}");return}var a=[],c={};c.mode="sse";c.format="json";n.sticky_token&&(c.sticky_token=n.sticky_token);c=new(b("URI"))("/sse_probe").setDomain(n.fullHost+"."+n.domain).setPort(n.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(c);b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.attempt");var d=new EventSource(c.toString()),e=b("setTimeoutAcrossTransitions")(function(){d.close(),b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.timeout"),i.log("sse_probe.failure.timeout","{}")},n.PROBE_HEARTBEATS_INTERVAL_HIGH*6);d.addEventListener("heartbeat",function(c){a.push(Date.now());if(a.length>=2){c=a[1]-a[0];c>=n.PROBE_HEARTBEATS_INTERVAL_LOW&&c<=n.PROBE_HEARTBEATS_INTERVAL_HIGH?(b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.success"),i.log("sse_probe.success","{}")):(b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.delayed"),i.log("sse_probe.failure.delayed","{}"));b("clearTimeout")(e);d.close()}});d.onerror=function(a){b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.error"),i.error("sse_probe.failure.error",JSON.stringify(a)),b("clearTimeout")(e),d.close()}},startChannelManagerForApp:function(a){this.startChannelManager!==b("emptyFunction")&&this.startChannelManager(),b("ChannelInitialData").channelConfig&&n&&(n.profile=a)},startChannelManager:function(){b("ChannelInitialData").channelConfig?(this.configure(b("ChannelInitialData").channelConfig),/shutdown/.test(b("ChannelInitialData").state)&&(this._shutdownHint=b("ChannelConstants")[b("ChannelInitialData").reason]),this.init(b("ChannelInitialData").state,b("ChannelInitialData").reason),b("ChatReliabilityInstrumentation").logCHANNEL_INIT(),this.startChannelManager=b("emptyFunction")):b("ChatReliabilityInstrumentation").logCHANNEL_NOCONFIG()}};e.exports=c}),null);
__d("ChatOpenTabEventLogger",["Banzai","Bootloader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="messaging_tracking";a={_log:function(a,c,d,e){var f={referrer:a||"",message_thread_id:c,message_view:"chat",timestamp_send:Date.now(),message_target_ids:[]};d!==void 0&&(f.message_target_ids=[d]);b("Bootloader").loadModules(["ChatImpressionLogger"],function(c){c.logImpression(a,d,e),b("Banzai").post(g,f,{delay:0,retry:!0})},"ChatOpenTabEventLogger")},logClickOpen:function(a,c,d,e){b("Bootloader").loadModules(["MercuryIDs","getPageIDFromThreadID","ChatImpressionLogger"],function(b,f){this._log(a,c,d,e);b=f(String(c));b&&this._logPageClick(a,b)}.bind(this),"ChatOpenTabEventLogger")},logUserClickOpen:function(a,c,d){b("Bootloader").loadModules(["MercuryIDs","ChatImpressionLogger"],function(b){b=b.getThreadIDFromUserID(c);this.logClickOpen(a,b,c,d)}.bind(this),"ChatOpenTabEventLogger")},logAutoOpen:function(a,b,c,d){this._log(a,b,c,d)},logUserAutoOpen:function(a,c){b("Bootloader").loadModules(["MercuryIDs","ChatImpressionLogger"],function(b){b=b.getThreadIDFromUserID(c);this._log(a,b,c)}.bind(this),"ChatOpenTabEventLogger")},_logPageClick:function(a,c){b("Banzai").post("page_message_button_click",{page_id:c,ref:a}),b("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum"],function(b,d,e){b.log(c,d.CLICK,e.PAGE_MESSAGE,a)},"ChatOpenTabEventLogger")}};e.exports=a}),null);
__d("EventReminderDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("EventReminderActions",["EventReminderDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null,CLEAR_ALL_REMINDERS:null});var g={Types:a,updateEventReminder:function(a,event,c,d){b("EventReminderDispatcher").dispatch({type:g.Types.UPDATE_EVENT_REMINDER,threadID:a,event:event,participantsEventStatus:d,eventID:c})},deleteEventReminder:function(a,c){b("EventReminderDispatcher").dispatch({type:g.Types.DELETE_EVENT_REMINDER,threadID:a,eventID:c})},clearAllReminders:function(a){b("EventReminderDispatcher").dispatch({type:g.Types.CLEAR_ALL_REMINDERS,threadID:a})}};e.exports=g}),null);
__d("EventReminderConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({INITIAL:"initial",GOING:"going",WATCHED:"watched",UNWATCHED:"unwatched"});b=Object.freeze({ASSOCIATED_EVENT:"ASSOCIATED_EVENT"});c=Object.freeze({GOING:"GOING",DECLINED:"DECLINED",INVITED:"INVITED"});d=Object.freeze({NO_ERROR:"NO_ERROR",PAST_TIME:"PAST_TIME",AFTER_ONE_YEAR:"AFTER_ONE_YEAR"});e.exports={EventGuestStates:a,EventPlanType:b,GuestStates:c,TimeErrorType:d}}),null);
__d("bs_caml_array",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(b,c,a){var d=new Array(a),e=0;c=c;while(e<a)d[e]=b[c],e=e+1|0,c=c+1|0;return d}function g(a,b){while(!0){var c=b,d=a;if(c){b=c[1];a=c[0].length+d|0;continue}else return d}}function h(a,b,c){__p&&__p();while(!0){var d=c,e=b;if(d){var f=d[0],g=f.length;e=e;var h=0;while(h<g)a[e]=f[h],e=e+1|0,h=h+1|0;c=d[1];b=e;continue}else return 0}}function c(a){var b=g(0,a);b=new Array(b);h(b,0,a);return b}function d(a,c,d){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else{a[c]=d;return 0}}function e(a,c){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a[c]}function i(a,b){var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b;return c}function j(a){var b=new Array(a);for(var c=0,a=a-1|0;c<=a;++c)b[c]=0;return b}function k(b,c,d,e,a){if(e<=c){for(var f=0,h=a-1|0;f<=h;++f)d[f+e|0]=b[f+c|0];return 0}else{for(var f=a-1|0;f>=0;--f)d[f+e|0]=b[f+c|0];return 0}}function l(a){return a.slice(0)}f.caml_array_dup=l;f.caml_array_sub=a;f.caml_array_concat=c;f.caml_make_vect=i;f.caml_make_float_vect=j;f.caml_array_blit=k;f.caml_array_get=e;f.caml_array_set=d}),null);
__d("bs_curry",["bs_caml_array"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){__p&&__p();while(!0){var d=c,e=a,f=e.length;f=f===0?1:f;var h=d.length;h=f-h|0;if(h===0)return e.apply(null,d);else if(h<0){c=b("bs_caml_array").caml_array_sub(d,f,-h|0);a=e.apply(null,b("bs_caml_array").caml_array_sub(d,0,f));continue}else return function(b,a){return function(c){return g(b,a.concat([c]))}}(e,d)}}function h(a,b,c){__p&&__p();if(c>7||c<0)return g(a,[b]);else switch(c){case 0:case 1:return a(b);case 2:return function(c){return a(b,c)};case 3:return function(c,d){return a(b,c,d)};case 4:return function(c,d,e){return a(b,c,d,e)};case 5:return function(c,d,e,f){return a(b,c,d,e,f)};case 6:return function(c,d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(c,d,e,f,g,h){return a(b,c,d,e,f,g,h)}}}function i(a,b){var c=a.length;if(c===1)return a(b);else return h(a,b,c)}function a(a){var b=a.length;if(b===1)return a;else return function(b){return i(a,b)}}function j(a,b,c,d){__p&&__p();if(d>7||d<0)return g(a,[b,c]);else switch(d){case 0:case 1:return g(a(b),[c]);case 2:return a(b,c);case 3:return function(d){return a(b,c,d)};case 4:return function(d,e){return a(b,c,d,e)};case 5:return function(d,e,f){return a(b,c,d,e,f)};case 6:return function(d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(d,e,f,g,h){return a(b,c,d,e,f,g,h)}}}function k(a,b,c){var d=a.length;if(d===2)return a(b,c);else return j(a,b,c,d)}function c(a){var b=a.length;if(b===2)return a;else return function(b,c){return k(a,b,c)}}function l(a,b,c,d,e){__p&&__p();var f=0;if(e>7||e<0)return g(a,[b,c,d]);else switch(e){case 0:case 1:f=1;break;case 2:return g(a(b,c),[d]);case 3:return a(b,c,d);case 4:return function(e){return a(b,c,d,e)};case 5:return function(e,f){return a(b,c,d,e,f)};case 6:return function(e,f,g){return a(b,c,d,e,f,g)};case 7:return function(e,f,g,h){return a(b,c,d,e,f,g,h)}}if(f===1)return g(a(b),[c,d])}function m(a,b,c,d){var e=a.length;if(e===3)return a(b,c,d);else return l(a,b,c,d,e)}function d(a){var b=a.length;if(b===3)return a;else return function(b,c,d){return m(a,b,c,d)}}function n(a,b,c,d,e,f){__p&&__p();var h=0;if(f>7||f<0)return g(a,[b,c,d,e]);else switch(f){case 0:case 1:h=1;break;case 2:return g(a(b,c),[d,e]);case 3:return g(a(b,c,d),[e]);case 4:return a(b,c,d,e);case 5:return function(f){return a(b,c,d,e,f)};case 6:return function(f,g){return a(b,c,d,e,f,g)};case 7:return function(f,g,h){return a(b,c,d,e,f,g,h)}}if(h===1)return g(a(b),[c,d,e])}function o(a,b,c,d,e){var f=a.length;if(f===4)return a(b,c,d,e);else return n(a,b,c,d,e,f)}function e(a){var b=a.length;if(b===4)return a;else return function(b,c,d,e){return o(a,b,c,d,e)}}function p(a,b,c,d,e,f,h){__p&&__p();var i=0;if(h>7||h<0)return g(a,[b,c,d,e,f]);else switch(h){case 0:case 1:i=1;break;case 2:return g(a(b,c),[d,e,f]);case 3:return g(a(b,c,d),[e,f]);case 4:return g(a(b,c,d,e),[f]);case 5:return a(b,c,d,e,f);case 6:return function(g){return a(b,c,d,e,f,g)};case 7:return function(g,h){return a(b,c,d,e,f,g,h)}}if(i===1)return g(a(b),[c,d,e,f])}function q(a,b,c,d,e,f){var g=a.length;if(g===5)return a(b,c,d,e,f);else return p(a,b,c,d,e,f,g)}function r(a){var b=a.length;if(b===5)return a;else return function(b,c,d,e,f){return q(a,b,c,d,e,f)}}function s(a,b,c,d,e,f,h,i){__p&&__p();var j=0;if(i>7||i<0)return g(a,[b,c,d,e,f,h]);else switch(i){case 0:case 1:j=1;break;case 2:return g(a(b,c),[d,e,f,h]);case 3:return g(a(b,c,d),[e,f,h]);case 4:return g(a(b,c,d,e),[f,h]);case 5:return g(a(b,c,d,e,f),[h]);case 6:return a(b,c,d,e,f,h);case 7:return function(g){return a(b,c,d,e,f,h,g)}}if(j===1)return g(a(b),[c,d,e,f,h])}function t(a,b,c,d,e,f,g){var h=a.length;if(h===6)return a(b,c,d,e,f,g);else return s(a,b,c,d,e,f,g,h)}function u(a){var b=a.length;if(b===6)return a;else return function(b,c,d,e,f,g){return t(a,b,c,d,e,f,g)}}function v(a,b,c,d,e,f,h,i,j){__p&&__p();var k=0;if(j>7||j<0)return g(a,[b,c,d,e,f,h,i]);else switch(j){case 0:case 1:k=1;break;case 2:return g(a(b,c),[d,e,f,h,i]);case 3:return g(a(b,c,d),[e,f,h,i]);case 4:return g(a(b,c,d,e),[f,h,i]);case 5:return g(a(b,c,d,e,f),[h,i]);case 6:return g(a(b,c,d,e,f,h),[i]);case 7:return a(b,c,d,e,f,h,i)}if(k===1)return g(a(b),[c,d,e,f,h,i])}function w(a,b,c,d,e,f,g,h){var i=a.length;if(i===7)return a(b,c,d,e,f,g,h);else return v(a,b,c,d,e,f,g,h,i)}function x(a){var b=a.length;if(b===7)return a;else return function(b,c,d,e,f,g,h){return w(a,b,c,d,e,f,g,h)}}function y(a,b,c,d,e,f,h,i,j,k){__p&&__p();var l=0;if(k>7||k<0)return g(a,[b,c,d,e,f,h,i,j]);else switch(k){case 0:case 1:l=1;break;case 2:return g(a(b,c),[d,e,f,h,i,j]);case 3:return g(a(b,c,d),[e,f,h,i,j]);case 4:return g(a(b,c,d,e),[f,h,i,j]);case 5:return g(a(b,c,d,e,f),[h,i,j]);case 6:return g(a(b,c,d,e,f,h),[i,j]);case 7:return g(a(b,c,d,e,f,h,i),[j])}if(l===1)return g(a(b),[c,d,e,f,h,i,j])}function z(a,b,c,d,e,f,g,h,i){var j=a.length;if(j===8)return a(b,c,d,e,f,g,h,i);else return y(a,b,c,d,e,f,g,h,i,j)}function A(a){var b=a.length;if(b===8)return a;else return function(b,c,d,e,f,g,h,i){return z(a,b,c,d,e,f,g,h,i)}}f.app=g;f.curry_1=h;f._1=i;f.__1=a;f.curry_2=j;f._2=k;f.__2=c;f.curry_3=l;f._3=m;f.__3=d;f.curry_4=n;f._4=o;f.__4=e;f.curry_5=p;f._5=q;f.__5=r;f.curry_6=s;f._6=t;f.__6=u;f.curry_7=v;f._7=w;f.__7=x;f.curry_8=y;f._8=z;f.__8=A}),null);
__d("bs_belt_Id",["bs_curry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a[0];return[a]}function c(a){a=a[0];a=b("bs_curry").__2(a);return[a]}function d(a){return[a]}function e(a){a=b("bs_curry").__2(a);return[a]}function g(a){var b=a[0];a=a[1];return[b,a]}function h(a){var c=a[0];c=b("bs_curry").__1(c);a=a[1];a=b("bs_curry").__2(a);return[c,a]}function i(a,b){return[a,b]}function j(a,c){a=b("bs_curry").__1(a);c=b("bs_curry").__2(c);return[a,c]}f.MakeComparableU=a;f.MakeComparable=c;f.comparableU=d;f.comparable=e;f.MakeHashableU=g;f.MakeHashable=h;f.hashableU=i;f.hashable=j}),null);
__d("bs_caml_exceptions",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[0];function a(a){a[1]=g[0];g[0]+=1;return a}function h(){g[0]+=1;return g[0]}function b(a){var b=h(0);a=[a,b];a.tag=248;return a}function c(a){if(a===void 0)return!1;else if(a.tag===248)return!0;else{a=a[0];if(a!==void 0)return a.tag===248;else return!1}}f.caml_set_oo_id=a;f.get_id=h;f.create=b;f.isCamlExceptionOrOpenVariant=c}),null);
__d("bs_js_exn",["bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_exceptions").create("Js_exn.Error");function a(a){if(b("bs_caml_exceptions").isCamlExceptionOrOpenVariant(a))return a;else return[g,a]}function c(a){throw new Error(a)}function d(a){throw new EvalError(a)}function e(a){throw new RangeError(a)}function h(a){throw new ReferenceError(a)}function i(a){throw new SyntaxError(a)}function j(a){throw new TypeError(a)}function k(a){throw new URIError(a)}f.$$Error=g;f.internalToOCamlException=a;f.raiseError=c;f.raiseEvalError=d;f.raiseRangeError=e;f.raiseReferenceError=h;f.raiseSyntaxError=i;f.raiseTypeError=j;f.raiseUriError=k}),null);
__d("bs_block",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){b.tag=a;return b}function b(a,b){return Object.defineProperty(b,Symbol["for"]("BsRecord"),{value:a})}function c(a,b,c){c.tag=b;return Object.defineProperty(c,Symbol["for"]("BsVariant"),{value:a})}function d(a,b){return Object.defineProperty(b,Symbol["for"]("BsVariant"),{value:a})}function e(a,b){return Object.defineProperty(b,Symbol["for"]("BsLocalModule"),{value:a})}function g(a,b){return Object.defineProperty(b,Symbol["for"]("BsPolyVar"),{value:a})}f.__=a;f.record=b;f.variant=c;f.simpleVariant=d;f.localModule=e;f.polyVar=g}),null);
__d("bs_js_types",["bs_block"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=typeof a;if(c==="undefined")return 3;else if(a===null)return 2;else if(c==="number")return b("bs_block").__(0,[a]);else if(c==="string")return b("bs_block").__(1,[a]);else if(c==="boolean")if(a===!0)return 1;else return 0;else if(c==="function")return b("bs_block").__(2,[a]);else if(c==="object")return b("bs_block").__(3,[a]);else return b("bs_block").__(4,[a])}function c(a,b){switch(b){case 0:return typeof a==="undefined";case 1:return a===null;case 2:return typeof a==="boolean";case 3:return typeof a==="number";case 4:return typeof a==="string";case 5:return typeof a==="function";case 6:return typeof a==="object";case 7:return typeof a==="symbol"}}f.test=c;f.classify=a}),null);
__d("bs_caml_int32",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(c===0)throw b("bs_caml_builtin_exceptions").division_by_zero;else return a/c|0}function c(a,c){if(c===0)throw b("bs_caml_builtin_exceptions").division_by_zero;else return a%c}function d(a){return(a&255)<<8|(a&65280)>>>8}function e(a){return(a&255)<<24|(a&65280)<<8|(a&16711680)>>>8|(a&4278190080)>>>24}var g=Math.imul||function(a,b){b|=0;return((a>>16)*b<<16)+(a&65535)*b|0},h=e;f.div=a;f.mod_=c;f.caml_bswap16=d;f.caml_int32_bswap=e;f.caml_nativeint_bswap=h;f.imul=g}),null);
__d("bs_caml_primitive",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){if(a<b)return-1;else if(a===b)return 0;else return 1}function b(a,b){if(a)if(b)return 0;else return 1;else if(b)return-1;else return 0}function c(a,b){if(a===b)return 0;else if(a<b)return-1;else if(a>b||a===a)return 1;else if(b===b)return-1;else return 0}function d(a,b){if(a===b)return 0;else if(a<b)return-1;else return 1}function e(a,b){if(a)return b;else return a}function g(a,b){if(a<b)return a;else return b}function h(a,b){if(a<b)return a;else return b}function i(a,b){if(a<b)return a;else return b}function j(a,b){if(a<b)return a;else return b}function k(a,b){if(a<b)return a;else return b}function l(a,b){if(a)return a;else return b}function m(a,b){if(a>b)return a;else return b}function n(a,b){if(a>b)return a;else return b}function o(a,b){if(a>b)return a;else return b}function p(a,b){if(a>b)return a;else return b}function q(a,b){if(a>b)return a;else return b}var r=a,s=a;f.caml_int_compare=a;f.caml_bool_compare=b;f.caml_float_compare=c;f.caml_nativeint_compare=r;f.caml_string_compare=d;f.caml_int32_compare=s;f.caml_bool_min=e;f.caml_int_min=g;f.caml_float_min=h;f.caml_string_min=i;f.caml_nativeint_min=j;f.caml_int32_min=k;f.caml_bool_max=l;f.caml_int_max=m;f.caml_float_max=n;f.caml_string_max=o;f.caml_nativeint_max=p;f.caml_int32_max=q}),null);
__d("bs_caml_obj",["bs_block","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){b=new Array(b);b.tag=a;return b}function c(a){var b=a.length|0,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a[d];c.tag=a.tag|0;return c}function d(a,c){__p&&__p();var d=a.length|0;if(c<=0||c>d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.truncate"];else if(d!==c){for(var e=c,d=d-1|0;e<=d;++e)a[e]=0;a.length=c;return 0}else return 0}function e(a){return b("bs_block").__(250,[a])}function g(a,b){var c=b.length|0;for(var d=0,c=c-1|0;d<=c;++d)a[d]=b[d];d=b.tag|0;if(d!==0){a.tag=d;return 0}else return 0}var h=function(a,b){for(var c in a)b(c)};function i(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===d)return 0;else{var f=typeof e,g=typeof d,j=0;switch(f){case"boolean":if(g==="boolean")return b("bs_caml_primitive").caml_bool_compare(e,d);else j=1;break;case"function":if(g==="function")throw[b("bs_caml_builtin_exceptions").invalid_argument,"compare: functional value"];else j=1;break;case"number":if(g==="number")return b("bs_caml_primitive").caml_int_compare(e,d);else j=1;break;case"string":if(g==="string")return b("bs_caml_primitive").caml_string_compare(e,d);else return 1;case"undefined":return-1;default:j=1}if(j===1)switch(g){case"string":return-1;case"undefined":return 1;default:if(f==="boolean")return 1;else if(g==="boolean")return-1;else if(f==="function")return 1;else if(g==="function")return-1;else if(f==="number")if(d===null||d.tag===256)return 1;else return-1;else if(g==="number")if(e===null||e.tag===256)return-1;else return 1;else if(e===null)if(d.tag===256)return 1;else return-1;else if(d===null)if(e.tag===256)return-1;else return 1;else{j=e.tag|0;f=d.tag|0;if(j===250){a=e[0];continue}else if(f===250){c=d[0];continue}else if(j===256)if(f===256)return b("bs_caml_primitive").caml_int_compare(e[1],d[1]);else return-1;else if(j===248)return b("bs_caml_primitive").caml_int_compare(e[1],d[1]);else if(j===251)throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(j!==f)if(j<f)return-1;else return 1;else{g=e.length|0;j=d.length|0;if(g===j)if(Array.isArray(e)){f=e;var k=d,l=0,m=g;while(!0){var n=l;if(n===m)return 0;else{var o=i(f[n],k[n]);if(o!==0)return o;else{l=n+1|0;continue}}}}else{o=e;n=d;l=[void 0];f=[void 0];var p=function(b,c){__p&&__p();var d=b[2],a=b[1];if(!Object.prototype.hasOwnProperty.call(a,c)||i(b[0][c],a[c])>0){b=d[0];if(b!==void 0&&c>=b)return 0;else{d[0]=c;return 0}}else return 0};k=[o,n,f];m=function(a){return function(b){return p(a,b)}}(k);k=[n,o,l];k=function(a){return function(b){return p(a,b)}}(k);h(o,m);h(n,k);o=l[0];m=f[0];if(o!==void 0)if(m!==void 0)return b("bs_caml_primitive").caml_string_compare(o,m);else return-1;else if(m!==void 0)return 1;else return 0}else if(g<j){n=e;k=d;l=0;f=g;while(!0){o=l;if(o===f)return-1;else{m=i(n[o],k[o]);if(m!==0)return m;else{l=o+1|0;continue}}}}else{g=e;m=d;o=0;l=j;while(!0){n=o;if(n===l)return 1;else{k=i(g[n],m[n]);if(k!==0)return k;else{o=n+1|0;continue}}}}}}}}}}function j(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===d)return!0;else{var f=typeof e;if(f==="string"||f==="number"||f==="boolean"||f==="undefined"||e===null)return!1;else{var g=typeof d;if(f==="function"||g==="function")throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: functional value"];else if(g==="number"||g==="undefined"||d===null)return!1;else{f=e.tag|0;g=d.tag|0;if(f===250){a=e[0];continue}else if(g===250){c=d[0];continue}else if(f===248)return e[1]===d[1];else if(f===251)throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(f!==g)return!1;else if(f===256)return e[1]===d[1];else{g=e.length|0;f=d.length|0;if(g===f)if(Array.isArray(e)){f=e;var i=d,k=0;g=g;while(!0){var l=k;if(l===g)return!0;else if(j(f[l],i[l])){k=l+1|0;continue}else return!1}}else{l=e;k=d;f=[!0];i=function(a,b){return function(c){if(Object.prototype.hasOwnProperty.call(a,c))return 0;else{b[0]=!1;return 0}}}(k,f);g=function(a,b,c){return function(d){if(!Object.prototype.hasOwnProperty.call(a,d)||!j(b[d],a[d])){c[0]=!1;return 0}else return 0}}(l,k,f);h(l,i);f[0]&&h(k,g);return f[0]}else return!1}}}}}}function k(a,b){if(b!==null)return j(a,b);else return a===b}function l(a,b){if(b!==void 0)return j(a,b);else return a===b}function m(a,b){if(b==null)return a===b;else return j(a,b)}function n(a,b){return!j(a,b)}function o(a,b){return i(a,b)>=0}function p(a,b){return i(a,b)>0}function q(a,b){return i(a,b)<=0}function r(a,b){return i(a,b)<0}function s(a,b){if(i(a,b)<=0)return a;else return b}function t(a,b){if(i(a,b)>=0)return a;else return b}f.caml_obj_block=a;f.caml_obj_dup=c;f.caml_obj_truncate=d;f.caml_lazy_make_forward=e;f.caml_update_dummy=g;f.caml_compare=i;f.caml_equal=j;f.caml_equal_null=k;f.caml_equal_undefined=l;f.caml_equal_nullable=m;f.caml_notequal=n;f.caml_greaterequal=o;f.caml_greaterthan=p;f.caml_lessthan=r;f.caml_lessequal=q;f.caml_min=s;f.caml_max=t}),null);
__d("bs_caml_string",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return String.fromCharCode(a)}function c(a,c){if(c>=a.length||c<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a.charCodeAt(c)}function d(a){if(a<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.create"];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=0;return c}}function e(a,b,c,d){if(c>0){for(var e=b,c=(c+b|0)-1|0;e<=c;++e)a[e]=d;return 0}else return 0}function g(a,b,c,d,e){__p&&__p();if(e>0){var f=a.length-b|0;if(e<=f){for(var g=0,h=e-1|0;g<=h;++g)c[d+g|0]=a.charCodeAt(b+g|0);return 0}else{for(var g=0,h=f-1|0;g<=h;++g)c[d+g|0]=a.charCodeAt(b+g|0);for(var g=f,b=e-1|0;g<=b;++g)c[d+g|0]=0;return 0}}else return 0}function h(a,b,c,d,e){__p&&__p();if(e>0)if(a===c){var f=a,g=b,h=d,i=e;if(g<h){var j=(f.length-h|0)-1|0,k=i-1|0;k=j>k?k:j;for(var j=k;j>=0;--j)f[h+j|0]=f[g+j|0];return 0}else if(g>h){k=(f.length-g|0)-1|0;j=i-1|0;i=k>j?j:k;for(var j=0;j<=i;++j)f[h+j|0]=f[g+j|0];return 0}else return 0}else{k=a.length-b|0;if(e<=k){for(var g=0,h=e-1|0;g<=h;++g)c[d+g|0]=a[b+g|0];return 0}else{for(var j=0,i=k-1|0;j<=i;++j)c[d+j|0]=a[b+j|0];for(var f=k,g=e-1|0;f<=g;++f)c[d+f|0]=0;return 0}}else return 0}function i(a){var b=a.length,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a.charCodeAt(d);return c}function j(a){__p&&__p();var b=a,c=0;a=a.length;var d="",e=a;if(c===0&&a<=4096&&a===b.length)return String.fromCharCode.apply(null,b);else{c=0;while(e>0){a=e<1024?e:1024;var f=new Array(a);h(b,c,f,0,a);d=d+String.fromCharCode.apply(null,f);e=e-a|0;c=c+a|0}return d}}function k(a){var b=a.length,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a[d];return j(c)}function l(a){if(a>31)return a<127;else return!1}function m(a,b){return a.charCodeAt(b)+(a.charCodeAt(b+1|0)<<8)|0}function n(a,b){return((a.charCodeAt(b)+(a.charCodeAt(b+1|0)<<8)|0)+(a.charCodeAt(b+2|0)<<16)|0)+(a.charCodeAt(b+3|0)<<24)|0}function o(a,c){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a.charCodeAt(c)}f.bytes_of_string=i;f.bytes_to_string=j;f.caml_is_printable=l;f.caml_string_of_char_array=k;f.caml_string_get=c;f.caml_create_string=d;f.caml_fill_string=e;f.caml_blit_string=g;f.caml_blit_bytes=h;f.caml_string_get16=m;f.caml_string_get32=n;f.string_of_char=a;f.get=o}),null);
__d("bs_char",["bs_caml_string","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a<0||a>255)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Char.chr"];else return a}function c(a){__p&&__p();var c=0;if(a>=40)if(a!==92)c=a>=127?1:2;else return"\\\\";else if(a>=32)if(a>=39)return"\\'";else c=2;else if(a>=14)c=1;else switch(a){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:c=1;break;case 13:return"\\r"}switch(c){case 1:c=b("bs_caml_string").caml_create_string(4);c[0]=92;c[1]=48+(a/100|0)|0;c[2]=48+(a/10|0)%10|0;c[3]=48+a%10|0;return b("bs_caml_string").bytes_to_string(c);case 2:c=b("bs_caml_string").caml_create_string(1);c[0]=a;return b("bs_caml_string").bytes_to_string(c)}}function d(a){if(a>=65&&a<=90||a>=192&&a<=214||a>=216&&a<=222)return a+32|0;else return a}function e(a){if(a>=97&&a<=122||a>=224&&a<=246||a>=248&&a<=254)return a-32|0;else return a}function g(a,b){return a-b|0}f.chr=a;f.escaped=c;f.lowercase=d;f.uppercase=e;f.compare=g}),null);
__d("bs_caml_utils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=String.prototype.repeat&&function(a,b){return b.repeat(a)}||function(a,b){__p&&__p();if(b.length==0||a==0)return"";if(b.length*a>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var c="";for(;;){(a&1)==1&&(c+=b);a>>>=1;if(a==0)break;b+=b}return c};f.repeat=a}),null);
__d("bs_caml_int64",["bs_caml_int32","bs_caml_utils","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[-2147483648,0],h=[2147483647,1],i=[0,1],j=[0,0],k=[-1,4294967295];function l(a){return(a&2147483648)!==0}function m(a,b){var c=b[1],d=a[1],e=d+c&4294967295;d=l(d)&&(l(c)||!l(e))||l(c)&&!l(e)?1:0;c=a[0]+b[0]+d&4294967295;return[c,e>>>0]}function n(a){var b=a[0]^-1;a=a[1]^-1;return[b,a>>>0]}function o(a,b){if(a[0]===b[0])return a[1]===b[1];else return!1}function a(a,b){if(b!==null)return o(a,b);else return!1}function c(a,b){if(b!==void 0)return o(a,b);else return!1}function d(a,b){if(b==null)return!1;else return o(a,b)}function p(a){if(o(a,g))return g;else return m(n(a),i)}function e(a,b){return m(a,p(b))}function q(a,b){if(b===0)return a;else{var c=a[1];if(b>=32)return[c<<(b-32|0),0];else{a=c>>>(32-b|0)|a[0]<<b;return[a,c<<b>>>0]}}}function r(a,b){__p&&__p();if(b===0)return a;else{var c=a[0],d=b-32|0;if(d===0)return[0,c>>>0];else if(d>0){var e=c>>>d;return[0,e>>>0]}else{e=c>>>b;c=c<<(-d|0)|a[1]>>>b;return[e,c>>>0]}}}function s(a,b){__p&&__p();if(b===0)return a;else{var c=a[0];if(b<32){var d=c>>b;a=c<<(32-b|0)|a[1]>>>b;return[d,a>>>0]}else{d=c>>(b-32|0);return[c>=0?0:-1,d>>>0]}}}function t(a){if(a[0]!==0||a[1]!==0)return!1;else return!0}function u(a,b){__p&&__p();while(!0){var c=b,d=a,e=0,f,h=d[0],i=0,k=0,l;if(h!==0||d[1]!==0)l=4;else return j;if(l===4)if(c[0]!==0||c[1]!==0)k=3;else return j;k===3&&(h!==-2147483648||d[1]!==0?i=2:(f=c[1],e=1));if(i===2){l=c[0];k=d[1];i=0;l!==-2147483648||c[1]!==0?i=3:(f=k,e=1);if(i===3){i=c[1];if(h<0)if(l<0){b=p(c);a=p(d);continue}else return p(u(p(d),c));else if(l<0)return p(u(d,p(c)));else{d=h>>>16;c=h&65535;h=k>>>16;k=k&65535;var m=l>>>16;l=l&65535;var n=i>>>16;i=i&65535;var o,q,r,s=k*i;r=(s>>>16)+h*i;q=r>>>16;r=(r&65535)+k*n;q=q+(r>>>16)+c*i;o=q>>>16;q=(q&65535)+h*n;o+=q>>>16;q=(q&65535)+k*l;o+=q>>>16;q=q&65535;o=o+(d*i+c*n+h*l+k*m)&65535;d=q|o<<16;i=s&65535|(r&65535)<<16;return[d,i>>>0]}}}if(e===1)if((f&1)===0)return j;else return g}}function v(a){var c=b("bs_caml_int32").caml_int32_bswap(a[1]);a=b("bs_caml_int32").caml_int32_bswap(a[0]);return[c,a>>>0]}function w(a,b){return[a[0]^b[0],(a[1]^b[1])>>>0]}function x(a,b){return[a[0]|b[0],(a[1]|b[1])>>>0]}function y(a,b){return[a[0]&b[0],(a[1]&b[1])>>>0]}function z(a,b){var c=b[0],d=a[0];if(d>c)return!0;else if(d<c)return!1;else return a[1]>=b[1]}function A(a,b){return!o(a,b)}function B(a,b){return!z(a,b)}function C(a,b){if(a[0]>b[0])return!0;else if(a[0]<b[0])return!1;else return a[1]>b[1]}function D(a,b){return!C(a,b)}function E(a,b){if(z(a,b))return b;else return a}function F(a,b){if(C(a,b))return a;else return b}function G(a){return a[0]*4294967296+a[1]}var H=Math.pow(2,32),I=Math.pow(2,63),J=-Math.pow(2,63);function K(a){__p&&__p();if(isNaN(a)||!isFinite(a))return j;else if(a<=J)return g;else if(a+1>=I)return h;else if(a<0)return p(K(-a));else{var b=a/H|0;a=a%H|0;return[b,a>>>0]}}function L(a,c){__p&&__p();while(!0){var d=c,e=a,f=e[0],h=0,l;if(d[0]!==0||d[1]!==0)l=2;else throw b("bs_caml_builtin_exceptions").division_by_zero;if(l===2)if(f!==-2147483648)if(f!==0||e[1]!==0)h=1;else return j;else if(e[1]!==0)h=1;else if(o(d,i)||o(d,k))return e;else if(o(d,g))return i;else{l=d[0];var n=s(e,1);n=q(L(n,d),1);var r;if(n[0]!==0||n[1]!==0)r=3;else if(l<0)return i;else return p(i);if(r===3){l=u(d,n);r=m(e,p(l));return m(n,L(r,d))}}if(h===1){l=d[0];if(l!==-2147483648||d[1]!==0)n=2;else return j;if(n===2)if(f<0)if(l<0){c=p(d);a=p(e);continue}else return p(L(p(e),d));else if(l<0)return p(L(e,p(d)));else{r=j;h=e;while(z(h,d)){n=b("bs_caml_primitive").caml_float_max(1,Math.floor(G(h)/G(d)));f=Math.ceil(Math.log(n)/Math.LN2);l=f<=48?1:Math.pow(2,f-48);e=K(n);f=u(e,d);while(f[0]<0||C(f,h))n-=l,e=K(n),f=u(e,d);t(e)&&(e=i);r=m(r,e);h=m(h,p(f))}return r}}}}function M(a,b){b=u(L(a,b),b);return m(a,p(b))}function N(a,b){var c=L(a,b);b=u(c,b);return[c,m(a,p(b))]}function O(a,c){var d=b("bs_caml_primitive").caml_nativeint_compare(a[0],c[0]);if(d===0)return b("bs_caml_primitive").caml_nativeint_compare(a[1],c[1]);else return d}function P(a){return[a<0?-1:0,a>>>0]}function Q(a){return a[1]|0}function R(a){__p&&__p();var c=function(a){return(a>>>0).toString(16)},d=a[0],e=a[1],f;if(d!==0||e!==0)f=1;else return"0";if(f===1)if(e!==0)if(d!==0){f=c(a[1]);e=8-f.length|0;if(e<=0)return c(a[0])+f;else return c(a[0])+(b("bs_caml_utils").repeat(e,"0")+f)}else return c(a[1]);else return c(a[0])+"00000000"}function S(a){return[2147483647&a[0],a[1]]}function T(a){a=new Int32Array([a[1],a[0]]);return new Float64Array(a.buffer)[0]}function U(a){a=new Float64Array([a]);a=new Int32Array(a.buffer);var b=a[1];b=b;a=a[0];a=a;return[b,a>>>0]}function V(a,b){var c=a.charCodeAt(b+4|0)<<32|a.charCodeAt(b+5|0)<<40|a.charCodeAt(b+6|0)<<48|a.charCodeAt(b+7|0)<<56;a=a.charCodeAt(b)|a.charCodeAt(b+1|0)<<8|a.charCodeAt(b+2|0)<<16|a.charCodeAt(b+3|0)<<24;return[c,a>>>0]}f.min_int=g;f.max_int=h;f.one=i;f.zero=j;f.not=n;f.of_int32=P;f.to_int32=Q;f.add=m;f.neg=p;f.sub=e;f.lsl_=q;f.lsr_=r;f.asr_=s;f.is_zero=t;f.mul=u;f.xor=w;f.or_=x;f.and_=y;f.swap=v;f.ge=z;f.eq=o;f.neq=A;f.lt=B;f.gt=C;f.le=D;f.equal_null=a;f.equal_undefined=c;f.equal_nullable=d;f.min=E;f.max=F;f.to_float=G;f.of_float=K;f.div=L;f.mod_=M;f.div_mod=N;f.compare=O;f.to_hex=R;f.discard_sign=S;f.float_of_bits=T;f.bits_of_float=U;f.get64=V}),null);
__d("bs_caml_format",["bs_curry","bs_caml_int32","bs_caml_int64","bs_caml_utils","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){throw[b("bs_caml_builtin_exceptions").failure,a]}function h(a){__p&&__p();if(a>=65)if(a>=97)if(a>=123)return-1;else return a-87|0;else if(a>=91)return-1;else return a-55|0;else if(a>57||a<48)return-1;else return a-48|0}function i(a){switch(a){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function j(a){var b=1,c=2,d=0;a[d]==="-"&&(b=-1,d=d+1|0);var e=a.charCodeAt(d);a=a.charCodeAt(d+1|0);e===48&&(a>=89?a!==98?a!==111?a===120&&(c=1,d=d+2|0):(c=0,d=d+2|0):(c=3,d=d+2|0):a!==66?a!==79?a>=88&&(c=1,d=d+2|0):(c=0,d=d+2|0):(c=3,d=d+2|0));return[d,b,c]}function a(a){__p&&__p();var c=j(a),d=c[0],e=i(c[2]),f=4294967295,g=a.length,k=d<g?a.charCodeAt(d):0;k=h(k);if(k<0||k>=e)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];var l=function(c,d){__p&&__p();while(!0){var i=d,j=c;if(i===g)return j;else{var k=a.charCodeAt(i);if(k===95){d=i+1|0;continue}else{k=h(k);if(k<0||k>=e)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];else{j=e*j+k;if(j>f)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];else{d=i+1|0;c=j;continue}}}}}};c=c[1]*l(k,d+1|0);l=c|0;if(e===10&&c!==l)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];return l}function c(a){__p&&__p();var c=j(a),d=c[2],e=c[0],f=b("bs_caml_int64").of_int32(i(d));c=b("bs_caml_int64").of_int32(c[1]);var g;switch(d){case 0:g=[536870911,4294967295];break;case 1:g=[268435455,4294967295];break;case 2:g=[429496729,2576980377];break;case 3:g=[2147483647,4294967295];break}var k=a.length;d=e<k?a.charCodeAt(e):0;d=b("bs_caml_int64").of_int32(h(d));if(b("bs_caml_int64").lt(d,[0,0])||b("bs_caml_int64").ge(d,f))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];var l=function(c,d){__p&&__p();while(!0){var e=d,i=c;if(e===k)return i;else{var j=a.charCodeAt(e);if(j===95){d=e+1|0;continue}else{j=b("bs_caml_int64").of_int32(h(j));if(b("bs_caml_int64").lt(j,[0,0])||b("bs_caml_int64").ge(j,f)||b("bs_caml_int64").gt(i,g))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];else{i=b("bs_caml_int64").add(b("bs_caml_int64").mul(f,i),j);d=e+1|0;c=i;continue}}}}};c=b("bs_caml_int64").mul(c,l(d,e+1|0));l=b("bs_caml_int64").or_(c,[0,0]);if(b("bs_caml_int64").eq(f,[0,10])&&b("bs_caml_int64").neq(c,l))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];return l}function k(a){switch(a){case 0:return 8;case 1:return 16;case 2:return 10}}function l(a){if(a>=65&&a<=90||a>=192&&a<=214||a>=216&&a<=222)return a+32|0;else return a}function m(a){__p&&__p();var c=a.length;if(c>31)throw[b("bs_caml_builtin_exceptions").invalid_argument,"format_int: format too long"];var d=["+","-"," ",!1,2,!1,0,!1,1,-1,"f"],e=0;while(!0){var f=e;if(f>=c)return d;else{var g=a.charCodeAt(f),h=0;if(g>=69)if(g>=88)if(g>=121)h=1;else switch(g-88|0){case 0:d[4]=1;d[7]=!0;e=f+1|0;continue;case 13:case 14:case 15:h=5;break;case 12:case 17:h=4;break;case 23:d[4]=0;e=f+1|0;continue;case 29:d[4]=2;e=f+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:h=1;break;case 32:d[4]=1;e=f+1|0;continue}else if(g>=72)h=1;else{d[5]=!0;d[7]=!0;d[10]=String.fromCharCode(l(g));e=f+1|0;continue}else{var i=g-32|0;if(i>25||i<0)h=1;else switch(i){case 3:d[3]=!0;e=f+1|0;continue;case 0:case 11:h=2;break;case 13:d[0]="-";e=f+1|0;continue;case 14:d[9]=0;i=f+1|0;while(function(b){return function(){var c=a.charCodeAt(b)-48|0;return c>=0&&c<=9}}(i)())d[9]=(b("bs_caml_int32").imul(d[9],10)+a.charCodeAt(i)|0)-48|0,i=i+1|0;e=i;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:h=1;break;case 16:d[2]="0";e=f+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:h=3;break}}switch(h){case 1:e=f+1|0;continue;case 2:d[1]=String.fromCharCode(g);e=f+1|0;continue;case 3:d[6]=0;i=f;while(function(b){return function(){var c=a.charCodeAt(b)-48|0;return c>=0&&c<=9}}(i)())d[6]=(b("bs_caml_int32").imul(d[6],10)+a.charCodeAt(i)|0)-48|0,i=i+1|0;e=i;continue;case 4:d[5]=!0;d[4]=2;e=f+1|0;continue;case 5:d[5]=!0;d[10]=String.fromCharCode(g);e=f+1|0;continue}}}}function n(a,b){__p&&__p();var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7];a=a[8];var k=b.length;h&&(a<0||d!=="-")&&(k=k+1|0);f&&(g===0?k=k+1|0:g===1&&(k=k+2|0));var l="";if(c==="+"&&e===" ")for(var m=k,n=i-1|0;m<=n;++m)l=l+e;h&&(a<0?l=l+"-":d!=="-"&&(l=l+d));f&&g===0&&(l=l+"0");f&&g===1&&(l=l+"0x");if(c==="+"&&e==="0")for(var m=k,n=i-1|0;m<=n;++m)l=l+e;l=j?l+b.toUpperCase():l+b;if(c==="-")for(var h=k,a=i-1|0;h<=a;++h)l=l+" ";return l}function d(a,c){__p&&__p();if(a==="%d")return String(c);else{a=m(a);a=a;c=c;c=c<0?a[5]?(a[8]=-1,-c):c>>>0:c;c=c.toString(k(a[4]));if(a[9]>=0){a[2]=" ";var d=a[9]-c.length|0;d>0&&(c=b("bs_caml_utils").repeat(d,"0")+c)}return n(a,c)}}function e(a,c){__p&&__p();a=m(a);c=a[5]&&b("bs_caml_int64").lt(c,[0,0])?(a[8]=-1,b("bs_caml_int64").neg(c)):c;var d="",e=a[4];switch(e){case 0:e=[0,8];var f="01234567";if(b("bs_caml_int64").lt(c,[0,0])){var g=b("bs_caml_int64").discard_sign(c);g=b("bs_caml_int64").div_mod(g,e);var h=b("bs_caml_int64").add([268435456,0],g[0]);g=g[1];d=String.fromCharCode(f.charCodeAt(g[1]|0))+d;while(b("bs_caml_int64").neq(h,[0,0])){var i=b("bs_caml_int64").div_mod(h,e);h=i[0];g=i[1];d=String.fromCharCode(f.charCodeAt(g[1]|0))+d}}else{i=b("bs_caml_int64").div_mod(c,e);g=i[0];h=i[1];d=String.fromCharCode(f.charCodeAt(h[1]|0))+d;while(b("bs_caml_int64").neq(g,[0,0])){i=b("bs_caml_int64").div_mod(g,e);g=i[0];h=i[1];d=String.fromCharCode(f.charCodeAt(h[1]|0))+d}}break;case 1:d=b("bs_caml_int64").to_hex(c)+d;break;case 2:i=[0,10];h="0123456789";if(b("bs_caml_int64").lt(c,[0,0])){f=b("bs_caml_int64").discard_sign(c);g=b("bs_caml_int64").div_mod(f,i);e=b("bs_caml_int64").div_mod(b("bs_caml_int64").add([0,8],g[1]),i);f=b("bs_caml_int64").add(b("bs_caml_int64").add([214748364,3435973836],g[0]),e[0]);g=e[1];d=String.fromCharCode(h.charCodeAt(g[1]|0))+d;while(b("bs_caml_int64").neq(f,[0,0])){e=b("bs_caml_int64").div_mod(f,i);f=e[0];g=e[1];d=String.fromCharCode(h.charCodeAt(g[1]|0))+d}}else{e=b("bs_caml_int64").div_mod(c,i);g=e[0];f=e[1];d=String.fromCharCode(h.charCodeAt(f[1]|0))+d;while(b("bs_caml_int64").neq(g,[0,0])){c=b("bs_caml_int64").div_mod(g,i);g=c[0];f=c[1];d=String.fromCharCode(h.charCodeAt(f[1]|0))+d}}break}if(a[9]>=0){a[2]=" ";e=a[9]-d.length|0;e>0&&(d=b("bs_caml_utils").repeat(e,"0")+d)}return n(a,d)}function o(a,b){__p&&__p();a=m(a);var c=a[9]<0?6:a[9],d=b<0?(a[8]=-1,-b):b;b="";if(isNaN(d))b="nan",a[2]=" ";else if(isFinite(d)){var e=a[10];switch(e){case"e":b=d.toExponential(c);e=b.length;b[e-3|0]==="e"&&(b=b.slice(0,e-1|0)+("0"+b.slice(e-1|0)));break;case"f":b=d.toFixed(c);break;case"g":var f=c!==0?c:1;b=d.toExponential(f-1|0);e=b.indexOf("e");c=Number(b.slice(e+1|0))|0;if(c<-4||d>=1e21||d.toFixed().length>f){var g=e-1|0;while(b[g]==="0")g=g-1|0;b[g]==="."&&(g=g-1|0);b=b.slice(0,g+1|0)+b.slice(e);g=b.length;b[g-3|0]==="e"&&(b=b.slice(0,g-1|0)+("0"+b.slice(g-1|0)))}else{var h=f;if(c<0)h=h-(c+1|0)|0,b=d.toFixed(h);else while(function(){b=d.toFixed(h);return b.length>(f+1|0)}())h=h-1|0;if(h!==0){e=b.length-1|0;while(b[e]==="0")e=e-1|0;b[e]==="."&&(e=e-1|0);b=b.slice(0,e+1|0)}}break;default:}}else b="inf",a[2]=" ";return n(a,b)}var p=function(b,a){__p&&__p();var c=+b;if(b.length>0&&c===c)return c;b=b.replace(/_/g,"");c=+b;if(b.length>0&&c===c||/^[+-]?nan$/i.test(b))return c;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(b)){var d=b.indexOf("p");d=d==-1?b.indexOf("P"):d;var e=+b.substring(d+1);c=+b.substring(0,d);return c*Math.pow(2,e)}if(/^\+?inf(inity)?$/i.test(b))return Infinity;if(/^-inf(inity)?$/i.test(b))return-Infinity;a("float_of_string")};function q(a){return b("bs_curry")._2(p,a,g)}var r=d,s=d,t=a,u=a;f.caml_format_float=o;f.caml_format_int=d;f.caml_nativeint_format=r;f.caml_int32_format=s;f.caml_float_of_string=q;f.caml_int64_format=e;f.caml_int_of_string=a;f.caml_int32_of_string=t;f.caml_int64_of_string=c;f.caml_nativeint_of_string=u}),null);
__d("bs_caml_io",["bs_curry","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){return a+b}var g=["",function(a,b){a=b.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write)return process.stdout.write(b);else if(b[a]==="\n")return 0;else return 0}],h=["",function(a,b){a=b.length-1|0;if(b[a]==="\n")return 0;else return 0}];function c(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_in not implemented"]}function d(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_out not implemented"]}function i(a){if(a[0]!==""){b("bs_curry")._2(a[1],a,a[0]);a[0]="";return 0}else return 0}var j=function(a){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(a),!0)};function k(a,b,c,d){__p&&__p();b=c===0&&d===b.length?b:b.slice(c,d);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&a===g)return process.stdout.write(b);else{c=b.lastIndexOf("\n");if(c<0){a[0]=a[0]+b;return 0}else{a[0]=a[0]+b.slice(0,c+1|0);i(a);a[0]=a[0]+b.slice(c+1|0);return 0}}}function e(a,b){return k(a,String.fromCharCode(b),0,1)}function l(a,c,d,e){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_input ic not implemented"]}function m(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_input_char not implemnted"]}function n(){return[g,[h,0]]}var o=void 0;f.$caret=a;f.stdin=o;f.stdout=g;f.stderr=h;f.caml_ml_open_descriptor_in=c;f.caml_ml_open_descriptor_out=d;f.caml_ml_flush=i;f.node_std_output=j;f.caml_ml_output=k;f.caml_ml_output_char=e;f.caml_ml_input=l;f.caml_ml_input_char=m;f.caml_ml_out_channels_list=n}),null);
__d("bs_caml_missing_polyfill",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a+" not implemented by BuckleScript yet\n";throw new Error(a)}f.not_implemented=a}),null);
__d("bs_caml_sys",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=typeof process==="undefined"?void 0:process;if(c!==void 0){c=c.env[a];if(c!==void 0)return c;else throw b("bs_caml_builtin_exceptions").not_found}else throw b("bs_caml_builtin_exceptions").not_found}function c(){var a=typeof process==="undefined"?void 0:process;if(a!==void 0)return a.uptime();else return-1}function d(){return[((Date.now()|0)^4294967295)*Math.random()|0]}function e(){return 127}function g(){var a=typeof process==="undefined"?void 0:process;if(a!==void 0)return a.cwd();else return"/"}function h(){var a=typeof process==="undefined"?void 0:process;if(a!==void 0)if(a.argv==null)return["",[""]];else return[a.argv[0],a.argv];else return["",[""]]}function i(a){var b=typeof process==="undefined"?void 0:process;if(b!==void 0)return b.exit(a);else return 0}function j(){throw[b("bs_caml_builtin_exceptions").failure,"caml_sys_is_directory not implemented"]}function k(){throw[b("bs_caml_builtin_exceptions").failure,"caml_sys_file_exists not implemented"]}f.caml_sys_getenv=a;f.caml_sys_time=c;f.caml_sys_random_seed=d;f.caml_sys_system_command=e;f.caml_sys_getcwd=g;f.caml_sys_get_argv=h;f.caml_sys_exit=i;f.caml_sys_is_directory=j;f.caml_sys_file_exists=k}),null);
__d("bs_camlinternalFormatBasics",["bs_block"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(typeof a==="number")return 0;else switch(a.tag|0){case 0:return b("bs_block").__(0,[g(a[0])]);case 1:return b("bs_block").__(1,[g(a[0])]);case 2:return b("bs_block").__(2,[g(a[0])]);case 3:return b("bs_block").__(3,[g(a[0])]);case 4:return b("bs_block").__(4,[g(a[0])]);case 5:return b("bs_block").__(5,[g(a[0])]);case 6:return b("bs_block").__(6,[g(a[0])]);case 7:return b("bs_block").__(7,[g(a[0])]);case 8:return b("bs_block").__(8,[a[0],g(a[1])]);case 9:var c=a[0];return b("bs_block").__(9,[c,c,g(a[2])]);case 10:return b("bs_block").__(10,[g(a[0])]);case 11:return b("bs_block").__(11,[g(a[0])]);case 12:return b("bs_block").__(12,[g(a[0])]);case 13:return b("bs_block").__(13,[g(a[0])]);case 14:return b("bs_block").__(14,[g(a[0])])}}function h(a,c){__p&&__p();if(typeof a==="number")return c;else switch(a.tag|0){case 0:return b("bs_block").__(0,[h(a[0],c)]);case 1:return b("bs_block").__(1,[h(a[0],c)]);case 2:return b("bs_block").__(2,[h(a[0],c)]);case 3:return b("bs_block").__(3,[h(a[0],c)]);case 4:return b("bs_block").__(4,[h(a[0],c)]);case 5:return b("bs_block").__(5,[h(a[0],c)]);case 6:return b("bs_block").__(6,[h(a[0],c)]);case 7:return b("bs_block").__(7,[h(a[0],c)]);case 8:return b("bs_block").__(8,[a[0],h(a[1],c)]);case 9:return b("bs_block").__(9,[a[0],a[1],h(a[2],c)]);case 10:return b("bs_block").__(10,[h(a[0],c)]);case 11:return b("bs_block").__(11,[h(a[0],c)]);case 12:return b("bs_block").__(12,[h(a[0],c)]);case 13:return b("bs_block").__(13,[h(a[0],c)]);case 14:return b("bs_block").__(14,[h(a[0],c)])}}function i(a,c){__p&&__p();if(typeof a==="number")return c;else switch(a.tag|0){case 0:return b("bs_block").__(0,[i(a[0],c)]);case 1:return b("bs_block").__(1,[i(a[0],c)]);case 2:return b("bs_block").__(2,[a[0],i(a[1],c)]);case 3:return b("bs_block").__(3,[a[0],i(a[1],c)]);case 4:return b("bs_block").__(4,[a[0],a[1],a[2],i(a[3],c)]);case 5:return b("bs_block").__(5,[a[0],a[1],a[2],i(a[3],c)]);case 6:return b("bs_block").__(6,[a[0],a[1],a[2],i(a[3],c)]);case 7:return b("bs_block").__(7,[a[0],a[1],a[2],i(a[3],c)]);case 8:return b("bs_block").__(8,[a[0],a[1],a[2],i(a[3],c)]);case 9:return b("bs_block").__(9,[i(a[0],c)]);case 10:return b("bs_block").__(10,[i(a[0],c)]);case 11:return b("bs_block").__(11,[a[0],i(a[1],c)]);case 12:return b("bs_block").__(12,[a[0],i(a[1],c)]);case 13:return b("bs_block").__(13,[a[0],a[1],i(a[2],c)]);case 14:return b("bs_block").__(14,[a[0],a[1],i(a[2],c)]);case 15:return b("bs_block").__(15,[i(a[0],c)]);case 16:return b("bs_block").__(16,[i(a[0],c)]);case 17:return b("bs_block").__(17,[a[0],i(a[1],c)]);case 18:return b("bs_block").__(18,[a[0],i(a[1],c)]);case 19:return b("bs_block").__(19,[i(a[0],c)]);case 20:return b("bs_block").__(20,[a[0],a[1],i(a[2],c)]);case 21:return b("bs_block").__(21,[a[0],i(a[1],c)]);case 22:return b("bs_block").__(22,[i(a[0],c)]);case 23:return b("bs_block").__(23,[a[0],i(a[1],c)]);case 24:return b("bs_block").__(24,[a[0],a[1],i(a[2],c)])}}f.concat_fmtty=h;f.erase_rel=g;f.concat_fmt=i}),null);
__d("bs_pervasives",["bs_curry","bs_caml_io","bs_caml_sys","bs_caml_format","bs_caml_string","bs_caml_exceptions","bs_caml_missing_polyfill","bs_caml_builtin_exceptions","bs_camlinternalFormatBasics"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){throw[b("bs_caml_builtin_exceptions").failure,a]}function c(a){throw[b("bs_caml_builtin_exceptions").invalid_argument,a]}var g=b("bs_caml_exceptions").create("Pervasives.Exit");function d(a){if(a>=0)return a;else return-a|0}function e(a){return a^-1}var h=-2147483648;function i(a){if(a<0||a>255)throw[b("bs_caml_builtin_exceptions").invalid_argument,"char_of_int"];else return a}function j(a){if(a)return"true";else return"false"}function k(a){switch(a){case"false":return!1;case"true":return!0;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"bool_of_string"]}}function l(a){__p&&__p();var c=a.length,d=0;while(!0){var e=d;if(e>=c)return a+".";else{var f=b("bs_caml_string").get(a,e);if(f>=48)if(f>=58)return a;else{d=e+1|0;continue}else if(f!==45)return a;else{d=e+1|0;continue}}}}function m(a){return l(b("bs_caml_format").caml_format_float("%.12g",a))}function n(a,b){if(a)return[a[0],n(a[1],b)];else return b}var o=b("bs_caml_io").stdin,p=b("bs_caml_io").stdout,q=b("bs_caml_io").stderr;function r(a,c,d){return b("bs_caml_io").caml_ml_open_descriptor_out(b("bs_caml_missing_polyfill").not_implemented("caml_sys_open"))}function s(a){return r([1,[3,[4,[7,0]]]],438,a)}function t(a){return r([1,[3,[4,[6,0]]]],438,a)}function u(){__p&&__p();var a=b("bs_caml_io").caml_ml_out_channels_list(0);while(!0){var c=a;if(c){try{b("bs_caml_io").caml_ml_flush(c[0])}catch(a){}a=c[1];continue}else return 0}}function v(a,c){return b("bs_caml_io").caml_ml_output(a,c,0,c.length)}function w(a,c){return b("bs_caml_io").caml_ml_output(a,c,0,c.length)}function x(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"output"];else return b("bs_caml_io").caml_ml_output(a,c,d,e)}function y(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"output_substring"];else return b("bs_caml_io").caml_ml_output(a,c,d,e)}function z(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value")}function A(a){b("bs_caml_io").caml_ml_flush(a);return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}function B(a){try{b("bs_caml_io").caml_ml_flush(a)}catch(a){}try{return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}catch(a){return 0}}function C(a,c,d){return b("bs_caml_io").caml_ml_open_descriptor_in(b("bs_caml_missing_polyfill").not_implemented("caml_sys_open"))}function D(a){return C([0,[7,0]],0,a)}function E(a){return C([0,[6,0]],0,a)}function F(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"input"];else return b("bs_caml_missing_polyfill").not_implemented("caml_ml_input")}function G(a,c,d,e){__p&&__p();while(!0){a=e;c=d;if(a<=0)return 0;else{var f=b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");if(f===0)throw b("bs_caml_builtin_exceptions").end_of_file;else{e=a-f|0;d=c+f|0;continue}}}}function H(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"really_input"];else return G(a,c,d,e)}function I(a,c){var d=b("bs_caml_string").caml_create_string(c);H(a,d,0,c);return b("bs_caml_string").bytes_to_string(d)}function J(a){__p&&__p();var c=function(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(e){var g=e[0],h=g.length;b("bs_caml_string").caml_blit_bytes(g,0,a,f-h|0,h);d=e[1];c=f-h|0;continue}else return a}},d=function(d,e){__p&&__p();while(!0){var f=e,g=d,h=b("bs_caml_missing_polyfill").not_implemented("caml_ml_input_scan_line");if(h===0)if(g)return c(b("bs_caml_string").caml_create_string(f),f,g);else throw b("bs_caml_builtin_exceptions").end_of_file;else if(h>0){var i=b("bs_caml_string").caml_create_string(h-1|0);b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");b("bs_caml_io").caml_ml_input_char(a);if(g){var j=(f+h|0)-1|0;return c(b("bs_caml_string").caml_create_string(j),j,[i,g])}else return i}else{j=b("bs_caml_string").caml_create_string(-h|0);b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");e=f-h|0;d=[j,g];continue}}};return b("bs_caml_string").bytes_to_string(d(0,0))}function K(){try{return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}catch(a){return 0}}function L(a){return b("bs_caml_io").caml_ml_output_char(p,a)}function M(a){return w(p,a)}function N(a){return v(p,a)}function O(a){return w(p,String(a))}function P(a){return w(p,l(b("bs_caml_format").caml_format_float("%.12g",a)))}function Q(){b("bs_caml_io").caml_ml_output_char(p,10);return b("bs_caml_io").caml_ml_flush(p)}function R(a){return b("bs_caml_io").caml_ml_output_char(q,a)}function S(a){return w(q,a)}function T(a){return v(q,a)}function U(a){return w(q,String(a))}function V(a){return w(q,l(b("bs_caml_format").caml_format_float("%.12g",a)))}function W(){b("bs_caml_io").caml_ml_output_char(q,10);return b("bs_caml_io").caml_ml_flush(q)}function X(){b("bs_caml_io").caml_ml_flush(p);return J(o)}function aa(){return b("bs_caml_format").caml_int_of_string((b("bs_caml_io").caml_ml_flush(p),J(o)))}function ba(){return b("bs_caml_format").caml_float_of_string((b("bs_caml_io").caml_ml_flush(p),J(o)))}function ca(a){return a[1]}function da(a,c){return[b("bs_camlinternalFormatBasics").concat_fmt(a[0],c[0]),a[1]+("%,"+c[1])]}var Y=[u];function ea(a){var c=Y[0];Y[0]=function(){b("bs_curry")._1(a,0);return b("bs_curry")._1(c,0)};return 0}function Z(){return b("bs_curry")._1(Y[0],0)}function fa(a){Z(0);return b("bs_caml_sys").caml_sys_exit(a)}var ga=2147483647,ha=2220446049250313e-31,ia=b("bs_caml_io").caml_ml_flush,ja=b("bs_caml_io").caml_ml_output_char,ka=b("bs_caml_io").caml_ml_output_char;function la(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_output_int")}function ma(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out")}function na(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out")}function oa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size")}function pa(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode")}var qa=b("bs_caml_io").caml_ml_input_char,ra=b("bs_caml_io").caml_ml_input_char;function sa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_input_int")}function ta(){return b("bs_caml_missing_polyfill").not_implemented("caml_input_value")}function ua(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in")}function va(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in")}function wa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size")}function xa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}function ya(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode")}function $(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out_64")}function za(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out_64")}function Aa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64")}function Ba(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in_64")}function Ca(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in_64")}function Da(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64")}$=[$,za,Aa,Ba,Ca,Da];f.invalid_arg=c;f.failwith=a;f.Exit=g;f.abs=d;f.max_int=ga;f.min_int=h;f.lnot=e;f.epsilon_float=ha;f.char_of_int=i;f.string_of_bool=j;f.bool_of_string=k;f.string_of_float=m;f.$at=n;f.stdin=o;f.stdout=p;f.stderr=q;f.print_char=L;f.print_string=M;f.print_bytes=N;f.print_int=O;f.print_float=P;f.print_newline=Q;f.prerr_char=R;f.prerr_string=S;f.prerr_bytes=T;f.prerr_int=U;f.prerr_float=V;f.prerr_newline=W;f.read_line=X;f.read_int=aa;f.read_float=ba;f.open_out=s;f.open_out_bin=t;f.open_out_gen=r;f.flush=ia;f.flush_all=u;f.output_char=ja;f.output_string=w;f.output_bytes=v;f.output=x;f.output_substring=y;f.output_byte=ka;f.output_binary_int=la;f.output_value=z;f.seek_out=ma;f.pos_out=na;f.out_channel_length=oa;f.close_out=A;f.close_out_noerr=B;f.set_binary_mode_out=pa;f.open_in=D;f.open_in_bin=E;f.open_in_gen=C;f.input_char=qa;f.input_line=J;f.input=F;f.really_input=H;f.really_input_string=I;f.input_byte=ra;f.input_binary_int=sa;f.input_value=ta;f.seek_in=ua;f.pos_in=va;f.in_channel_length=wa;f.close_in=xa;f.close_in_noerr=K;f.set_binary_mode_in=ya;f.LargeFile=$;f.string_of_format=ca;f.$caret$caret=da;f.exit=fa;f.at_exit=ea;f.valid_float_lexem=l;f.unsafe_really_input=G;f.do_at_exit=Z}),null);
__d("bs_list",["bs_curry","bs_caml_obj","bs_pervasives","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();var b=0;a=a;while(!0){var c=a,d=b;if(c){a=c[1];b=d+1|0;continue}else return d}}function a(a){if(a)return a[0];else throw[b("bs_caml_builtin_exceptions").failure,"hd"]}function c(a){if(a)return a[1];else throw[b("bs_caml_builtin_exceptions").failure,"tl"]}function d(a,c){__p&&__p();if(c<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.nth"];else{a=a;c=c;while(!0){var d=c,e=a;if(e)if(d===0)return e[0];else{c=d-1|0;a=e[1];continue}else throw[b("bs_caml_builtin_exceptions").failure,"nth"]}}}function h(a,b){while(!0){var c=b,d=a;if(d){b=[d[0],c];a=d[1];continue}else return c}}function e(a){return h(a,0)}function i(a){if(a)return b("bs_pervasives").$at(a[0],i(a[1]));else return 0}function j(a,c){if(c){var d=b("bs_curry")._1(a,c[0]);return[d,j(a,c[1])]}else return 0}function k(a,c,d){if(d){var e=b("bs_curry")._2(c,a,d[0]);return[e,k(a+1|0,c,d[1])]}else return 0}function l(a,b){return k(0,a,b)}function m(a,c){__p&&__p();var d=0;c=c;while(!0){var e=c,f=d;if(e){c=e[1];d=[b("bs_curry")._1(a,e[0]),f];continue}else return f}}function n(a,c){while(!0){var d=c;if(d){b("bs_curry")._1(a,d[0]);c=d[1];continue}else return 0}}function o(a,c){__p&&__p();var d=0;a=a;c=c;while(!0){var e=c,f=d;if(e){b("bs_curry")._2(a,f,e[0]);c=e[1];d=f+1|0;continue}else return 0}}function p(a,c,d){while(!0){var e=d,f=c;if(e){d=e[1];c=b("bs_curry")._2(a,f,e[0]);continue}else return f}}function q(a,c,d){if(c)return b("bs_curry")._2(a,c[0],q(a,c[1],d));else return d}function r(a,c,d){if(c)if(d){var e=b("bs_curry")._2(a,c[0],d[0]);return[e,r(a,c[1],d[1])]}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else if(d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else return 0}function s(a,c,d){__p&&__p();var e=0;c=c;d=d;while(!0){var f=d,g=c,h=e;if(g)if(f){d=f[1];c=g[1];e=[b("bs_curry")._2(a,g[0],f[0]),h];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else if(f)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else return h}}function t(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e){b("bs_curry")._2(a,f[0],e[0]);d=e[1];c=f[1];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else return 0}}function u(a,c,d,e){__p&&__p();while(!0){var f=e,g=d,h=c;if(g)if(f){e=f[1];d=g[1];c=b("bs_curry")._3(a,h,g[0],f[0]);continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else if(f)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else return h}}function v(a,c,d,e){if(c)if(d)return b("bs_curry")._3(a,c[0],d[0],v(a,c[1],d[1],e));else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else if(d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else return e}function w(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_curry")._1(a,d[0])){c=d[1];continue}else return!1;else return!0}}function x(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_curry")._1(a,d[0]))return!0;else{c=d[1];continue}else return!1}}function y(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e)if(b("bs_curry")._2(a,f[0],e[0])){d=e[1];c=f[1];continue}else return!1;else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else return!0}}function z(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e)if(b("bs_curry")._2(a,f[0],e[0]))return!0;else{d=e[1];c=f[1];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else return!1}}function A(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_caml_obj").caml_equal(d[0],a))return!0;else{c=d[1];continue}else return!1}}function B(a,b){__p&&__p();while(!0){var c=b;if(c)if(c[0]===a)return!0;else{b=c[1];continue}else return!1}}function C(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(b("bs_caml_obj").caml_equal(e[0],a))return e[1];else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function D(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(e[0]===a)return e[1];else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function E(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_caml_obj").caml_equal(d[0][0],a))return!0;else{c=d[1];continue}else return!1}}function F(a,b){__p&&__p();while(!0){var c=b;if(c)if(c[0][0]===a)return!0;else{b=c[1];continue}else return!1}}function G(a,c){if(c){var d=c[1];c=c[0];if(b("bs_caml_obj").caml_equal(c[0],a))return d;else return[c,G(a,d)]}else return 0}function H(a,b){if(b){var c=b[1];b=b[0];if(b[0]===a)return c;else return[b,H(a,c)]}else return 0}function I(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(b("bs_curry")._1(a,e))return e;else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function J(a){__p&&__p();return function(c){__p&&__p();var d=0;c=c;while(!0){var e=c,f=d;if(e){var g=e[1];e=e[0];if(b("bs_curry")._1(a,e)){c=g;d=[e,f];continue}else{c=g;continue}}else return h(f,0)}}}function K(a,c){__p&&__p();var d=0,e=0;c=c;while(!0){var f=c,g=e,i=d;if(f){var j=f[1];f=f[0];if(b("bs_curry")._1(a,f)){c=j;d=[f,i];continue}else{c=j;e=[f,g];continue}}else return[h(i,0),h(g,0)]}}function L(a){if(a){var b=a[0];a=L(a[1]);return[[b[0],a[0]],[b[1],a[1]]]}else return[0,0]}function M(a,c){if(a)if(c)return[[a[0],c[0]],M(a[1],c[1])];else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else if(c)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else return 0}function N(a,c,d){if(c)if(d){var e=d[0],f=c[0];if(b("bs_curry")._2(a,f,e)<=0)return[f,N(a,c[1],d)];else return[e,N(a,c,d[1])]}else return c;else return d}function O(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===0)return d;else if(d){c=d[1];a=e-1|0;continue}else throw[b("bs_caml_builtin_exceptions").assert_failure,["list.ml",223,11]]}}function P(c,d){__p&&__p();var a=function(d,a){__p&&__p();var f;if(d!==2)if(d!==3||!a)f=1;else{var g=a[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=a[0];if(b("bs_curry")._2(c,j,g)<=0)if(b("bs_curry")._2(c,g,i)<=0)return[j,[g,[i,0]]];else if(b("bs_curry")._2(c,j,i)<=0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]];else if(b("bs_curry")._2(c,j,i)<=0)return[g,[j,[i,0]]];else if(b("bs_curry")._2(c,g,i)<=0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}else f=1}else f=1}else if(a){i=a[1];if(i){g=i[0];j=a[0];if(b("bs_curry")._2(c,j,g)<=0)return[j,[g,0]];else return[g,[j,0]]}else f=1}else f=1;if(f===1){i=d>>1;g=d-i|0;j=O(i,a);f=e(i,a);d=e(g,j);i=f;a=d;g=0;while(!0){j=g;f=a;d=i;if(d)if(f){var k=f[0],l=d[0];if(b("bs_curry")._2(c,l,k)>0){g=[l,j];i=d[1];continue}else{g=[k,j];a=f[1];continue}}else return h(d,j);else return h(f,j)}}},e=function(e,d){__p&&__p();var f;if(e!==2)if(e!==3||!d)f=1;else{var g=d[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=d[0];if(b("bs_curry")._2(c,j,g)>0)if(b("bs_curry")._2(c,g,i)>0)return[j,[g,[i,0]]];else if(b("bs_curry")._2(c,j,i)>0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]];else if(b("bs_curry")._2(c,j,i)>0)return[g,[j,[i,0]]];else if(b("bs_curry")._2(c,g,i)>0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}else f=1}else f=1}else if(d){i=d[1];if(i){g=i[0];j=d[0];if(b("bs_curry")._2(c,j,g)>0)return[j,[g,0]];else return[g,[j,0]]}else f=1}else f=1;if(f===1){i=e>>1;g=e-i|0;j=O(i,d);f=a(i,d);e=a(g,j);i=f;d=e;g=0;while(!0){j=g;f=d;e=i;if(e)if(f){var k=f[0],l=e[0];if(b("bs_curry")._2(c,l,k)<=0){g=[l,j];i=e[1];continue}else{g=[k,j];d=f[1];continue}}else return h(e,j);else return h(f,j)}}},f=g(d);if(f<2)return d;else return a(f,d)}function Q(c,d){__p&&__p();var a=function(d,a){__p&&__p();var f;if(d!==2)if(d!==3||!a)f=1;else{var g=a[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=a[0],k=b("bs_curry")._2(c,j,g);if(k===0){var l=b("bs_curry")._2(c,g,i);if(l===0)return[g,0];else if(l<0)return[g,[i,0]];else return[i,[g,0]]}else if(k<0){l=b("bs_curry")._2(c,g,i);if(l===0)return[j,[g,0]];else if(l<0)return[j,[g,[i,0]]];else{k=b("bs_curry")._2(c,j,i);if(k===0)return[j,[g,0]];else if(k<0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]]}}else{l=b("bs_curry")._2(c,j,i);if(l===0)return[g,[j,0]];else if(l<0)return[g,[j,[i,0]]];else{k=b("bs_curry")._2(c,g,i);if(k===0)return[g,[j,0]];else if(k<0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}}}else f=1}else f=1}else if(a){l=a[1];if(l){k=l[0];i=a[0];g=b("bs_curry")._2(c,i,k);if(g===0)return[i,0];else if(g<0)return[i,[k,0]];else return[k,[i,0]]}else f=1}else f=1;if(f===1){j=d>>1;l=d-j|0;g=O(j,a);k=e(j,a);i=e(l,g);f=k;d=i;j=0;while(!0){a=j;l=d;g=f;if(g)if(l){k=l[1];i=l[0];var m=g[1],n=g[0],o=b("bs_curry")._2(c,n,i);if(o===0){j=[n,a];d=k;f=m;continue}else if(o>0){j=[n,a];f=m;continue}else{j=[i,a];d=k;continue}}else return h(g,a);else return h(l,a)}}},e=function(e,d){__p&&__p();var f;if(e!==2)if(e!==3||!d)f=1;else{var g=d[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=d[0],k=b("bs_curry")._2(c,j,g);if(k===0){var l=b("bs_curry")._2(c,g,i);if(l===0)return[g,0];else if(l>0)return[g,[i,0]];else return[i,[g,0]]}else if(k>0){l=b("bs_curry")._2(c,g,i);if(l===0)return[j,[g,0]];else if(l>0)return[j,[g,[i,0]]];else{k=b("bs_curry")._2(c,j,i);if(k===0)return[j,[g,0]];else if(k>0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]]}}else{l=b("bs_curry")._2(c,j,i);if(l===0)return[g,[j,0]];else if(l>0)return[g,[j,[i,0]]];else{k=b("bs_curry")._2(c,g,i);if(k===0)return[g,[j,0]];else if(k>0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}}}else f=1}else f=1}else if(d){l=d[1];if(l){k=l[0];i=d[0];g=b("bs_curry")._2(c,i,k);if(g===0)return[i,0];else if(g>0)return[i,[k,0]];else return[k,[i,0]]}else f=1}else f=1;if(f===1){j=e>>1;l=e-j|0;g=O(j,d);k=a(j,d);i=a(l,g);f=k;e=i;j=0;while(!0){d=j;l=e;g=f;if(g)if(l){k=l[1];i=l[0];var m=g[1],n=g[0],o=b("bs_curry")._2(c,n,i);if(o===0){j=[n,d];e=k;f=m;continue}else if(o<0){j=[n,d];f=m;continue}else{j=[i,d];e=k;continue}}else return h(g,d);else return h(l,d)}}},f=g(d);if(f<2)return d;else return a(f,d)}var R=b("bs_pervasives").$at,S=i,T=J,U=P,V=P;f.length=g;f.hd=a;f.tl=c;f.nth=d;f.rev=e;f.append=R;f.rev_append=h;f.concat=S;f.flatten=i;f.iter=n;f.iteri=o;f.map=j;f.mapi=l;f.rev_map=m;f.fold_left=p;f.fold_right=q;f.iter2=t;f.map2=r;f.rev_map2=s;f.fold_left2=u;f.fold_right2=v;f.for_all=w;f.exists=x;f.for_all2=y;f.exists2=z;f.mem=A;f.memq=B;f.find=I;f.filter=T;f.find_all=J;f.partition=K;f.assoc=C;f.assq=D;f.mem_assoc=E;f.mem_assq=F;f.remove_assoc=G;f.remove_assq=H;f.split=L;f.combine=M;f.sort=U;f.stable_sort=P;f.fast_sort=V;f.sort_uniq=Q;f.merge=N}),null);
__d("bs_bytes",["bs_char","bs_list","bs_curry","bs_caml_obj","bs_caml_int32","bs_caml_string","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=b("bs_caml_string").caml_create_string(a);b("bs_caml_string").caml_fill_string(d,0,a,c);return d}function c(a,c){var d=b("bs_caml_string").caml_create_string(a);for(var e=0,a=a-1|0;e<=a;++e)d[e]=b("bs_curry")._1(c,e);return d}var g=[];function h(a){var c=a.length,d=b("bs_caml_string").caml_create_string(c);b("bs_caml_string").caml_blit_bytes(a,0,d,0,c);return d}function d(a){return b("bs_caml_string").bytes_to_string(h(a))}function e(a){return h(b("bs_caml_string").bytes_of_string(a))}function i(a,c,d){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.sub / Bytes.sub"];else{var e=b("bs_caml_string").caml_create_string(d);b("bs_caml_string").caml_blit_bytes(a,c,e,0,d);return e}}function j(a,c,d){return b("bs_caml_string").bytes_to_string(i(a,c,d))}function k(a,c,d){d=(a.length+c|0)+d|0;var e=b("bs_caml_string").caml_create_string(d);c=c<0?[-c|0,0]:[0,c];var f=c[1];c=c[0];d=b("bs_caml_primitive").caml_int_min(a.length-c|0,d-f|0);d>0&&b("bs_caml_string").caml_blit_bytes(a,c,e,f,d);return e}function l(a,c,d,e){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.fill / Bytes.fill"];else return b("bs_caml_string").caml_fill_string(a,c,d,e)}function m(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Bytes.blit"];else return b("bs_caml_string").caml_blit_bytes(a,c,d,e,f)}function n(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.blit / Bytes.blit_string"];else return b("bs_caml_string").caml_blit_string(a,c,d,e,f)}function o(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._1(a,c[d]);return 0}function p(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._2(a,d,c[d]);return 0}function q(a,c){__p&&__p();if(c){var d=c[0],e=[0],f=[0];b("bs_list").iter(function(a){e[0]=e[0]+1|0;f[0]=f[0]+a.length|0;return 0},c);var h=b("bs_caml_string").caml_create_string(f[0]+b("bs_caml_int32").imul(a.length,e[0]-1|0)|0);b("bs_caml_string").caml_blit_bytes(d,0,h,0,d.length);var i=[d.length];b("bs_list").iter(function(c){b("bs_caml_string").caml_blit_bytes(a,0,h,i[0],a.length);i[0]=i[0]+a.length|0;b("bs_caml_string").caml_blit_bytes(c,0,h,i[0],c.length);i[0]=i[0]+c.length|0;return 0},c[1]);return h}else return g}function r(a,c){var d=a.length,e=c.length,f=b("bs_caml_string").caml_create_string(d+e|0);b("bs_caml_string").caml_blit_bytes(a,0,f,0,d);b("bs_caml_string").caml_blit_bytes(c,0,f,d,e);return f}function s(a){a=a-9|0;if(a>4||a<0)return a===23;else return a!==2}function t(a){var b=a.length,c=0;while(c<b&&s(a[c]))c=c+1|0;b=b-1|0;while(b>=c&&s(a[b]))b=b-1|0;if(b>=c)return i(a,c,(b-c|0)+1|0);else return g}function u(a){__p&&__p();var c=0;for(var d=0,e=a.length-1|0;d<=e;++d){var f=a[d];if(f>=32){var g=f-34|0;g=g>58||g<0?g>=93?4:1:g>57||g<1?2:1}else g=f>=11?f!==13?4:2:f>=8?2:4;c=c+g|0}if(c===a.length)return h(a);else{f=b("bs_caml_string").caml_create_string(c);c=0;for(var g=0,d=a.length-1|0;g<=d;++g){e=a[g];var i=0;if(e>=35)e!==92?e>=127?i=1:f[c]=e:i=2;else if(e>=32)e>=34?i=2:f[c]=e;else if(e>=14)i=1;else switch(e){case 8:f[c]=92;c=c+1|0;f[c]=98;break;case 9:f[c]=92;c=c+1|0;f[c]=116;break;case 10:f[c]=92;c=c+1|0;f[c]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:i=1;break;case 13:f[c]=92;c=c+1|0;f[c]=114;break}switch(i){case 1:f[c]=92;c=c+1|0;f[c]=48+(e/100|0)|0;c=c+1|0;f[c]=48+(e/10|0)%10|0;c=c+1|0;f[c]=48+e%10|0;break;case 2:f[c]=92;c=c+1|0;f[c]=e;break}c=c+1|0}return f}}function v(a,c){var d=c.length;if(d===0)return c;else{var e=b("bs_caml_string").caml_create_string(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._1(a,c[f]);return e}}function w(a,c){var d=c.length;if(d===0)return c;else{var e=b("bs_caml_string").caml_create_string(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._2(a,f,c[f]);return e}}function x(a){return v(b("bs_char").uppercase,a)}function y(a){return v(b("bs_char").lowercase,a)}function z(a,c){if(c.length===0)return c;else{var d=h(c);d[0]=b("bs_curry")._1(a,c[0]);return d}}function A(a){return z(b("bs_char").uppercase,a)}function B(a){return z(b("bs_char").lowercase,a)}function C(a,c,d,e){__p&&__p();while(!0){var f=d;if(f>=c)throw b("bs_caml_builtin_exceptions").not_found;else if(a[f]===e)return f;else{d=f+1|0;continue}}}function D(a,b){return C(a,a.length,0,b)}function E(a,c,d){var e=a.length;if(c<0||c>e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.index_from / Bytes.index_from"];else return C(a,e,c,d)}function F(a,c,d){__p&&__p();while(!0){var e=c;if(e<0)throw b("bs_caml_builtin_exceptions").not_found;else if(a[e]===d)return e;else{c=e-1|0;continue}}}function G(a,b){return F(a,a.length-1|0,b)}function H(a,c,d){if(c<-1||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.rindex_from / Bytes.rindex_from"];else return F(a,c,d)}function I(a,c,d){var e=a.length;if(c<0||c>e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.contains_from / Bytes.contains_from"];else try{C(a,e,c,d);return!0}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)return!1;else throw a}}function J(a,b){return I(a,0,b)}function K(a,c,d){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];else try{F(a,c,d);return!0}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)return!1;else throw a}}var L=b("bs_caml_obj").caml_compare,M=b("bs_caml_string").bytes_to_string,N=b("bs_caml_string").bytes_of_string;f.make=a;f.init=c;f.empty=g;f.copy=h;f.of_string=e;f.to_string=d;f.sub=i;f.sub_string=j;f.extend=k;f.fill=l;f.blit=m;f.blit_string=n;f.concat=q;f.cat=r;f.iter=o;f.iteri=p;f.map=v;f.mapi=w;f.trim=t;f.escaped=u;f.index=D;f.rindex=G;f.index_from=E;f.rindex_from=H;f.contains=J;f.contains_from=I;f.rcontains_from=K;f.uppercase=x;f.lowercase=y;f.capitalize=A;f.uncapitalize=B;f.compare=L;f.unsafe_to_string=M;f.unsafe_of_string=N}),null);
__d("bs_string",["bs_list","bs_bytes","bs_caml_int32","bs_caml_string","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").make(a,c))}function c(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").init(a,c))}function d(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").copy(b("bs_caml_string").bytes_of_string(a)))}function e(a,c,d){return b("bs_caml_string").bytes_to_string(b("bs_bytes").sub(b("bs_caml_string").bytes_of_string(a),c,d))}function g(a,c){__p&&__p();if(c){var d=c[0],e=[0],f=[0];b("bs_list").iter(function(a){e[0]=e[0]+1|0;f[0]=f[0]+a.length|0;return 0},c);var g=b("bs_caml_string").caml_create_string(f[0]+b("bs_caml_int32").imul(a.length,e[0]-1|0)|0);b("bs_caml_string").caml_blit_string(d,0,g,0,d.length);var h=[d.length];b("bs_list").iter(function(c){b("bs_caml_string").caml_blit_string(a,0,g,h[0],a.length);h[0]=h[0]+a.length|0;b("bs_caml_string").caml_blit_string(c,0,g,h[0],c.length);h[0]=h[0]+c.length|0;return 0},c[1]);return b("bs_caml_string").bytes_to_string(g)}else return""}function h(a,c){return b("bs_bytes").iter(a,b("bs_caml_string").bytes_of_string(c))}function i(a,c){return b("bs_bytes").iteri(a,b("bs_caml_string").bytes_of_string(c))}function j(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").map(a,b("bs_caml_string").bytes_of_string(c)))}function k(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").mapi(a,b("bs_caml_string").bytes_of_string(c)))}function l(a){a=a-9|0;if(a>4||a<0)return a===23;else return a!==2}function m(a){if(a===""||!(l(a.charCodeAt(0))||l(a.charCodeAt(a.length-1|0))))return a;else return b("bs_caml_string").bytes_to_string(b("bs_bytes").trim(b("bs_caml_string").bytes_of_string(a)))}function n(a){__p&&__p();var c=function(b){__p&&__p();while(!0){var c=b;if(c>=a.length)return!1;else{var d=a.charCodeAt(c);if(d>=32){d=d-34|0;if(d>58||d<0)if(d>=93)return!0;else{b=c+1|0;continue}else if(d>57||d<1)return!0;else{b=c+1|0;continue}}else return!0}}};if(c(0))return b("bs_caml_string").bytes_to_string(b("bs_bytes").escaped(b("bs_caml_string").bytes_of_string(a)));else return a}function o(a,c){return b("bs_bytes").index(b("bs_caml_string").bytes_of_string(a),c)}function p(a,c){return b("bs_bytes").rindex(b("bs_caml_string").bytes_of_string(a),c)}function q(a,c,d){return b("bs_bytes").index_from(b("bs_caml_string").bytes_of_string(a),c,d)}function r(a,c,d){return b("bs_bytes").rindex_from(b("bs_caml_string").bytes_of_string(a),c,d)}function s(a,c){return b("bs_bytes").contains(b("bs_caml_string").bytes_of_string(a),c)}function t(a,c,d){return b("bs_bytes").contains_from(b("bs_caml_string").bytes_of_string(a),c,d)}function u(a,c,d){return b("bs_bytes").rcontains_from(b("bs_caml_string").bytes_of_string(a),c,d)}function v(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").uppercase(b("bs_caml_string").bytes_of_string(a)))}function w(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").lowercase(b("bs_caml_string").bytes_of_string(a)))}function x(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").capitalize(b("bs_caml_string").bytes_of_string(a)))}function y(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").uncapitalize(b("bs_caml_string").bytes_of_string(a)))}var z=b("bs_caml_primitive").caml_string_compare,A=b("bs_bytes").fill,B=b("bs_bytes").blit_string;f.make=a;f.init=c;f.copy=d;f.sub=e;f.fill=A;f.blit=B;f.concat=g;f.iter=h;f.iteri=i;f.map=j;f.mapi=k;f.trim=m;f.escaped=n;f.index=o;f.rindex=p;f.index_from=q;f.rindex_from=r;f.contains=s;f.contains_from=t;f.rcontains_from=u;f.uppercase=v;f.lowercase=w;f.capitalize=x;f.uncapitalize=y;f.compare=z}),null);
__d("FBID.bs",["invariant","bs_js_exn","bs_string","bs_belt_Id","gkx","bs_js_types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("bs_string").compare;d=b("bs_belt_Id").MakeComparable([c]);e=d[0];function h(a){if(b("gkx")("678626")){b("bs_js_types").test(a,4)||g(0,3515,a);a!=="0"||g(0,3516,a);var c=/^[0-9]+$/;c.test(a)||g(0,3517,a)}return a}function a(a){try{return h(a)}catch(c){a=b("bs_js_exn").internalToOCamlException(c);if(a[0]===b("bs_js_exn").$$Error)return void 0;else throw a}}f.cmp=e;f.compare=c;f.ofString=a;f.ofStringExn=h}),null);
__d("ImageSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({PROFILE_PICTURE:"profile_picture",IMAGE:"image"});e.exports=a}),null);
__d("PhotoResizeModeConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTAIN:"s",COVER:"p"})}),null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","MercuryServerDispatcher","PhotoResizeModeConst"],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null},this._callback=null}a.prototype.setFBID=function(a){"use strict";this._request.fbid=a;return this};a.prototype.setType=function(a){"use strict";if(![b("ImageSourceType").PROFILE_PICTURE,b("ImageSourceType").IMAGE].includes(a))throw new TypeError("ImageSourceRequest.setType: invalid type "+a);this._request.type=a;return this};a.prototype.setDimensions=function(a,b){"use strict";this._request.width=a;this._request.height=b;return this};a.prototype.setResizeMode=function(a){"use strict";if(![b("PhotoResizeModeConst").COVER,b("PhotoResizeModeConst").CONTAIN].includes(a))throw new TypeError("ImageSourceRequest.setResizeMode: invalid resize mode "+a);this._request.resize_mode=a;return this};a.prototype.setCallback=function(a){"use strict";this._callback=a;return this};a.prototype.send=function(){"use strict";__p&&__p();if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error("ImageSourceRequest: You must set all the fields");var a=h(),c=i(this._request);a.executeOrEnqueue(c,this._callback);if(a.getUnavailableResourcesFromRequest(c).length===1){b("MercuryServerDispatcher").trySend("/ajax/image_source.php",{requests:[this._request]});return!0}return!1};var g=null;function h(){__p&&__p();if(g)return g;var a=new(b("KeyedCallbackManager"))();g=a;b("MercuryServerDispatcher").registerEndpoints({"/ajax/image_source.php":{request_user_id:b("CurrentUser").getID(),mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,batch_function:function(a,b){var c;(c=a.requests).push.apply(c,b.requests);return a},handler:function(b,c){c=c.getData().requests;for(var d=0;d<c.length;++d)a.setResource(i(c[d]),b[d])}}});return a}function i(a){return[a.fbid,a.type,a.width,a.height,a.resize_mode].join("|")}e.exports=a}),null);
__d("MercuryAssert",["MercuryIDs"],(function(a,b,c,d,e,f){__p&&__p();e.exports={isParticipantID:function(a){if(!b("MercuryIDs").isValid(a))throw new Error("bad_participant_id "+a)},allParticipantIDs:function(a){a.forEach(this.isParticipantID)},isUserParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(c.type!="fbid")throw new Error("bad_user_id "+a)},isEmailParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(c.type!="email")throw new Error("bad_email_id "+a)},allThreadID:function(a){a.forEach(this.isThreadID)},isThreadID:function(a){if(!b("MercuryIDs").isValid(a))throw new Error("bad_thread_id "+a)}}}),null);
__d("bs_js_primitive",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];function h(a){__p&&__p();if(a===void 0){var b=[g,0];b.tag=256;return b}else if(a!==null&&a[0]===g){b=a[1]+1|0;b=[g,b];b.tag=256;return b}else return a}function a(a){if(a===null||a===void 0)return void 0;else return h(a)}function b(a){if(a===void 0)return void 0;else return h(a)}function c(a){if(a===null)return void 0;else return h(a)}function i(a){if(a!==null&&a[0]===g){var b=a[1];if(b===0)return void 0;else return[g,b-1|0]}else return a}function d(a){if(a===void 0)return void 0;else return i(a)}function e(a){if(a===void 0)return void 0;else return i(a)[1]}f.nullable_to_opt=a;f.undefined_to_opt=b;f.null_to_opt=c;f.valFromOption=i;f.some=h;f.option_get=d;f.option_get_unwrap=e}),null);
__d("MercuryVanityIDMap.bs",["bs_string","bs_js_primitive","MercuryAssert","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={};function a(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[b("bs_string").lowercase(a)]))}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(h[a]))}function d(a){a=h[a];return a!==void 0}function e(a){a=g[b("bs_string").lowercase(a)];return a!==void 0}function i(a,c){b("MercuryAssert").isParticipantID(c);a=b("bs_string").lowercase(a);g[a]=c;h[c]=a;return 0}f.vanityToID=g;f.idToVanity=h;f.getID=a;f.getVanity=c;f.hasID=d;f.hasVanity=e;f.set=i}),null);
__d("MessengerParticipantsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1939519269502621"};c.getQueryID=function(){"use strict";return"428938754303512"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("DisplayGenderConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("MessageThreadUnsendabilityStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CAN_UNSEND:"can_unsend",DENY_FOR_SPECIFIC_IDS:"deny_for_specific_ids",DENY_IF_THREAD_CONTAINS_PAU:"deny_if_thread_contains_pau",DENY_IF_THREAD_CONTAINS_WORK_USER:"deny_if_thread_contains_work_user",DENY_IF_PAGE_THREAD:"deny_if_page_thread",DENY_IF_MARKETPLACE_THREAD:"deny_if_marketplace_thread",DENY_IF_CANNOT_LOAD_THREAD:"deny_if_cannot_load_thread"})}),null);
__d("MessageThreadUnsendabilityStatus.bs",["MessageThreadUnsendabilityStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"can_unsend":return b("MessageThreadUnsendabilityStatus").CAN_UNSEND;case"deny_for_specific_ids":return b("MessageThreadUnsendabilityStatus").DENY_FOR_SPECIFIC_IDS;case"deny_if_cannot_load_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_CANNOT_LOAD_THREAD;case"deny_if_marketplace_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_MARKETPLACE_THREAD;case"deny_if_page_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD;case"deny_if_thread_contains_pau":return b("MessageThreadUnsendabilityStatus").DENY_IF_THREAD_CONTAINS_PAU;default:return null}}f.fromNullableString=a}),null);
__d("MessagingThreadType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5})}),null);
__d("MercuryAttachmentContentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",PDF:"attach:pdf",RICHTEXT:"attach:richtext",SPREADSHEET:"attach:spreadsheet",PRESENTATION:"attach:presentation",ARCHIVE:"attach:archive",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"})}),null);
__d("MercuryAttachmentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"})}),null);
__d("MessageSharedMediaIDStore.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a,b){g[a]=b;return 0}function b(a){a=g[a];if(a!==void 0)return a;else return null}f._store=g;f.setMessageIDForAttachmentID=a;f.getMessageIDForAttachmentID=b}),null);
__d("MNCommerceBubbleType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14})}),null);
__d("MNCommerceCallToActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN_NATIVE:1,OPEN_URL:2,OPEN_CANCEL_RIDE_MUTATION:3,POSTBACK:4,ACCOUNT_LINK:5,MANAGE_MESSAGES:6,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,SUBSCRIPTION_PRESELECT:10,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_PAGE_ABOUT:14,OPEN_BRANDED_CAMERA:15,OPEN_THREAD:16})}),null);
__d("P2PPaymentRequestStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7})}),null);
__d("P2PTransferStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19,PENDING_SENDER_IDV_REVIEW:20,PENDING_RECEIVER_IDV_REVIEW:21})}),null);
__d("PaymentModulesClient",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DONATION_P4P:"donation_p4p",MOR_DONATIONS:"mor_donations",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",PAGES_SOLUTION:"pages_solution",CHECKOUT_EXPERIENCES:"checkout_experiences",MOBILE_TOP_UP:"mobile_top_up",MOCK:"mock"})}),null);
__d("ServicesCalendarSyncType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLIENT_ONLY:"client_only",NO_CALENDAR_SYNC:"no_calendar_sync",SERVER_CONTINUOUS:"server_continuous",SERVER_SINGLE:"server_single"})}),null);
__d("bs_array",["bs_curry","bs_js_exn","bs_caml_array","bs_caml_exceptions","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(a===0)return[];else if(a<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.init"];else{var d=b("bs_caml_array").caml_make_vect(a,b("bs_curry")._1(c,0));for(var e=1,a=a-1|0;e<=a;++e)d[e]=b("bs_curry")._1(c,e);return d}}function c(a,c,d){var e=b("bs_caml_array").caml_make_vect(a,[]);for(var f=0,a=a-1|0;f<=a;++f)e[f]=b("bs_caml_array").caml_make_vect(c,d);return e}function g(a){var c=a.length;if(c===0)return[];else return b("bs_caml_array").caml_array_sub(a,0,c)}function d(a,c){var d=a.length;if(d===0)return g(c);else if(c.length===0)return b("bs_caml_array").caml_array_sub(a,0,d);else return a.concat(c)}function e(a,c,d){if(d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.sub"];else return b("bs_caml_array").caml_array_sub(a,c,d)}function h(a,c,d,e){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.fill"];else{for(var f=c,c=(c+d|0)-1|0;f<=c;++f)a[f]=e;return 0}}function i(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.blit"];else return b("bs_caml_array").caml_array_blit(a,c,d,e,f)}function j(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._1(a,c[d]);return 0}function k(a,c){var d=c.length;if(d===0)return[];else{var e=b("bs_caml_array").caml_make_vect(d,b("bs_curry")._1(a,c[0]));for(var f=1,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._1(a,c[f]);return e}}function l(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._2(a,d,c[d]);return 0}function m(a,c){var d=c.length;if(d===0)return[];else{var e=b("bs_caml_array").caml_make_vect(d,b("bs_curry")._2(a,0,c[0]));for(var f=1,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._2(a,f,c[f]);return e}}function n(a){__p&&__p();var b=a.length-1|0,c=0;while(!0){var d=c,e=b;if(e<0)return d;else{c=[a[e],d];b=e-1|0;continue}}}function o(a,b){while(!0){var c=b,d=a;if(c){b=c[1];a=d+1|0;continue}else return d}}function p(a){__p&&__p();if(a){var c=b("bs_caml_array").caml_make_vect(o(0,a),a[0]),d=1;a=a[1];while(!0){var e=a,f=d;if(e){c[f]=e[0];a=e[1];d=f+1|0;continue}else return c}}else return[]}function q(a,c,d){c=c;for(var e=0,f=d.length-1|0;e<=f;++e)c=b("bs_curry")._2(a,c,d[e]);return c}function r(a,c,d){d=d;for(var e=c.length-1|0;e>=0;--e)d=b("bs_curry")._2(a,c[e],d);return d}var s=b("bs_caml_exceptions").create("Array.Bottom");function t(a,c){__p&&__p();var d=function(d,e){__p&&__p();var f=((e+e|0)+e|0)+1|0,g=f;if((f+2|0)<d){b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,f),b("bs_caml_array").caml_array_get(c,f+1|0))<0&&(g=f+1|0);b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,g),b("bs_caml_array").caml_array_get(c,f+2|0))<0&&(g=f+2|0);return g}else if((f+1|0)<d&&b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,f),b("bs_caml_array").caml_array_get(c,f+1|0))<0)return f+1|0;else if(f<d)return f;else throw[s,e]},e=function(e,f,g){__p&&__p();try{e=e;f=f;var h=g;while(!0){var i=f,j=d(e,i);if(b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,j),h)>0){b("bs_caml_array").caml_array_set(c,i,b("bs_caml_array").caml_array_get(c,j));f=j;continue}else return b("bs_caml_array").caml_array_set(c,i,h)}}catch(a){j=b("bs_js_exn").internalToOCamlException(a);if(j[0]===s)return b("bs_caml_array").caml_array_set(c,j[1],g);else throw j}},f=function(a,e){__p&&__p();try{a=a;e=e;while(!0){var f=e,g=d(a,f);b("bs_caml_array").caml_array_set(c,f,b("bs_caml_array").caml_array_get(c,g));e=g;continue}}catch(a){f=b("bs_js_exn").internalToOCamlException(a);if(f[0]===s)return f[1];else throw f}},g=function(e,f){__p&&__p();while(!0){var d=e,g=(d-1|0)/3|0;if(d===g)throw[b("bs_caml_builtin_exceptions").assert_failure,["array.ml",173,4]];if(b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,g),f)<0){b("bs_caml_array").caml_array_set(c,d,b("bs_caml_array").caml_array_get(c,g));if(g>0){e=g;continue}else return b("bs_caml_array").caml_array_set(c,0,f)}else return b("bs_caml_array").caml_array_set(c,d,f)}},h=c.length;for(var i=((h+1|0)/3|0)-1|0;i>=0;--i)e(h,i,b("bs_caml_array").caml_array_get(c,i));for(var i=h-1|0;i>=2;--i){e=b("bs_caml_array").caml_array_get(c,i);b("bs_caml_array").caml_array_set(c,i,b("bs_caml_array").caml_array_get(c,0));g(f(i,0),e)}if(h>1){e=b("bs_caml_array").caml_array_get(c,1);b("bs_caml_array").caml_array_set(c,1,b("bs_caml_array").caml_array_get(c,0));return b("bs_caml_array").caml_array_set(c,0,e)}else return 0}function u(a,c){__p&&__p();var d=function(d,e,f,g,h,j,k){__p&&__p();e=d+e|0;h=g+h|0;var l=d;d=b("bs_caml_array").caml_array_get(c,d);var m=g;g=b("bs_caml_array").caml_array_get(f,g);k=k;while(!0){var n=k,o=g,p=m,q=d,r=l;if(b("bs_curry")._2(a,q,o)<=0){b("bs_caml_array").caml_array_set(j,n,q);q=r+1|0;if(q<e){k=n+1|0;d=b("bs_caml_array").caml_array_get(c,q);l=q;continue}else return i(f,p,j,n+1|0,h-p|0)}else{b("bs_caml_array").caml_array_set(j,n,o);q=p+1|0;if(q<h){k=n+1|0;g=b("bs_caml_array").caml_array_get(f,q);m=q;continue}else return i(c,r,j,n+1|0,e-r|0)}}},e=function(d,e,f,g){for(var h=0,g=g-1|0;h<=g;++h){var i=b("bs_caml_array").caml_array_get(c,d+h|0),j=(f+h|0)-1|0;while(j>=f&&b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(e,j),i)>0)b("bs_caml_array").caml_array_set(e,j+1|0,b("bs_caml_array").caml_array_get(e,j)),j=j-1|0;b("bs_caml_array").caml_array_set(e,j+1|0,i)}return 0},f=function a(f,g,h,i){if(i<=5)return e(f,g,h,i);else{var b=i/2|0;i=i-b|0;a(f+b|0,g,h+b|0,i);a(f,c,f+i|0,b);return d(f+i|0,b,g,h+b|0,i,g,h)}},g=c.length;if(g<=5)return e(0,c,0,g);else{var h=g/2|0;g=g-h|0;var j=b("bs_caml_array").caml_make_vect(g,b("bs_caml_array").caml_array_get(c,0));f(h,j,0,g);f(0,c,g,h);return d(g,h,j,0,g,c,0)}}var v=c,w=b("bs_caml_array").caml_array_concat,x=u;f.init=a;f.make_matrix=c;f.create_matrix=v;f.append=d;f.concat=w;f.sub=e;f.copy=g;f.fill=h;f.blit=i;f.to_list=n;f.of_list=p;f.iter=j;f.map=k;f.iteri=l;f.mapi=m;f.fold_left=q;f.fold_right=r;f.sort=t;f.stable_sort=u;f.fast_sort=x}),null);
__d("bs_belt_Option",["bs_curry","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a!==void 0)return b("bs_js_primitive").valFromOption(a);else throw new Error("getExn")}function g(a,c,d){if(a!==void 0)return d(b("bs_js_primitive").valFromOption(a));else return c}function c(a,c,d){return g(a,c,b("bs_curry").__1(d))}function h(a,c){if(a!==void 0)return b("bs_js_primitive").some(c(b("bs_js_primitive").valFromOption(a)))}function d(a,c){return h(a,b("bs_curry").__1(c))}function i(a,c){if(a!==void 0)return c(b("bs_js_primitive").valFromOption(a))}function e(a,c){return i(a,b("bs_curry").__1(c))}function j(a,c){if(a!==void 0)return b("bs_js_primitive").valFromOption(a);else return c}function k(a){return a!==void 0}function l(a){return a===void 0}function m(a,c,d){if(a!==void 0)if(c!==void 0)return d(b("bs_js_primitive").valFromOption(a),b("bs_js_primitive").valFromOption(c));else return!1;else return c===void 0}function n(a,c,d){return m(a,c,b("bs_curry").__2(d))}function o(a,c,d){if(a!==void 0)if(c!==void 0)return d(b("bs_js_primitive").valFromOption(a),b("bs_js_primitive").valFromOption(c));else return 1;else if(c!==void 0)return-1;else return 0}function p(a,c,d){return o(a,c,b("bs_curry").__2(d))}f.getExn=a;f.mapWithDefaultU=g;f.mapWithDefault=c;f.mapU=h;f.map=d;f.flatMapU=i;f.flatMap=e;f.getWithDefault=j;f.isSome=k;f.isNone=l;f.eqU=m;f.eq=n;f.cmpU=o;f.cmp=p}),null);
__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_array","bs_string","bs_caml_array","bs_belt_Option","bs_caml_format","CurrentUser","bs_js_primitive","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return b("bs_array").map(function(a){var c=a.user_confirmation;c=c==null?[null,null,null,null,!1]:[c.cancel_button_label,c.continue_button_label,c.confirmation_message,c.confirmation_title,!0];var d=a.payment_metadata;return{action_link:a.action_link,action_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),action_objects:a.action_objects,title:a.title,confirmation_cancel_label:c[0],confirmation_continue_label:c[1],confirmation_message:c[2],confirmation_title:c[3],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,payment_metadata:d==null?{payment_module_config:null,total_price:null}:{payment_module_config:d.payment_module_config,total_price:d.total_price},render_style:a.render_style,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button},should_show_user_confirmation:c[4],page_id:a.page_id}},a)}function i(a){return b("bs_array").map(function(a){var c=a.url;c=c==null?null:new(b("URI"))(c).getUnqualifiedURI().toString();return{title:a.title,uri:c}},a)}function a(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function c(a){if(a==null)return null;else return{url:a.uri,src:a.uri,width:a.width,height:a.height}}function j(a,b){__p&&__p();var c=b.cover_photo,d;if(c==null)d=[null,null,null];else{var e=c.photo.image;e=e==null?[null,null]:[e.uri,{height:e.height,width:e.width}];d=[c.photo.id,e[0],e[1]]}c=b.location;e=c==null?[null,null]:[c.latitude,c.longitude];c=b.overall_star_rating;return{address:b.address.single_line_full_address,category:b.top_category_name,coverPhotoID:d[0],coverPhotoURL:d[1],coverPhotoDimensions:d[2],latitude:e[0],longitude:e[1],name:b.name,rating:c==null?null:c.value,pageID:b.id,priceRange:b.price_range_description,viewerID:a}}function k(a){var b=a.group_commerce_item_seller,c=a.primary_photo,d;if(c==null)d=null;else{c=c.image;d=c==null?null:c.uri}return{caption:a.group_commerce_item_description.text,desc:a.group_commerce_item_description.text,owner_id:b==null?null:b.id,price:a.formatted_price.text,text:a.group_commerce_item_description.text,title:a.group_commerce_item_title,thumb_url:d,url:a.url}}function l(a){return{app_name:a.application_name,artists:a.artist_names,audio_url:a.audio_url,duration_ms:a.duration_ms,title:a.music_title}}function m(a){var c=a.payment;return{id:a.id,desc:a.desc,display_total_cost:a.total_cost,merchant_name:a.merchant_name,target_url:a.target_url,thumb_url:a.thumb_url,raw_amount:a.raw_amount,payment_id:c==null?null:c.id,total_cost:{amount:b("bs_caml_format").caml_float_of_string(a.price_amount),currency:a.price_currency},name:a.name}}function n(a){return{fundraiserID:a.fundraiserID,canDonate:a.canDonate,hasViewerDonated:a.hasViewerDonated,fundraiserDetailedProgressText:a.fundraiserDetailedProgressText,fundraiserSubtitleText:a.fundraiserSubtitleText,focusedCoverPhoto:a.focusedCoverPhoto}}function o(a){return{name:a.name,is_malicious:a.is_malicious,attach_type:b("MercuryAttachmentType").FILE,url:a.uri,extension:a.extension,filesize:a.filesize}}function p(a){return{url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").VIDEO,url:a.playable_url,extension:a.extension,filesize:a.filesize,name:a.filename,height:a.height,width:a.width}}function q(a){return{id:a.id,name:a.name,desc:a.desc,thumb_url:a.thumb_url,item_url:a.item_url,title:a.name,text:a.desc,source:a.source,image_aspect_ratio:a.image_aspect_ratio,metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},default_action:a.default_action,call_to_actions:h(a.call_to_actions)}}function r(a){__p&&__p();var c=function(a){a=a.page_call_to_action;if(a==null)return void 0;else return a.id},d=function(a){a=a.page_call_to_action;if(a==null)return!1;else{a=a.component_flow_service_config;return!(a==null)}},e=a.page;c=e==null?[void 0,void 0,void 0,!1]:[e.id,b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("ServicesCalendarSyncType")[e.calendar_sync_type])),c(e),d(e)];d=a.native_component_flow_request;if(d==null)e=null;else{var f=d.page,h=d.page,i=d.page,j;if(i==null)j=void 0;else{i=i.profile_picture;j=i==null?void 0:i.uri}i=d.suggested_time_range;var k=d.product_item,l=d.product_item,m=d.product_item,n=d.product_item,o;if(n==null)o=void 0;else{n=n.profile_picture;o=n==null?void 0:n.uri}n=d.user;var p=d.user,q=d.job_application,r=d.user,s;if(r==null)s=void 0;else{r=r.profile_picture;s=r==null?void 0:r.uri}e={additionalInfo:d.additional_info,appointmentAddress:d.appointment_address,archivedStatus:d.archived_status,availability:d.availability,hasSavedToCalendar:d.has_saved_to_calendar,requestFlowType:d.request_flow_type,generalInfo:d.service_general_info,id:d.id,pageID:f==null?void 0:f.id,pageName:h==null?void 0:h.name,pageProfilePic:j,preferredTimeRange:i==null?null:{end:i.end,start:i.start},price:k==null?null:k.experimental_freeform_price,duration:l==null?null:l.duration_in_seconds,reminderBubbleText:d.reminder_bubble_text,requestAdminApprovalType:d.request_admin_approval_type,requestedTime:d.requested_time,serviceName:m==null?null:m.name,serviceProfilePic:o,specialRequest:d.special_request,status:d.booking_status_value,statusLabel:d.status,userID:n==null?void 0:n.id,username:p==null?void 0:p.short_name,jobApplicationID:q==null?void 0:q.id,userProfilePic:s}}r=a.message_bubble_type;var t;switch(r){case"CANCELLED":t=["Cancelled",g._("Cancelled")];break;case"DECLINED":t=["Declined",g._("Declined")];break;case"REQUESTED":t=["Requested",g._("Requested")];break;case"SCHEDULEED":t=["Scheduled",g._("Scheduled")];break;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}return{id:a.id,pageID:c[0],calendarSyncType:c[1],ctaID:c[2],hasServiceConfig:c[3],userID:a.user.id,status:t[0],statusLabel:t[1],viewerID:b("CurrentUser").getAccountID(),requestMetadata:e}}function s(a){return{id:a.id,page_id:a.page.id,user_id:a.consumer.id,time_ranges:b("bs_array").map(function(a){return{start:a.start,end:a.end}},a.formatted_available_time_ranges),has_booking_request_created:a.has_booking_request_created}}function t(a){return{live_location_id:a.live_location_id,is_expired:a.is_expired,expiration_time:a.expiration_time,sender:a.sender,coordinate:a.coordinate,location_title:a.location_title,sender_destination:a.sender_destination,stop_reason:a.stop_reason}}function u(a){var b=a.preview;b=b==null?null:b.uri;var c=a.large_preview;c=c==null?null:c.uri;return{preview:a.preview,large_preview:a.large_preview,attach_type:"photo",large_preview_url:c,preview_url:b}}function v(a){return{name:a.filename,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").FILE,url:a.playable_url,extension:a.extension,filesize:a.filesize}}function w(a){var b=a.first_metaline;return{desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,metalines:b==null?{}:{metaline_1:b},name:a.name,source:a.source_name,text:a.description,thumb_url:a.image_url,title:a.name,default_action:a.default_action,call_to_actions:h(a.call_to_actions),media_blob_attachments:a.media_blob_attachments}}function x(a){var c=b("bs_array").map(w,a.business_items.nodes),d=h(a.call_to_actions);return{message:a.message,call_to_actions:d,items:c}}function y(a){return{message:a.message,call_to_actions:h(a.call_to_actions),items:b("bs_array").map(w,a.promotion_items.nodes)}}function z(a){var c=a.structured_address.streets,d=a.partner_logo;return{account_holder_name:a.account_holder_name,adjustments:b("bs_array").map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.adjustment_amount}},a.adjustments),cancellation_url:a.cancellation_url,items:b("bs_array").map(w,a.items.nodes),merchant_name:a.merchant_name,messenger_commerce_bubble_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceBubbleType")[a.messenger_commerce_bubble_type])),order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,receipt_id:a.receipt_id,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,shipping_method:a.shipping_method,status:a.status,structured_address:{city:a.structured_address.city,state:a.structured_address.state,country:a.structured_address.country,postal_code:a.structured_address.postal_code,street_1:b("bs_caml_array").caml_array_get(c,0),street_2:b("bs_caml_array").caml_array_get(c,1)},subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax,partner_logo:d==null?void 0:d.uri}}function A(a,c){return{payment_modules_client:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("PaymentModulesClient")[c.payment_modules_client])),is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:b("bs_array").map(function(a){return{item_id:a.item_id,name:a.name,subtitle:a.subtitle,description:a.description,unit_price:a.unit_price,image_urls:b("bs_array").map(function(a){return a.uri},a.images),quantity:a.quantity}},c.item_list),components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,actor_id:a,invoicer_id:c.invoicer_id}}var B=function(a){__p&&__p();var c=b("LeadGenInfoFieldTypes"),d={},e=[];for(var a=a.field_data_list,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h.field_type,j=h.label;h=h.values;i===c.CUSTOM||i===c.ZIP?e.push({label:j,values:h}):d[i]={label:j,values:h}}d.questions=e;return d};function C(a,b){var c=b.invite_recipient;c=c==null?null:c.id;var d=b.invite_sender;d=d==null?null:d.id;return{quick_invite_id:b.id,recipient_id:c,sender_id:d,is_viewer_recipient:a===c}}function D(a){var b=function(a){if(a==null)return null;else return a.uri},c=a.listing_category;c=c==null?[null,null]:[c.offer_image,c.request_image];return{listingType:a.listing_type,mapURI:b(a.map_image),offerURI:b(c[0]),requestURI:b(c[1])}}function E(a){return{sender:a.sender,receiver:a.receiver,transfer_id:a.transfer_id,bubbleView:a.bubble_view}}function F(a){__p&&__p();var c=a.receiver_profile,d;if(c==null)d=null;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.sender;if(e==null)c={};else{var f=e.profile_picture;c={id:e.id,name:e.name,full_name:e.full_name,picture:f==null?null:f.uri,profile_uri:e.url}}f=a.transfer_context;if(f==null)e=[null,null,null];else{var g=f.transfer_theme;e=[f.memoText,b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.memo_images),g==null?null:g.id]}f=a.platform_item;g=f==null?null:{name:f.name,description:f.description,image:b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.photos),refURL:f.url};f=a.amount_fb_discount;return{sender:c,amountWithSymbol:a.transaction_amount.formatted_amount,status:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PTransferStatus")[a.transfer_status])),receiver:d,transfer_id:a.transfer_id,completedTime:a.completedTime,updatedTime:a.updatedTime,creationTime:a.creationTime,amount:a.transaction_amount.amount,memoText:e[0],memoPhotoURLs:e[1],themeID:e[2],discountAmount:f==null?null:f.formatted,fundsAvailability:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("FundsAvailability")[a.funds_availability])),groupThreadFBID:a.group_thread_fbid,platform_item:g,statusDescription:{markup:a.status_description},bubbleView:a.bubble_view,currencyCode:a.currency_amount.currency}}function G(a){__p&&__p();var c=a.requester,d;if(c==null)d=void 0;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.requestee;if(e==null)c=void 0;else{var f=e.profile_picture;c={id:e.id,name:e.short_name,full_name:e.name,picture:f==null?null:f.uri,profile_url:e.url}}f=b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentRequestStatus")[a.request_status]));e=a.transfer;e=e==null?[null,""]:[F(e),e.id];var g=a.request_theme;return{amount:a.transaction_amount.amount,amountWithSymbol:a.amount.formatted,requestee:c,requester:d,currentStatus:f,currency:a.amount.currency,creationTime:a.creation_time,groupThreadFBID:a.group_thread_fbid,id:a.id,memoText:a.memo_text,themeID:g==null?null:g.id,transfer:e[0],transferID:e[1],updatedTime:a.updated_time,bubbleView:a.bubble_view,statusDescription:{markup:a.status_description}}}function H(a){var c=G({amount:a.amount,transaction_amount:a.transaction_amount,requester:a.requester,requestee:a.requestee,request_status:a.request_status,request_theme:a.request_theme,id:a.id,memo_text:a.memo_text,transfer:a.transfer,creation_time:a.creation_time,group_thread_fbid:a.group_thread_fbid,updated_time:a.updated_time,bubble_view:a.bubble_view,status_description:a.status_description});a={individualRequests:b("bs_array").map(G,a.individual_requests)};return Object.assign(c,a)}function I(a,c){__p&&__p();var d=c.media,e=d==null?null:d.animated_image,f=d==null?null:d.image,g={};b("bs_array").iter(function(b){var a=b.value;g[b.key]=a==null?null:a.text;return 0},c.properties);var h=c.target,w;if(h==null)w=null;else switch(h.tag|0){case 0:w=D(h[0]);break;case 1:w=E(h[0]);break;case 2:w=F(h[0]);break;case 3:w=H(h[0]);break;case 4:w=A(a,h[0]);break;case 7:w=y(h[0]);break;case 8:w=x(h[0]);break;case 10:w=B(h[0]);break;case 11:w=t(h[0]);break;case 12:w=C(a,h[0]);break;case 13:w=r(h[0]);break;case 14:w=s(h[0]);break;case 15:var G=h[0],I=G.genie_sender;I=I==null?[null,null]:[I.messaging_actor.id,I.messaging_actor.name];var K=I[0];G=G.story_attachment;G=G==null?null:J(a,{legacy_attachment_id:K,story_attachment:{action_links:G.action_links,messaging_attribution:G.messaging_attribution,messenger_call_to_actions:G.messenger_call_to_actions,xma_layout_info:G.xma_layout_info,deduplication_key:G.deduplication_key,description:G.description,media:G.media,properties:G.properties,source:G.source,style_list:G.style_list,title_with_entities:G.title_with_entities,url:G.url,subattachments:[],target:null}});w={genie_id:K,genie_name:I[1],attachment:G};break;case 17:w=l(h[0]);break;case 19:w=q(h[0]);break;case 20:w=m(h[0]);break;case 21:w=n(h[0]);break;case 22:w=z(h[0]);break;case 24:w=k(h[0]);break;case 25:w=j(a,h[0]);break;case 38:w=u(h[0]);break;case 39:w=v(h[0]);break;case 40:w=o(h[0]);break;case 41:w=p(h[0]);break;default:w=h[0]}K=c.target;I=!(K==null)&&K.tag===7?0:null;G=c.description;a=c.source;h=c.title_with_entities;return{description:G==null?null:G.text,media:{animated_image:e==null?null:e.uri,animated_image_size:e==null?{height:null,width:null}:{height:e.height,width:e.width},image:f==null?null:f.uri,image_size:f==null?{height:null,width:null}:{height:f.height,width:f.width},duration:d==null?null:d.playable_duration,playable:d==null?null:d.is_playable,source:d==null?null:d.playable_url},source:a==null?null:a.text,style_list:c.style_list,title:h==null?null:h.text,action_links:i(c.action_links),messaging_attribution:c.messaging_attribution,messenger_ctas:b("bs_array").map(function(a){return{id:a.id,page_id:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.page_id),""),action_title:a.title,action_url:a.action_link,action_open_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),is_high_confidence:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.is_high_confidence),!1),is_mutable_by_server:a.is_mutable_by_server,native_url:a.native_url,is_disabled:a.is_disabled,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button}}},c.messenger_call_to_actions),xma_layout_info:c.xma_layout_info,properties:g,uri:c.url,deduplication_key:c.deduplication_key,target:w,label:I}}function J(a,c){var d=c.story_attachment,e;if(d==null)e=null;else{c={share_id:c.legacy_attachment_id,subattachments:b("bs_array").map(function(b){return I(a,b)},d.subattachments)};d={description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target};e=Object.assign(c,I(a,d))}return{app_attribution:null,attach_type:b("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:e,thumbnail_url:null}}f._getCallToActions=h;f._getActionLinks=i;f._getColor=a;f._getLogo=c;f._getPageTarget=j;f._getGroupCommerceProductItemTarget=k;f._getExternalSongTarget=l;f._getAgentSuggestionItemTarget=m;f._getFundraiserTarget=n;f._getWhatsappFileTarget=o;f._getWhatsAppMessageVideoTarget=p;f._getRetailItemTarget=q;f._getPagesPlatformBookingMessageTarget=r;f._getServicesAppointmentAvailabilityTarget=s;f._getMessageLiveLocationTarget=t;f._getWhatsAppMessageImageTarget=u;f._getWhatsAppMessageAudioTarget=v;f._getBusinessRetailItem=w;f._getMessengerBusinessMessageTarget=x;f._getMessengerRetailPromotionTarget=y;f._getMessengerRetailReceiptTarget=z;f._getPagesPlatformAttachmentTarget=A;f._getPagesPlatformLeadGenInfoTarget=B;f._getQuickInviteTarget=C;f._getCrisisListingTarget=D;f._getMoneyTransferTarget=E;f._getP2PTransferTarget=F;f._getP2PTransferRequestTarget=G;f._getP2PTransferRequestWithIndividualRequests=H;f.transformStoryAttachment=I;f.getExtensibleAttachmentPayload=J}),null);
__d("MessengerAttachmentTransformer.bs",["fbt","bs_array","bs_caml_primitive","MercuryAttachmentType","MessageSharedMediaIDStore.bs","MercuryAttachmentContentType","MessengerStoryAttachmentTransformer.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();if(a.is_malicious)return{app_attribution:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:b("MercuryAttachmentType").ERROR,error_msg:g._("This attachment has been marked as malicious."),message_file_fbid:null,url_shimhash:null,url_skipshim:null};else{var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}e=a.url;return{app_attribution:d,icon_type:a.content_type,metadata:null,name:a.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:e==null?null:e,attach_type:b("MercuryAttachmentType").FILE,error_msg:void 0,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}}function i(a,c,d){__p&&__p();var e=a.chat_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=e[0],g=a.chat_image;g=g==null?null:{width:g.width,height:g.height};var h=a.large_image;h=h==null?[null,null]:[h.uri,{width:h.width,height:h.height}];var i=a.inbox_image;i=i==null?[null,null]:[i.uri,{width:i.width,height:i.height}];var j=a.attribution_app,k;if(j==null)k=null;else{var l=j.square_logo;k={id:j.id,icon_url:l==null?null:l.uri,metadata:a.attribution_metadata,name:j.name}}return{app_attribution:k,attach_type:b("MercuryAttachmentType").VIDEO,name:a.filename,url:a.playable_url,rel:"async",preview_url:f,preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").VIDEO,metadata:{fbid:a.legacy_attachment_id,render_as_sticker:a.video_type==="SPEAKING_STICKER",dimensions:{width:a.original_dimensions.x,height:a.original_dimensions.y},duration:a.playable_duration_in_ms,large_size:h[1],large_preview:h[0],chat_size:g,chat_preview:f,inbox_size:i[1],inbox_preview:i[0],pageid:d?c:void 0},thumbnail_url:f,share:null}}function j(a){var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}return{app_attribution:d,attach_type:b("MercuryAttachmentType").FILE,name:a.filename,url:a.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").MUSIC,metadata:{duration:a.playable_duration_in_ms,isVoicemail:a.is_voicemail?"1":"0",type:a.audio_type==="VOICE_MESSAGE"?"fb_voice_message":a.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}function k(a,c,d){__p&&__p();var e=a.preview_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=a.animated_image;f=f==null?null:f.uri;var g=a.attribution_app,h;if(g==null)h=null;else{var i=g.square_logo;h={id:g.id,icon_url:i==null?null:i.uri,metadata:a.attribution_metadata,name:g.name}}return{app_attribution:h,attach_type:b("MercuryAttachmentType").ANIMATED_IMAGE,name:a.filename,url:f,rel:"async",preview_url:e[0],preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,image:f,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y)),pageid:d?c:void 0},thumbnail_url:f,share:null}}function l(a){__p&&__p();var c=a.original_extension==="gif"?b("MercuryAttachmentType").ANIMATED_IMAGE:a.render_as_sticker?b("MercuryAttachmentType").THIRDPARTYSTICKER:b("MercuryAttachmentType").PHOTO,d=a.preview;d=d==null?[null,null,null]:[d.uri,d.width,d.height];if(c===b("MercuryAttachmentType").PHOTO){var e=a.large_preview;e=e==null?[null,null,null]:[e.uri,e.width,e.height]}else e=[null,null,null];var f=a.attribution_app,g;if(f==null)g=null;else{var h=f.square_logo;g={id:f.id,icon_url:h==null?null:h.uri,metadata:a.attribution_metadata,name:f.name}}h=a.thumbnail;return{app_attribution:g,attach_type:c,name:a.filename,url:null,rel:"async",preview_url:d[0],preview_width:d[1],preview_height:d[2],large_preview_url:e[0],large_preview_width:e[1],large_preview_height:e[2],icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y))},thumbnail_url:h==null?null:h.uri,share:null,photo_encodings:a.photo_encodings}}function m(a,c){__p&&__p();var d=a,e=c;if(a>=c){a=b("bs_caml_primitive").caml_float_min(120,d/2);c=a/(d/2);return[a|0,e/2*c|0]}else{a=b("bs_caml_primitive").caml_float_min(120,e/2);c=a/(e/2);return[d/2*c|0,a|0]}}function n(a){var c=m(a.width,a.height),d=a.pack,e=a.sprite_image,f=a.sprite_image_2x,g=a.padded_sprite_image,h=a.padded_sprite_image_2x;return{app_attribution:null,attach_type:b("MercuryAttachmentType").STICKER,name:null,url:a.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:{accessibilityLabel:a.label,stickerID:a.id,packID:d==null?null:d.id,frameCount:a.frame_count,frameRate:a.frame_rate,framesPerRow:a.frame_count>1?a.frames_per_row:1,framesPerCol:a.frame_count>1?a.frames_per_column:1,height:c[1],width:c[0],spriteURI:e==null?null:e.uri,spriteURI2x:f==null?null:f.uri,paddedSpriteURI:g==null?null:g.uri,paddedSpriteURI2x:h==null?null:h.uri,thumbnail_url:null,share:null}}}function o(a,c){if(c==null)return 0;else return b("MessageSharedMediaIDStore.bs").setMessageIDForAttachmentID(a,c)}function a(a,c,d,e){__p&&__p();var f=[],g=c.extensible_attachment;g==null||f.push(b("MessengerStoryAttachmentTransformer.bs").getExtensibleAttachmentPayload(a,g));g=c.sticker;g==null||f.push(n(g));g=c.blob_attachments;g==null||b("bs_array").iter(function(b){__p&&__p();switch(b.tag|0){case 0:var c=b[0];o(c.legacy_attachment_id,d);f.push(l(c));return 0;case 1:c=b[0];o(c.legacy_attachment_id,d);f.push(k(c,a,e));return 0;case 2:f.push(j(b[0]));return 0;case 3:c=b[0];o(c.legacy_attachment_id,d);f.push(i(c,a,e));return 0;case 4:f.push(h(b[0]));return 0}},g);return f}f._getFilePayload=h;f._getVideoPayload=i;f._getAudioPayload=j;f._getAnimatedImagePayload=k;f._getImagePayload=l;f._getStickerDimensions=m;f._getStickerPayload=n;f._storeAttachmentMapping=o;f.transformAttachment=a}),null);
__d("MessengerGroupAdminType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REGULAR_ADMIN:0,GROUP_CREATOR:1,CHAT_SUPER_ADMIN:2})}),null);
__d("MessengerGroupsSyncStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING_OPT_IN:"PENDING_OPT_IN",OPT_IN:"OPT_IN",PENDING_OPT_OUT:"PENDING_OPT_OUT",OPT_OUT:"OPT_OUT",UNSET:"UNSET",UNSUPPORTED:"UNSUPPORTED"})}),null);
__d("MessengerGroupsSyncStatus.bs",["MessengerGroupsSyncStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"OPT_IN":return b("MessengerGroupsSyncStatus").OPT_IN;case"OPT_OUT":return b("MessengerGroupsSyncStatus").OPT_OUT;case"PENDING_OPT_IN":return b("MessengerGroupsSyncStatus").PENDING_OPT_IN;case"PENDING_OPT_OUT":return b("MessengerGroupsSyncStatus").PENDING_OPT_OUT;case"UNSET":return b("MessengerGroupsSyncStatus").UNSET;case"UNSUPPORTED":return b("MessengerGroupsSyncStatus").UNSUPPORTED;default:return null}}f.fromNullableString=a}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"})}),null);
__d("MNCommerceMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",ICE_BREAKER:"ice_breaker",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",INSTANT_GAMES_LIVE_STREAM:"instant_games_live_stream",INSTANT_GAMES_CUSTOM_UPDATE:"instant_games_custom_update",INSTANT_GAMES_CUSTOM_UPDATE_MEDIA:"instant_games_custom_update_media",INSTANT_GAMES_TOURNAMENT_UPDATE:"instant_games_tournament_update",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",FEEDBACK:"feedback",FORM_PROGRESS:"form_progress",MEDIA:"media",PLACE_CARD:"place_card"})}),null);
__d("MercuryActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD_GROUP_ADMINS:"ma-type:add_group_admins",ADD_PARTICIPANTS:"ma-type:add-participants",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue",BLOCK_STATUS_CHANGED:"ma-type:block-status-changed",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_FLAG:"ma-type:change_flag",CHANGE_FOLDER:"ma-type:change-folder",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",CHANGE_PAGE_FOLLOW_UP_STATUS:"ma-type:change-page-follow-up-status",CHANGE_PINNED_STATUS:"ma-type:change-pinned-status",CHANGE_READ_STATUS:"ma-type:change_read_status",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",CREATE_OMNI_M_SUGGESTIONS:"ma-type:create-omni-m-suggestions",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_MONTAGE_MESSAGES:"ma-type:delete-montage-messages",DELETE_THREAD:"ma-type:delete-thread",DESCRIPTION_CHANGED:"ma-type:description-changed",EVENT_RSVP_CHANGED:"ma-type:event-rsvp-changed",GROUPS_SYNC_METADATA_UPDATE:"ma-type:groups-sync-metadata-update",GROUPS_SYNC_STATUS_CHANGED:"ma-type:groups-sync-status-changed",IS_PIN_PROTECTED:"ma-type:is_pin_protected",JOINABLE_MODE:"ma-type:joinable-mode",LIVE_LOCATION_UPDATE:"ma-type:live-location-update",LOG_MESSAGE:"ma-type:log-message",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",MONTAGE_DIRECT_EXPIRE:"ma-type:montage-direct-expire",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",NEW_MONTAGE_MESSAGE:"ma-type:new-montage-message",PROMOTE_GROUP_ADMINS:"ma-type:promote-group-admins",REACTION_UPDATE:"ma-type:reaction-update",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",REMOVE_MESSAGE:"ma-type:remove-message",REPLACE_MESSAGE:"ma-type:replace-message",SEND_MESSAGE:"ma-type:send-message",UNSUBSCRIBE_STATUS_UPDATE:"ma-type:unsubscribe-status-update",UNWRAP_MESSAGE:"ma-type:unwrap-message",UPDATE_COMM_ITEM_OWNER:"ma-type:update-comm-item-owner",UPDATE_COMM_STATUS:"ma-type:update-comm-status",UPDATE_CONNECTIVITY_STATUS:"ma-type:update-connectivity-status",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UPDATE_JOINABLE_LINK:"ma-type:update-joinable-link",UPDATE_RTC_CALL_DATA:"ma-type:update-rtc-call-data",UPDATE_SNIPPET:"ma-type:update-snippet",UPDATE_THREAD_THEME:"ma-type:update-thread-theme",USER_GENERATED_MESSAGE:"ma-type:user-generated-message"})}),null);
__d("MercuryLogMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"})}),null);
__d("MessageUnsendabilityStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CAN_UNSEND:"can_unsend",DENY_LOG_MESSAGE:"deny_log_message",DENY_TOMBSTONE_MESSAGE:"deny_tombstone_message",DENY_FOR_NON_SENDER:"deny_for_non_sender",DENY_P2P_PAYMENT:"deny_p2p_payment",DENY_STORY_REACTION:"deny_story_reaction",DENY_BLOB_ATTACHMENT:"deny_blob_attachment"})}),null);
__d("MessageUnsendabilityStatus.bs",["MessageUnsendabilityStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"can_unsend":return b("MessageUnsendabilityStatus").CAN_UNSEND;case"deny_blob_attachment":return b("MessageUnsendabilityStatus").DENY_BLOB_ATTACHMENT;case"deny_for_non_sender":return b("MessageUnsendabilityStatus").DENY_FOR_NON_SENDER;case"deny_log_message":return b("MessageUnsendabilityStatus").DENY_LOG_MESSAGE;case"deny_p2p_payment":return b("MessageUnsendabilityStatus").DENY_P2P_PAYMENT;case"deny_story_reaction":return b("MessageUnsendabilityStatus").DENY_STORY_REACTION;case"deny_tombstone_message":return b("MessageUnsendabilityStatus").DENY_TOMBSTONE_MESSAGE;default:return null}}f.fromNullableString=a}),null);
__d("MessagingGenericAdminTextType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALOHA_AUTOCONNECT_INVITED:"aloha_autoconnect_invited",ALOHA_CONTACT_ADDED:"aloha_contact_added",ALOHA_CONTACT_ADDED_TO_ALOHA_PROXY_USER:"aloha_contact_added_to_aloha_proxy_user",ALOHA_CONTACT_REMOVED:"aloha_contact_removed",ALOHA_INVITE_OWNER_ACCEPT:"aloha_invite_owner_accept",ALOHA_INVITE_OWNER_DECLINE:"aloha_invite_owner_decline",ALOHA_MEDIA_ADDED:"aloha_media_added",ALOHA_MEDIA_SENT:"aloha_media_sent",ALOHA_VISUAL_MEDIA_SENT:"aloha_visual_media_sent",ALOHA_OWNER_INVITED:"aloha_owner_invited",ALOHA_PROXY_USER_NAME_SET:"aloha_proxy_user_name_set",ALOHA_PROXY_USER_PROFILE_PHOTO_SET:"aloha_proxy_user_profile_photo_set",ALOHA_WIFI_CREDENTIALS_SET:"aloha_wifi_credentials_set",ALOHA_USER_JOINED_CALL_ON_ALOHA:"aloha_user_joined_call_on_aloha",ALOHA_CALL_ENDED_ON_ALOHA:"aloha_call_ended_on_aloha",ALOHA_CALL_INVITE:"aloha_call_invite",MADE_POLL_VOTE:"made_poll_vote",GROUP_POLL:"group_poll",GENERIC_NEW_CONNECTION:"generic_new_connection",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",THREAD_CUSTOMIZATION_UPSELL:"thread_customization_upsell",PHONE_CONTACT_UPLOAD:"phone_contact_upload",RELATIONSHIP_CREATED:"relationship_created",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",NOTIFY_GROUP_MAYORSHIP:"notify_group_mayorship",PROMPT_GROUP_MAYORSHIP_CUSTOMIZATION:"prompt_group_mayorship_customization",MESSAGE_COUNT_MILESTONE_MESSAGE:"message_count_milestone_message",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",ADMIN_TEXT_WITH_LINK:"admin_text_with_link",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",INSTANT_GAME_BOT_INTRO:"instant_game_bot_intro",INSTANT_GAME_WORLD_CUP_INTRO:"intant_games_world_cup_intro",INSTANT_GAME_CUSTOM_UPDATE_NUX_ADMIN_MESSAGE:"instant_game_custom_update_nux_admin_message",INSTANT_GAME_OFFLINE_MATCH_INTRO:"instant_game_offline_match_intro",INSTANT_GAME_TOURNAMENT_REMINDER:"instant_game_tournament_reminder",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_BOT_BEGIN:"capy_session_bot_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",CAPY_AGENT_DUMPED:"capy_agent_dumped",CAPY_SESSION_WAIT_TIME:"capy_session_wait_time",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MESSENGER_LIVECHAT_PLUGIN_OPEN:"messenger_livechat_plugin_open",MINGLE_MATCH_SUCCESS:"mingle_match_success",MINGLE_PARTICIPANT_MATCHED:"mingle_participant_matched",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",INTERNAL_CAREER_JOBSY_REACHOUT_CONNECTED:"internal_career_jobsy_reachout_connected",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_REFERRAL_CONFIRMED_APPOINTMENT:"pages_platform_referral_confirmed_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_GROUP_DESCRIPTION_UPDATE_V2:"messenger_group_description_update_v2",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",MESSENGER_AD_CONTEXT:"messenger_ad_context",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",MESSENGER_RESPOND_REMINDER_CONFIRMATION:"messenger_respond_reminder_confirmation",MESSENGER_RESPOND_REMINDER:"messenger_respond_reminder",MESSENGER_RESPOND_REMINDER_USER_CANCEL:"messenger_respond_reminder_user_cancel",MESSENGER_RESPOND_REMINDER_CANCEL_SUGGESTION:"messenger_respond_reminder_cancel_suggestion",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request",P2P_CALL_ESCALATED_TO_GROUP_CALL:"p2p_call_escalated_to_group_call",INVITED_TO_ESCALATED_P2P_CALL:"invited_to_escalated_p2p_call",EVENT_UPCOMING:"event_upcoming",PAGES_VISITOR_POST_SEND_MESSAGE_UPSELL:"pages_visitor_post_send_message_upsell",PAGES_LOW_MESSAGE_RESPONSE_RATE:"pages_low_message_response_rate",PAGES_START_CALL:"pages_start_call",PARTIES_INVITE:"parties_invite",PAGES_JOIN_LOYALTY_PROGRAM:"pages_join_loyalty_program",WORK_INVITE_CLAIMED:"work_invite_claimed",WORK_BOT_INSTALLED:"work_bot_installed",WORK_NEW_MULTI_COMPANY_CHAT:"work_new_multi_company_chat",P2P_PAYMENT_REQUEST_REMINDER:"p2p_payment_request_reminder",PHOTO_TAG_BUMP:"photo_tag_bump",MESSENGER_CALL_UPGRADE_LEGACY_CLIENT:"messenger_call_upgrade_legacy_client",DIRECTED_WALL_POST:"directed_wall_post",MESSENGER_CALL_LOG:"messenger_call_log",P2P_PAYMENT_MONEY_RAIN_GAME_ENTRY_POINT:"p2p_payment_money_rain_game_entry_point",MESSENGER_MONTAGE_MENTIONS:"messenger_montage_mentions",PAGES_MESSAGING_BLOCK_WORDS:"pages_messaging_block_words",SHIPPO_TRACKING_UPDATES:"shippo_tracking_updates",NEO_APPROVED_CONNECTION_ADDED:"neo_approved_connection_added",NEO_PARENT_UNLOCK_STICKER:"neo_parent_unlock_sticker",CHANGE_FAVORITE_COLOR:"change_favorite_color",VAULT_NEW_FRIEND:"vault_new_friend",VAULT_DELETE_THREAD:"vault_delete_thread",MARKETPLACE_ITEM_CHANGED:"marketplace_item_changed",MARKETPLACE_SERVICES_INITIAL_MESSAGE_CONTEXT:"marketplace_services_initial_message_context",LINK_CTA:"link_cta",SERVICES_VERTICAL_REDEEMED_REFERRAL:"services_vertical_redeemed_referral",SERVICES_VERTICAL_OPT_OUT_REQUESTS:"services_vertical_opt_out_requests",SERVICES_VERTICAL_OPT_OUT_REQUESTS_SUCCESS:"services_vertical_opt_out_requests_success",SERVICES_VERTICAL_LEAD_GEN_SURVEY:"services_vertical_lead_gen_survey",SERVICES_VERTICAL_LEAD_GEN_SURVEY_EDIT:"services_vertical_lead_gen_survey_edit",PAGES_MARK_AS_PAID:"pages_mark_as_paid",MIGRATED_TO_WORKPLACE:"migrated_to_workplace",MESSENGER_GROUP_EVENT_STATUS_UPDATE:"messenger_group_event_status_update",NEO_APPROVED_USER_REMOVED_FROM_GROUP:"neo_approved_user_removed_from_group",LIVE_CHAT_SUPPORT_AGENT_JOIN:"live_chat_support_agent_join",LIVE_CHAT_SUPPORT_SESSION_BEGIN:"live_chat_support_session_begin",LIVE_CHAT_SUPPORT_SESSION_END:"live_chat_support_session_end",MONTAGE_DIRECT_KEEP:"montage_direct_keep",MONTAGE_DIRECT_EXPIRE:"montage_direct_expire",CHSBOT_CONVERSATION_ENDED:"chsbot_conversation_ended",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_BEGIN:"chsbot_live_chat_support_agent_begin",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_END:"chsbot_live_chat_support_agent_end",CHSBOT_LIVE_PHONE_SUPPORT_AGENT_CALLING:"chsbot_live_phone_support_agent_calling",CHSBOT_SUPPORT_REQUESTED:"chsbot_support_requested",SUPPORT_BOT_SESSION_AGENT_JOIN:"support_bot_session_agent_join",SUPPORT_BOT_SESSION_AGENT_LEAVE:"support_bot_session_agent_leave",SUPPORT_BOT_SESSION_END:"support_bot_session_end",SUPPORT_BOT_CALL_BEGIN:"support_bot_call_begin",SUPPORT_BOT_CALL_END:"support_bot_call_end",MESSENGER_SUBSCRIBE_TO_UPDATES:"messenger_subscribe_to_updates",MESSENGER_UNSUBSCRIBE_FROM_UPDATES:"messenger_unsubscribe_from_updates",MESSENGER_BLOCK_MESSAGES:"messenger_block_messages",MESSENGER_UNBLOCK_MESSAGES:"messenger_unblock_messages",MESSENGER_TURN_ON_MESSAGES:"messenger_turn_on_messages",MESSENGER_TURN_OFF_MESSAGES:"messenger_turn_off_messages",THANKS_FOR_SHARING_MESSAGE_CONTEXT:"thanks_for_sharing_message_context",GROUP_ADMIN_MODEL_NUX:"group_admin_model_nux",MESSENGER_PAYMENT_INCENTIVE_INFO:"messenger_payment_incentive_info",MESSENGER_PLATFORM_PERSONA:"messenger_platform_persona",MESSENGER_GROUP_SYNC_OPT_IN:"messenger_group_sync_opt_in",MESSENGER_GROUP_SYNC_OPT_OUT:"messenger_group_sync_opt_out",MENTORSHIP_MATCH:"mentorship_match",MENTORSHIP_PROGRAM_MATCH:"mentorship_program_match",MENTORSHIP_PROGRAM_LEAVE:"mentorship_program_leave",MENTORSHIP_CURRICULUM_STEP:"mentorship_curriculum_step",PAGES_CALL_DEFLECTION_UPSELL:"pages_call_deflection_upsell",RTC_PHOTOBOOTH:"rtc_photobooth",DELAYED_PHONE_NUMBER_MATCH:"delayed_phone_number_match",AUTOMATIC_TRANSLATION_ENABLED:"automatic_translation_enabled",AUTOMATIC_TRANSLATION_DISABLED:"automatic_translation_disabled",MESSENGER_ROOM_MIGRATION:"messenger_room_migration",PAGE_ADMIN_RESPONSIVENESS_REMINDER:"page_admin_responsiveness_reminder",MESSENGER_GROWTH_GENERIC_ADMIN_TEXT:"messenger_growth_generic_admin_text",MESSENGER_TALK_TO_YOUR_MOM_REMINDER:"messenger_talk_to_your_mom_reminder",PAYMENT_INCENTIVE_RECEIVED:"payment_incentive_received",PAGES_THREAD_REMINDER:"pages_thread_reminder",MESSENGER_PLATFORM_PERSONA_LEAVE_THREAD:"messenger_platform_persona_leave_thread",STORY_REPLY_CONTEXT:"story_reply_context",PAGES_AUTOMATED_RESPONSE_RECOMMENDATION:"pages_automated_response_recommendation",PAGES_AUTOMATED_RESPONSE_SMART_REPLY:"pages_automated_response_smart_reply",PAGES_AUTOMATED_RESPONSE_JOB_APPLICATION:"pages_automated_response_job_APPLICATION",MESSENGER_ICEBREAKER_VOTE_CAST:"messenger_icebreaker_vote_cast",PARTIES_PRESENCE:"parties_presence",PAGE_THREAD_ADMIN_ASSIGNMENT_TEXT:"page_thread_admin_assignment_text",RTC_INSTANT_ACTIVITY_LIFECYCLE:"rtc_instant_activity_lifecycle",SHIBA_MOCK_BOT_RESTART_CHAT_TEXT:"shiba_mock_bot_restart_chat_text",MARKETPLACE_RENTALS_INITIAL_MESSAGE:"marketplace_rentals_initial_message",MARKETPLACE_RENTALS_SENDER_INFO:"marketplace_rentals_sender_info",PAGES_MARK_AS_PAID_NEW:"pages_mark_as_paid_new",MESSENGER_BUSINESS_REPORT_SPAM:"messenger_business_report_spam",MESSENGER_BUSINESS_REPORT_INAPPROPRIATE:"messenger_business_report_inappropriate",MESSENGER_BUSINESS_REPORT_OTHER_ABUSE:"messenger_business_report_other_abuse",FRIENDED_IN_MESSENGER:"friended_in_messenger",MARKETPLACE_REPLY_REMINDER:"marketplace_reply_reminder",VOD_CONVERSATION_SEND_MESSAGE:"vod_conversation_send_message",SENT_UNCONNECTED_MESSAGE:"sent_unconnected_message",MESSENGER_SHARED_WITH:"messenger_shared_with",PAGE_USER_MESSENGER_CONNECTED:"page_user_messenger_connected",FB_ONLY_BOT_TEXT:"fb_only_bot_text",MESSENGER_SCHOOL_CHAT_AUTO_ADD_USER:"messenger_school_chat_auto_add_user",LIVING_ROOM_MESSAGE:"living_room_message",MESSENGER_FRIENDVERSARY_SHARED_TO:"messenger_friendversary_shared_to"})}),null);
__d("MercuryMessageSourceTags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile",WORK_DESKTOP:"source:workchat:desktop"})}),null);
__d("MessagingTagUtils",["MercuryMessageSourceTags","MessagingSourceEnum","MessagingTagConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set(Object.values(b("MessagingSourceEnum")));function a(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return e}return b("MessagingSourceEnum").UNKNOWN}function h(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.split(b("MessagingTagConstants").app_id_root);if(e.length>1)return e[1].trim()}return null}function c(a,c){var d=[],e=h(a);e&&b("MessagingTagConstants").orca_app_ids.indexOf(e)!==-1&&d.push(b("MercuryMessageSourceTags").MESSENGER);b("MessagingTagConstants").chat_sources.indexOf(c)!==-1&&d.push(b("MercuryMessageSourceTags").CHAT);b("MessagingTagConstants").email_source===c&&d.push(b("MercuryMessageSourceTags").EMAIL);b("MessagingTagConstants").mobile_sources.indexOf(c)!==-1&&d.push(b("MercuryMessageSourceTags").MOBILE);a.indexOf(b("MessagingSourceEnum").WORKPLACE_CHAT_DESKTOP)!==-1&&d.push(b("MercuryMessageSourceTags").WORK_DESKTOP);return d}e.exports={getSourceFromTags:a,getSourceTags:c}}),null);
__d("P2PPaymentLogMessageSubtype",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired",REQUEST_REMINDER:"request_reminder",MONEY_RAIN_GAME_ENTRY_POINT:"money_rain_game_entry_point"})}),null);
__d("StoryAttachmentStyle",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",P2P_SERVER_BUBBLE:"p2p_server_bubble",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",GROUPSMASH_MEDIA:"groupsmash_media",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",ELECTION_BALLOT_CONFIG:"election_ballot_config",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",PHOTO_LINK_SHARE_WITH_INSTAGRAM_CONTEXT:"photo_link_share_with_instagram_context",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",COMMENT_PRODUCT_INFO:"comment_product_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",MESSENGER_NATIVE_TEMPLATES:"messenger_native_templates",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",NATIVE_TEMPLATES_FOX:"native_templates_fox",NATIVE_TEMPLATES_KEEP_ATTACHED:"native_templates_keep_attached",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",MESSENGER_GROUP_JOINABLE_LINK_V2:"messenger_group_joinable_link_v2",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",INSTANT_GAMES_LEADERBOARD_UPDATE:"instant_games_leaderboard_update",INSTANT_GAMES_CUSTOM_UPDATE:"instant_games_custom_update",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_DONATION:"crisis_donation",CRISIS_STATUS:"crisis_status",CRISIS_SHARE:"crisis_share",CRISIS_MARK_SAFE:"crisis_mark_safe",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",MFS_TIME_SENSITIVE_ATTACHMENT:"mfs_time_sensitive_attachment",GROUP_TASK:"group_task",CHECKLIST:"checklist",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LIVE_ELECTION_RESULTS:"live_election_results",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FUN_FACT_STACK:"fun_fact_stack",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation",PAGE_IN_COMMENT:"page_in_comment",PAGE_ANNOUNCEMENT:"page_announcement",MESSENGER_PLATFORM_MEDIA_ATTACHMENT:"messenger_platform_media_attachment",SCHEDULED_VIDEO_ANNOUNCEMENT:"scheduled_video_announcement",HSCROLL_ITEM:"hscroll_item",MESSENGER_CALL_LOG:"messenger_call_log",PAGE_REVIEW_UPDATE:"page_review_update",LOYALTY_CARD_OFFER:"loyalty_card_offer",GOODWILL_GRID:"goodwill_grid",TRAVEL_PLAN:"travel_plan",FIND_PLAYERS:"find_players",ASSET3D:"asset3d",MESSENGER_GROUP_PERSONAL_LINK:"messenger_group_personal_link",FREQUENTLY_ASKED_QUESTION:"frequently_asked_question",STORY_LIST:"story_list",GOODWILL_SHARED_CARD:"goodwill_shared_card",PAYMENT_BUBBLE_VIEW:"PAYMENT_BUBBLE_VIEW",POST_TO_EVENT_CREATE:"post_to_event_create",MONTAGE_DIRECT:"montage_direct",NEO_INVITATION:"NEO_INVITATION",NATIVE_TEMPLATES_LINK_SHARE_TEST:"native_templates_link_share_test",GOODWILL_HSCROLL:"goodwill_hscroll",NEO_KID_INITIATE_FRIENDING:"NEO_KID_INITIATE_FRIENDING",NEO_VIDEO_PROMPT:"NEO_VIDEO_PROMPT",EVENT_MICRO_ATTACHMENT:"event_micro_attachment",SAVED_LIST:"saved_list",LOCAL_GUIDE:"local_guide",MEET_UP_EVENT:"meet_up_event",DONATION:"donation",FUNDRAISER_FB_SEEDING_GIFT:"fundraiser_fb_seeding_gift",BREAKING_NEWS:"breaking_news",VIDEO_REQUEST:"video_request",GOODWILL_COLLAGE:"goodwill_collage",LEAD_FORM:"lead_form",LEAD_FORM_USER_INFO:"lead_form_user_info",EVENT_TICKET_ORDER:"event_ticket_order",PROFILE_CHANNEL:"profile_channel",ICE_BREAKER:"ICE_BREAKER",MOVIE:"movie",ALOHA_CALL:"aloha_call",TIP_JAR_PAYMENT:"tip_jar_payment",COMMENT_MESSAGE_INFO:"comment_message_info",CASH_ON_DELIVERY_ORDER:"cash_on_delivery_order",VOTER_REGISTRATION_DRIVE:"voter_registration_drive",VOTING_INFO:"voting_info",LIVING_ROOM:"living_room",ACHIEVEMENT_POST:"achievement_post",M_BIRTHDAY_REMINDER:"m_birthday_reminder",INSIGHTS_CHART:"insights_chart",GROUP_PROACTIVE_FLAGGED_POST_QUEUE:"group_proactive_flagged_post_queue",GROUP_ACCEPT_RULE_TO_UNMUTE:"group_accept_rule_to_unmute",PYI_ATTACHMENTS:"pyi_attachments",SHOW_CLICK_TO_WATCH_TAB:"show_click_to_watch_tab",SHOW_CLICK_TO_WATCH_TAB_V2:"show_click_to_watch_tab_v2",SHOW_CLICK_TO_WATCH_TAB_V3:"show_click_to_watch_tab_v3",SHOW_CLICK_TO_WATCH_TAB_V4:"show_click_to_watch_tab_v4",SHOW_MASKED:"show_masked",SHOW_CONTINUE_WATCHING:"show_continue_watching",WATCH_CLICK_STORY_HEADER_TO_WATCH_TAB:"watch_click_story_header_to_watch_tab",FOX_ALBUM:"fox_album",TOOL_SHARE:"tool_share",PHONE_REMOVED_ACTION_LIST:"phone_removed_action_list",AMP:"amp",LDP_APP_INSTANCE:"ldp_app_instance",PAGE_RECOMMENDATION_V2:"page_recommendation_v2",PLAY_WITH_FRIENDS:"play_with_friends",BLOOD_REQUEST:"blood_request",HIGH_SCHOOL_COMMUNITY_INVITE:"high_school_community_invite",CIVIC_ACTION_POST:"civic_action_post",SCHEDULED_LIVE_VIDEO:"scheduled_live_video",GAMESHOW:"gameshow",GAMESHOW_INVITE:"gameshow_invite",MK_FRIEND_REQUEST:"mk_friend_request",GOODWILL_PHOTO_CIRCLE:"goodwill_photo_circle",SERVICES_APPOINTMENT_AVAILABILITY:"services_appointment_availability",NEO_SOCIAL_INVITATION:"neo_social_invitation",NEO_KID_INVITATION:"neo_kid_invitation",GROUP_SELL_PRODUCT_ITEM_CONDENSED:"group_sell_product_item_condensed",GROUP_SELL_PRODUCT_ITEM_MARK_AS_PENDING:"group_sell_product_item_mark_as_pending",GAMES_VIDEO:"games_video",MOVIE_WITH_SHOWTIMES:"movie_with_showtimes",VERTICAL_MULTI_ATTACHMENT:"vertical_multi_attachment",GROUP_SAFETY_HUB:"group_safety_hub",NEWS_STORYLINE:"news_storyline",EVENT_TICKET_REQUEST:"event_ticket_request",GROUP_APPLICATION:"group_application",MESSAGE_MULTIPLE_LOCATIONS:"message_multiple_locations",TODO_LIST:"todo_list",PERSONAL_REMINDER:"personal_reminder",ARTICLE_MESSAGE:"article_message",PERSONAL_REMINDER_LIST:"personal_reminder_list",GAMES_APP:"games_app",GAMES_APP_SHARED:"games_app_shared",MOBILE_GAME_SHARE:"mobile_game_share",MONTAGE_MEDIA_EFFECT:"montage_media_effect",GROUPS_VOTER_REGISTRATION_DRIVE:"groups_voter_registration_drive",MONTAGE_SHARE:"montage_share",WHATSAPP_MESSAGE_ATTACHMENT:"whatsapp_message_attachment",INSTAGRAM_DIRECT_MESSAGE_ATTACHMENT:"instagram_direct_message_attachment",GROUP_APPLICATION_CTA:"group_application_cta",MENTORSHIP_CURRICULUM_STEP:"mentorship_curriculum_step",SCHEDULED_LIVING_ROOM:"scheduled_living_room",STORY_ADS_SURVEY:"story_ads_survey",MESSENGER_FORM_PROGRESS_ATTACHMENT:"messenger_form_progress_attachment",VIDEO_COMMERCE_INTEREST:"video_commerce_interest",PAGES_COMMERCE_BUYER_INTENT:"pages_commerce_buyer_intent",FLEXIBLE_RATIO_IMAGE_SHARE:"flexible_ratio_image_share",BREAKING_NEWS_STORY_GALLERY:"breaking_news_story_gallery",BRANDING_PLAYABLE_AD:"branding_playable_ad",PAGE_SURFACE_MENU_ITEM:"page_surface_menu_item",CIVIC_PROPOSAL:"civic_proposal",VIDEO_LIVING_ROOM_MESSENGER:"video_living_room_messenger",IMAGE_SHARE_NO_OVERLAY:"image_share_no_overlay",JOIN_GROUP_CTA:"join_group_cta",ASSISTANT_DRAFT_MESSAGE:"assistant_draft_message",ASSISTANT_CONTACT_INFO:"assistant_contact_info",NEO_DRAW_AND_GUESS_GAME_REQUEST:"neo_draw_and_guess_game_request",LOCAL_ASSOCIATION_GROUP_INTRO:"local_association_group_intro",SOCIAL_LEARNING_UNIT_CREATED:"social_learning_unit_created",SOCIAL_LEARNING_UNIT_COMPLETED:"social_learning_unit_completed",GOODWILL_THROWBACK_SINGLE_PHOTO:"goodwill_throwback_single_photo",FAN_FUNDING_SUPPORT_CREATOR_CTA:"fan_funding_support_creator_cta",GOODWILL_VIDEO_SHARED_VIDEO:"goodwill_video_shared_video",INSTANT_GAMES_TOURNAMENT:"instant_games_tournament",SCHEDULED_LIVE_VIDEO_POST:"scheduled_live_video_post",CHAT_COMMAND_RESULT:"chat_command_result"})}),null);
__d("MessengerMessageTransformer.bs",["bs_array","bs_block","bs_string","FBIDCheck","getByPath","MercuryIDs","bs_caml_format","CurrentUser","bs_js_primitive","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","MessageUnsendabilityStatus.bs","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a.__typename==="GroupPollExtensibleMessageAdminText"){var e=a.question,f;if(e==null)f=[{},null];else{var g=Object.assign({},e);Object.assign(g,{total_count:a.total_count,options:b("bs_array").map(function(a){var c=Object.assign({},a);return Object.assign(c,{total_count:a.voters.nodes.length,voters:b("bs_array").map(function(a){return a.id},a.voters.nodes)})},e.options.nodes)});f=[g,e.id]}g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{event_type:b("bs_string").lowercase(a.event_type),question_id:f[1],question_json:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(JSON.stringify(f[0])))}}}else if(a.__typename==="InstantGameUpdateExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{game_id:b("getByPath")(a,["game","id"]),update_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("InstantGameUpdateXMATUpdateType")[a.update_type])),collapsed_text:a.collapsed_text,expanded_text:a.expanded_text,leaderboard_json:a.leaderboard_json,cta_url:b("getByPath")(a,["instant_game_update_data","cta_url"]),cta_title:b("getByPath")(a,["instant_game_update_data","cta_title"]),custom_image_url:b("getByPath")(a,["instant_game_update_data","photo","image","uri"]),template:b("getByPath")(a,["instant_game_update_data","template"])}};else if(a.__typename==="MessengerAdContextAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{ad_url:a.ad_url}};else if(a.__typename==="AdExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{ad_client_token:a.ad_client_token,ad_id:a.ad_id,ad_preferences_link:a.ad_preferences_link,ad_properties:a.ad_properties}};else if(a.__typename==="ThemeColorExtensibleMessageAdminText"||a.__typename==="ThreadIconExtensibleMessageAdminText"||a.__typename==="ThreadNicknameExtensibleMessageAdminText"||a.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||a.__typename==="AddContactExtensibleMessageAdminText"||a.__typename==="RtcCallLogExtensibleMessageAdminText"||a.__typename==="GameScoreExtensibleMessageAdminText"||a.__typename==="MessengerCallLogExtensibleMessageAdminText"||a.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||a.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||a.__typename==="PartiesInviteExtensibleMessageAdminText"||a.__typename==="AppointmentReminderExtensibleMessageAdminText"||a.__typename==="LinkCTAExtensibleMessageAdminText"||a.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||a.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||a.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||a.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText"||a.__typename==="PagesMarkAsPaidExtensibleMessageAdminText"||a.__typename==="PagesMarkAsPaidNewExtensibleMessageAdminText"||a.__typename==="WorkBotInstalledExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:Object.assign({},a)};else if(a.__typename==="LightweightEventCreateExtensibleMessageAdminText"||a.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||a.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||a.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||a.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){e=a.event_reminder;if(e==null)f=void 0;else{var h=e.lightweight_event_creator;h=h==null?void 0:h.id;var i=e.location_page;i=i==null?void 0:i.id;var j=e.timezone_id;j=j==null?void 0:j.timezone;var k=e.location_coordinates;k=k==null?{latitude:void 0,longitude:void 0}:k;var l=e.event_reminder_members;l=l==null?void 0:l.edges;f={event_creator_id:h,event_id:e.id,event_location_id:i,event_location_name:e.location_name,event_seconds_to_notify_before:e.seconds_to_notify_before,event_time:e.time,event_end_time:e.end_time,event_timezone:j,event_title:e.event_title,event_type:e.lightweight_event_type,event_track_rsvp:e.allows_rsvp,latitude:k.latitude,longitude:k.longitude,guest_state_list:l,guest_id:a.guest_id,guest_status:a.guest_status}}g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:f}}else g=a.__typename==="AdReplyMessageAdminText"?{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{ad_url:a.ad_url,should_show_url:a.should_show_url}}:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:void 0};return{log_message_body:d,log_message_data:g,log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function h(a){return b("bs_array").map(function(a){if(a==="p2p_transfer")return b("StoryAttachmentStyle").ORION;else if(a==="p2p_payment_request")return b("StoryAttachmentStyle").ORION_REQUEST;else return a},a)}function i(a){__p&&__p();var c=a.target,d;if(c==null)d=null;else if(c.__typename==="CrisisListing")d=b("bs_block").__(0,[{listing_type:c.listing_type,listing_category:c.listing_category,map_image:c.map_image}]);else if(c.__typename==="MoneyTransfer")d=b("bs_block").__(1,[{sender:c.sender,receiver:c.receiver,transfer_id:c.transfer_id,bubble_view:c.bubble_view}]);else if(c.__typename==="PeerToPeerTransfer")d=b("bs_block").__(2,[{sender:c.sender,receiver_profile:c.receiver_profile,transaction_amount:c.transaction_amount,transfer_status:c.transfer_status,transfer_id:c.transfer_id,completedTime:c.completedTime,updatedTime:c.updatedTime,creationTime:c.creationTime,transfer_context:c.transfer_context,amount_fb_discount:c.amount_fb_discount,funds_availability:c.funds_availability,group_thread_fbid:c.group_thread_fbid,platform_item:c.platform_item,id:c.id,status_description:c.status_description,bubble_view:c.bubble_view,currency_amount:c.currency_amount}]);else if(c.__typename==="PeerToPeerPaymentRequest")d=b("bs_block").__(3,[{amount:c.amount,transaction_amount:c.transaction_amount,requester:c.requester,requestee:c.requestee,request_status:c.request_status,request_theme:c.request_theme,id:c.id,memo_text:c.memo_text,transfer:c.transfer,creation_time:c.creation_time,group_thread_fbid:c.group_thread_fbid,updated_time:c.updated_time,status_description:c.status_description,bubble_view:c.bubble_view,individual_requests:c.individual_requests}]);else if(c.__typename==="PaymentPlatformAttachment")d=b("bs_block").__(4,[{payment_modules_client:c.payment_modules_client,is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list,components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,invoicer_id:c.invoicer_id}]);else if(c.__typename==="MomentsAppMessengerInvitation")d=b("bs_block").__(5,[{snippet:c.snippet}]);else if(c.__typename==="MomentsAppMessengerPhotoRequest")d=b("bs_block").__(6,[{snippet:c.snippet}]);else if(c.__typename==="MessengerRetailPromotion")d=b("bs_block").__(7,[{message:c.message,call_to_actions:c.call_to_actions,promotion_items:c.promotion_items}]);else if(c.__typename==="MessengerBusinessMessage")d=b("bs_block").__(8,[{message:c.message,call_to_actions:c.call_to_actions,business_items:c.business_items}]);else if(c.__typename==="Video")d=b("bs_block").__(9,[{video_id:c.video_id,video_messenger_cta_payload:c.video_messenger_cta_payload}]);else if(c.__typename==="PagesPlatformLeadGenInfo")d=b("bs_block").__(10,[{field_data_list:c.field_data_list}]);else if(c.__typename==="MessageLiveLocation")d=b("bs_block").__(11,[{live_location_id:c.live_location_id,is_expired:c.is_expired,expiration_time:c.expiration_time,sender:c.sender,coordinate:c.coordinate,location_title:c.location_title,sender_destination:c.sender_destination,stop_reason:c.stop_reason}]);else if(c.__typename==="QuickInvite")d=b("bs_block").__(12,[{id:c.id,invite_sender:c.invite_sender,invite_recipient:c.invite_recipient}]);else if(c.__typename==="PagesPlatformBookingMessage")d=b("bs_block").__(13,[{id:c.id,page:c.page,message_bubble_type:c.message_bubble_type,user:c.user,native_component_flow_request:c.native_component_flow_request}]);else if(c.__typename==="ServicesAppointmentAvailability")d=b("bs_block").__(14,[{id:c.id,page:c.page,consumer:c.consumer,formatted_available_time_ranges:c.formatted_available_time_ranges,has_booking_request_created:c.has_booking_request_created}]);else if(c.__typename==="GenieMessage")d=b("bs_block").__(15,[{genie_sender:c.genie_sender,story_attachment:c.story_attachment}]);else if(c.__typename==="Event")d=b("bs_block").__(16,[{eventID:c.eventID,guestStatus:c.guestStatus,canViewerJoin:c.canViewerJoin,timeString:c.timeString,event_place:c.event_place,social_context:c.social_context,watchStatus:c.watchStatus,connection_style:c.connection_style,canViewerWatch:c.canViewerWatch,profile_picture:c.profile_picture,name:c.name,start_timestamp:c.start_timestamp}]);else if(c.__typename==="ExternalSong")d=b("bs_block").__(17,[{application_name:c.application_name,artist_names:c.artist_names,audio_url:c.audio_url,duration_ms:c.duration_ms,music_title:c.music_title}]);else if(c.__typename==="LightweightAction")d=b("bs_block").__(18,[{lwa_state:c.lwa_state,lwa_type:c.lwa_type}]);else if(c.__typename==="MessengerRetailItem")d=b("bs_block").__(19,[{id:c.id,name:c.name,desc:c.desc,thumb_url:c.thumb_url,item_url:c.item_url,source:c.source,image_aspect_ratio:c.image_aspect_ratio,first_metaline:c.first_metaline,second_metaline:c.second_metaline,third_metaline:c.third_metaline,default_action:c.default_action,call_to_actions:c.call_to_actions}]);else if(c.__typename==="AgentItemSuggestion")d=b("bs_block").__(20,[{id:c.id,desc:c.desc,total_cost:c.total_cost,merchant_name:c.merchant_name,target_url:c.target_url,thumb_url:c.thumb_url,raw_amount:c.raw_amount,payment:c.payment,price_amount:c.price_amount,price_currency:c.price_currency,name:c.name}]);else if(c.__typename==="FundraiserPersonToCharity"||c.__typename==="FundraiserPersonForPerson"){var e=c.fundraiser_detailed_progress_text,f=c.fundraiser_subtitle_text,g=c.focused_cover_photo;d=b("bs_block").__(21,[{fundraiserID:c.id,canDonate:c.can_donate,hasViewerDonated:c.has_viewer_donated,fundraiserDetailedProgressText:e==null?null:e.text,fundraiserSubtitleText:f==null?null:f.text,focusedCoverPhoto:g==null?null:{src:g.photo.image.uri,data:{height:g.photo.image.height,width:g.photo.image.width}}}])}else d=c.__typename==="MessengerRetailReceipt"?b("bs_block").__(22,[{account_holder_name:c.account_holder_name,adjustments:c.retail_adjustments,cancellation_url:c.cancellation_url,items:c.retail_items,merchant_name:c.merchant_name,messenger_commerce_bubble_type:c.bubble_type,order_id:c.receipt_id,order_time:c.order_time_for_display,order_url:c.receipt_url,payment_method:c.order_payment_method,receipt_id:c.id,recipient_name:c.recipient_name,shipping_cost:c.shipping_cost,shipping_method:c.shipping_method,status:c.status,structured_address:c.structured_address,subtotal:c.subtotal,total_cost:c.total,total_tax:c.tax,partner_logo:c.partner_log}]):c.__typename==="JobApplication"?b("bs_block").__(23,[{id:c.id}]):c.__typename==="GroupCommerceProductItem"?b("bs_block").__(24,[{group_commerce_item_description:c.group_commerce_item_description,group_commerce_item_seller:c.group_commerce_item_seller,formatted_price:c.formatted_price,group_commerce_item_title:c.group_commerce_item_title,primary_photo:c.primary_photo,url:c.url}]):c.__typename==="Page"?b("bs_block").__(25,[{address:c.address,top_category_name:c.top_category_name,cover_photo:c.cover_photo,location:c.location,name:c.name,overall_star_rating:c.overall_star_rating,id:c.id,price_range_description:c.price_range_description}]):c.__typename==="MessengerEventReminder"?b("bs_block").__(26,[{is_active:c.is_active,event_title:c.event_title,time:c.time}]):c.__typename==="FormProgressStoryAttachment"?b("bs_block").__(46,[{progress:c.progress,url:c.url}]):c.__typename==="AirlineBoardingPassCollectionMessageAttachment"?b("bs_block").__(27,[{tint_color:c.tint_color,logo:c.logo,flight_label:c.flight_label,boarding_time_label:c.boarding_time_label,departure_label:c.departure_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,flight_terminal_label:c.flight_terminal_label,flight_gate_label:c.flight_gate_label,view_boarding_pass_cta_label:c.view_boarding_pass_cta_label,boarding_passes:c.boarding_passes,share_cta_label:c.share_cta_label,message_cta_label:c.message_cta_label,boarding_pass_title_label:c.boarding_pass_title_label,boarding_pass_error_title_label:c.boarding_pass_error_title_label}]):c.__typename==="AirlineCheckInReminderMessageAttachment"?b("bs_block").__(28,[{pnr_number:c.pnr_number,tint_color:c.tint_color,checkin_url:c.checkin_url,booking_number_label:c.booking_number_label,flight_label:c.flight_label,arrival_time_label:c.arrival_time_label,departure_time_label:c.departure_time_label,checkin_cta_label:c.checkin_cta_label,logo:c.logo,flight_infos:c.flight_infos}]):c.__typename==="AirlineUpdateMessageAttachment"?b("bs_block").__(29,[{pnr_number:c.pnr_number,tint_color:c.tint_color,update_type:c.update_type,departure_time_label:c.departure_time_label,arrival_time_label:c.arrival_time_label,booking_number_label:c.booking_number_label,flight_gate_label:c.flight_gate_label,flight_label:c.flight_label,flight_status_label:c.flight_status_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,logo:c.logo,flight_info:c.flight_info,hightlighted_labels:c.hightlighted_labels}]):c.__typename==="AirlineItineraryMessageAttachment"?b("bs_block").__(30,[{confirmation_number:c.confirmation_number,pnr_number:c.pnr_number,tint_color:c.tint_color,formatted_total:c.formatted_total,itemized_price_infos:c.itemized_price_infos,formatted_tax:c.formatted_tax,formatted_base_price:c.formatted_base_price,passenger_infos:c.passenger_infos,logo:c.logo,aircraft_type_label:c.aircraft_type_label,arrival_time_label:c.arrival_time_label,base_price_label:c.base_price_label,booking_number_label:c.booking_number_label,cabin_type_label:c.cabin_type_label,departure_time_label:c.departure_time_label,flight_confirmation_label:c.flight_confirmation_label,flight_date_label:c.flight_date_label,flight_label:c.flight_label,flight_terminal_label:c.flight_terminal_label,itinerary_error_title_label:c.itinerary_error_title_label,itinerary_title_label:c.itinerary_title_label,passenger_name_label:c.passenger_name_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,purchase_summary_label:c.purchase_summary_label,taxes_label:c.taxes_label,total_label:c.total_label,view_details_cta_label:c.view_details_cta_label,itinerary_legs:c.itinerary_legs}]):c.__typename==="MessengerRetailShipmentTrackingEvent"?b("bs_block").__(31,[{id:c.id,shipment:c.shipment,tracking_event_time_for_display:c.tracking_event_time_for_display,shipment_tracking_event_type:c.shipment_tracking_event_type,messenger_commerce_location:c.messenger_commerce_location,tracking_event_description:c.tracking_event_description,bubble_type:c.bubble_type}]):c.__typename==="MessengerRetailShipment"?b("bs_block").__(32,[{id:c.id,tracking_number:c.tracking_number,shipdate_for_display:c.shipdate_for_display,estimated_delivery_time_for_display:c.estimated_delivery_time_for_display,commerce_origin:c.commerce_origin,commerce_destination:c.commerce_destination,retail_carrier:c.retail_carrier,shipment_tracking_events:c.shipment_tracking_events,receipt:c.receipt,recipient:c.recipient,retail_shipment_items:c.retail_shipment_items,bubble_type:c.bubble_type}]):c.__typename==="TicketOrderAttachment"?b("bs_block").__(34,[{ticket_order_id:c.ticket_order_id,ticket_order:c.ticket_order,event:c.event}]):c.__typename==="EventTicketRequest"?b("bs_block").__(35,[{id:c.id,guest_notes:c.guest_notes,event:c.event}]):c.__typename==="LeadGenDeepLinkData"?b("bs_block").__(33,[{id:c.id,cover_image:c.cover_image,headline:c.headline,name:c.name,page:c.page}]):c.__typename==="UserLeadGenInfo"?b("bs_block").__(36,[{id:c.id,field_data:c.field_data}]):c.__typename==="WhatsAppMessageAudio"?b("bs_block").__(39,[{filename:c.filename,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension}]):c.__typename==="IceBreakerMessageAttachment"?b("bs_block").__(37,[{ice_breaker_title:c.ice_breaker_title,ice_breaker_messages:c.ice_breaker_messages,ad_id:c.ad_id}]):c.__typename==="WhatsAppMessageImage"?b("bs_block").__(38,[{preview:c.preview,large_preview:c.large_preview}]):c.__typename==="WhatsAppMessageFile"?b("bs_block").__(40,[{name:c.name,is_malicious:c.is_malicious,uri:c.uri,extension:c.extension,filesize:c.filesize}]):c.__typename==="WhatsAppMessageVideo"?b("bs_block").__(41,[{playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,filename:c.filename,height:c.height,width:c.width}]):c.__typename==="MontageDirect"?b("bs_block").__(42,[{message_state:c.message_state,is_keep_disabled:c.is_keep_disabled,blob_media_type:c.blob_media_type,blob_media:c.blob_media,image:c.image}]):c.__typename==="MBirthdayReminderAttachment"?b("bs_block").__(43,[{friend_id:c.friend_id,confidence:c.confidence,birthday_date:c.birthday_date}]):c.__typename==="MPersonalRemindersList"?b("bs_block").__(44,[{has_more_upcoming_reminders:c.has_more_upcoming_reminders,personal_reminders:c.personal_reminders}]):c.__typename==="MentorshipMessengerCurriculumStep"?b("bs_block").__(45,[{id:c.id,module_name:c.module_name,mentorship_program:c.mentorship_program,program_name:c.program_name,curriculum_message:c.curriculum_message,prompt:c.prompt,step_count:c.step_count,total_steps:c.total_steps}]):c.__typename==="Story"?b("bs_block").__(47,[{title:c.title,description:c.description,actors:c.actors,to:c.to,attachments:c.attachments,attached_story:c.attached_story}]):c.__typename==="User"?b("bs_block").__(48,[{type:c.__typename,id:c.id,name:c.name,profile_picture:c.profile_picture,cover_photo:c.cover_photo,work_info:c.work_info,subscribe_status:c.subscribe_status}]):c.__typename==="Group"?b("bs_block").__(49,[{type:c.__typename,id:c.id,name:c.name,cover_photo:c.cover_photo,visibility:c.visibility,viewer_join_state:c.viewer_join_state,group_general_chat:c.group_general_chat,work_groups_sync_metadata:c.work_groups_sync_metadata}]):null;return{description:a.description,media:a.media,source:a.source,style_list:h(a.style_list),title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:d}}function j(a){var c=i({description:a.description,media:a.media,source:a.source,style_list:a.style_list,title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:a.target});if(c==null)return null;else{a=b("bs_array").map(i,a.subattachments);return Object.assign({subattachments:a},c)}}function k(a){__p&&__p();a=a.blob_attachments;var c=[];a==null||b("bs_array").iter(function(a){__p&&__p();if(a.__typename==="MessageImage"){c.push(b("bs_block").__(0,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,preview:a.preview,large_preview:a.large_preview,thumbnail:a.thumbnail,legacy_attachment_id:a.legacy_attachment_id,original_dimensions:a.original_dimensions,original_extension:a.original_extension,render_as_sticker:a.render_as_sticker,photo_encodings:a.photo_encodings}]));return 0}else if(a.__typename==="MessageAnimatedImage"){c.push(b("bs_block").__(1,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,animated_image:a.animated_image,legacy_attachment_id:a.legacy_attachment_id,preview_image:a.preview_image,original_dimensions:a.original_dimensions}]));return 0}else if(a.__typename==="MessageAudio"){c.push(b("bs_block").__(2,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,is_voicemail:a.is_voicemail,audio_type:a.audio_type,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else if(a.__typename==="MessageVideo"){c.push(b("bs_block").__(3,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,legacy_attachment_id:a.legacy_attachment_id,chat_image:a.chat_image,video_type:a.video_type,original_dimensions:a.original_dimensions,large_image:a.large_image,inbox_image:a.inbox_image}]));return 0}else if(a.__typename==="MessageFile"){c.push(b("bs_block").__(4,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,url:a.url,content_type:a.content_type,is_malicious:a.is_malicious,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else return 0},a);return c}function l(a){__p&&__p();a=a.message;if(a==null)return[];else{var c=[];b("bs_array").iter(function(a){__p&&__p();var b=a.entity;if(b==null)return 0;else{var d=b.id;b=b.thread_key;if(d==null)if(b==null)return 0;else{b=b.thread_fbid;if(b==null)return 0;else{c.push({id:b,offset:a.offset,length:a.length,type:a.__typename});return 0}}else{c.push({id:d,offset:a.offset,length:a.length,type:a.__typename});return 0}}},a.ranges);return c}}function m(a,c,d,e){__p&&__p();var f={};b("bs_array").iter(function(a){f[a.user.id]=a.reaction;return 0},c.message_reactions);var h=b("FBIDCheck").isUser_deprecated(c.message_sender.id),i=h?b("MessagingTagUtils").getSourceFromTags(c.tags_list):b("MessagingSourceEnum").UNKNOWN;h=h?b("MessagingTagUtils").getSourceTags(c.tags_list,i):[];var n=c.message_id,o=c.commerce_message_type,p=c.customizations,q=c.replied_to_message,r;if(q==null)r=null;else{var s=q.message;r=s==null?{status:q.status,message:null}:{status:q.status,message:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").some(m(a,s,d,e)))}}q=c.error_data;s=c.unsent_timestamp_precise;s=!(s==null)&&s!=="0"?b("bs_js_null_undefined").fromOption(b("bs_caml_format").caml_float_of_string(s)):null;o={thread_id:d.thread_id,thread_fbid:d.thread_fbid,other_user_fbid:d.other_user_fbid,action_type:c.__typename==="UserMessage"?b("MercuryActionType").USER_GENERATED_MESSAGE:b("MercuryActionType").LOG_MESSAGE,message_id:n,threading_id:null,offline_threading_id:c.offline_threading_id,author:b("MercuryIDs").getParticipantIDFromUserID(c.message_sender.id),author_email:c.message_sender.email,ephemeral_ttl_mode:c.ttl,timestamp:b("bs_caml_format").caml_float_of_string(c.timestamp_precise),is_unread:c.unread,is_filtered_content:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT)!==-1,is_filtered_content_bh:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_BH)!==-1,is_filtered_content_account:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1,is_filtered_content_quasar:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1,is_filtered_content_invalid_app:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1,is_sponsored:c.is_sponsored,ad_id:c.ad_id,ad_client_token:c.ad_client_token,commerce_message_type:o==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceMessageType")[o])),customizations:p==null?[]:p,source:i,source_tags:h,tags:c.tags_list,is_spoof_warning:c.tags_list.indexOf(b("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||c.tags_list.indexOf(b("MessagingTag").SPAM_SPOOFING)!==-1||c.tags_list.indexOf(b("MessagingTag").SPOOF_WARNING)!==-1,folder:d.folder,platform_xmd:c.platform_xmd_encoded,message_source:c.message_source_data,montage_reply_data:c.montage_reply_data,replied_to_message:r,skip_bump_thread:!1,profile_ranges:l(c),reactions:f,error_data:q==null?null:{description:q.description},removed_timestamp:s,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.message_unsendability_status),has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null};if(c.__typename==="UserMessage"){p=k(c);i=c.extensible_attachment;if(i==null)h=null;else{r=i.story_attachment;h={legacy_attachment_id:i.legacy_attachment_id,story_attachment:r==null?null:j(r)}}q=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:h,blob_attachments:p,sticker:c.sticker},n,e);s=c.message;i=c.page_admin_sender;Object.assign(o,{body:s==null?null:s.text,creator_info:i==null?null:{creatorID:i.admin_id,creatorName:i.name,creatorType:i.sender_type,labelType:i.label_type,pageID:i.page_id,profileURI:i.profile_uri},subject:null,has_attachment:q.length>0,attachments:q,raw_attachments:null,ranges:void 0,meta_ranges:c.meta_ranges.map(function(a){return babelHelpers["extends"]({},a,{data:JSON.parse(a.data)})})})}else if(c.__typename==="VoiceCallMessage"||c.__typename==="VideoCallMessage"){r=c.__typename;a=r==="VoiceCallMessage"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;h=c.message_sender.id;p=d.other_user_fbid;n=p==null?null:b("MercuryIDs").getParticipantIDFromUserID(h===p?b("CurrentUser").getID():p);e=c.answered;Object.assign(o,{log_message_type:a,log_message_data:{answered:e==null?!1:e,caller:b("MercuryIDs").getParticipantIDFromUserID(h),callee:n},log_message_body:c.snippet})}else if(c.__typename==="ThreadNameMessage")Object.assign(o,{log_message_type:b("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:c.thread_name},log_message_body:c.snippet});else if(c.__typename==="ThreadImageMessage"){s=c.image_with_metadata;if(s==null)i=null;else{q=s.preview;i={preview_url:q==null?null:q.uri,metadata:{fbid:s.legacy_attachment_id,dimensions:String(s.original_dimensions.x)+(","+String(s.original_dimensions.y))}}}Object.assign(o,{log_message_type:b("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:i},log_message_body:c.snippet})}else if(c.__typename==="ParticipantsAddedMessage"){r=c.participants_added;Object.assign(o,{log_message_type:b("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:r==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},r)},log_message_body:c.snippet})}else if(c.__typename==="ParticipantLeftMessage"){d=c.participants_removed;Object.assign(o,{log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:d==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},d)},log_message_body:c.snippet})}else if(c.__typename==="GenericAdminTextMessage"){p=c.extensible_message_admin_text;a=c.extensible_message_admin_text_type;p==null?a==null||Object.assign(o,{log_message_body:c.snippet,log_message_data:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[a])),untypedData:void 0},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}):a==null||Object.assign(o,g(p,a,c.snippet))}else if(c.__typename==="P2PPaymentRequestMessage"||c.__typename==="P2PPaymentMessage"){e=c.p2p_sender;h=c.p2p_receiver;n=c.amount;q=c.message_type;Object.assign(o,{log_message_body:c.snippet,log_message_data:{transfer_id:c.transfer_id,senderId:e==null?null:b("MercuryIDs").getParticipantIDFromUserID(e.id),receiverId:h==null?null:b("MercuryIDs").getParticipantIDFromUserID(h.id),formattedAmount:n==null?null:n.formatted,subtype:q==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentLogMessageSubtype")[q]))},log_message_type:b("MercuryLogMessageType").ORION})}return o}f._getGenericAdminTextMessage=g;f._getStyleList=h;f.unsafeCastExtensibleAttachmentWithoutSubattachments=i;f.unsafeCastExtensibleAttachment=j;f.unsafeCastBlobAttachments=k;f._getProfileRanges=l;f.transformMessage=m}),null);
__d("MessengerObjectAssociationType",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({REGULAR_CHAT:null,GENERAL_CHAT:null})}),null);
__d("MessengerThreadCannotReplyReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BLOCKED:"blocked",MESSENGER_BLOCKEE:"messenger_blockee",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author"})}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","URI","FBID.bs","bs_array","bs_string","getByPath","bs_caml_array","ChatConfig","MercuryIDs","bs_belt_Option","bs_caml_format","GenderConst","bs_js_primitive","WorkModeConfig","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","isMessengerDotComURI","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupAdminType","MessengerGroupsSyncStatus.bs","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerObjectAssociationType","MessageThreadUnsendabilityStatus.bs","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function i(a){__p&&__p();a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("WorkModeConfig").is_work_user;e=e?b("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";d=new(b("URI"))(c).setDomain(e)}c=a.profile_picture;e=a.group_general_chat;var f=a.group_events,g=a.group_saves;return{id:a.id,name:a.name,action_link:d,profile_picture:c==null?null:{uri:c.uri},group_general_chat:e==null?null:{id:e.id},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program,group_events:f==null?{count:0}:{count:f.count},group_saves:g==null?{count:0}:{count:g.count}}}}function j(a){a=a.related_page_thread;if(a==null)return null;else{var c=b("bs_array").map(function(a){return{id:a.id,name:a.name,color:a.color}},a.custom_thread_tags.nodes),d=a.page;d=d==null?null:d.id;return{flagged:a.is_flagged,pageID:d,customTags:c}}}function k(a){__p&&__p();var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.edges;return b("bs_array").fold_left(function(a,b){b=b.node.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function l(a){__p&&__p();if(a.length===0)return null;else{var c={};b("bs_array").iter(function(a){var b=a.nickname;if(b==null)return 0;else{c[a.participant_id]=b;return 0}},a);return c}}function m(a){return"#"+b("bs_string").sub(a,2,a.length-2|0)}function n(a){if(!(a==null)&&a!=="")return m(a);else return null}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_js_primitive").nullable_to_opt(b("getByPath")(a,["messages","page_info"]))}function e(a){var c=g._("Facebook User");return{id:"fbid:"+a,fbid:b("FBID.bs").ofStringExn(a),gender:b("GenderConst").UNKNOWN_SINGULAR,href:null,image_src:null,big_image_src:null,name:c,short_name:c,user_type:null,vanity:null,accepts_messenger_user_feedback:!1,is_friend:!1,is_viewer_managing_parent:!1,is_messenger_user:!1,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_verified:!1,is_messenger_platform_bot:!1,is_messenger_ignored:null,is_messenger_blocked:!1,is_facebook_blocked:!0,is_subscribed_to_page_updates:!1,title:null,company_name:null,availability_status:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,timezone:null,wa_group_admins:[],wa_group_creation_time:null,wa_group_participant_count:null,wa_group_participants:[]}}function o(a){__p&&__p();var c=a.profile_picture_url;if(c==null){var d=a.big_image_src;d=d==null?null:d.uri}else d=c;c=a.gender;var e=a.url,f;if(e==null)f=null;else{var g=b("isMessengerDotComURI")(new(b("URI"))(e));f=g?new(b("URI"))(e).getUnqualifiedURI().setDomain("www.facebook.com").setProtocol("https").toString():e}g=a.__typename;var h;switch(g){case"MessengerCallGuestUser":h=b("MercuryParticipantTypes").GUEST;break;case"NeoApprovedUser":h=b("MercuryParticipantTypes").PARENT_APPROVED_USER;break;case"Page":h=b("MercuryParticipantTypes").PAGE;break;case"User":h=b("MercuryParticipantTypes").USER;break;default:h=null}e=a.accepts_messenger_user_feedback;g=a.is_viewer_friend;var i=a.is_viewer_managing_parent,j=a.is_messenger_user,k=a.is_aloha_proxy_confirmed,l=a.is_verified,m=a.is_messenger_platform_bot,n=a.is_message_blocked_by_viewer,o=a.is_blocked_by_viewer,p=a.is_viewer_subscribed_to_message_updates,q=a.work_info,r;if(q==null)r=null;else{var s=q.work_community;s=s==null?null:s.name;q=q.job_title;r=s==null?q==null?null:q:!(q==null)&&q.length!==0?""+(String(q)+(" \u2022 "+(String(s)+""))):s}q=a.work_info;if(q==null)s=null;else{q=q.work_community;q=q==null?null:q.name;var t=a.work_foreign_entity_info;s=!(q==null)&&!(t==null)&&t.type===b("WorkForeignEntityType").FOREIGN?q:null}t=a.work_info;q=a.is_employee;var u=a.work_foreign_entity_info,v=a.wa_group_creation_time,w=a.wa_group_participants,x=a.wa_group_participants,y=a.wa_group_admins;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:f,image_src:d,big_image_src:d,name:a.name,short_name:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.short_name),a.name),user_type:h,vanity:a.username,accepts_messenger_user_feedback:e==null?!1:e,is_friend:g==null?!1:g,is_viewer_managing_parent:i==null?!1:i,is_messenger_user:j==null?!1:j,is_aloha_proxy_confirmed:k==null?!1:k,is_business_enabled:a.__typename==="Page",is_verified:l==null?!1:l,is_messenger_platform_bot:m==null?!1:m,is_messenger_ignored:null,is_messenger_blocked:n==null?!1:n,is_facebook_blocked:o==null?!1:o,is_subscribed_to_page_updates:p==null?!0:p,title:r,company_name:s,availability_status:t==null?null:t.availability_status,employee:q==null?!1:q,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:u==null?null:u,timezone:null,wa_group_creation_time:v==null?null:v,wa_group_participant_count:w==null?null:w.count,wa_group_participants:x==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},x.nodes),wa_group_admins:y==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},y.nodes)}}function p(a){return b("bs_array").map(function(a){return o(a.node.messaging_actor)},a.all_participants.edges)}function q(a,c){__p&&__p();c=c.read_receipts;if(c==null)return void 0;else{var d={};b("bs_array").iter(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0},c.nodes);return b("bs_js_primitive").some(d)}}function r(a){__p&&__p();a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function s(a,c,d){var e=c.messages;if(e==null)return void 0;else return b("bs_array").map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:b("bs_string").lowercase(c.folder)},d)},e.nodes)}function t(a,c,d){__p&&__p();var e=b("bs_array").map(function(c){var d=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),e=c.extensible_attachment,f;if(e==null)f=null;else{var a=e.story_attachment;f={legacy_attachment_id:e.legacy_attachment_id,story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a)}}return{message_id:c.message_id,snippet:c.snippet,message_sender:c.message_sender,timestamp_precise:c.timestamp_precise,commerce_message_type:c.commerce_message_type,extensible_attachment:f,blob_attachments:d,sticker:c.sticker,extensible_message_admin_text:c.extensible_message_admin_text}},c.last_message.nodes);e={thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pinned:c.is_pinned,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,is_page_unresponded_thread:c.is_page_unresponded_thread,cannot_reply_reason:c.cannot_reply_reason,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,page_unsubscribe_status:c.page_unsubscribe_status,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,work_groups_sync_metadata:c.work_groups_sync_metadata,description:c.description,joinable_link:c.joinable_link,linked_mentorship_programs:c.linked_mentorship_programs,theme:c.thread_theme,thread_connectivity_data:c.thread_connectivity_data,thread_unsendability_status:c.thread_unsendability_status};c=e.customization_info;var f;if(c==null)f=[null,null,null];else{var g=c.emoji;f=[n(c.outgoing_bubble_color),g==null?null:{emoji:g},l(c.participant_customizations)]}g=f[0];c=e.theme;if(c==null)g=[g,g,g,[],null];else{var o=c.gradient_colors.length,p=m(c.fallback_color),q=b("FBID.bs").ofString(c.id);q=q!==void 0?b("bs_js_primitive").valFromOption(q):null;if(o>0&&b("ChatConfig").get("chat_tab_has_gradients")){c=b("bs_array").map(m,c.gradient_colors);g=[p,b("bs_caml_array").caml_array_get(c,0),b("bs_caml_array").caml_array_get(c,o-1|0),c,q]}else g=[p,p,p,[],q]}o=e.page_comm_item;c=o==null?[null,null,null,null,null]:[o.comm_status,o.comm_source_id,o.id,o.subtitle,o.comm_item_owners];p=e.last_message.nodes.length!==0?b("bs_js_primitive").some(b("bs_caml_array").caml_array_get(e.last_message.nodes,0)):void 0;q=e.last_read_receipt.nodes.length!==0?b("bs_js_primitive").some(b("bs_caml_array").caml_array_get(e.last_read_receipt.nodes,0)):void 0;if(p!==void 0){o=b("bs_js_primitive").valFromOption(p);a=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:o.extensible_attachment,blob_attachments:o.blob_attachments,sticker:o.sticker},o.message_id,d)}else a=[];if(p!==void 0){o=b("bs_js_primitive").valFromOption(p).extensible_message_admin_text;if(o==null)d=null;else{o=o.game;d=o==null?null:o.id}}else d=null;o=e.cannot_reply_reason;var r=e.thread_key.other_user_id;if(r==null){var s=e.thread_key.thread_fbid;s=s==null?null:s}else s=r;r=b("bs_array").fold_left(function(a,c){a[c.id]=b("MessengerGroupAdminType").REGULAR_ADMIN;return a},{},e.thread_admins);r=b("bs_array").fold_left(function(b,c){var d=c.node.messaging_actor.id;c=c.admin_type;var a=b[d];c==null||a!==void 0&&(b[d]=c);return b},r,e.all_participants.edges);var t=e.thread_queue_metadata,u=e.thread_type,v=e.montage_thread,w=e.image,x=e.thread_key.other_user_id,y=e.thread_queue_metadata,z=e.name,A=e.associated_object,B;if(A==null)B=null;else{A=A.group_general_chat;if(A==null||s==null)B=null;else{A=A.id===s;B=A?b("MessengerObjectAssociationType").GENERAL_CHAT:b("MessengerObjectAssociationType").REGULAR_CHAT}}A=e.rtc_call_data;var C;if(A==null)C=null;else{var D=A.initiator;C={call_state:A.call_state,server_info_data:A.server_info_data,initiator_fbid:D==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(D.id))}}A=e.marketplace_thread_data;if(A==null)D=null;else{var E=A.for_sale_item,F;if(E==null)F=null;else{var G=E.id,H=E.formatted_price,I=E.location,J;if(I==null)J=null;else{I=I.reverse_geocode;J={reverse_geocode:I==null?null:{city:I.city,state:I.state}}}I=E.primary_photo;var K;if(I==null)K=null;else{I=I.image;K=I==null?null:I.uri}F={id:G==null?0:b("bs_caml_format").caml_float_of_string(G),story_id:E.story_id,title:E.group_commerce_item_title,price:H==null?null:H.text,location:J,is_sold:E.is_sold,image_uri:K,url:E.url}}I=A.buyer;G=A.seller;D={for_sale_item:F,buyer_fbid:I==null?0:b("bs_caml_format").caml_float_of_string(I.id),seller_fbid:G==null?0:b("bs_caml_format").caml_float_of_string(G.id)}}H=e.group_approval_queue;J=e.work_groups_sync_metadata;if(J==null)K=null;else{E=J.fb_group;K=E==null?null:E}A=e.linked_mentorship_programs;return{admins:r,approval_mode:e.approval_mode,approval_queue_ids:t==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))},t.approval_requests.nodes),can_reply:o==null,cannot_reply_reason:e.cannot_reply_reason,solid_color:g[0],header_color:g[1],footer_color:g[2],gradient_colors:g[3],theme_id:g[4],thread_connectivity_data:e.thread_connectivity_data,custom_like_icon:f[1],custom_nickname:f[2],customization_enabled:e.customization_enabled,thread_type:u==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingThreadType")[u])),page_unsubscribe_status:e.page_unsubscribe_status,participant_add_mode:e.participant_add_mode_as_string,ephemeral_ttl_mode:e.ephemeral_ttl_mode,folder:b("bs_string").lowercase(e.folder),has_email_participant:o==null?!1:o===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT,has_montage:!(v==null),image_src:w==null?null:w.uri,is_archived:e.has_viewer_archived,is_pinned:e.is_pinned,is_page_follow_up:e.is_page_follow_up,is_page_unresponded_thread:e.is_page_unresponded_thread,is_canonical_user:k(e),is_canonical:!(x==null),is_pin_protected:e.is_pin_protected,is_subscribed:e.is_viewer_subscribed,is_canonical_neo_user:e.is_canonical_neo_user,is_thread_queue_enabled:!(y==null),joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(e.joinable_mode.mode),link:e.joinable_mode.link},last_message_timestamp:p!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_js_primitive").valFromOption(p).timestamp_precise):0,last_message_id:null,last_message_type:p!==void 0?b("bs_js_primitive").valFromOption(p).commerce_message_type:null,last_read_timestamp:q!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_js_primitive").valFromOption(q).timestamp_precise):0,lightweight_event:e.event_reminders.nodes.length===0?null:h(b("bs_caml_array").caml_array_get(e.event_reminders.nodes,0)),lightweight_events:b("bs_array").fold_left(function(a,b){a[b.id]=h(b);return a},{},e.event_reminders.nodes),message_count:e.message_count,mute_until:e.mute_until,name:z==null?"":z,object_association_type:B,other_user_fbid:e.thread_key.other_user_id,page_thread_info:j(e),participants:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.node.messaging_actor.id)},e.all_participants.edges),participants_event_status:e.participants_event_status,read_only:o==null?!1:o===b("MessengerThreadCannotReplyReason").READ_ONLY,recipients_loadable:o==null?!0:o!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE,server_timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),snippet_attachments:a,snippet_sender:p!==void 0?b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(p).message_sender.messaging_actor.id):null,snippet:p!==void 0?b("bs_js_primitive").valFromOption(p).snippet:null,thread_fbid:s,thread_id:"",timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),unread_count:e.unread_count,rtc_call_data:C,marketplace_thread_data:D,associated_object:i(e),reactions_mute_mode:e.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:e.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:c[0],page_comm_item_id:c[2],comm_source_id:c[1],subtitle:c[3],comm_item_owners:c[4],group_approval_queue:H==null?null:H.nodes,game_id:d,admin_model_status:e.admin_model_status_string,groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(e.groups_sync_status_string),work_associated_group:K,description:e.description,joinable_link:e.joinable_link,linked_mentorship_programs:A==null?null:A,thread_unsendability_status:b("MessageThreadUnsendabilityStatus.bs").fromNullableString(e.thread_unsendability_status)}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.getBlockedParticipant=e;f.transformParticipant=o;f.transformParticipants=p;f.transformReadReceipts=q;f.transformDeliveryReceipts=r;f.transformMessages=s;f.transformThread=t}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","bs_array","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){__p&&__p();b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();b("bs_array").iter(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}},c.messaging_actors);c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.fetch=a}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_caml_obj","BanzaiODS","bs_belt_Array","MercuryIDs","CurrentUser","bs_js_primitive","MercuryAssert","ImageSourceType","ImmutableObject","bs_js_null_undefined","ImageSourceRequest","MercuryVanityIDMap.bs","PhotoResizeModeConst","MercuryParticipantTypes","MercuryParticipantsConstants","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=[1],i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(){var a=b("CurrentUser").isWorkUser();if(a)return g._("Workplace User");else return g._("Facebook User")}function o(a){__p&&__p();var c=a.user_type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(){Object.keys(i).forEach(function(a){return b("bs_curry")._2(m,i,a)});return 0}function c(a){__p&&__p();a=a.participants;if(a==null)return 0;else{a.map(function(a){__p&&__p();var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=i[c];if(d!==void 0){i[c]=b("ImmutableObject").set(d,a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}});return 0}}function p(a,c){__p&&__p();var d={},e=[];a.forEach(function(a){var b=i[a];if(b!==void 0){d[a]=b;return 0}else{e.push(a);return 0}});if(e.length===0){c(d);return null}else{var f=[];e.forEach(function(a){__p&&__p();if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h[0].toString();k[g]=[a,c];h[0]=h[0]+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").fetch({ids:f}).then(function(a){__p&&__p();a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){__p&&__p();var d=k[a];if(d!==void 0){var e=d[0],c={};e.forEach(function(b){var a=i[b];if(a!==void 0){c[b]=a;return 0}else return 0});if(Object.keys(c).length===e.length){b("bs_curry")._2(l,k,a);return d[1](c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(){b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}}function d(a,c){b("MercuryAssert").isParticipantID(a);return p([a],function(d){d=d[a];if(d!==void 0)return b("bs_curry")._1(c,d);else return 0})}function q(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(i[a]))}function e(c,d){__p&&__p();var e=[],a=[];c.forEach(function(b){var c=q(b);c==null?e.push(b):a.push(c);return 0});if(e.length!==0){var f=p(e,function(){return b("bs_curry")._1(d,b("bs_belt_Array").keepMap(c,function(a){return b("bs_js_primitive").nullable_to_opt(q(a))}))});return[a,f]}else return[a,null]}function r(a){return b("bs_curry")._2(l,k,a)}function s(a,c,d){new(b("ImageSourceRequest"))().setFBID(b("bs_js_null_undefined").fromOption(b("bs_js_primitive").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a)))).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(c,c).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(function(c){return b("bs_curry")._2(d,a,c)}).send();return 0}function t(a,c,d,e){__p&&__p();b("MercuryAssert").allParticipantIDs(a);var f=[!1],g=p(a,function(e){__p&&__p();var g={},h=function(d,e){g[d]=e;if(!f[0]&&a.length===Object.keys(g).length)return b("bs_curry")._1(c,g);else return 0},j=function(a,c){var d=e[a];d!==void 0&&(e[a]=b("ImmutableObject").set(d,{big_image_src:c.uri}));return h(a,c.uri)};Object.keys(e).forEach(function(a){var c=e[a];if(c!==void 0){var f=d===b("MercuryParticipantsConstants").BIG_IMAGE_SIZE;f=f?b("bs_js_primitive").nullable_to_opt(c.big_image_src):void 0;if(f!==void 0)return h(c.id,f);else return s(a,d,j)}else return s(a,d,j)});return 0});return{remove:function(){f[0]=!0;if(g==null)return 0;else return r(g)}}}function u(a,c,d){return t(a,c,b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,0)}function v(a,c){return u(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(d[a]))}))},0)}function w(a){__p&&__p();if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c!==void 0)return b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(c));else return null}else return null}}f.reset=a;f.addParticipants=c;f.getDefaultName=n;f.get=d;f.getNow=q;f.getMulti=p;f.getMultiEager=e;f.removeCallback=r;f.getBigImageMultiWithSize=t;f.getBigImageMulti=u;f.getOrderedBigImageMulti=v;f.getIDFromVanityOrFBID=w}),null);
__d("EventReminderMembersMap",["CurrentUser","EventReminderConstants","MercuryIDs","MessengerParticipants.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("EventReminderConstants").EventGuestStates,h=b("EventReminderConstants").GuestStates;function a(a){this.$1=a,this.$2=new Map(),this.$3=new Map(),this.$4=new Map(),this.$5=new Map(),this.$6=new Map(),this.$7=new Map()}a.prototype.setAllMembers=function(a,c){__p&&__p();if(!a)return;this.$2.set(c,h.INVITED);var d=[],e=[],f=[],g=[];for(var i in a){d.push(b("MercuryIDs").getParticipantIDFromUserID(i));var j=a[i];i===b("CurrentUser").getID()&&this.$2.set(c,j);var k={fbid:i,guestState:j,imageSrc:""};j===h.GOING?e.push(k):j===h.DECLINED?f.push(k):g.push(k)}j=e.concat(f,g);this.$3.set(c,j);this.$4.set(c,e);this.$7.set(c,!1);this.$8(c,d,j)};a.prototype.setAllMembersOfAssociatedEvent=function(a,c){__p&&__p();if(!a)return;this.$2.set(c,g.INITIAL);var d=[],e=[],f=[],h=[];a.map(function(a){d.push(b("MercuryIDs").getParticipantIDFromUserID(a.participant_id));var i=a.participant_id.toString();a=a.event_status||g.INITIAL;i===b("CurrentUser").getID()&&this.$2.set(c,a);i={fbid:i,guestState:a,imageSrc:""};a===g.GOING?e.push(i):a===g.WATCHED?f.push(i):h.push(i)},this);a=e.concat(f,h);this.$3.set(c,a);this.$4.set(c,e);this.$5.set(c,f);this.$6.set(c,h);this.$7.set(c,!1);this.$8(c,d,a)};a.prototype.clearMembers=function(a){this.$2["delete"](a),this.$3["delete"](a),this.$4["delete"](a),this.$5["delete"](a),this.$6["delete"](a)};a.prototype.getAllMembers=function(a){return this.$3.get(a)};a.prototype.getGoingMembers=function(a){return this.$4.get(a)};a.prototype.getInterestedMembers=function(a){return this.$5.get(a)};a.prototype.getSelfGuestState=function(a){return!this.$2.has(a)?h.INVITED:this.$2.get(a)};a.prototype.getProfileImagesLoaded=function(a){return!!this.$7.get(a)};a.prototype.$8=function(a,c,d){b("MessengerParticipants.bs").getBigImageMulti(c,function(c){for(var e=0;e<d.length;e++)d[e].fbid&&(d[e].imageSrc=c[b("MercuryIDs").getParticipantIDFromUserID(d[e].fbid)]);this.$7.set(a,!0);this.$1.__emitChange()}.bind(this))};e.exports=a}),null);
__d("LightweightEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EVENT:"EVENT",CALL:"CALL",DIRECT_M:"DIRECT_M",M_REMINDER:"M_REMINDER",M_PERSONAL_REMINDER:"M_PERSONAL_REMINDER",SAFETY_LOCATION_SHARE:"SAFETY_LOCATION_SHARE"})}),null);
__d("EventReminderStateStore",["EventReminderActions","EventReminderConstants","EventReminderDispatcher","EventReminderMembersMap","EventRemindersGating","FluxStore","LightweightEventType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("EventReminderConstants").EventPlanType;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("EventReminderDispatcher")),this.$EventReminderStateStore1={},this.$EventReminderStateStore2={},this.$EventReminderStateStore3=new Map(),this.$EventReminderStateStore4=new Map()}a.prototype.getEvent=function(a,b){b=b||a;return this.$EventReminderStateStore1[a]?this.$EventReminderStateStore1[a][b]:void 0};a.prototype.getSingleEventByThreadID=function(a){return this.$EventReminderStateStore2[a]};a.prototype.getEventsByThreadID=function(a){return this.$EventReminderStateStore1[a]};a.prototype.getEventMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return a&&a.getAllMembers(b)};a.prototype.getSelfGuestState=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return a&&a.getSelfGuestState(b)};a.prototype.getNumOfGoingMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a=a&&a.getGoingMembers(b);return a?a.length:0};a.prototype.getNumOfInterestedMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a=a&&a.getInterestedMembers(b);return a?a.length:0};a.prototype.getProfileImagesLoaded=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return!a?!1:a.getProfileImagesLoaded(b)};a.prototype.shouldShowCTA=function(a,b,c){return!1};a.prototype.clearEventMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a&&a.clearMembers(b)};a.prototype.getTransformedEvent=function(event){if(event.room_type==="EVENT"){var a=event.event_place&&event.event_place.name,b=event.event_place&&event.event_place.address&&event.event_place.address.single_line_full_address;return{allowRSVP:!0,eventDate:event.start_timestamp,eventName:event.name,eventLocationName:a,eventLocationAddress:b,eventID:event.id.toString(),eventType:h.ASSOCIATED_EVENT,exists:!0}}return{allowRSVP:!!event.track_rsvp,eventDate:event.event_time,eventName:event.title,eventLocationName:event.location_name,eventLocationAddress:event.location_address,eventID:event.oid.toString(),eventType:event.event_type,exists:!0}};a.prototype.__onDispatch=function(a){__p&&__p();var c=b("EventReminderActions").Types,d=a.threadID,e=a.eventID||a.threadID;this.$EventReminderStateStore3.get(d)||this.$EventReminderStateStore3.set(d,new(b("EventReminderMembersMap"))(this));var f=this.$EventReminderStateStore3.get(d);this.$EventReminderStateStore1[d]===void 0&&(this.$EventReminderStateStore1[d]={});switch(a.type){case c.UPDATE_EVENT_REMINDER:var event=a.event;this.$EventReminderStateStore1[d][e]=this.getTransformedEvent(event);this.$EventReminderStateStore1[d][e].eventType!==b("LightweightEventType").M_REMINDER&&(this.$EventReminderStateStore2[d]=this.$EventReminderStateStore1[d][e]);this.$EventReminderStateStore1[d][e].allowRSVP&&(event.room_type==="EVENT"?f&&f.setAllMembersOfAssociatedEvent(a.participantsEventStatus,e):f&&f.setAllMembers(event.event_members,e));break;case c.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[d][e]&&(this.$EventReminderStateStore1[d][e].exists=!1,this.clearEventMembers(d,e));this.$EventReminderStateStore2[d]&&this.$EventReminderStateStore2[d].eventID===e&&(this.$EventReminderStateStore2[d].exists=!1);break;case c.CLEAR_ALL_REMINDERS:delete this.$EventReminderStateStore1[d];delete this.$EventReminderStateStore2[d];break}this.__emitChange()};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MercuryMessageRenderLocations",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CHAT:"chat",MESSENGER:"messenger",PAGES:"pages"});e.exports=a}),null);
__d("MessengerContactActions.bs",[],(function(a,b,c,d,e,f){"use strict";a={ADD_OWNER:"ADD_OWNER",FREE_CALL:"FREE_CALL",MESSAGE:"MESSAGE",PROFILE:"PROFILE",REMOVE:"REMOVE",REMOVE_OWNER:"REMOVE_OWNER",SELECT:"SELECT"};f.actions=a}),null);
__d("MessengerFormattingUtils",["cx","Newline.react","React","ReactFragment","UnicodeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return{offset:a[1].length,length:b("UnicodeUtils").strlen(a[2])+2,innerOffset:1,innerText:a[2]}}function c(a){return{offset:0,length:b("UnicodeUtils").strlen(a[0]),innerOffset:b("UnicodeUtils").strlen(a[1]),innerText:a[2]}}f={pattern:/([\s_~\'\"(]|^)\*(\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s_~\'\"(]|^)\*(?:\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/,formatter:function(a){return b("React").createElement("b",null,a)},getRangeInMatch:a,recursivelyFormat:!0};g={pattern:/([\s*~\'\"(]|^)_(\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*~\'\"(]|^)_(?:\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/,formatter:function(a){return b("React").createElement("i",null,a)},getRangeInMatch:a,recursivelyFormat:!0};var h={pattern:/([\s*_\'\"(]|^)~(\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_\'\"(]|^)~(?:\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/,formatter:function(a){return b("React").createElement("s",null,a)},getRangeInMatch:a,recursivelyFormat:!0};a={pattern:/([\s*_~\'\"(]|^)`(\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_~\'\"(]|^)`(?:\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/,formatter:function(a){return b("React").createElement("code",null,a)},getRangeInMatch:a,recursivelyFormat:!1};var i={pattern:/(```)([\s\S]+?)```/g,nonCapturingPattern:/(```)([\s\S]+?)```/,formatter:function(a){return b("React").createElement("code",null,a)},getRangeInMatch:c,recursivelyFormat:!1},j=function(a){a={blockquote1:b("React").createElement("blockquote",{className:"_pye"},b("React").createElement("div",{className:"_pyf"}),a),blockquote2:b("React").createElement(b("Newline.react"),null)};return b("ReactFragment").create(a)};c={pattern:/(^>>> ?)((.|(\r\n)|\r|\n)*?\S(.|(\r\n)|\r|\n)*?)^<<<\s*?((\r\n)|\r|\n|$)/gm,nonCapturingPattern:/(^>>> ?)((.|(\r\n)|\r|\n)*?\S(.|(\r\n)|\r|\n)*?)^<<<\s*((\r\n)|\r|\n|$)/m,formatter:j,getRangeInMatch:c,recursivelyFormat:!0};j={pattern:/((^> )(.*\S.*)((\r\n)|\r|\n)?)(^> ?(.*)((\r\n)|\r|\n)?)*/gm,nonCapturingPattern:/(^> (.*\S.*)((\r\n)|\r|\n)?)(^> ?(.*)((\r\n)|\r|\n)?)*/m,formatter:j,getRangeInMatch:function(a){var c=a[0],d=b("UnicodeUtils").strlen(c);a=b("UnicodeUtils").strlen(a[2]);return{offset:0,length:d,innerOffset:a,innerText:c.substring(a,d)}},recursivelyFormat:!0,getAdditionalInnerRanges:function(a){return m(a.innerText,[k]).map(function(b){return babelHelpers["extends"]({},b,{offset:b.offset+a.innerOffset,innerOffset:b.innerOffset+a.innerOffset})})}};var k={pattern:/(^> ?)(.*?$)/gm,nonCapturingPattern:/^> ?(.*?$)/m,formatter:function(a){return a},getRangeInMatch:function(a){return{offset:0,length:b("UnicodeUtils").strlen(a[0]),innerOffset:b("UnicodeUtils").strlen(a[1]),innerText:a[2]}},recursivelyFormat:!0},l=[f,g,h,i,a];b("gkx")("678602")&&(l.push(c),l.push(j));function d(a,b){b===void 0&&(b=l);for(var c=0;c<b.length;c++){var d=b[c].nonCapturingPattern;if(d.test(a))return!0}return!1}function m(a,c){__p&&__p();c===void 0&&(c=l);var d=[];for(var e=0;e<c.length;e++){var f=c[e];f.pattern.lastIndex=0;var g=void 0;while((g=f.pattern.exec(a))!=null){var h=f.getRangeInMatch(g),i=a.substr(0,g.index+h.offset);i=b("UnicodeUtils").strlen(i);i={offset:i,length:h.length,innerText:h.innerText,innerOffset:i+h.innerOffset,formatter:f.formatter,recursivelyFormat:f.recursivelyFormat};h=f.getAdditionalInnerRanges?f.getAdditionalInnerRanges(i):[];d.push(i);d=d.concat(h)}}return d}e.exports={defaultFormatConfigs:l,hasMatch:d,getRanges:m,formatConfigs:{bold:f,italic:g,strikethrough:h,blockcode:i,code:a,blockquote:c,multipleInlineBlockquote:j,singleInlineBlockquote:k}}}),null);
__d("MessengerMathUtils",["UnicodeUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2,h=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,i=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function a(a){return h.test(a)}function c(a){return a.substring(g,a.length-g)}function d(a){i.lastIndex=0;return i.test(a)}function f(a,c){__p&&__p();c===void 0;c=[];i.lastIndex=0;var d;while((d=i.exec(a))!==null){var e=a.substring(0,d.index);e=b("UnicodeUtils").strlen(e);c.push({offset:e,length:b("UnicodeUtils").strlen(d[0]),math:!0})}return c}function j(a){var b=a.length,c=0,d=0;for(var e=0;e<b;e++)a[e]==="\\"?a.slice(e,e+6)==="\\begin"?(c+=2,d=Math.max(d,c)):a.slice(e,e+4)==="\\end"?c-=2:e++:a[e]==="{"?(c++,d=Math.max(d,c)):a[e]==="}"&&c--;return d}e.exports={MATH_DELIMITER_LENGTH:g,isMathBlock:a,hasInlineMath:d,getInlineMathRanges:f,getMathBlockInner:c,getMaxBraceDepth:j}}),null);
__d("messengerIterateEmoji",["MessengerSupportedEmoji","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){__p&&__p();var f=String(a);while(f){a=b("ifRequired")("MessengerSupportedEmojiUtils",function(a){return a.getEmojiMatchObj(f)},function(){return b("MessengerSupportedEmoji").getEmojiMatchObj(f)});if(a){var g=a.offset+a.length,h=f.substr(0,a.is_supported?a.offset:g);d(h);a.is_supported&&c(a.emoji_str,a.emoji_key,e);h=f.substr(g);f=h}else break}d(f)}e.exports=a}),null);
__d("messengerIterateEmoticons",["EmoticonEmojiList"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){var f,g,h;a=String(a);while(a){var i=b("EmoticonEmojiList").regexp.exec(a);if(i)f=i.index+i[1].length,g=a.substr(0,f),i=i[2],f=a.substr(f+i.length),h=b("EmoticonEmojiList").names[i],d(g),c(i,h,e),a=f;else break}d(a)}e.exports=a}),null);
__d("MessengerTextWithEmoticons.react",["cx","fbt","BaseTextWithDecoration.react","EmojiImageURL","EmoticonEmojiList","FBEmojiUtils","Image.react","MessengerHotlikeEmoji.bs","React","messengerIterateEmoji","messengerIterateEmoticons"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;function j(a,c,d,e){var f=e?128:16;a=!a&&!b("MessengerHotlikeEmoji.bs").isMessengerHotlike(d)?b("EmojiImageURL").getFBEmojiURL(b("FBEmojiUtils").resolveAliasFromKey(d)||d,f):b("EmojiImageURL").getMessengerURL(d,f);d=e?"_1ift _5m3a":"_1ift _2560";return b("React").createElement(b("Image.react"),{alt:c,className:d,src:a})}function k(a,c,d){var e=d?128:16,f=b("EmoticonEmojiList").emote2emojis[c],g=f?b("MessengerHotlikeEmoji.bs").isMessengerHotlike(f)?b("EmojiImageURL").getMessengerURL(f,e):b("EmojiImageURL").getFBEmojiURL(f,e):null;if(g){f=String.fromCodePoint(parseInt(f,e));e=d?"_1ift _5m3a":"_1ift _2560";return b("React").createElement(b("Image.react"),{alt:f,className:e,src:g})}d=h._("{emoticonName} emoticon",[h._param("emoticonName",c)]);return b("React").createElement("span",{"aria-label":d},a)}function l(a,b,c){return function(d,e,f){var g=function(c,d,a){e(b(c,d,a))};a(String(d),g,f,c)}}i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.shouldComponentUpdate=function(a){return a.text!==this.props.text};a.prototype.render=function(){var a=[l(b("messengerIterateEmoji"),j.bind(null,!!this.props.forceMessengerEmoji),this.props.customSize),l(b("messengerIterateEmoticons"),k,this.props.customSize)];return b("React").createElement(b("BaseTextWithDecoration.react"),babelHelpers["extends"]({},this.props,{text:this.props.text,decorators:a}))};function a(){i.apply(this,arguments)}a.propTypes={text:c.string,customSize:c.bool,forceMessengerEmoji:c.bool};e.exports=a}),null);
__d("MessengerTextWithEntities.react",["BaseTextWithEntities.react","Link.react","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function h(a){return a.replace(/<3\b|&hearts;/g,"\u2665")}c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){if(this.props.renderEmoticons||this.props.renderEmoji)return b("React").createElement(b("MessengerTextWithEmoticons.react"),{text:a,customSize:this.props.customSize,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji});else return h(a)}.bind(this),this.$2=function(a,c){if(this.props.interpolator)return this.props.interpolator(a,c);else return b("React").createElement(b("Link.react"),{href:c.entity},a)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{aggregatedRanges:this.props.aggregatedRanges,imageRanges:this.props.imageRanges,metaRanges:this.props.metaRanges,rangeRenderer:this.$2,ranges:this.props.ranges,text:this.props.text,textRenderer:this.$1}))};e.exports=a}),null);
__d("P2PTriggersUtils",["P2PGKValues"],(function(a,b,c,d,e,f){var g=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/;a={canSeeTriggers:function(a){return!b("P2PGKValues").P2PEnabled?!1:!0},getMatches:function(a){return a.match(g)}};e.exports=a}),null);
__d("RedditLinkMatcher",[],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("(^|\\s)(\\/[ru]\\/\\w{1,21})(?:\\b)","i");a=function(a){a=g.exec(a);return a===null?null:{lnk:a[2],idx:a.index+a[1].length}};b=function(a){return g.exec(a)!==null};c={match:a,isMatch:b};e.exports=c}),null);
__d("RedditLinkRanges",["RedditLinkMatcher","UnicodeUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={REDDIT_PREFIX:"https://reddit.com",get:function(a,c){__p&&__p();c===void 0&&(c=0);var d=a.substr(c),e=b("RedditLinkMatcher").match(d);if(!e)return[];var f=e.lnk;e=e.idx;d=b("UnicodeUtils").strlen(d.substr(0,e));c+=d;e="";switch(f[1].toLowerCase()){case"r":e=this.REDDIT_PREFIX+f;break;case"u":e=this.REDDIT_PREFIX+f;break;default:return[]}d=f.length;f=[{offset:c,length:d,entity:{url:e}}];return f.concat(this.get(a,c+d))}};e.exports=a}),null);
__d("TextWithEntitiesMetadataType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:0,CONCEPT:1,INTENT:2})}),null);
__d("getURLRanges",["UnicodeUtils","URI","URLScraper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){__p&&__p();c===void 0&&(c=0);var d=a.substr(c),e=b("URLScraper").match(d);if(!e)return[];var f=e;/^[a-z][a-z0-9\-+.]+:\/\//i.test(e)||(f="http://"+e);if(!b("URI").isValidURI(f))return[];var h=d.indexOf(e);d=b("UnicodeUtils").strlen(d.substr(0,h));c+=d;h=e.length;d=[{offset:c,length:e.length,entity:{url:f}}];return d.concat(g(a,c+h))}e.exports=g}),null);
__d("shouldAddMRefParam",["isFacebookURI"],(function(a,b,c,d,e,f){a=function(a){if(!b("isFacebookURI")(a)||a.getFragment())return!1;return/^\/events\//.test(a.getPath())?!0:!1};e.exports=a}),null);
__d("MercuryMessageBody.react",["cx","fbt","BootloadedComponent.react","CurrentUser","DateConsts","EmojiRenderer","EmoticonEmojiList","EmoticonsList","EventRemindersGating","EventReminderStateStore","JSResource","Link.react","LinkRanges","MercuryIDs","MercuryMessageRenderLocations","MessengerContactActions.bs","MessengerFormattingUtils","MessengerMathUtils","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","P2PTriggersUtils","React","RedditLinkMatcher","RedditLinkRanges","TextWithEntities.react","TextWithEntitiesMetadataType","UnicodeUtils","URI","URLMatcher","emptyFunction","getURLRanges","gkx","ifRequired","requireWeak","shouldAddMRefParam"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("LinkRanges").module,k=b("MessengerContactActions.bs").actions;c=b("React").PropTypes;var l=function(){l=b("emptyFunction"),b("ifRequired")("ChatAppActions",function(a){a.setInitialDisplayDone()})};d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.interpolator=function(a,c){__p&&__p();if(c.className)return b("React").createElement("span",{className:c.className},a);if(c.math)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null,a),body:this.$4(a),fallbackBody:a,inline:!0,stripDelimiters:!0,className:"_1e4d _1e4e"});if(c.id){var d={};!b("CurrentUser").isWorkUser()&&!this.props.isFromViewer&&this.props.threadCustomColor&&(d.color=this.props.threadCustomColor);var e=this.props.onContactSelect,f=this.props.threadID?b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)===c.id:!1,g=new(b("URI"))("/ajax/hovercard/user.php").setQueryData({id:c.id}),h=b("gkx")("678279");g=b("React").createElement(b("Link.react"),{className:"_ih-"+(b("CurrentUser").isWorkUser()&&c.id===b("CurrentUser").getID()?" _1zle":""),href:f?"#":c.url,"data-hovercard":h?g:null,style:d,onClick:e&&!f?function(a){this.$3(e,c,a)}.bind(this):b("emptyFunction")},a);b("gkx")("678278")&&!f&&e&&!h&&(typeof a==="string"&&(c.contactName=a&&a.replace("@","")),g=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerAvatarActions.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:g,avatar:g,contact:c,showSendMessageItem:!0,onAction:this.props.onContactSelect}));return g}if(c.formatter)if(c.recursivelyFormat){d=this.renderBody(c.innerText,!0,c.innerOffset);return c.formatter(d)}else return c.formatter(c.innerText);if(c.entity&&c.entity.url){f=new(b("URI"))(c.entity.url.replace(/#+$/,""));b("shouldAddMRefParam")(f)&&f.addQueryData({__mref:"mb"});h=f.toString();if(b("URI").isValidURI(h))return b("React").createElement(b("Link.react"),{href:{url:h,shimhash:c.entity.shimhash},s:c.entity.s,target:"_blank"},a);else return a}if(!c.entity){g=typeof c.type==="number"?c.type:b("TextWithEntitiesMetadataType")[c.type];switch(g){case b("TextWithEntitiesMetadataType").NONE:return b("React").createElement("span",{className:"_2y9",title:JSON.stringify(c.data)},a);case b("TextWithEntitiesMetadataType").CONCEPT:return this.renderConceptMetadata(a,c.data);case b("TextWithEntitiesMetadataType").INTENT:return this.renderIntentMetadata(a,c.data);default:return a}}return a}.bind(this),this.state=this.parseMessageBody(a)}a.prototype.UNSAFE_componentWillReceiveProps=function(a){(this.props.body!==a.body||this.props.metaRanges!==a.metaRanges||this.props.ranges!==a.ranges)&&this.setState(this.parseMessageBody(a))};a.prototype.parseMessageBody=function(a){__p&&__p();var c=(a.body||"").replace(/\s+$/,""),d=this.$1(a.metaRanges||[]);d={normalizedBody:c,isEncrypted:!1,isMathBlock:!1,isRichText:!1,ranges:[],filteredMetaRanges:d};if(c.length===0)return d;if(c.startsWith("?OTR")){d.isEncrypted=!0;return d}if(b("MessengerMathUtils").isMathBlock(c)){d.isMathBlock=!0;return d}var e=a.ranges,f=a.metaRanges;f=e&&e.length||f&&f.length||b("EmoticonsList").noncapturingRegexp.test(c)||b("EmojiRenderer").containsEmoji(c)||b("URLMatcher").match(c)||j&&j.hasMatch(c)||b("RedditLinkMatcher").isMatch(c)||this.$2(c,a)||b("MessengerSupportedEmojiUtils").containsEmoji(c)||b("EmoticonEmojiList").noncapturingRegexp.test(c)||b("MessengerFormattingUtils").hasMatch(c)||b("MessengerMathUtils").hasInlineMath(c);if(!f)return d;d.isRichText=!0;e&&e.length===1&&e[0].className==="__in"&&(e=b("getURLRanges")(c).concat(e));e=e||[];e=e.concat(b("getURLRanges")(c));j&&(e=e.concat(j.get(c)));e=e.concat(b("RedditLinkRanges").get(c));e=e.concat(b("MessengerFormattingUtils").getRanges(c));e=e.concat(b("MessengerMathUtils").getInlineMathRanges(c));d.ranges=e.filter(function(a){return a!=void 0});return d};a.prototype.hasFormatting=function(){return this.state.isRichText||this.state.isMathBlock||this.state.isEncrypted};a.prototype.$3=function(a,c,d){b("gkx")("678278")?d.preventDefault():a(k.MESSAGE,c,d)};a.prototype.$4=function(a){if(this.props.isFromViewer)return"\\color{#fff}{"+b("MessengerMathUtils").getMathBlockInner(a)+"}";else return b("MessengerMathUtils").getMathBlockInner(a)};a.prototype.renderConceptMetadata=function(a,b){if(!b)return a;return b.intent_name||b.name?this.renderIntentMetadata(a,b):a};a.prototype.renderIntentMetadata=function(a,c){__p&&__p();if(!c)return a;var d=c.intent_name||c.name;switch(d){case"request_time":return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ServicesVerticalRequestTimeTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null,a),data:c,text:a,threadID:this.props.threadID});case"timestamp":if(this.$5(c.value)&&b("EventRemindersGating").shouldShowTriggerWords)if(this.props.renderLocation===b("MercuryMessageRenderLocations").CHAT)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null,a),data:c,text:a,threadID:this.props.threadID});else if(this.props.renderLocation===b("MercuryMessageRenderLocations").MESSENGER)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null,a),data:c,text:a,threadID:this.props.threadID});return a;default:return a}};a.prototype.renderIntentCTA=function(a){__p&&__p();if(a){var c=a.intent_name||a.name;switch(c){case"request_time":return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ServicesRequestTimeIntentCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null),data:a,isFromViewer:this.props.isFromViewer,threadID:this.props.threadID});case"create_event":b("requireWeak")("EventReminderActionsLogger",function(a){a.logTriggerOnTriggerCTA()});c=this.props.threadID;var d=c&&this.$5(a.timestamp)&&b("EventReminderStateStore").shouldShowCTA(c,a.confidence);if(!d)return null;if(this.props.renderLocation===b("MercuryMessageRenderLocations").CHAT)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null),data:a,threadID:c});else if(this.props.renderLocation===b("MercuryMessageRenderLocations").MESSENGER)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null),data:a,threadID:c})}}return null};a.prototype.renderCTAs=function(a){var c=null;if(a.length>0){a=a[0]||{};var d=typeof a.type==="number"?a.type:b("TextWithEntitiesMetadataType")[a.type];switch(d){case b("TextWithEntitiesMetadataType").CONCEPT:case b("TextWithEntitiesMetadataType").INTENT:c=this.renderIntentCTA(a.data);break}}return c};a.prototype.renderBody=function(a,c,d){__p&&__p();c===void 0&&(c=!1);d===void 0&&(d=0);var e=this.state,f=e.isRichText,g=e.ranges;e=e.filteredMetaRanges;var h=b("UnicodeUtils").strlen(a);if(!f)return b("React").createElement("span",{className:this.props.className},a);c&&(g=g.filter(function(a){return a.offset>=d&&a.offset+a.length<=d+h}).map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset-d})}),e=e.filter(function(a){return a.offset>=d&&a.offset+a.length<=d+h}).map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset-d})}));f={className:this.props.className,interpolator:this.interpolator,metaRanges:e,ranges:g,renderEmoji:!0,renderEmoticons:!0,text:a};if(this.$2(a)){e=b("React").createElement(b("TextWithEntities.react"),f);return b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:e,bootloadLoader:b("JSResource")("TextWithEntitiesAndP2P.react").__setRef("MercuryMessageBody.react")},f,{getMessengerEmote:this.$6,isSupportedEmoji:this.$7,threadID:this.props.threadID}))}g=b("React").createElement(b("MessengerTextWithEntities.react"),f);if(c)return g;a=this.renderCTAs(this.props.metaRanges||[]);return!a?g:b("React").createElement("span",null,g,a)};a.prototype.render=function(){__p&&__p();var a=this.state,c=a.normalizedBody,d=a.isEncrypted;a=a.isMathBlock;if(c.length===0)return null;l();if(this.props.plainText)return b("React").createElement("span",null,c);else if(d)return b("React").createElement("span",{className:"_89h"},h._("[encrypted message]"));else if(a)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("div",null,c),body:this.$4(c),fallbackBody:c,stripDelimiters:!0,className:"_1e4d"});else return this.renderBody(c)};a.prototype.$7=function(a){return b("MessengerSupportedEmojiUtils").isSupportedEmojiKey(a)};a.prototype.$6=function(a){a=b("EmoticonEmojiList").emote2emojis[a];return b("MessengerSupportedEmojiUtils").isSupportedEmojiKey(a)?a:null};a.prototype.$5=function(a){a=new Date(a*b("DateConsts").MS_PER_SEC);var c=new Date(Date.now()+5*b("DateConsts").MS_PER_MIN),d=new Date(new Date().setFullYear(new Date().getFullYear()+1));return a>c&&a<d};a.prototype.$1=function(a){var b=a.filter(function(a){return a.data&&(a.data.intent_name==="create_event"||a.data.name==="create_event")});return b.length!==0?b:a};a.prototype.$2=function(a,c){c===void 0&&(c=this.props);return!!(c.threadID&&b("P2PTriggersUtils").canSeeTriggers(c.threadID)&&b("P2PTriggersUtils").getMatches(a))};a.propTypes={body:c.string,customLike:c.object,isFromViewer:c.bool,metaRanges:c.array,ranges:c.array,threadCustomColor:c.string,threadID:c.string,onContactSelect:c.func,renderLocation:c.oneOf([b("MercuryMessageRenderLocations").CHAT,b("MercuryMessageRenderLocations").MESSENGER,b("MercuryMessageRenderLocations").PAGES])};e.exports=a}),null);
__d("AbstractBadge.react",["cx","invariant","React","formatNumber","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;function j(a){return parseInt(a,10)===a}i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){"use strict";__p&&__p();var a=this.props,c=a.count,d=a.maxcount,e=a.label;a=babelHelpers.objectWithoutProperties(a,["count","maxcount","label"]);j(c)||h(0,186);j(d)||h(0,187);var f="_51lp"+(c>d?" _51lr":"")+(!this.props.allowZero&&c===0?" hidden_elem":"");e=e?b("React").createElement("span",{className:"accessible_elem","aria-hidden":c?"false":"true"},"\xa0",e):null;c=b("formatNumber").withMaxLimit(c,d);e!==null&&(c=b("React").createElement("span",{"aria-hidden":"true"},c));return b("React").createElement("span",babelHelpers["extends"]({},a,{className:b("joinClasses")(this.props.className,f)}),c,e)};function a(){"use strict";i.apply(this,arguments)}a.propTypes={className:c.string,count:c.number.isRequired,maxcount:c.number,label:c.string};a.defaultProps={maxcount:20};e.exports=a}),null);
__d("XUIBadge.react",["cx","AbstractBadge.react","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props.type;a="_5ugh"+(a==="regular"?" _5ugf":"")+(a==="special"?" _5ugg":"");return b("React").createElement(b("AbstractBadge.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,a),type:null}))};function a(){"use strict";h.apply(this,arguments)}a.propTypes={type:c.oneOf(["regular","special"]),allowZero:c.bool};a.defaultProps={type:"regular"};e.exports=a}),null);
__d("DraftEffectsPerSite",["fbt","Bootloader"],(function(a,b,c,d,e,f,g){"use strict";a={handleExtensionCausedError:function(){b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){a.show(g._("An extension installed in your web browser is preventing text entry from working correctly. Please disable any extensions and reload the page."),g._("Text Editing Is Limited"),null,{width:600})},"DraftEffectsPerSite")}};e.exports=a}),null);
__d("XEventReminderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/eventreminder/",{event_reminder_id:{type:"Int",required:!0}})}),null);
__d("EventReminderRequestHelper",["AsyncRequest","EventReminderActions","XEventReminderController"],(function(a,b,c,d,e,f){"use strict";a={fetchEventReminder:function(a,c,d){var e=b("XEventReminderController").getURIBuilder().setInt("event_reminder_id",c);new(b("AsyncRequest"))(e.getURI()).setHandler(function(e){e.payload&&(b("EventReminderActions").updateEventReminder(a,e.payload,c),d())}).send()}};e.exports=a}),null);
__d("RTWebExperiments",["FBRTCConfig","qex"],(function(a,b,c,d,e,f){"use strict";a={enableCallCollisionFix:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("qex")._("771668")},passOfferWithWindowMessages:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("qex")._("771669")},useMQTT:function(){return b("qex")._("777550")}};e.exports=a}),null);
__d("FBRTCLocalMessageQueue",["CacheStorage","FBRTCConstants","RTWebExperiments"],(function(a,b,c,d,e,f){__p&&__p();var g="localstorage",h="RTC_",i="offer",j="offer_msg",k="data_",l=30*1e3,m=new Map(),n={STORAGE_TYPE:g,PREFIX:h,OFFER_KEY:i,OFFER_SUFFIX:j,DATA_KEY_PREFIX:k,CACHE_LIFE:l,clearQueue:function(a){m.set(a,new Map())},writePeerOfferToStorage:function(a,b){a=n.getStorage(a,j);n._storeData(a,i,b)},getPeerOfferFromStorage:function(a){a=n.getStorage(a,j);return n._getData(a,i)},clearPeerOfferFromStorage:function(a){a=n.getStorage(a,j);a.remove(i)},pluckOffer:function(a){if(b("RTWebExperiments").passOfferWithWindowMessages()){var c=m.get(a)||new Map(),d=c.get(i);c["delete"](i);return d||null}else{c=n.getPeerOfferFromStorage(a);n.clearPeerOfferFromStorage(a);return c||null}},enqueueMessage:function(a,c,d){c=k+c.toString();var e=m.get(a)||new Map();d.msg_type===b("FBRTCConstants").PayloadType.OFFER&&(c=i);e.set(c,d);m.set(a,e)},drainQueue:function(a,b){__p&&__p();var c=m.get(a)||new Map();for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];b(f)}m.set(a,new Map())},_storeData:function(a,b,c){c={__t:Date.now(),__d:c};a.set(b,c)},_getData:function(a,b){var c=a.get(b);if(c&&n._isValid(c))return c.__d;else c&&a.remove(b);return null},_getAndRemoveData:function(a,b){var c=n._getData(a,b);if(c!==null){a.remove(b);return c}return null},_isValid:function(a){return Date.now()-a.__t<l},getStorage:function(a,c){return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")}};e.exports=n}),null);
__d("FBRTCExperimentName",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USE_H264:"rtc_browser_use_h264",USE_VP9:"rtc_browser_use_vp9",ENABLE_SCREEN_SHARING:"webrtc_enable_screen_sharing",INCOMING_CALL_EXPERIMENTS:"rtweb_incoming_call_experiments",SHOW_CHAT_WHILE_IN_CALL:"rtc_www_show_chat_while_in_call",MW_AUDIO_FALLBACK:"rtc_www_mw_audio_fallback",LARGER_SELF_VIEW:"rtc_www_larger_self_view",VIDEO_CHAT_FILTERS:"rtc_www_video_chat_filters",P2P_END_CALL_SCREEN:"rtc_www_p2p_end_call_screen",CALL_UNIFICATION:"rtc_www_call_unification",TURNOFF_CAMERA_WHEN_FACEMUTE:"turnoff_camera_when_facemute",FIXED_HEIGHT_GRID_VIEW:"rtc_www_fixed_height_grid_view",DIVE_BAR_RECENT_CALLS:"rtc_www_dive_bar_recent_calls",FB_PROFILE_RTC_BUTTONS:"rt_web_fb_profile_rtc_buttons",MW_VIDEO_QUALITY:"rtc_www_mw_video_quality",MEDIA_QUALITY_H2_2018:"rtc_www_media_quality_h2_2018"})}),null);
__d("FBRTCExperiment",["FBRTCExperimentName","FBRTCExperimentsConfig","QE2Logger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.gen=function(a){var c={params:{},auto_exposure:!1,in_experiment:!1};c=b("FBRTCExperimentsConfig")[a]||c;a=new g(a,c);return a};g.getIncomingCallExperiments=function(){return g.gen(b("FBRTCExperimentName").INCOMING_CALL_EXPERIMENTS)};g.getMediaQualityExperiments=function(){return g.gen(b("FBRTCExperimentName").MEDIA_QUALITY_H2_2018)};function g(a,b){this.$1=a,this.$2=b}g.prototype.$3=function(){this.$2.auto_exposure&&this.logExposure()};g.prototype.logExposure=function(){this.$2.in_experiment&&b("QE2Logger").logExposureForUser(this.$1)};g.prototype.getParam=function(a,b){if(this.$2.in_experiment){this.$3();a=this.$2.params[a];if(a!==void 0)return String(a)}return b};g.prototype.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==void 0)return parseInt(this.$2.params[a],10)}return b};g.prototype.getBool=function(a,b){var c=this.$2.params;if(this.$2.in_experiment){this.$3();if(c[a]!==void 0)return c[a]==="1"||c[a]===1||c[a]==="true"||c[a]===!0}return b};e.exports=g}),null);
__d("CollabMinimumChromeVersion",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCREEN_SHARE_CALL:65,VIDEO_CALL:48})}),null);
__d("FBRTCSupport",["CollabMinimumChromeVersion","RTCConfig","UserAgent"],(function(a,b,c,d,e,f){var g={isWebrtcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Firefox >= 25")||b("UserAgent").isBrowser("Edge >= 15.15042")||b("UserAgent").isBrowser("Opera >= 20")},isGroupCallWebtrcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Opera >= 20")},isCollabSupported:function(){return g.isWebrtcSupported()&&(!!b("RTCConfig").CollabWhitelistedBrowserGK||b("UserAgent").isBrowser("Chrome >= "+b("CollabMinimumChromeVersion").VIDEO_CALL))},isMobileDevice:function(){return b("UserAgent").isPlatform("Android")||b("UserAgent").isPlatform("iOS")},isVideoFilterEffectSupported:function(){return!g.isMobileDevice()&&(b("UserAgent").isBrowser("Chrome >= 51")||b("UserAgent").isBrowser("Opera >= 36"))},videoEscalationByUnmuteWorkaround:function(){return b("UserAgent").isBrowser("Firefox < 60")||b("UserAgent").isBrowser("Edge")},isChromiumBased:function(){return b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")}};e.exports=g}),null);
__d("FBRTCMessageListener",["invariant","Arbiter","BonfireFeatureGating","Bootloader","ChannelConstants","FBRTCConstants","FBRTCLocalMessageQueue","FBRTCSupport","RTWebExperiments","guid","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").ChildWindowMessageType,i=45*1e3,j=[],k=null,l=null,m,n=null,o=null,p=!1,q=!1,r=null,s=null,t=null,u=null;a={init:function(a,c){__p&&__p();if(p)return;p=!0;q=a;var d=b("RTWebExperiments").useMQTT();d&&b("Bootloader").loadModules(["FBMqttChannel"],function(a){a.subscribe("/webrtc",function(a){a=JSON.parse(a);this._onMessage(a)}.bind(this))}.bind(this),"FBRTCMessageListener");b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offer"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offerack"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,b){this._onMultiwayMessage(b.obj)}.bind(this));b("BonfireFeatureGating").canReceiveBonfireRingInterop()&&b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("parties_notifications"),function(a,b){this._onBonfireMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("onevc"),function(a,b){this._onOneVCMessage(b.obj)}.bind(this));if(b("FBRTCSupport").isWebrtcSupported()&&window.addEventListener){d=a?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",d,!1)}a&&this._connectToParentWindow(c)},setParentWindowNonce:function(a){n=a},generateNewNonce:function(){o=b("guid")();return o},setMultiwayMessageHandler:function(a){r&&g(0,1011),r=a},_emit:function(a,b){this.emit(a,b)},_onMultiwayMessage:function(a){this._emit("multiwayMessageReceived",a),r&&r(a)},setBonfireMessageHandler:function(a){s&&g(0,1012),s=a},_onBonfireMessage:function(a){this._emit("bonfireMessageReceived",a),s&&s(a)},setOneVCMessegeHandler:function(a){t==null&&(t=a)},_onOneVCMessage:function(a){t!=null&&t(a)},setMessageHandler:function(a){k&&g(0,1013);k=a;while(j.length)k(j.shift())},removeMessageHandler:function(){k=null},removeOneVCMessageHandler:function(){t=null},setParentWindowStartCallHandler:function(a){u=a},_onMessage:function(a){a.from&&(a.from=a.from.toString()),this._emit("messageReceived",a),k?k(a):j.push(a),q||this._passOrQueueToChildWindow(a)},_connectToParentWindow:function(a){if(window.opener&&window.opener.postMessage){a={type:h.CHILD_WINDOW_READY,nonce:n,childNonce:this.generateNewNonce(),peerID:a};window.opener.postMessage(a,window.location.origin)}},_verifyWindowMessage:function(event){return Boolean(event.origin===window.location.origin&&event.data&&o!==null&&event.data.nonce===o)},_handleWindowMessageToParent:function(event){__p&&__p();if(!this._verifyWindowMessage(event))return;if(event.data.type===h.CHILD_WINDOW_READY){var a=event.data,b=a.childNonce;a=a.peerID;this.setParentWindowNonce(b);this._setChildWindow(event.source);this._startCallInChildWindow(a);this.generateNewNonce();this._replayQueuedMessagesToChild(a,l)}},_handleWindowMessageToChild:function(event){if(!this._verifyWindowMessage(event))return;event.data.type===h.CHILD_WINDOW_MESSAGE&&this._onMessage(event.data.message);event.data.type===h.CHILD_WINDOW_START_CALL&&(u&&u(event.data.offer))},_replayQueuedMessagesToChild:function(a,c){b("FBRTCLocalMessageQueue").drainQueue(a,function(a){this._postToChildWindowMessage(c,a)}.bind(this))},_setChildWindow:function(a){l=a,window.clearTimeout(m),m=window.setTimeout(function(){l=null},i)},_postToChildWindowMessage:function(a,b){b={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:b};a.postMessage(b,window.location.origin)},_passOrQueueToChildWindow:function(a){l?this._postToChildWindowMessage(l,a):b("RTWebExperiments").enableCallCollisionFix()&&b("FBRTCLocalMessageQueue").enqueueMessage(a.from,a.id,a)},_startCallInChildWindow:function(a){if(l){a={type:h.CHILD_WINDOW_START_CALL,nonce:n,offer:b("RTWebExperiments").passOfferWithWindowMessages()?b("FBRTCLocalMessageQueue").pluckOffer(a):null};l.postMessage(a,window.location.origin)}}};b("mixInEventEmitter")(a,{messageReceived:!0,multiwayMessageReceived:!0,bonfireMessageReceived:!0});e.exports=a}),null);
__d("MessengerRTCMessageHandler",["Bootloader","FBRTCCallSummaryUploader","FBRTCExperiment","FBRTCMessageListener","URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=!1,i=!1;function j(){b("isFacebookURI")(new(b("URI"))(window.top.location.href))&&b("FBRTCExperiment").getIncomingCallExperiments().logExposure()}a={init:function(){b("FBRTCCallSummaryUploader").init(),b("FBRTCMessageListener").init(!1),b("FBRTCMessageListener").once("messageReceived",function(a){k()}),b("FBRTCMessageListener").once("multiwayMessageReceived",function(a){l(a)}),b("FBRTCMessageListener").once("bonfireMessageReceived",function(a){m(a)})}};function k(){g||(g=!0,j(),b("Bootloader").loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","FBRTCUnsupportedBrowserMessage"],function(a,c,d,e){var f=new a(c,e,d);b("FBRTCMessageListener").setMessageHandler(function(a){f.onMessageReceived(a)})},"MessengerRTCMessageHandler"))}function l(a){h||(h=!0,j(),b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(c,d){var e=new c(d,!1);b("FBRTCMessageListener").setMultiwayMessageHandler(function(a){e.onMessageReceived(a)});e.onMessageReceived(a)},"MessengerRTCMessageHandler"))}function m(a){i||(i=!0,j(),b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(c,d){var e=new c(d);b("FBRTCMessageListener").setBonfireMessageHandler(function(a){e.onBonfireMessageReceived(a)});e.onBonfireMessageReceived(a)},"MessengerRTCMessageHandler"))}e.exports=a}),null);
__d("FBRTCMessageHandler",["Bootloader","FBRTCExperiment","FBRTCMessageListener","MessengerRTCMessageHandler"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=!1,i=!1,j=!1,k={init:function(){if(b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_messenger_on_fb",!1)){b("MessengerRTCMessageHandler").init();return}k.initInternal()},initInternal:function(){h===!1&&(h=!0,b("FBRTCMessageListener").init(!1),b("FBRTCMessageListener").once("messageReceived",function(a){k.initIncomingCallController()}),b("FBRTCMessageListener").once("multiwayMessageReceived",function(a){l(a)}),b("FBRTCMessageListener").once("bonfireMessageReceived",function(a){m(a)}))},initIncomingCallController:function(){g||(g=!0,b("Bootloader").loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(a,c,d,e){b("FBRTCExperiment").getIncomingCallExperiments().logExposure();var f=new a(c,e,new d());b("FBRTCMessageListener").setMessageHandler(function(a){f.onMessageReceived(a)})},"FBRTCMessageHandler"))}};function l(a){i||(i=!0,b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(c,d){b("FBRTCExperiment").getIncomingCallExperiments().logExposure();var e=new c(d,!0);b("FBRTCMessageListener").setMultiwayMessageHandler(function(a){e.onMessageReceived(a)});e.onMessageReceived(a)},"FBRTCMessageHandler"))}function m(a){j||(j=!0,b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(c,d){b("FBRTCExperiment").getIncomingCallExperiments().logExposure();var e=new c(d,!1);b("FBRTCMessageListener").setBonfireMessageHandler(function(a){e.onBonfireMessageReceived(a)});e.onBonfireMessageReceived(a)},"FBRTCMessageHandler"))}e.exports=k}),null);
__d("DraftJsEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAnonymizedDom=function(a){this.$1.anonymized_dom=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setExtraParams=function(a){this.$1.extra_params=a;return this};a.prototype.setScriptPath=function(a){this.$1.script_path=a;return this};a.prototype.setSelectionState=function(a){this.$1.selection_state=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={anonymized_dom:!0,event:!0,extra_params:!0,script_path:!0,selection_state:!0,vc:!0};e.exports=a}),null);
__d("StickersTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setNumsearchresults=function(a){this.$1.numsearchresults=a;return this};a.prototype.setPackid=function(a){this.$1.packid=a;return this};a.prototype.setPackids=function(a){this.$1.packids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setSearchtoken=function(a){this.$1.searchtoken=a;return this};a.prototype.setStickerid=function(a){this.$1.stickerid=a;return this};a.prototype.setTagid=function(a){this.$1.tagid=a;return this};a.prototype.setTriggeredword=function(a){this.$1.triggeredword=a;return this};a.prototype.setTriggerused=function(a){this.$1.triggerused=a;return this};c={event:!0,numsearchresults:!0,packid:!0,packids:!0,searchtoken:!0,stickerid:!0,tagid:!0,triggeredword:!0,triggerused:!0};e.exports=a}),null);
__d("ChatActivity",["Arbiter","ArbiterMixin","Event","JSLogger","MercuryConfig","PresenceState","UserActivity","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("MercuryConfig").activity_limit||6e4,i=b("MercuryConfig").idle_limit||18e5,j=b("MercuryConfig").idle_poll_interval||3e5,k=b("JSLogger").create("chat_activity"),l=Date.now(),m=!0;function n(){var a=Date.now();return!!(m&&a-l<h)}c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.isActive=n,b}var o=new a();function p(){var a=l;l=Date.now();l-a>i&&(k.debug("idle_to_active",a),b("PresenceState").doSync());o.inform("activity")}b("Event").listen(window,"focus",function(){m=!0,p()});b("Event").listen(window,"blur",function(){m=!1});b("UserActivity").subscribe(function(){p()});function q(a){a=a&&a.at&&b("PresenceState").verifyNumber(a.at);typeof a!=="number"&&(a=null);return a||0}setInterval(function(){var a=Date.now(),c=q(b("PresenceState").get()),d=Math.max(l,c);a-d>i&&(k.debug("idle",{cookie:c,local:l}),o.inform("idle",a-d))},j);b("PresenceState").registerStateStorer(function(a){var b=q(a);b<l&&(a.at=l);return a});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.chat_activity={activity_limit:h,idle_limit:i,idle_poll_interval:j,last_active_time:l}});e.exports=o}),null);
__d("ChatAppActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null})}),null);
__d("ChatAppActions",["ChatAppActionTypes","ChatDispatcher"],(function(a,b,c,d,e,f){"use strict";a={tti:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").TTI})},hide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").HIDE})},unhide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").UNHIDE})},setInitialDisplayDone:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").INITIAL_DISPLAY_DONE})},load:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").LOAD})}};e.exports=a}),null);
__d("ChatAppStore",["ChatAppActionTypes","ChatDispatcher","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("ChatDispatcher")),this.$ChatAppStore2={initialDisplayDone:!1,isHidden:!1,isInitialized:!1,isLoaded:!1},this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2)}a.prototype.__onDispatch=function(a){__p&&__p();a=a.type;this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2);switch(a){case b("ChatAppActionTypes").INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=!0;this.__emitChange();break;case b("ChatAppActionTypes").HIDE:this.$ChatAppStore2.isHidden=!0;this.__emitChange();break;case b("ChatAppActionTypes").UNHIDE:this.$ChatAppStore2.isHidden=!1;this.__emitChange();break;case b("ChatAppActionTypes").TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break;case b("ChatAppActionTypes").LOAD:this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break}};a.prototype.getPreviousState=function(){return this.$ChatAppStore1};a.prototype.getState=function(){return this.$ChatAppStore2};a.__moduleID=e.id;e.exports=new a()}),null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy"],(function(a,b,c,d,e,f){__p&&__p();a=function a(c,d){__p&&__p();this._userID=c;this._logger=b("JSLogger").create("blackbird");this._getState=function(){return b("ChatVisibility").isOnline()?b("PresencePrivacy").allows(this._userID)?a.NORMAL:a.BLOCKED:a.OFFLINE};this._togglePrivacy=function(){__p&&__p();this._getState();switch(this._getState()){case a.OFFLINE:if(b("ChatVisibility").isOnline()){this._logger.error("tabs_already_online");break}this._logger.log("tabs_go_online",{tab_id:this._userID});b("ChatVisibility").goOnline(function(){b("PresencePrivacy").allows(this._userID)||(this._getState()!==a.BLOCKED&&this._logger.error("privacy_action_controller_blocked_inconsistency"),this._togglePrivacy())}.bind(this));break;case a.BLOCKED:b("PresencePrivacy").allow(this._userID);this._logger.log("tabs_unblock",{tab_id:this._userID});break;case a.NORMAL:b("PresencePrivacy").disallow(this._userID);this._logger.log("tabs_block",{tab_id:this._userID});break}};c=function(){d&&d(this._getState())}.bind(this);c();this._subscribeToken=b("PresencePrivacy").subscribe("privacy-changed",c)};a.OFFLINE="offline";a.BLOCKED="blocked";a.NORMAL="normal";Object.assign(a.prototype,{togglePrivacy:function(){this._logger.log("gear_menu_toggle_privacy",{tab_id:this._userID}),this._togglePrivacy()},destroy:function(){this._subscribeToken&&b("PresencePrivacy").unsubscribe(this._subscribeToken)}});e.exports=a}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return!1;else return a}function b(a){if(a!==void 0)return a;else return!1}function c(a){if(a!==void 0)return a;else return!1}f.isTruthy=a;f.isSomeTrue=b;f.optionBoolToBool=c}),null);
__d("ReasonReact.bs",["bs_curry","React","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){return 0}function h(){return 0}function i(){return!0}function j(){return"RenderNotImplemented"}function k(){return 0}function l(a){return a}function m(a,b){return 0}function n(a,c,d){var e=a.reasonProps;if(e==null)if(c!==void 0)return[b("bs_curry")._1(c,a)];else throw[b("bs_caml_builtin_exceptions").invalid_argument,"A JS component called the Reason component "+(d+" which didn't implement the JS->Reason React props conversion.")];else return e}function o(a){__p&&__p();return b("React").createClass({displayName:a,subscriptions:null,statics:{jsPropsToReason:void 0,getDerivedStateFromProps:function(c,d){__p&&__p();var e=this;e=e==null?void 0:e.jsPropsToReason;c=n(c,e,a);e=c[0];if(e[3]!==l){c=d.reasonState;e=b("bs_curry")._1(e[3],c);if(e===c)return null;else return{reasonState:e,reasonStateVersion:d.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:d.reasonStateVersionUsedToComputeSubelements}}else return null}},self:function(a,b){var c=this;return[c.handleMethod,a,b,c.sendMethod,c.onUnmountMethod]},getInitialState:function(){var c=this;c=n(c.props,c.jsPropsToReason,a);return{reasonState:b("bs_curry")._1(c[0][9],0)}},componentDidMount:function(){var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];if(e[4]!==h){d=d.state;d=d.reasonState;return b("bs_curry")._1(e[4],c.self(d,e[10]))}else return 0},componentDidUpdate:function(c,d){__p&&__p();var e=this,f=this,h=f.state;h=h.reasonState;var i=f.props,j=n(i,f.jsPropsToReason,a),k=j[0];if(k[5]!==g){i=c===i;i=i?j:n(c,f.jsPropsToReason,a);j=d.reasonState;c=e.self(h,k[10]);f=c[0];d=i[0][10];e=c[3];h=c[4];i=[f,j,d,e,h];return b("bs_curry")._1(k[5],[i,c])}else return 0},componentWillUnmount:function(){__p&&__p();var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];d=d.state;d=d.reasonState;e[6]!==h&&b("bs_curry")._1(e[6],c.self(d,e[10]));d=c.subscriptions;if(d!==null){d.forEach(function(a){return b("bs_curry")._1(a,0)});return 0}else return 0},shouldComponentUpdate:function(c,d,e){__p&&__p();e=this;var f=this,g=f.props,h=n(f.props,f.jsPropsToReason,a);g=c===g;g=g?h:n(c,f.jsPropsToReason,a);c=g[0];g=d.reasonState;d=e.self(g,c[10]);if(c[7]!==i){e=f.state;g=e.reasonState;f=d[0];e=h[0][10];h=d[3];var j=d[4];f=[f,g,e,h,j];return b("bs_curry")._1(c[7],[f,d])}else return!0},onUnmountMethod:function(a){var b=this,c=b.subscriptions;if(c!==null){c.push(a);return 0}else{b.subscriptions=[a];return 0}},handleMethod:function(c){var d=this,e=this;return function(f){var g=e.state;g=g.reasonState;var h=n(e.props,e.jsPropsToReason,a);return b("bs_curry")._2(c,f,d.self(g,h[0][10]))}},sendMethod:function(c){__p&&__p();var d=this,e=this,f=n(e.props,e.jsPropsToReason,a);f=f[0];if(f[11]!==m){var g=[function(){return 0}],h=b("bs_curry")._1(f[11],c);return e.setState(function(a,c){__p&&__p();c=a.reasonState;c=b("bs_curry")._1(h,c);if(c===0)return null;else{var d;if(typeof c==="number")d=a;else switch(c.tag|0){case 0:d={reasonState:c[0]};break;case 1:g[0]=c[0];d=a;break;case 2:g[0]=c[1];d={reasonState:c[0]};break}if(d!==a)return d;else return null}},d.handleMethod(function(a,c){return b("bs_curry")._1(g[0],c)}))}else return 0},render:function(){var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];d=d.state;d=d.reasonState;return b("bs_curry")._1(e[8],c.self(d,e[10]))}})}function a(a){return[a,o(a),[void 0],l,h,g,h,i,j,k,0,m,void 0]}var p=a,q=a,r=a,s=a;function c(a,c,d){a=a!==void 0?a:void 0;c=c!==void 0?c:void 0;var e=[d],f=d[12];if(f!==void 0)return b("bs_curry")._2(f,a,c);else return b("React").createElement(d[1],{key:a,ref:c,reasonProps:e})}function d(a,b){var c=a[1].prototype;c.jsPropsToReason=b;c=a[1];c.getDerivedStateFromProps=a[1].getDerivedStateFromProps.bind({jsPropsToReason:b});return a[1]}function e(a,c){var d=function(a){return b("bs_curry")._2(c,a,a.children)};d=d;var e=a[1].prototype;e.jsPropsToReason=d;return a[1]}var t=a("interop");function u(a,c,d){var e=function(e,f){var g=a,h=c,i=d;e=e;f=f;h=Object.assign(Object.assign({},h),{ref:f,key:e});f=[g,h].concat(i);return b("React").createElement.apply(null,f)};return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],e]}function v(a){if(typeof Event==="function")return new Event(a);else{var b=document.createEvent("Event");b.initEvent(a,!0,!0);return b}}function w(){__p&&__p();var a=typeof window==="undefined"?void 0:window;if(a!==void 0){a=a.location.pathname;switch(a){case"":case"/":return 0;default:a=a.slice(1);var b=a[a.length-1|0];b=b==="/"?a.slice(0,-1):a;a=b.split("/");b=a.length-1|0;var c=0;while(!0){var d=c,e=b;if(e<0)return d;else{c=[a[e],d];b=e-1|0;continue}}}}else return 0}function x(){var a=typeof window==="undefined"?void 0:window;if(a!==void 0){a=a.location.hash;switch(a){case"":case"#":return"";default:return a.slice(1)}}else return""}function y(){var a=typeof window==="undefined"?void 0:window;if(a!==void 0){a=a.location.search;switch(a){case"":case"?":return"";default:return a.slice(1)}}else return""}function z(a){var b=typeof history==="undefined"?void 0:history,c=typeof window==="undefined"?void 0:window;if(b!==void 0&&c!==void 0){b.pushState(null,"",a);c.dispatchEvent(v("popstate"));return 0}else return 0}function A(){return[w(0),x(0),y(0)]}function B(a){var c=typeof window==="undefined"?void 0:window;if(c!==void 0){var d=function(){return b("bs_curry")._1(a,A(0))};c.addEventListener("popstate",d);return d}else return function(){return 0}}function C(a){var b=typeof window==="undefined"?void 0:window;if(b!==void 0){b.removeEventListener("popstate",a);return 0}else return 0}function D(){return 0}function E(){return[D]}function F(a,b){if(b[0]===D){b[0]=a;return b}}function G(a){a[0]=D;return 0}function H(a,c){return b("bs_curry")._1(a[0],c)}function I(a,c){__p&&__p();var d=a!==void 0?a:function(a,b){return a===b},e=[void 0];return function(a){__p&&__p();var f=e[0];if(f!==void 0){f=f;if(b("bs_curry")._2(d,f[0],a))return f[1];else f=1}else f=1;if(f===1){f=b("bs_curry")._1(c,a);e[0]=[a,f];return f}}}function J(a){var b=[a];return function(a){var c=b[0];b[0]=a;return c}}a=[I,J];I=[z,B,C,A];J=[E,F,G,H];f.statelessComponent=p;f.statelessComponentWithRetainedProps=q;f.reducerComponent=r;f.reducerComponentWithRetainedProps=s;f.element=c;f.wrapReasonForJs=d;f.wrapReasonForJsWithChildren=e;f.wrapJsForReason=u;f.Router=I;f.RemoteAction=J;f.Props=a}),null);
__d("MessengerState.bs",["invariant","URI","FBID.bs","bs_array","bs_block","bs_curry","JSSet.bs","Utils.bs","FBJSON","Arbiter","gkx","bs_js_dict","bs_belt_Map","bs_belt_Set","bs_caml_obj","JSLogger","ThreadId.bs","FBIDCheck","immutable","bs_belt_Array","bs_caml_array","ChatConfig","LogHistory","MercuryIDs","bs_pervasives","bs_belt_Option","ReasonReact.bs","bs_js_primitive","MessagingTag","TypingStates","MercuryAssert","MercuryViewer","ParticipantId.bs","bs_belt_MapString","bs_caml_primitive","MercuryFilters.bs","ImmutableObject","MercuryLocalIDs","ChannelConstants","MessengerFolders.bs","MessengerMessage.bs","bs_js_null_undefined","MercuryActionType","MercuryAttachment","MercuryMessageIDs.bs","MercuryThreadInfo","MessengerPersonas.bs","XGroupsController","MercuryThreadIDMap","PageCommItemStatus","MercuryActionStatus","MessageRequestUtils","MercuryPayloadSource","MercuryThreadActions","MessengerThreadUtils.bs","MercuryLogMessageType","MercuryServerRequests","MercuryThreadInformer","MercurySyncEventsProxy","bs_caml_builtin_exceptions","MercuryGlobalActionType","ThreadConnectivityStatus.bs","MercuryMessageClientState","MessengerGroupsSyncStatus","MercuryThreadlistConstants","MessageUnsendabilityStatus","MessengerSharedMediaActions","setTimeoutAcrossTransitions","MessagingGenericAdminTextType","MessengerDesktopNotifications","ChatReliabilityInstrumentation","RemovedMessageTombstoneContent","MercuryDisplayTimeFilterMessageRenderer","MessengerPersistantViewerKeyedSubscriptionComponent.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return a[0]}function c(a){return a[1]}function d(a){return a[2]}function e(a){return a[3]}function h(a){return a[4]}function i(a){return a[5]}function j(a){return a[6]}function k(a){return a[8]}function l(a){return a[9]}function m(a){return a[10]}function n(a){return a[11]}function o(a){return a[12]}function p(a){return a[13]}function q(a){return a[14]}function r(a){return a[15]}function s(a){return a[16]}function t(a){return a[17]}function aa(a){return a[18]}function ba(a){var c={};b("bs_belt_Map").forEach(a,function(a,b){c[a]=b;return 0});return c}function ca(a){return ba(a[7])}function u(a){b("ChatReliabilityInstrumentation").logMESSAGE_RECEIVED(b("FBJSON").stringify({otid:a.offline_threading_id,message_id:a.message_id,other_user_fbid:a.other_user_fbid}));return 0}function da(a,c,d){d=d.reduce(b("bs_belt_Set").remove,c.reduce(b("bs_belt_Set").add,a[3]));if(d===a[3])return a;else return[a[0],a[1],a[2],d,a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}var ea=function(a,b){delete a[b];return 0};function fa(a,c,d){var e=b("bs_belt_MapString").get(a,c);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);var f=b("bs_belt_Map").get(e,d);if(f!==void 0)return b("bs_belt_MapString").set(a,c,b("bs_belt_Map").remove(e,d));else return a}else return a}function ga(c,a){var d=b("bs_caml_obj").caml_notequal(a.author,b("MercuryViewer").getID()),e=a.thread_id;if(d&&!(e==null)){d=fa(c[6],e,a.author);if(d!==c[6])return[c[0],c[1],c[2],c[3],c[4],c[5],d,c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]];else return c}else return c}function ha(a,c){__p&&__p();var d=c.thread_fbid;if(d==null)if(c.type==="typ"||c.type==="page_typing"){c=b("FBID.bs").ofString(c.from.toString());if(c!==void 0)return b("MercuryIDs").getThreadIDFromUserID(b("bs_js_primitive").valFromOption(c));else return null}else return null;else{c=b("MercuryThreadIDMap").getForFBID(a);return c.getClientIDFromServerIDNow(d.toString())}}var v=b("MercuryFilters.bs").getSupportedFilters(0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups]),w=b("MessengerFolders.bs").getSupportedFolders(0).concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);function ia(){var a={};w.forEach(function(b){var c={};v.forEach(function(a){c[a]={threadlist:[],reachedEnd:!1,existingIDs:new Set()};return 0});a[b]=c;return 0});return a}function ja(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.invalidatedThread(c);return 0}function x(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.updatedThread(c);return 0}function ka(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.deletedThread(c);return 0}function y(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.changedThreadReadState(c,d,e);return 0}function z(a,c){__p&&__p();var d=new Map();c.forEach(function(a,b){d.set(a,b);return 0});return c.sort(function(c,e){__p&&__p();var f=b("bs_belt_Map").get(a[7],c),g=b("bs_belt_Map").get(a[7],e);if(f!==void 0&&g!==void 0){g=b("bs_js_primitive").valFromOption(g).timestamp-b("bs_js_primitive").valFromOption(f).timestamp;if(g>0)return 1;else if(g<0)return-1;else return 0}else f=1;if(f===1){g=d.get(c);f=d.get(e);return b("bs_belt_Option").getExn(g==null?void 0:b("bs_js_primitive").some(g))-b("bs_belt_Option").getExn(f==null?void 0:b("bs_js_primitive").some(f))|0}})}function la(a,b,c,d){__p&&__p();a=a[12][c];if(a!==void 0){var e=a[d];if(e!==void 0){b.forEach(function(a){if(e.existingIDs.has(a)){e.existingIDs["delete"](a);a=e.threadlist.indexOf(a);e.threadlist.splice(a,1);return 0}else return 0});return 0}else return 0}else return 0}function A(a,c,d,e){__p&&__p();a=a!==void 0?a:function(){return!0};var f=b("bs_belt_Map").get(c[7],d);if(f!==void 0){f=b("bs_js_primitive").valFromOption(f);if(b("bs_curry")._1(a,f)){a=b("ImmutableObject").set(f,e);f=b("bs_belt_Map").set(c[7],d,a);x(c[0],d);return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],f,c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]]}else return c}else return c}function ma(a,c,d){__p&&__p();var e=new Set(c.participants);Object.assign(c,{participants:Array.from(c.participants)});d.forEach(function(d){if(e.has(d))return 0;else{c.participants.push(d);if(b("bs_caml_obj").caml_equal(d,a)){Object.assign(c,{is_subscribed:!0,can_reply:!0,cannot_reply_reason:null});return 0}else return 0}});return 0}function na(a,b,c,d){__p&&__p();w.forEach(function(e){if(e!==c)return la(a,b,e,d);else return 0});var e=a[12][c];if(e!==void 0){e=e[d];e=e!==void 0?[e.threadlist,e.existingIDs]:[[],new Set()]}else e=[[],new Set()];var f=e[1],g=e[0];b.forEach(function(a){if(f.has(a))return 0;else{f.add(a);g.push(a);return 0}});return[z(a,g),f]}function oa(a,c,d){__p&&__p();if(d!==void 0){var e=a[16][c];if(e!==void 0){e.add(b("bs_js_primitive").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a[0]);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a[0]);d.fetchUnreadThreadIDs(c);return 0}}else return 0}var pa=b("MessengerFolders.bs").getSupportedFolders(0).filter(function(a){return a!==b("MessagingTag").ACTION_ARCHIVED});function qa(a,c,d){__p&&__p();if(d!==void 0){var e=a[16][c];if(e!==void 0){e["delete"](b("bs_js_primitive").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a[0]);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a[0]);d.fetchUnreadThreadIDs(c);return 0}}else return 0}function ra(a,c,d){var e=b("MessengerFolders.bs").getFromMeta(c);if(d!==e){pa.includes(e)&&c.unread_count>0&&oa(a,e,b("bs_js_primitive").some(c.thread_id));if(pa.includes(d))return qa(a,d,b("bs_js_primitive").some(c.thread_id));else return 0}else return 0}function sa(a,c){__p&&__p();var d=b("MessengerFolders.bs").getFromMeta(c);if(w.includes(d)){v.forEach(function(e){var f=a[12][d][e],g=f.existingIDs.has(c.thread_id);na(a,[c.thread_id],d,e);var h=b("bs_caml_obj").caml_equal(b("bs_caml_array").caml_array_get(f.threadlist,f.threadlist.length-1|0),c.thread_id);if(!f.reachedEnd&&!g&&h)return la(a,[c.thread_id],d,e);else return 0});return 0}else return 0}function ta(a,c,d){__p&&__p();var e=b("bs_belt_Map").get(a[7],c);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);var f=b("MessengerFolders.bs").getFromMeta(e);if(f!==d){var g=e.comm_status;g=g==null?b("ImmutableObject").set(e,{folder:d}):d===b("MessagingTag").OTHER?b("ImmutableObject").set(e,{folder:d,comm_status:b("PageCommItemStatus").SPAM}):d===b("MessagingTag").INBOX?b("ImmutableObject").set(e,{folder:d,comm_status:b("PageCommItemStatus").TODO}):b("ImmutableObject").set(e,{folder:d});var h=e.other_user_fbid;h=h==null?[]:d===b("MessagingTag").OTHER?[b("MercuryIDs").getParticipantIDFromUserID(h)]:[];e=e.other_user_fbid;d=e==null?[]:d===b("MessagingTag").OTHER?[]:[b("MercuryIDs").getParticipantIDFromUserID(e)];e=da(a,h,d);h=b("bs_belt_Map").set(e[7],c,g);ra(e,g,f);sa(e,g);x(e[0],c);return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],h,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18]]}else return a}else return a}function B(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.updatedMessage(c,d,b("bs_js_null_undefined").fromOption(e));return 0}function ua(c,a){c=b("MercuryThreadInformer").getForFBID(c);c.receivedMessage(a);return 0}function va(a,c,d){a=b("MercuryThreadInformer").getForFBID(a);a.reorderedMessages(c,d);return 0}var wa=function(a,b){delete a[b];return 0};function C(a,c){var d=a[10].get(c);return b("bs_js_primitive").nullable_to_opt(a[9].get(b("bs_belt_Option").getWithDefault(d==null?void 0:b("bs_js_primitive").some(d),c)))}function xa(a,c,d){a=a!==void 0?a:!1;d=b("bs_belt_Array").keepMap(d,function(a){return C(c,a)});if(a)return d.slice().reverse();else return d}function ya(a,c){return b("bs_belt_Array").keepMap(c,function(b){return C(a,b)}).sort(function(a,c){return b("MessengerMessage.bs").compare(c,a)}).map(function(a){return a.message_id})}function D(a,b){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9].set(b[0],b[1]),a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}function E(b,a){b[10].set(a.message_id,a.message_id);return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15],b[16],b[17],b[18]]}var F=function(a,b){delete a[b];return 0};function za(c,d){__p&&__p();var a=c[15];Object.keys(d).forEach(function(e){__p&&__p();var f=d[e];if(f!==void 0){var g=f[0],h=g[2],i=g[1];g=a.get(g[0]);if(g==null)return 0;else{g=g[1];if(g.length>=(i+h|0)){b("bs_curry")._2(F,d,e);return b("bs_curry")._1(f[1],xa(!0,c,g.slice(i,i+h|0)))}else return 0}}else return 0});return 0}function Aa(d,c,e){__p&&__p();var a=e[1],f=e[0];b("MessengerMessage.bs").finalizeRanges(a);var g=a.offline_threading_id;if(!(g==null)&&g!==a.message_id){d[10].set(g,a.message_id);b("MercuryMessageIDs.bs").addServerID(g,a.message_id);g=a.threading_id;g==null||b("MercuryMessageIDs.bs").addServerID(g,a.message_id)}g=d[9].has(f);var h=d[0],i=d[1],j=d[2],k=d[3],l=d[4],m=d[5],n=d[6],o=d[7],p=d[8],q=d[9].set(f,a),r=d[10],s=d[11],t=d[12],aa=d[13],ba=d[14],ca=d[15],u=d[16],da=d[17];d=d[18];h=[h,i,j,k,l,m,n,o,p,q,r,s,t,aa,ba,ca,u,da,d];if(!g&&e[2]===1){i=b("MercuryIDs").isLocalThread(a.thread_id);j=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(a.thread_id),function(a){return b("bs_js_primitive").nullable_to_opt(ca.get(a))}),[i?1:0,[]]);k=a.thread_id;if(!(k==null)){l=ya(h,[f].concat(j[1].filter(function(c){return b("bs_caml_obj").caml_notequal(c,a.offline_threading_id)})));ca.set(k,[j[0],l])}za(h,c[3][0])}return h}function Ba(b,c,a){b[11].set(c,a);return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15],b[16],b[17],b[18]]}function Ca(a,c){var d=c[1];c=c[0];var e=a[11].get(c);b("bs_belt_Option").isSome(e==null?void 0:b("bs_js_primitive").some(e))||g(0,1777);a[11]["delete"](c);if(e==null)return b("bs_pervasives").failwith("Message must exist to update");else return Object.assign(e,{image_ids:d.image_ids,file_ids:d.file_ids,audio_ids:d.audio_ids,gif_ids:d.gif_ids,video_ids:d.video_ids,client_state:b("MercuryMessageClientState").SEND_TO_SERVER})}function Da(a,c){__p&&__p();var d=c[0],e=a[15].get(d);if(e==null)return a;else{var f=b("bs_array").map(function(a){return a.message_id},b("bs_belt_Array").keepMap(c[1],function(b){return C(a,b)})),g=ya(a,e[1].filter(function(a){return f.indexOf(a)===-1}));a[15].set(d,[e[0],g]);va(a[0],d,b("bs_js_null_undefined").fromOption(c[2]));return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}}function Ea(c,d){__p&&__p();var e={snippet:"...",snippet_attachments:null,snippet_sender:null};d=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(c[15].get(d)),function(a){return b("bs_belt_Array").get(xa(void 0,c,a[1]),0)});if(d!==void 0){var a=b("bs_js_primitive").valFromOption(d);a=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):a.body}else a=null;if(d!==void 0){d=b("bs_js_primitive").valFromOption(d);var f=d.removed_timestamp;if(f==null)if(a==null)return e;else{f=d.log_message_type;return{snippet:a,snippet_attachments:d.attachments,snippet_sender:f==null?d.author:null}}else return{snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(d.author),snippet_attachments:null,snippet_sender:null}}else return e}function Fa(a){__p&&__p();var c=a.attachments;if(c==null)return 0;else{c=b("bs_belt_Array").keepMap(c,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)&&b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return void 0;else return b("bs_js_primitive").nullable_to_opt(a.fbid)}});b("MessengerSharedMediaActions").deletePhotos(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id),c);return 0}}function Ga(d,c,e,f){__p&&__p();var g=e.client_message_id;if(g==null)return d;else{var h=C(d,g);if(h!==void 0){h=b("bs_js_primitive").valFromOption(h);var i=e.message_id,j=e.status;if(b("bs_caml_obj").caml_equal(h.status,b("MercuryActionStatus").SUCCESS))return d;else if(d[9].has(i)){var a=Object.assign(Object.assign({},h),e);B(d[0],a.thread_id,a.message_id,f);return D(d,[i,a])}else{a=b("bs_caml_obj").caml_equal(e.status,b("MercuryActionStatus").SUCCESS);a=a?e.error_data:null;b("MercuryMessageIDs.bs").addServerID(g,i);d[10].set(g,i);h=Object.assign(Object.assign({},h),{status:j,error_data:a,timestamp:e.timestamp,log_message_data:e.log_message_data,ranges:e.ranges,attachments:e.attachments});b("MessengerMessage.bs").finalizeRanges(h);j=D(d,[i,h]);j[9].set(g,{});j[9]["delete"](g);a=h.thread_id;e=j[15].get(a);if(!(e==null)){var k=ya(j,e[1]);j[15].set(a,[e[0],k])}B(j[0],h.thread_id,h.message_id,f);a=b("MessengerMessage.bs").isTitanMessage(h);e=c[2].get(h.thread_id);a&&(e==null||c[2].set(h.thread_id,e-1|0));return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],j[9],j[10].set(g,i),j[11],j[12],j[13],j[14],j[15],j[16],j[17],j[18]]}}else return d}}function Ha(a,c,d){__p&&__p();if(d!==void 0&&b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(d),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)&&b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)){d=c.offline_threading_id;if(d==null||!b("bs_caml_obj").caml_equal(b("bs_js_primitive").nullable_to_opt(a[10].get(d)),d))d=1;else return Object.assign({},Object.assign(c,{client_message_id:c.offline_threading_id,status:b("MercuryActionStatus").SUCCESS,action_type:b("MercuryActionType").SEND_MESSAGE}));if(d===1){d=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(c.thread_id),function(c){return b("bs_belt_Map").get(a[7],c)});if(d!==void 0)return Object.assign(Object.assign({},c),{folder:b("bs_js_primitive").valFromOption(d).folder});else return c}}else return c}function Ia(c,a,d,e){__p&&__p();d=Ha(c,d,e);if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").SEND_MESSAGE))return Ga(c,a,d,e);else{var f=d.offline_threading_id;f=b("bs_belt_Option").flatMap(f==null?void 0:b("bs_js_primitive").some(f),function(a){return b("bs_js_primitive").nullable_to_opt(c[10].get(a))});var g=C(c,d.message_id);if(f!==void 0||g!==void 0)return c;else{f=b("bs_caml_obj").caml_equal(e,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))?E(c,d):c;g=b("bs_caml_obj").caml_equal(d.client_state,b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER);e=d.upload_id;g=g&&!(e==null)?Ba(f,e,d):f;e=b("MessengerMessage.bs").isErrorLogMessage(d);f=d.thread_id;e&&(f==null||(a[6][0][f]=!0));e=d.manual_retry_cnt;f=d.thread_id;e==null||!(f==null)&&e>0&&va(g[0],f,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE);e=Aa(g,a,[d.message_id,d,1]);ua(e[0],d);return e}}}var Ja=function(a,b){delete a[b];return 0};function Ka(a,c){__p&&__p();Object.keys(c).forEach(function(d){__p&&__p();var e=c[d];if(e!==void 0){var f=e[0],g=ba(f.reduce(function(d,e){var c=b("bs_belt_Map").get(a,e);if(c!==void 0)return b("bs_belt_Map").set(d,e,b("bs_js_primitive").valFromOption(c));else return d},b("bs_belt_Map").make([b("ThreadId.bs").cmp])));if(Object.keys(g).length===f.length){b("bs_curry")._2(Ja,c,d);return b("bs_curry")._1(e[1],g)}else return 0}else return 0});return 0}function La(c,a,d){a=a.specific_to_list;if(a==null){d=b("MercuryIDs").tokenize(d);if(d.type!=="user"||d.value.length===0)return[c];else return[b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(d.value)),c]}else return a}function G(c,a,d){var e=b("MercuryIDs").tokenize(d),f=e.type==="user",g=a.specific_to_list;g=f?!0:g==null?!1:b("MessengerThreadUtils.bs").isCanonicalFromInitialParticipants(c,g);if(g||f)c=La(c,a,d);else{var h=a.specific_to_list;c=h==null?[]:h}return new(b("ImmutableObject"))({admins:{},admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:void 0,cannot_reply_reason:null,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,gradient_colors:[],group_approval_queue:null,work_associated_group:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{link:"",mode:0},last_message_timestamp:0,last_message_type:null,last_message_id:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!0,rtc_call_data:null,server_timestamp:0,solid_color:null,subtitle:null,theme_id:null,thread_connectivity_data:null,thread_fbid:null,thread_type:null,thread_id:d,participants:c,name:"",snippet:a.body,snippet_attachments:[],snippet_sender:a.author,unread_count:0,message_count:0,image_src:null,timestamp:a.timestamp,other_user_fbid:f?b("FBID.bs").ofStringExn(e.value):null,is_canonical_user:f,is_canonical:g,is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,object_association_type:null,joinable_link:null,linked_mentorship_programs:null,thread_unsendability_status:null})}function Ma(c,d,a,e){__p&&__p();e=b("MessengerMessage.bs").hasServerTimestamp(a,e);var f=a.thread_id;if(f==null)return void 0;else{b("MercuryAssert").isThreadID(f);d=b("bs_belt_Map").get(d,f);if(d!==void 0)return b("bs_js_primitive").some(b("bs_js_primitive").valFromOption(d));else if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&!e)return b("bs_js_primitive").some(G(b("MercuryIDs").getParticipantIDFromUserID(c),a,f));else return void 0}}function Na(c,a,d){d=b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE)||b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)?d==null?!0:!d:b("MessengerMessage.bs").hasServerTimestamp(a,d);if(c.server_timestamp!==0&&a.timestamp<c.server_timestamp)return d;else return!1}function Oa(c,d,a,e){var f=a.offline_threading_id;if(!(f==null)&&d.server_timestamp!==0&&b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&f.length>0&&b("bs_caml_obj").caml_notequal(a.author,b("MercuryIDs").getParticipantIDFromUserID(c)))if(e.has(f))return!0;else{e.add(f);return!1}else return!1}function Pa(a,c,d){__p&&__p();var e=new Set(d);Object.assign(c,{participants:c.participants.filter(function(a){return!e.has(a)})});d=b("bs_js_dict").fromArray(b("bs_js_dict").entries(c.admins));Object.assign(c,{admins:b("bs_array").fold_left(function(a,c){c=b("MercuryIDs").getUserIDFromParticipantID(c);if(!(c==null)){var d=a[c];d!==void 0&&b("bs_curry")._2(ea,a,c)}return a},d,b("JSSet.bs").values(e))});if(e.has(a)){Object.assign(c,{is_subscribed:!1});return 0}else return 0}function H(a,c,d){var e=a.event_title,f=a.event_time;a=a.event_location_name;return{creator_id:null,latitude:null,location_address:null,longitude:null,note:"",related_event:{id:""},repeat_mode:null,seconds_to_notify_before:0,status:null,track_rsvp:c.track_rsvp,title:e==null?c.title:e,event_time:f==null?c.event_time:parseInt(f,10),location_name:a==null?c.location_name:a,event_members:d!==void 0?b("bs_js_primitive").valFromOption(d):c.event_members,oid:c.oid,event_type:c.event_type}}function Qa(b,a){var c={};Object.keys(b).forEach(function(a){c[a]=b[a];return 0});c[a.guest_id]=a.guest_status;return c}var I=function(a,b){delete a[b];return 0};function Ra(a){__p&&__p();var c=[-1],d=[null],e=Math.floor(Date.now()/1e3);b("bs_js_dict").entries(a).forEach(function(a){a=a[1];var b=a.event_time;if(b>e&&(c[0]<0||c[0]>b)){c[0]=b;d[0]=a;return 0}else return 0});return d[0]}var J=function(a,b){delete a[b];return 0};function Sa(a,c,d,e,f){__p&&__p();d!==0&&y(a,c.thread_id,f,d);if(c.timestamp===0){b("ChatReliabilityInstrumentation").logERROR("thread timestamp is 0");e.add(c.thread_id);return void 0}else{d=c.unread_count===0;if(d===f)return void 0;else{x(a,c.thread_id);return{unread_count:f?0:1}}}}function Ta(a,c,d,e,f){__p&&__p();var g=d.action_type;f=f==null?!1:f;(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(g,b("MercuryActionType").LOG_MESSAGE))&&((d.is_unread||d.skip_bump_thread)&&(c.unread_count===0&&d.skip_bump_thread||d.timestamp<=c.server_timestamp||Object.assign(c,{unread_count:c.unread_count+1|0})),Object.assign(c,{message_count:c.message_count+1|0,is_archived:!1}));var h=b("MercuryIDs").getParticipantIDFromUserID(a);if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").USER_GENERATED_MESSAGE)){c.unread_count===0&&b("bs_caml_obj").caml_equal(d.author,h)&&d.timestamp>=c.last_read_timestamp&&!b("gkx")("702170")&&Object.assign(c,{last_read_timestamp:d.timestamp});var i=d.offline_threading_id;if(!(i==null)&&b("bs_caml_obj").caml_notequal(i,d.message_id)){Object.assign(c,{last_message_timestamp:d.timestamp});i=d.comm_status;i==null||Object.assign(c,{last_message_id:d.message_id})}i=d.comm_status;var j=c.comm_status;i==null||!(j==null)&&j.toUpperCase()!==b("PageCommItemStatus").FOLLOW_UP&&Object.assign(c,{comm_status:i});j=d.creator_info;j==null||b("bs_caml_obj").caml_equal(j.pageID,a)&&Object.assign(c,{folder:d.folder});i=c;j=d.author;var k=i.participants.indexOf(j);if(k>0){Object.assign(i,{participants:[j].concat(i.participants.slice(0,k),i.participants.slice(k+1|0))});return 0}else return 0}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").SEND_MESSAGE)){j=d.log_message_type;if(j==null){Object.assign(c,{snippet_attachments:d.attachments});return 0}else{if(b("bs_caml_obj").caml_equal(j,b("MercuryLogMessageType").THREAD_IMAGE)){i=d.log_message_data;if(i==null)k=null;else{i=i.image;k=i==null?null:i.preview_url}Object.assign(c,{image_src:k});x(a,e)}if(b("bs_caml_obj").caml_notequal(j,b("MercuryLogMessageType").SUBSCRIBE)&&b("bs_caml_obj").caml_notequal(j,b("MercuryLogMessageType").UNSUBSCRIBE)){Object.assign(c,{snippet_attachments:d.attachments});return 0}else return 0}}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").LOG_MESSAGE)){c.last_message_timestamp<d.timestamp&&Object.assign(c,{last_message_timestamp:d.timestamp});i=d.log_message_type;if(i==null)return 0;else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").SUBSCRIBE)&&!f){k=d.log_message_data;if(k==null)j=[];else{g=k.added_participants;j=g==null?[]:g}ma(h,c,j);return x(a,e)}else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").UNSUBSCRIBE)&&!f){k=d.log_message_data;if(k==null)g=[];else{j=k.removed_participants;g=j==null?[]:j}Pa(h,c,g);return x(a,e)}else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").THREAD_IMAGE))if(f)return 0;else{k=d.log_message_data;if(k==null)j=null;else{h=k.image;j=h==null?null:h.preview_url}Object.assign(c,{image_src:j});return 0}else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").THREAD_NAME)){g=d.log_message_data;if(g==null)return 0;else{f=g.name;!(f==null)&&c.name===f||x(a,e);Object.assign(c,{name:g.name});return 0}}else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").GENERIC_ADMIN_TEXT)){k=a;h=c;j=d;f=e;g=j.log_message_data;if(g==null)return 0;else{i=g.untypedData;if(g.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_NICKNAME){a=h.custom_nickname;if(!(a==null)){c=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a));d=i.nickname;d.trim().length>0?c[i.participant_id]=d:b("bs_curry")._2(J,c,i.participant_id);Object.assign(h,{custom_nickname:c})}x(k,f)}else if(g.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_ICON)b("MercuryThreadActions").getForFBID(k).updateCustomLike(f,i.thread_icon);else if(g.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_THEME){if(!b("ChatConfig").get("chat_tab_has_gradients")){e=i.theme_color;if(e==null)Object.assign(h,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});else if(e.length>0){j="#"+e.slice(2);Object.assign(h,{solid_color:j,header_color:j,footer_color:j,gradient_colors:[j]})}else Object.assign(h,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});x(k,f)}}else if(g.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE){var l={},m=i.event_creator_id;h.participants.forEach(function(c){c=b("MercuryIDs").getUserIDFromParticipantID(c);if(c==null)return 0;else{var a=b("bs_caml_obj").caml_equal(c,m);l[c]=a?"GOING":"INVITED";return 0}});a=b("bs_js_dict").fromArray(b("bs_js_dict").entries(h.lightweight_events));d=i.event_time;c={track_rsvp:i.event_track_rsvp,title:i.event_title,event_time:d==null?0:parseInt(d,10),location_name:i.event_location_name,event_members:l,oid:i.event_id,event_type:i.event_type};Object.assign(h,{lightweight_event:c});a[i.event_id]=Object.assign({},c);Object.assign(h,{lightweight_events:a});x(k,f)}else if(g.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE||g.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME||g.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE||g.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION){e=h.lightweight_event;if(!(e==null)){j=b("bs_js_dict").fromArray(b("bs_js_dict").entries(h.lightweight_events));e.oid===i.event_id&&Object.assign(h,{lightweight_event:H(i,e,b("bs_js_primitive").some(e.event_members))});d=j[i.event_id];d!==void 0&&(j[i.event_id]=H(i,d,void 0),Object.assign(h,{lightweight_events:j}))}x(k,f)}else if(g.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP){c=b("bs_js_dict").fromArray(b("bs_js_dict").entries(h.lightweight_events));a=h.lightweight_event;if(!(a==null)&&a.oid===i.event_id){e=Qa(a.event_members,i);Object.assign(h,{lightweight_event:H(i,a,b("bs_js_primitive").some(e))})}d=c[i.event_id];if(d!==void 0){j=Qa(d.event_members,i);c[i.event_id]=H(i,d,b("bs_js_primitive").some(j));Object.assign(h,{lightweight_events:c})}x(k,f)}else if(g.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE||g.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY){a=b("bs_js_dict").fromArray(b("bs_js_dict").entries(h.lightweight_events));b("bs_curry")._2(I,a,i.event_id);Object.assign(h,{lightweight_event:Ra(a),lightweight_events:a});x(k,f)}return 0}}else return 0}else return 0}function Ua(c,a,d){__p&&__p();d=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):d!==void 0?d:a.body;var e=a.raw_attachments;e=!(e==null)&&e.length>0?b("MercuryAttachment").convertRaw(e):a.attachments;var f=a.removed_timestamp;if(f==null){f=a.log_message_type;d={snippet:d,snippet_attachments:e,snippet_sender:f==null?a.author:null}}else d={snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(a.author),snippet_attachments:null,snippet_sender:null};return Object.assign(c,d)}function Va(a,c){a=b("bs_belt_Map").get(a,c);if(a!==void 0)return b("MercuryThreadInfo").isEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function Wa(a){var c=[b("MercuryFilters.bs").all];a.unread_count>0&&c.push(b("MercuryFilters.bs").unread);a.is_canonical||c.push(b("MercuryFilters.bs").groups);return c}function Xa(a,c){c=c.is_archived?b("MessagingTag").ACTION_ARCHIVED:c.folder;a=a[12][c];if(a!==void 0)return c}function Ya(c,a){return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_primitive").undefined_to_opt(c[12][b("MessagingTag").INBOX]),function(a){return b("bs_js_primitive").undefined_to_opt(a[b("MercuryFilters.bs").all])}),function(d){if(d.threadlist.length===0)return a[7][0];else return d.threadlist.reduce(function(a,d){d=b("bs_belt_Map").get(c[7],d);if(d!==void 0&&b("bs_js_primitive").valFromOption(d).timestamp>c[18])return a+1|0;else return a},0)}),a[7][0])}function Za(c,a){__p&&__p();return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_primitive").undefined_to_opt(c[12][b("MessagingTag").INBOX]),function(a){return b("bs_js_primitive").undefined_to_opt(a[b("MercuryFilters.bs").all])}),function(d){__p&&__p();if(d.threadlist.length===0)return a[7][0];else return d.threadlist.reduce(function(a,d){__p&&__p();var e=b("bs_belt_Map").get(c[7],d);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);if(e.timestamp>c[18]&&!b("MercuryThreadInfo").isMuted(e)){e=c[16][b("MessagingTag").INBOX];if(e!==void 0){e=e.has(d);if(e)return a+1|0;else return a}else return a}else return a}else return a},0)}),a[7][0])}function $a(c,a,d){d=d===b("MessagingTag").PENDING;if(d)return[c[0],c[1],c[2],c[3],c[4],0,c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]];else return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],a]}function ab(a){var c=[b("MercurySyncEventsProxy").getArbiterTypeForFBID(a,"TYP")];b("FBIDCheck").isUser_deprecated(a)||c.push(b("ChannelConstants").getArbiterType("page_typing"));return c}function bb(a){return[a,b("bs_belt_MapString").empty,b("bs_belt_MapString").empty,b("bs_belt_Set").make([b("ParticipantId.bs").cmp]),b("bs_belt_Set").make([b("ParticipantId.bs").cmp]),0,b("bs_belt_MapString").empty,b("bs_belt_Map").make([b("ThreadId.bs").cmp]),new Set(),new Map(),new Map(),new Map(),ia(0),[],{},new Map(),{},{},0]}var cb=[{}],db=[0],K=new Map(),eb=[{}],L=[0],fb=new Set(),M=[{}],gb=[0],N=[cb,db,K,eb,L,fb,M,gb];function O(a,c){__p&&__p();var d=N;a=a;c=c;var e=[];c=b("bs_array").fold_left(function(f,g){__p&&__p();switch(g.tag|0){case 0:e.push(g[0].tag|0);break;case 1:case 2:break}switch(g.tag|0){case 0:var h=g[0];if(typeof h==="number"){var i=f,k=d;k[0][0]={};k[1][0]=k[1][0];k[6][0]={};k[2].clear();b("bs_belt_Map").keysToArray(i[7]).forEach(function(a){return ja(i[0],a)});return[i[0],i[1],b("bs_belt_MapString").empty,i[3],i[4],i[5],i[6],b("bs_belt_Map").make([b("ThreadId.bs").cmp]),new Set(),new Map(),new Map(),i[11],ia(0),i[13],i[14],new Map(),i[16],i[17],i[18]]}else switch(h.tag|0){case 0:k=f;var l=h[0],m=[!1],n=[k[1]];Object.keys(l).forEach(function(a){var c=l[a],d=b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(n[0],a),0);if(c>d){m[0]=!0;n[0]=b("bs_belt_MapString").set(n[0],a,c);return 0}else return 0});if(m[0])return[k[0],n[0],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]];else return k;case 1:return da(f,h[0],[]);case 2:k=f;var o=h[0],p=h[1];p=p.reduce(b("bs_belt_Set").remove,o.reduce(b("bs_belt_Set").add,k[4]));if(p===k[4])return k;else return[k[0],k[1],k[2],k[3],p,k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]];case 3:o=f;p=h[0];k=p.reduce(function(a,c){if(b("bs_belt_Set").has(a,c))return b("bs_belt_Set").remove(a,c);else return b("bs_belt_Set").add(a,c)},o[4]);if(k===o[4])return o;else return[o[0],o[1],o[2],o[3],k,o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];case 4:p=f;k=h[0];o=k.reduce(function(c,d){var a=d.is_messenger_ignored;if(a==null)return c;else if(a)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid))},p[3]);if(o===p[3])return p;else return[p[0],p[1],p[2],o,p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]];case 5:k=f;o=h[0];return[k[0],k[1],k[2],k[3],k[4],o,k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]];case 6:p=f;o=h[0];k=ha(p[0],o);if(k==null)return p;else{var q=b("FBID.bs").ofString(o.from.toString());if(q!==void 0){q=b("bs_js_primitive").valFromOption(q);b("MessengerPersonas.bs").addPersona(o.persona);var r=o.persona,s=b("gkx")("678634");s=!(r==null)&&s?b("MercuryIDs").getParticipantIDFromUserID(r.id):b("MercuryIDs").getParticipantIDFromUserID(q);if(o.st===b("TypingStates").TYPING){r=b("bs_belt_MapString").get(p[6],k);if(r!==void 0)return[p[0],p[1],p[2],p[3],p[4],p[5],b("bs_belt_MapString").set(p[6],k,b("bs_belt_Map").set(b("bs_js_primitive").valFromOption(r),s,Date.now())),p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]];else{q=b("bs_belt_Map").set(b("bs_belt_Map").make([b("ParticipantId.bs").cmp]),s,Date.now());return[p[0],p[1],p[2],p[3],p[4],p[5],b("bs_belt_MapString").set(p[6],k,q),p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}}else if(o.st===b("TypingStates").INACTIVE){r=fa(p[6],k,s);if(r!==p[6])return[p[0],p[1],p[2],p[3],p[4],p[5],r,p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]];else return p}else return p}else return p}case 7:q=f;var t=h[0],u=[!1],y=[q[2]];Object.keys(t).forEach(function(c){__p&&__p();Object.keys(t[c]).forEach(function(d){__p&&__p();var a=b("bs_belt_MapString").get(y[0],c);a=a!==void 0?b("bs_js_primitive").valFromOption(a):b("immutable").OrderedMap();var e=a.get(d),f=t[c][d];if(e==null||f.watermark>e.watermark)e=1;else return 0;if(e===1){u[0]=!0;y[0]=b("bs_belt_MapString").set(y[0],c,a.set(d,f));return 0}});var a=b("bs_belt_MapString").get(y[0],c);if(a!==void 0){u[0]=!0;y[0]=b("bs_belt_MapString").set(y[0],c,b("bs_js_primitive").valFromOption(a).sort(function(a,c){return b("bs_caml_primitive").caml_float_compare(a.watermark,c.watermark)}));return 0}else return 0});if(u[0])return[q[0],q[1],y[0],q[3],q[4],q[5],q[6],q[7],q[8],q[9],q[10],q[11],q[12],q[13],q[14],q[15],q[16],q[17],q[18]];else return q;case 8:var z=f;o=d;k=h[0];if(k.length===0)return z;else{s=z[7];r=k.reduce(function(a,c){return b("bs_belt_Map").set(a,c.thread_id,new(b("ImmutableObject"))(c))},s);Ka(r,o[0][0]);k.forEach(function(a){return x(z[0],a.thread_id)});return[z[0],z[1],z[2],z[3],z[4],z[5],z[6],r,z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15],z[16],z[17],z[18]]}case 9:p=f;q=h[0];if(q.length===0)return p;else{var ua=p[8],xa=b("MercuryServerRequests").getForFBID(p[0]);q.forEach(function(a){__p&&__p();var b=a.thread_id;if(ua.has(b)){ua["delete"](b);if(a.unread_count>0){xa.changeThreadReadStatus(b,!0,null,null,null,null);return 0}else return 0}else return 0});return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],ua,p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}case 10:var E=f;s=h[0];var F=h[1];if(s.length===0)return E;else{o=E[7];var za=new Set(),Ba={},Ha={},La={};k=s.reduce(function(a,c){__p&&__p();if(b("MessengerMessage.bs").isErrorLogMessage(c))return a;else{var d=Ma(E[0],a,c,F);if(d!==void 0){d=b("bs_js_primitive").valFromOption(d);var f=b("bs_belt_Map").set(a,d.thread_id,d),g=c.offline_threading_id;g=b("bs_belt_Option").flatMap(g==null?void 0:b("bs_js_primitive").some(g),function(a){return b("bs_js_primitive").nullable_to_opt(E[10].get(a))});if(g!==void 0||Na(d,c,F)||Oa(E[0],d,c,za))return f;else{g=c.thread_id;if(g==null)throw b("bs_caml_builtin_exceptions").not_found;else g=g;var e=Ba[g];e===void 0&&(Ba[g]=Object.assign({},d));e=Ba[g];Ta(E[0],e,c,g,F);if(b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)){d=Ha[g];d!==void 0?c.timestamp>d.timestamp&&(Ha[g]=c):Ha[g]=c}if(b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").LOG_MESSAGE)){e=La[g];e!==void 0?c.timestamp>e.timestamp&&(La[g]=c):La[g]=c}return f}}else return a}},o);r=b("bs_js_dict").entries(Ba).reduce(function(a,c){__p&&__p();var d=c[1];c=c[0];var e=La[c],f=Ha[c];if(f!==void 0)Ua(d,f,void 0);else if(e!==void 0){f=e.log_message_body;f==null||Ua(d,e,f)}if(e!==void 0&&!e.skip_bump_thread){e.timestamp>d.timestamp&&Object.assign(d,{timestamp:e.timestamp});f=0;F==null?f=1:F||(f=1);f===1&&(e.timestamp>d.server_timestamp&&Object.assign(d,{server_timestamp:e.timestamp}))}f=new(b("ImmutableObject"))(d);if(f.participants.length===0&&!Va(a,f.thread_id))return a;else return b("bs_belt_Map").set(a,c,f)},k);return[E[0],E[1],E[2],E[3],E[4],E[5],E[6],r,E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15],E[16],E[17],E[18]]}case 11:var G=f,Pa=h[0];w.forEach(function(a){__p&&__p();v.forEach(function(d){__p&&__p();var c=G,e=Pa,f=a,g=d,h=[];d=e.filter(function(c){var a=c.filter;a=a==null?b("MercuryFilters.bs").all:a;c=c.folder;c=c==null?f===b("MessagingTag").INBOX:c===f;if(c)return b("bs_caml_obj").caml_equal(a,g);else return!1});var i=[!1];d.forEach(function(a){a.thread_ids.forEach(function(a){h.push(a);return 0});var b=a.limit;if(a.thread_ids.length<b){i[0]=!0;return 0}else return 0});e=na(c,h,f,g);d=c[12][f];c=d[g];c=c!==void 0?c.reachedEnd:!1;d[g]={reachedEnd:i[0]?i[0]:c,threadlist:e[0],existingIDs:e[1]};return 0});return 0});return[G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],G[8],G[9],G[10],G[11],G[12],G[13],G[14],G[15],G[16],G[17],G[18]];case 12:var H=f;q=h[0];var Qa={};w.forEach(function(a){var b={};v.forEach(function(a){b[a]=[];return 0});Qa[a]=b;return 0});q.forEach(function(c){__p&&__p();var d=b("bs_belt_Map").get(H[7],c.thread_id);if(d!==void 0){var e=b("bs_js_primitive").valFromOption(d);d=Xa(H,e);if(d!==void 0){var a=d;Wa(e).forEach(function(b){if(e.timestamp!==0){Qa[a][b].push(c.thread_id);return 0}else return 0});return 0}else return 0}else return 0});w.forEach(function(a){v.forEach(function(b){var c=Qa[a][b];na(H,c,a,b);return 0});return 0});return[H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],H[8],H[9],H[10],H[11],H[12],H[13],H[14],H[15],H[16],H[17],H[18]];case 13:var I=f;p=h[0];s=p.filter(function(a){a=a.thread_id;return!(a==null)});if(s.length>0){var Ra={};w.forEach(function(a){var b={};v.forEach(function(a){b[a]={to_add:[],to_remove:[]};return 0});Ra[a]=b;return 0});s.forEach(function(a){__p&&__p();var c=a.thread_id;if(c==null)return 0;else{var d=b("bs_belt_Map").get(I[7],c);if(d!==void 0){var f=b("bs_js_primitive").valFromOption(d);d=Xa(I,f);if(d!==void 0){var e=d;d=Wa(f);(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE))&&d.forEach(function(a){if(f.timestamp!==0){Ra[e][a].to_add.push(c);return 0}else return 0});w.forEach(function(a){v.forEach(function(b){var c=Ra[a][b];na(I,c.to_add,a,b);return la(I,c.to_remove,a,b)});return 0});return 0}else return 0}else return 0}});o=b("MercuryThreadInformer").getForFBID(I[0]);o.updatedThreadlist();return[I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],I[12],I[13],I[14],I[15],I[16],I[17],I[18]]}else return I;case 14:var J=f,Za=d;k=h[0];if(k.length>0){k.forEach(function(a){if(Za[5].has(a))return 0;else{J[13].push(a);Za[5].add(a);return 0}});r=b("MercuryThreadInformer").getForFBID(J[0]);r.updatedThreadlist();return[J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],J[8],J[9],J[10],J[11],J[12],J[13],J[14],J[15],J[16],J[17],J[18]]}else return J;case 15:q=f;p=h[0];var ab=h[1];return A(function(a){return a.page_unsubscribe_status!==ab},q,p,{page_unsubscribe_status:ab});case 16:s=f;o=h[0];k=h[1];return A(void 0,s,o,{can_reply:k});case 17:r=f;q=h[0];p=h[1];s=b("bs_belt_Map").get(r[7],q);if(s!==void 0){o=Object.assign({},b("bs_js_primitive").valFromOption(s));ma(b("MercuryIDs").getParticipantIDFromUserID(r[0]),o,p);return A(void 0,r,q,o)}else return r;case 18:k=f;s=h[0];p=h[1];q=b("bs_belt_Map").get(k[7],s);if(q!==void 0){o=b("bs_js_primitive").valFromOption(q);r=o.page_thread_info;q=b("ImmutableObject").set(o,{page_thread_info:Object.assign(r==null?{}:r,{flagged:p})});o=b("bs_belt_Map").set(k[7],s,q);x(k[0],s);return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],o,k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]]}else return k;case 19:r=f;p=h[0];return A(function(a){return b("MessageRequestUtils").isMessageRequest(a)},r,p,{folder:b("MessagingTag").INBOX});case 20:q=f;s=h[0];o=h[1];return A(void 0,q,s,{custom_like_icon:o});case 21:k=f;r=h[0];p=h[1];q=b("bs_belt_Map").get(k[7],r);if(q!==void 0){s=b("bs_js_primitive").valFromOption(q);o=b("bs_js_dict").fromArray(b("bs_js_dict").entries(s.admins));q=b("ImmutableObject").set(s,{admins:b("bs_array").fold_left(function(a,b){a[b.admin_fbid]=b.admin_type;return a},o,p)});s=b("bs_belt_Map").set(k[7],r,q);x(k[0],r);return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],s,k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]]}else return k;case 22:o=f;p=h[0];q=h[1];r=b("bs_belt_Map").get(o[7],p);if(r!==void 0){s=b("bs_js_primitive").valFromOption(r);k=b("bs_js_dict").fromArray(b("bs_js_dict").entries(s.admins));r=b("ImmutableObject").set(s,{admins:b("bs_array").fold_left(function(d,c){var a=d[c];a!==void 0&&b("bs_curry")._2(ea,d,c);return d},k,q)});s=b("bs_belt_Map").set(o[7],p,r);x(o[0],p);return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],s,o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]]}else return o;case 23:k=f;q=h[0];r=h[1];return A(void 0,k,q,{joinable_mode:r});case 24:p=f;s=h[0];o=h[1];return A(void 0,p,s,{approval_mode:o});case 25:k=f;q=h[0];r=h[1];p=h[2];var bb=h[3],cb=h[4];s=b("bs_belt_Map").get(k[7],q);if(s!==void 0){o=b("bs_js_primitive").valFromOption(s);s=o.group_approval_queue;o={approval_queue_ids:o.approval_queue_ids.slice(),group_approval_queue:s==null?null:s.slice()};r==null||o.approval_queue_ids.indexOf(r)===-1&&Object.assign(o,{approval_queue_ids:o.approval_queue_ids.concat([r])});if(!(p==null)){s=o.group_approval_queue;s==null?Object.assign(o,{group_approval_queue:[p]}):s.map(function(a){return a.requester.id}).indexOf(p.requester.id)===-1&&Object.assign(o,{group_approval_queue:s.concat([p])})}bb==null||Object.assign(o,{approval_queue_ids:o.approval_queue_ids.filter(function(a){return b("bs_caml_obj").caml_notequal(a,bb)})});if(!(cb==null)){r=o.group_approval_queue;Object.assign(o,{group_approval_queue:(r==null?[]:r).filter(function(a){return a.requester.id!==cb})})}return A(void 0,k,q,o)}else return k;case 26:s=f;p=h[0];r=h[1];return A(void 0,s,p,{is_pin_protected:r});case 27:q=f;o=h[0];k=h[1];s=h[2];p=h[3];r=b("bs_belt_Map").get(q[7],o);if(r!==void 0){if(k==null){r=b("bs_js_primitive").valFromOption(r).rtc_call_data;r=r==null?void 0:k}else r=k;return A(void 0,q,o,{rtc_call_data:new(b("ImmutableObject"))({call_state:s,server_info_data:p,initiator_fbid:r})})}else return q;case 28:k=f;o=h[0];s=h[1];return A(void 0,k,o,{comm_status:s});case 29:p=f;r=h[0];q=h[1];k=h[2];o=h[3];s=q==null?{nodes:[]}:{nodes:[{admin:{id:q,name:k,profile_picture:{uri:o}}}]};return A(void 0,p,r,{comm_item_owners:s});case 30:q=f;k=h[0];var db=h[1];o=h[2];p=b("bs_belt_Map").get(q[7],k);if(p!==void 0){r=b("bs_js_primitive").valFromOption(p).participants_event_status;s=(r==null?[]:r).filter(function(a){return b("bs_caml_obj").caml_notequal(a.participant_id,db)});s.push({participant_id:db,event_status:o});return A(void 0,q,k,{participants_event_status:s})}else return q;case 31:p=f;r=h[0];o=h[1];k=h[2];if(k==null||!b("bs_caml_obj").caml_equal(k,b("MessengerGroupsSyncStatus").OPT_IN))s=1;else return A(void 0,p,r,{groups_sync_status:o});if(s===1)return A(void 0,p,r,{groups_sync_status:o,work_associated_group:null});case 32:q=f;k=h[0];s=h[1];p=h[2];if(s==null)return A(void 0,q,k,{work_associated_group:null});else if(b("bs_caml_obj").caml_equal(s,b("MessengerGroupsSyncStatus").OPT_IN)){r=new(b("URI"))(document.URL);o=r.getDomain();s=b("XGroupsController").getURIBuilder().setString("idorvanity",p).getURI().setDomain(o==null?"":o.replace("messenger.com","facebook.com")).setPort(r.getPort()).setProtocol("https");return A(void 0,q,k,{work_associated_group:{id:p,url:s.toString(),group_saves:{count:0},group_events:{count:0}}})}else return A(void 0,q,k,{work_associated_group:null});case 33:o=f;r=h[0];p=h[1];return A(void 0,o,r,{description:p});case 34:s=f;q=h[0];k=h[1];return A(void 0,s,q,{solid_color:k.solid_color,header_color:k.header_color,footer_color:k.footer_color,gradient_colors:k.gradient_colors,theme_id:k.theme_id});case 35:o=f;r=h[0];p=h[1];return A(void 0,o,r,{joinable_link:p});case 36:var K=f,eb=h[0];s=b("bs_belt_Map").toArray(K[7]).reduce(function(a,c){var d=c[1];c=c[0];if(d.folder===eb){x(K[0],c);return b("bs_belt_Map").set(a,c,b("ImmutableObject").set(d,{unread_count:0}))}else return a},K[7]);K[16][eb]=new Set();q=b("MercuryThreadInformer").getForFBID(K[0]);q.updatedUnreadState();return[K[0],K[1],K[2],K[3],K[4],K[5],K[6],s,K[8],K[9],K[10],K[11],K[12],K[13],K[14],K[15],K[16],K[17],K[18]];case 37:var L=f,fb=h[0];k=b("bs_belt_Map").remove(L[7],fb);L[15]["delete"](fb);L[9].forEach(function(a,c,d){__p&&__p();if(b("bs_caml_obj").caml_equal(a.thread_id,fb)){L[9]["delete"](a.message_id);c=a.offline_threading_id;if(!(c==null)){d=L[10].get(c);d==null||(L[9]["delete"](d),L[10]["delete"](c))}L[10]["delete"](a.message_id);return 0}else return 0});ja(L[0],fb);return[L[0],L[1],L[2],L[3],L[4],L[5],L[6],k,L[8],L[9],L[10],L[11],L[12],L[13],L[14],L[15],L[16],L[17],L[18]];case 38:o=h[0];return Aa(f,d,[o.message_id,o,h[1]]);case 39:r=f;p=[h[0],h[1],h[2]];q=p[2];s=p[1];var M=p[0];if(s.length!==0){k=Da(r,[M,s,q]);o=0;q!==void 0?b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(q),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||(o=1):o=1;o===1&&b("MercuryServerRequests").getForFBID(k[0]).deleteMessages(M,s);return b("bs_belt_Array").reduce(s,k,function(a,d){__p&&__p();d=C(a,d);var c=b("bs_belt_Map").get(a[7],M);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c);c=b("ImmutableObject").set(b("ImmutableObject").set(c,Ea(a,M)),{message_count:c.message_count-1|0});c=b("bs_belt_Map").set(a[7],M,c);x(a[0],M);c=[a[0],a[1],a[2],a[3],a[4],a[5],a[6],c,a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}else c=a;d!==void 0&&Fa(b("bs_js_primitive").valFromOption(d));return c})}else return r;case 40:return ta(f,h[0],h[1]);case 41:p=f;q=h[0];o=h[1];s=b("bs_belt_Map").get(p[7],q);if(s!==void 0){k=b("bs_js_primitive").valFromOption(s);var gb;switch(o.tag|0){case 0:gb=b("ImmutableObject").set(k,{reactions_mute_mode:o[0]?1:0});break;case 1:gb=b("ImmutableObject").set(k,{mentions_mute_mode:o[0]?1:0});break;case 2:r=o[0];s=r===0;gb=b("ImmutableObject").set(k,{mute_until:s?void 0:r});break}o=b("bs_belt_Map").set(p[7],q,gb);x(p[0],q);return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],o,p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}else return p;case 42:k=f;s=h[0];r=h[1];q=b("bs_belt_Map").get(k[7],s);if(q!==void 0){o=b("bs_js_primitive").valFromOption(q);if(o.is_archived!==r){p=b("MessengerFolders.bs").getFromMeta(o);q=o.comm_status;q=q==null?b("ImmutableObject").set(o,{is_archived:r}):b("ImmutableObject").set(o,{is_archived:r,comm_status:r?b("PageCommItemStatus").DONE:b("PageCommItemStatus").TODO});o=b("bs_belt_Map").set(k[7],s,q);ra(k,q,p);sa(k,q);x(k[0],s);return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],o,k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]]}else return k}else return k;case 43:r=f;p=h[0];q=h[1];s=b("bs_belt_Map").get(r[7],p);if(s!==void 0){o=b("bs_js_primitive").valFromOption(s);if(o.is_page_follow_up!==q){k=b("ImmutableObject").set(o,{is_page_follow_up:q});s=b("bs_belt_Map").set(r[7],p,k);x(r[0],p);return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],s,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15],r[16],r[17],r[18]]}else return r}else return r;case 44:o=f;q=h[0];k=h[1];p=h[2];s=h[3];r=h[4];var N=b("bs_belt_Map").get(o[7],q);if(N!==void 0){N=b("bs_js_primitive").valFromOption(N);p=Sa(o[0],N,p,o[8],k);p=p!==void 0&&N.last_message_timestamp>N.last_read_timestamp?b("bs_js_primitive").some(Object.assign(b("bs_js_primitive").valFromOption(p),{last_read_timestamp:N.last_message_timestamp})):p;if(p!==void 0){p=b("ImmutableObject").set(N,b("bs_js_primitive").valFromOption(p));var O=b("bs_belt_Map").set(o[7],q,p);if(s){s=!N.read_only&&N.folder===b("MessagingTag").INBOX;var P=b("MercuryServerRequests").getForFBID(o[0]);P.changeThreadReadStatus(p.thread_id,k,r,p.last_read_timestamp,s,p.last_message_type)}P=O}else P=o[7];r=b("MessengerFolders.bs").getFromMeta(N);k?(la(o,[q],r,b("MercuryFilters.bs").unread),qa(o,r,b("bs_js_primitive").some(q))):(na(o,[q],r,b("MercuryFilters.bs").unread),oa(o,r,b("bs_js_primitive").some(q)));return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],P,o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]]}else return o;case 45:var Q=f,R=h[0];s=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(Q[15].get(R)),function(a){return[a[0],[]]}),[0,[]]);Q[15].set(R,s);p=b("bs_belt_Option").map(b("bs_belt_Map").get(Q[7],R),function(a){return b("ImmutableObject").set(a,{message_count:0})});if(p!==void 0){var hb=b("bs_js_primitive").valFromOption(p);O=b("bs_belt_Map").set(Q[7],R,hb);v.forEach(function(a){return la(Q,[R],hb.folder,a)});qa(Q,hb.folder,b("bs_js_primitive").some(R));N=O}else N=Q[7];ka(Q[0],R);return[Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],N,Q[8],Q[9],Q[10],Q[11],Q[12],Q[13],Q[14],Q[15],Q[16],Q[17],Q[18]];case 46:k=f;r=d;q=[h[0],h[1],h[2]];P=Ca(k,[q[0],q[1]]);o=P.thread_id;s=Da(k,[o,[P.message_id],q[2]]);p=r[2].get(o);p==null||r[2].set(o,Math.max(0,p-1|0));return s;case 47:O=f;N=[h[0],h[1]];k=Ca(O,[N[0],N[1]]);b("MercuryServerRequests").getForFBID(O[0]).sendNewMessage(Object.assign(k,{preview_attachments:void 0}));return O;case 48:P=f;q=[h[0],h[1],h[2],h[3]];r=q[2];o=q[1];p=q[0];s=C(P,p);if(s!==void 0){N=b("bs_js_primitive").valFromOption(s);k=b("bs_js_dict").map(function(a){return a},b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(N.reactions),{}));o!==void 0?k[r]=o:b("bs_curry")._2(wa,k,r);O=Object.assign(Object.assign({},N),{reactions:k});s=N.thread_id;s==null||B(P[0],s,p,q[3]);return D(P,[p,O])}else return P;case 49:o=f;r=h[0];if(b("gkx")("676919")){k=C(o,r);if(k!==void 0){N=b("bs_js_primitive").valFromOption(k);s=N.attachments;if(s==null||s.length===0)return o;else{q=b("bs_caml_array").caml_array_get(s,0);p=q.share;if(p==null)return o;else{O=p.target;if(O==null)return o;else{P=O.message_state;if(P==null)return o;else{k=Object.assign(Object.assign({},N),{attachments:b("bs_caml_array").caml_array_set(b("bs_array").copy(s),0,Object.assign(Object.assign({},q),{share:Object.assign(Object.assign({},p),{target:Object.assign(Object.assign({},O),{message_state:"EXPIRED"})})}))});return D(o,[r,k])}}}}}else return o}else return o;case 50:P=f;N=[h[0],h[1],h[2]];s=N[0];q=C(P,s);if(q!==void 0){p=b("bs_js_primitive").valFromOption(q);O=p.attachments;if(O==null||O.length===0)return P;else{r=b("bs_caml_array").caml_array_get(O,0);k=r.share;if(k==null)return P;else{o=k.target;if(o==null)return P;else{q=b("bs_array").copy(O);b("bs_caml_array").caml_array_set(q,0,Object.assign(Object.assign({},r),{share:Object.assign(Object.assign({},k),{target:Object.assign(Object.assign({},N[1]),{live_location_id:o.live_location_id})})}));O=Object.assign(Object.assign({},p),{attachments:q});r=p.thread_id;r==null||B(P[0],r,s,N[2]);return D(P,[s,O])}}}}else return P;case 51:k=f;o=h[0];q=h[1];var S=o.replaced_message_id;if(S==null)return k;else{p=C(k,S);if(p!==void 0){r=o.message_id;N={timestamp:o.timestamp,profile_ranges:o.profile_ranges};s=b("bs_js_primitive").nullable_to_opt(o.status);s!==void 0&&(N.status=b("bs_js_primitive").valFromOption(s));O=b("bs_js_primitive").nullable_to_opt(o.log_message_data);O!==void 0&&(N.log_message_data=b("bs_js_primitive").valFromOption(O));P=b("bs_js_primitive").nullable_to_opt(o.meta_ranges);P!==void 0&&(N.meta_ranges=b("bs_js_primitive").valFromOption(P));s=b("bs_js_primitive").nullable_to_opt(o.ranges);s!==void 0&&(N.ranges=b("bs_js_primitive").valFromOption(s));O=b("bs_js_primitive").nullable_to_opt(o.raw_attachments);O!==void 0&&(N.raw_attachments=b("bs_js_primitive").valFromOption(O));P=b("bs_js_primitive").nullable_to_opt(o.attachments);P!==void 0&&(N.attachments=b("bs_js_primitive").valFromOption(P));s=b("bs_js_primitive").nullable_to_opt(o.body);s!==void 0&&(N.body=b("bs_js_primitive").valFromOption(s));O=b("bs_js_primitive").nullable_to_opt(o.platform_xmd);O!==void 0&&(N.platform_xmd=b("bs_js_primitive").valFromOption(O));P=N;s=Object.assign(Object.assign({},b("bs_js_primitive").valFromOption(p)),P);b("MercuryMessageIDs.bs").addServerID(r,r);var T=D(k,[r,s]);if(r!==S){T[9]["delete"](S);T[10].set(S,r);O=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(o.thread_id),function(a){return b("bs_js_primitive").nullable_to_opt(T[15].get(a))});N=o.thread_id;if(O!==void 0&&!(N==null)){p=O;P=ya(T,[r].concat(p[1].filter(function(a){return a!==S})));T[15].set(N,[p[0],P])}}s=o.message_id;O=o.thread_id;O==null||(B(T[0],O,S,q),B(T[0],O,s,q));return[T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15],T[16],T[17],T[18]]}else return k}case 52:r=f;N=d;p=[h[0],h[1]];P=p[0];o=C(r,p[1]);if(o!==void 0&&b("MessengerMessage.bs").isTitanMessage(b("bs_js_primitive").valFromOption(o))){O=N[2].get(P);O==null?N[2].set(P,1):N[2].set(P,1+O|0)}return r;case 53:return Ga(f,d,h[0],h[1]);case 54:s=f;q=d;k=h[0];p=h[1];o=Ia(s,q,k,p);N=ga(o,k);if(k.folder===b("MessagingTag").PENDING&&b("bs_caml_obj").caml_equal(p,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)))return[N[0],N[1],N[2],N[3],N[4],N[5]+1|0,N[6],N[7],N[8],N[9],N[10],N[11],N[12],N[13],N[14],N[15],N[16],N[17],N[18]];else if(k.folder===b("MessagingTag").INBOX){P=k.thread_id;if(P==null)return N;else return ta(N,P,k.folder)}else return N;case 55:O=f;r=d;s=h[0];q=h[1];return Ia(O,r,s,q);case 56:o=f;p=d;P=h[0];k=h[1];N=b("bs_belt_Map").get(o[7],P);O=!1;if(k&&!p[5].has(P))o[13].push(P),p[5].add(P),O=!0;else if(!k&&p[5].has(P)){r=o[13].indexOf(P);r>-1&&o[13].splice(r,1);p[5]["delete"](P);O=!0}if(N!==void 0){s=b("bs_js_primitive").valFromOption(N);if(s.is_pinned!==k){q=b("ImmutableObject").set(s,{is_pinned:k});r=b("bs_belt_Map").set(o[7],P,q);x(o[0],P);O=!0;p=r}else p=o[7]}else p=o[7];if(O)return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],p,o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];else return o;case 57:N=f;s=h[0];k=b("bs_js_dict").fromArray(b("bs_js_dict").entries(N[14]));k[s]=[];return[N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],N[8],N[9],N[10],N[11],N[12],N[13],k,N[15],N[16],N[17],N[18]];case 58:q=f;P=h[0];r=b("bs_js_dict").fromArray(b("bs_js_dict").entries(q[14]));O=P.actor.id;p=r[O];p!==void 0?(p.push(P),r[O]=p):r[O]=[P];return[q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],q[8],q[9],q[10],q[11],q[12],q[13],r,q[15],q[16],q[17],q[18]];case 59:o=f;s=h[0];k=b("bs_js_dict").fromArray(b("bs_js_dict").entries(o[14]));N=k[s];N===void 0&&(k[s]=[]);return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],k,o[15],o[16],o[17],o[18]];case 60:p=f;var ib=h[0],jb=b("bs_js_dict").fromArray(b("bs_js_dict").entries(p[14]));O=Object.keys(jb);O.forEach(function(b){var a=jb[b];if(a!==void 0){a=a.filter(function(a){return a.id!==ib.messageFBID});jb[b]=a;return 0}else return 0});return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],jb,p[15],p[16],p[17],p[18]];case 61:var U=f;P=[h[0],h[1]];var kb=P[1];P[0].forEach(function(b){var a=U[15].get(b);a==null?U[15].set(b,[1,[]]):U[15].set(b,[1,a[1]]);return va(U[0],b,kb)});return[U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15],U[16],U[17],U[18]];case 62:var V=f;r=h[0];r.forEach(function(c){__p&&__p();var a=c.folder;if(pa.includes(a)){c=c.thread_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromThreadFBID(a)}).concat(c.other_user_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromUserID(a)}));V[16][a]=new Set(c);a=b("MercuryThreadInformer").getForFBID(V[0]);a.updatedUnreadState();return 0}else return 0});return[V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],V[8],V[9],V[10],V[11],V[12],V[13],V[14],V[15],V[16],V[17],V[18]];case 63:var W=f,lb=d;q=h[0];var c=[W[18]];q.forEach(function(a){W[17][a.folder]=a.unread_count;a.unread_count===0&&(W[16][a.folder]=new Set());a.folder===b("MessagingTag").INBOX&&(c[0]=b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.seen_timestamp),c[0]),lb[7][0]=a.unseen_count);a=b("MercuryThreadInformer").getForFBID(W[0]);a.updatedUnreadState();a.updatedUnseenState();return 0});return[W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8],W[9],W[10],W[11],W[12],W[13],W[14],W[15],W[16],W[17],c[0]];case 64:var X=f;N=h[0];N.forEach(function(a){__p&&__p();var c=a.other_user_fbid;if(c==null){var d=a.thread_fbid;d=d==null?void 0:b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromThreadFBID(d))}else d=b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromUserID(c));c=a.thread_id;d=c==null?d:c==null?void 0:b("bs_js_primitive").some(c);c=a.thread_id;var e;if(c==null)e="";else{c=b("bs_belt_Map").get(X[7],c);e=c!==void 0?b("MessengerFolders.bs").getFromMeta(b("bs_js_primitive").valFromOption(c)):a.folder}if(pa.includes(e)&&(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE))&&a.is_unread)return oa(X,e,d);else return 0});return[X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],X[8],X[9],X[10],X[11],X[12],X[13],X[14],X[15],X[16],X[17],X[18]];case 65:var Y=f,mb=h[0];pa.forEach(function(c){__p&&__p();var a=Y[16][c];if(a!==void 0){b("bs_js_dict").entries(mb).forEach(function(b){var c=b[0];if(a.has(c)){a.add(b[1]);a["delete"](c);return 0}else return 0});return 0}else return 0});return[Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],Y[8],Y[9],Y[10],Y[11],Y[12],Y[13],Y[14],Y[15],Y[16],Y[17],Y[18]];case 66:return $a(f,h[0],h[1]);case 67:s=f;k=h[0];o=h[1];O=h[2];p=C(s,k);if(p!==void 0){P=b("bs_js_primitive").valFromOption(p);Fa(P);r=Object.assign(Object.assign({},P),{removed_timestamp:o,message_unsendability_status:b("MessageUnsendabilityStatus").DENY_TOMBSTONE_MESSAGE});q=D(s,[k,r]);N=P.thread_id;if(N==null)return q;else{B(q[0],N,k,O);p=b("bs_belt_Map").get(q[7],N);if(p!==void 0){o=b("ImmutableObject").set(b("bs_js_primitive").valFromOption(p),Ea(q,N));r=b("bs_belt_Map").set(q[7],N,o);x(q[0],N);return[q[0],q[1],q[2],q[3],q[4],q[5],q[6],r,q[8],q[9],q[10],q[11],q[12],q[13],q[14],q[15],q[16],q[17],q[18]]}else return q}}else return s;case 68:P=f;k=h[0];O=h[1];p=b("ThreadConnectivityStatus.bs").toGraphQLValue(O);o=b("bs_belt_Map").get(P[7],k);if(o!==void 0){N=b("bs_js_primitive").valFromOption(o);r=N.thread_connectivity_data;q=r==null?b("ImmutableObject").set(N,{thread_connectivity_data:{connectivity_status:p,first_sender_id:null}}):b("ImmutableObject").set(N,{thread_connectivity_data:{connectivity_status:p,first_sender_id:r.first_sender_id}});return[P[0],P[1],P[2],P[3],P[4],P[5],P[6],b("bs_belt_Map").set(P[7],k,q),P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15],P[16],P[17],P[18]]}else return P}case 1:s=g[0];if(typeof s==="number")if(s===0){h=f;var nb=[];b("bs_belt_MapString").forEach(h[6],function(a,c){return b("bs_belt_Map").forEach(c,function(b,c){if(c<Date.now()-3e4){nb.push([a,b]);return 0}else return 0})});if(nb.length===0)return h;else{var a=[h[6]];nb.forEach(function(b){a[0]=fa(a[0],b[0],b[1]);return 0});return[h[0],h[1],h[2],h[3],h[4],h[5],a[0],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15],h[16],h[17],h[18]]}}else{O=f;o=d;if(Ya(O,o)>0){N=b("MercuryServerRequests").getForFBID(O[0]);N.markSeen();return $a(O,N.getLastActionTimestamp(),b("MessagingTag").INBOX)}else return O}else switch(s.tag|0){case 0:var Z=f,ob=d;p=s[0];r=s[1];k=s[2];q=s[3];var pb=Z[7],qb=[];P=ba(p.reduce(function(c,d){var a=b("bs_belt_Map").get(pb,d);if(a!==void 0)return b("bs_belt_Map").set(c,d,b("bs_js_primitive").valFromOption(a));else{qb.push(d);return c}},b("bs_belt_Map").make([b("ThreadId.bs").cmp])));if(qb.length===0){b("bs_curry")._1(k,P);return Z}else{h=ob[1];o=h[0].toString();ob[1][0]=h[0]+1|0;ob[0][0][o]=[p,k];N=b("MercuryServerRequests").getForFBID(Z[0]);O=qb.reduce(function(a,d){__p&&__p();var e=b("MercuryIDs").tokenize(d),f=e.type;e=e.value;if(f==="user"){f=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(e));e=b("MercuryIDs").getParticipantIDFromUserID(Z[0]);var c=b("bs_caml_obj").caml_equal(f,e);c=b("MessengerThreadUtils.bs").createNewLocalThread(e,d,c?[e]:[e,f],null);e=b("bs_belt_Map").set(a,d,c);Ka(e,ob[0][0]);return e}else return a},Z[7]);N.fetchThreadData(qb,q);b("bs_curry")._1(r,o);if(O===Z[7])return Z;else return[Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],O,Z[8],Z[9],Z[10],Z[11],Z[12],Z[13],Z[14],Z[15],Z[16],Z[17],Z[18]]}case 1:P=d[0][0];b("bs_curry")._2(Ja,P,s[0]);d[0][0]=P;return f;case 2:var $=f;h=s[0];p=b("bs_belt_Array").keepMap(h,function(a){a=C($,a);if(a!==void 0)return b("bs_js_primitive").nullable_to_opt(b("bs_js_primitive").valFromOption(a).offline_threading_id)});p.forEach(function(a){$[10]["delete"](a);return 0});return[$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],$[8],$[9],$[10],$[11],$[12],$[13],$[14],$[15],$[16],$[17],$[18]];case 3:k=f;var rb=s[0];N=b("bs_js_dict").fromArray(b("bs_js_dict").entries(k[14]));q=rb.montageActorID;r=N[q];if(r!==void 0){o=r.map(function(a){__p&&__p();var c=b("bs_caml_obj").caml_equal(rb.montageMessageID,a.id);if(c){c=a;var d=rb,e=c.montage_overlays.map(function(a){__p&&__p();if(b("bs_caml_obj").caml_equal(a.poll.id,d.pollID)){var c=a.poll.poll_options.map(function(a,c){c=c===d.optionVotedIndex;if(c)return new(b("ImmutableObject"))({text:a.text,vote_count:a.vote_count+1|0});else return a});c=new(b("ImmutableObject"))({can_viewer_vote:a.poll.can_viewer_vote,id:a.poll.id,poll_options:c,viewer_vote_index:d.optionVotedIndex});return b("ImmutableObject").set(new(b("ImmutableObject"))(a),{poll:c})}else return a});return b("ImmutableObject").set(new(b("ImmutableObject"))(c),{montage_overlays:e})}else return a});N[q]=o}return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],N,k[15],k[16],k[17],k[18]];case 4:O=b("bs_belt_Map").set(f[7],s[0],s[1]);return[f[0],f[1],f[2],f[3],f[4],f[5],f[6],O,f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15],f[16],f[17],f[18]]}case 2:P=g[0];switch(P.tag|0){case 0:b("bs_curry")._1(P[0],{blocked_ids:f[4]});break;case 1:b("bs_curry")._1(P[1],b("bs_belt_Map").get(f[7],P[0]));break;case 2:b("bs_curry")._1(P[0],f[13].concat([]));break;case 3:b("bs_curry")._2(P[0],f,d);break}return f}},c,a);e.length>0&&b("LogHistory").getInstance("messenger_state").debug("actions",b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(JSON.stringify(e)),""));return c}function P(c,a){__p&&__p();var d=function(c){b("bs_curry")._1(a,[b("bs_block").__(0,[b("bs_block").__(6,[c])])]);b("setTimeoutAcrossTransitions")(function(){return b("bs_curry")._1(a,[b("bs_block").__(1,[0])])},3e4);return 0};b("Arbiter").subscribe(ab(c),function(a,b){a=b.obj;b=a.to;if(!(b==null)&&b.toString()!==c)return 0;else{d(a);return 0}});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(d,e){__p&&__p();d=function(d,a){__p&&__p();var f={};b("bs_belt_MapString").toArray(d[2]).forEach(function(a){var b={};a[1].forEach(function(c,d,a){b[d]=c.watermark;return 0});f[a[0]]=b;return 0});a="read_receipts:"+c;e[a]=f;return 0};return b("bs_curry")._1(a,[b("bs_block").__(2,[b("bs_block").__(3,[d])])])});return 0}var Q=b("MessengerPersistantViewerKeyedSubscriptionComponent.bs").Make([bb,O,P,"MessengerStateProvider"]),R=Q[2];function hb(a,c){return b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(0,[c])])])}function S(a,c){b("MercuryAssert").isThreadID(c);var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);return b("bs_js_null_undefined").fromOption(d[0])}function T(a,c,d,e){__p&&__p();if(c.length===0){b("bs_curry")._1(d,{});return null}else{b("MercuryAssert").allThreadID(c);var f=[null],g=function(a){f[0]=a;return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(0,[c,g,d,e])])]);return f[0]}}function ib(a,c,d,e){return T(a,[c],function(a){return b("bs_curry")._1(d,a[c])},e)}function jb(a,c,d,e){__p&&__p();var f=[void 0],g=function(a){f[0]=a;return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f[0];if(g!==void 0)return b("bs_js_primitive").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function U(a){var c=b("MercuryLocalIDs").generateThreadID(null);jb(a,c,[],null);return c}function kb(a,c,d,e){__p&&__p();var f=[void 0],g=function(a){f[0]=a;return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f[0];if(g!==void 0)return b("bs_js_primitive").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalGroupGeneralThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function V(a,c,d){var e=b("MercuryLocalIDs").generateThreadID(null);kb(a,e,c,d);return e}function W(a,c){var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d[0];if(a!==void 0)return b("MercuryThreadInfo").isEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function lb(a,c){var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d[0];if(a!==void 0)return b("MercuryThreadInfo").isNewEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function X(c){var a=[[]],d=function(b){a[0]=b;return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(2,[d])])]);return a[0]}function Y(a,c){return b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(1,[c])])])}function mb(a){__p&&__p();var c=a.payload_source;if(c==null)return!1;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_THREAD_SYNC)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS))return!0;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INITIAL_DATA)){c=a.ordered_threadlists;return!(c==null)}else return!1}function nb(a,c){c=b("bs_block").__(1,[b("bs_block").__(3,[c])]);return b("bs_curry")._2(R,b("bs_js_primitive").some(a),[c])}function Z(a,c){return b("bs_curry")._2(R,a==null?void 0:b("bs_js_primitive").some(a),c)}function ob(a){__p&&__p();var c=[],d=!1;if(!(a==null)){var e=a.payload_source;e==null||b("bs_caml_obj").caml_equal(e,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)&&(d=!0);e=a.newlyAddedClientIDs;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(65,[e])]));e=a.delivery_receipts;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(0,[e])]));e=a.message_ignored_ids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(1,[e])]));e=a.threads;if(!(e==null)){var f=a.payload_source;f==null||(b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO)&&c.push(b("bs_block").__(0,[b("bs_block").__(9,[e])])),b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE)&&(e.length>0&&c.unshift(b("bs_block").__(0,[b("bs_block").__(37,[b("bs_caml_array").caml_array_get(e,0).thread_id])]))));c.push(b("bs_block").__(0,[b("bs_block").__(8,[e])]))}f=a.participants;if(!(f==null)){c.push(b("bs_block").__(0,[b("bs_block").__(4,[f])]));var g=[],h=[];f.forEach(function(a){if(a.is_messenger_blocked){g.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}else{h.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}});(g.length>0||h.length>0)&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[g,h])]))}e=a.message_blocked_ids;e==null||e.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[e,[]])]));f=a.pending_folder_unseen_count;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(5,[f])]));e=a.global_actions;e==null||e.forEach(function(a){b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_READ)&&c.push(b("bs_block").__(0,[b("bs_block").__(36,[a.folder])]));if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_SEEN)){c.push(b("bs_block").__(0,[b("bs_block").__(66,[a.timestamp,a.folder])]));return 0}else return 0});if(mb(a)){f=a.ordered_threadlists;e=0;!(f==null)&&f.length>0?c.push(b("bs_block").__(0,[b("bs_block").__(11,[f])])):e=1;if(e===1){f=a.threads;e=a.payload_source;f==null||!(e==null)&&f.length>0&&e!==b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS&&c.push(b("bs_block").__(0,[b("bs_block").__(12,[f])]))}}e=a.pinned_thread_ids;e==null||mb(a)&&c.push(b("bs_block").__(0,[b("bs_block").__(14,[e])]));f=a.roger;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(7,[f])]));e=a.montage_delete_message_delta;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(60,[e])]));f=a.montage_new_message_delta;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(58,[f])]));e=a.montage_poll_sticker_vote;e==null||e.forEach(function(a){c.push(b("bs_block").__(1,[b("bs_block").__(3,[a])]));return 0});f=a.current_montage_thread;if(!(f==null)){e=f.user;if(!(e==null)){f=e.messenger_montage_thread;f==null||(c.push(b("bs_block").__(0,[b("bs_block").__(59,[e.id])])),f.montage_messages.edges.forEach(function(a){c.push(b("bs_block").__(0,[b("bs_block").__(58,[a.node])]));return 0}))}}e=a.unread_thread_fbids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(62,[e])]));f=a.message_counts;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(63,[f])]));e=a.actions;if(!(e==null)){c.push(b("bs_block").__(0,[b("bs_block").__(10,[e,a.from_client])]));if(mb(a)){f=a.actions;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(13,[f])]))}c.push(b("bs_block").__(0,[b("bs_block").__(64,[e])]));f=a.payload_source;var i=f==null?void 0:b("bs_js_primitive").some(f);e.forEach(function(d){__p&&__p();var e=d.action_type;if(b("bs_caml_obj").caml_equal(i,b("bs_js_primitive").some(b("MercuryPayloadSource").SERVER_SEARCH))){c.push(b("bs_block").__(0,[b("bs_block").__(38,[d,0])]));return 0}else if(b("bs_caml_obj").caml_equal(b("bs_js_primitive").nullable_to_opt(d.client_state),b("bs_js_primitive").some(b("MercuryMessageClientState").SEND_TO_SERVER))){c.push(b("bs_block").__(0,[b("bs_block").__(38,[d,0])]));return 0}else{var f=d.thread_id,g=d.upload_id,h=d.upload_data,j=d.message_ids;u(d);if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_MESSAGES))if(!(f==null)&&!(j==null)){c.push(b("bs_block").__(0,[b("bs_block").__(39,[f,j,i])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FOLDER)){j=d.new_folder;if(!(f==null)&&!(j==null)){c.push(b("bs_block").__(0,[b("bs_block").__(40,[f,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_ARCHIVED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(42,[f,d.archived])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_MUTE_SETTINGS)){j=d.reactions_mute_mode;var k=d.mentions_mute_mode,l=d.mute_until;k=j==null?k==null?l==null?void 0:b("bs_block").__(2,[l]):l==null?b("bs_block").__(1,[k===1]):void 0:!(k==null)||!(l==null)?void 0:b("bs_block").__(0,[j===1]);if(!(f==null)&&k!==void 0){c.push(b("bs_block").__(0,[b("bs_block").__(41,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_READ_STATUS))if(f==null)return 0;else{l=a.from_client;c.push(b("bs_block").__(0,[b("bs_block").__(44,[f,d.mark_as_read,d.timestamp,l==null?!1:l,d.source])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(43,[f,d.is_page_follow_up])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLOCK_STATUS_CHANGED)){c.push(b("bs_block").__(0,[b("bs_block").__(3,[b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(d.message_blocked_ids),[])])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_THREAD))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(45,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REACTION_UPDATE)){j=d.messageId;k=d.userId;if(!(j==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(48,[j,b("bs_js_primitive").nullable_to_opt(d.reaction),k,i])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MONTAGE_DIRECT_EXPIRE)){l=d.messageId;if(l==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(49,[l,i])]));return 0}}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LIVE_LOCATION_UPDATE)){j=d.messageId;k=d.liveLocation;if(!(j==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(50,[j,k,i])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REPLACE_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(51,[d,i])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(47,[g,h])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(46,[g,h,i])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").SEND_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(53,[d,i])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").USER_GENERATED_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(54,[d,i])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LOG_MESSAGE))if(b("MessengerMessage.bs").isLocalMessage(d))return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(55,[d,i])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PINNED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(56,[f,d.is_pinned])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_MESSAGE)){l=d.messageId;j=d.removed_timestamp;if(!(l==null)&&!(j==null)){c.push(b("bs_block").__(0,[b("bs_block").__(67,[l,j,i])]));b("MessengerDesktopNotifications").removeNotification(l);return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(15,[f,d.page_unsubscribe_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLOCK_STATUS_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(16,[f,d.canViewerReply])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").ADD_PARTICIPANTS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(17,[f,d.participants])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FLAG))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(18,[f,d.mark_as_flag])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MOVE_PENDING_TO_INBOX))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(19,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CUSTOM_LIKE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(20,[f,d.custom_like])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").PROMOTE_GROUP_ADMINS)){k=d.promoted_admins;if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(21,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_GROUP_ADMINS)){g=d.removed_admin_ids;if(!(f==null)&&!(g==null)){c.push(b("bs_block").__(0,[b("bs_block").__(22,[f,g])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").JOINABLE_MODE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(23,[f,d.joinable_mode])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_MODE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(24,[f,d.approval_mode])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_QUEUE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(25,[f,d.added_id,d.added_group_id,d.removed_id,d.removed_group_id])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").IS_PIN_PROTECTED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(26,[f,d.is_pin_protected])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_RTC_CALL_DATA))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(27,[f,d.initiator_fbid,d.call_state,d.server_info_data])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(28,[f,d.comm_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(29,[f,d.id,d.name,d.profile_pic_uri])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").EVENT_RSVP_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(30,[f,d.actor_fbid,d.rsvp_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS)){h=d.thread_connectivity_status;if(!(f==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(68,[f,h])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(31,[f,d.groups_sync_action,d.groups_sync_status_string])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(32,[f,d.groups_sync_action,d.fb_group_id])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DESCRIPTION_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(33,[f,d.group_thread_description_string])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_THREAD_THEME))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(34,[f,{solid_color:d.solid_color,header_color:d.header_color,footer_color:d.footer_color,gradient_colors:d.gradient_colors,theme_id:d.theme_id}])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_JOINABLE_LINK)&&!(f==null)){c.push(b("bs_block").__(0,[b("bs_block").__(35,[f,d.joinable_link])]));return 0}else return 0}});b("Utils.bs").isTruthy(a.from_client)&&e.forEach(function(d){var a=d.thread_id;if(a==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(52,[a,d.message_id])]));return 0}})}f=a.end_of_history;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(61,[f,a.payload_source])]))}d&&c.unshift(b("bs_block").__(0,[0]));return c}function pb(c,d){var a=[[]],e=function(b,c){c=b[15].get(d);if(c==null)return 0;else{a[0]=xa(!0,b,c[1]);return 0}};b("bs_curry")._2(R,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a[0]}function qb(c,d){var a=[d],e=function(b,c){c=b[10].get(d);if(c==null)return 0;else{a[0]=c;return 0}};b("bs_curry")._2(R,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a[0]}function $(a,c){var d=[void 0],e=function(a,b){d[0]=a;return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);a=d[0];if(a!==void 0)return xa(!1,a,c);else return[]}function rb(a,c,d){__p&&__p();var e=[!1],f=function(a,b){__p&&__p();b=a[15].get(c);if(b==null)return 0;else{a=b[0];b=b[1].length;if(a){e[0]=!0;return 0}else{e[0]=b>=d;return 0}}};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[f])])]);return e[0]}function sb(a,c){__p&&__p();var d=[!1],e=function(a,b){__p&&__p();b=a[15].get(c);if(b==null)return 0;else{a=b[0];if(a){d[0]=!0;return 0}else{d[0]=!1;return 0}}};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return d[0]}function tb(a,c){return b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(2,[c])])])}function ub(a,c,d,e){__p&&__p();var f=[],g=function(g,h){__p&&__p();h=g[15].get(c);if(h==null)return 0;else{h=h[1];for(var i=d,j=d+e|0;i<=j;++i){var a=b("bs_belt_Option").flatMap(b("bs_belt_Array").get(h,i),function(a){return C(g,a)});a!==void 0&&f.push(b("bs_js_primitive").valFromOption(a))}return 0}};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[g])])]);return f}var vb=[void 0];function wb(a,c,d,e,f,g,h){__p&&__p();var i=function(j,i){__p&&__p();vb[0]=[c,d,e];var k=j[15].get(c);k=k==null?[[],void 0]:[k[1],k[0]];var l=k[0];if(b("Utils.bs").isSomeTrue(b("bs_js_primitive").undefined_to_opt(i[6][0][c]))){vb[0]=void 0;i[6][0][c]=!1;return 0}else{var m=i[2];m=l.length-b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(m.get(c)),0)|0;var n=m-d|0;n=e-n|0;if(n>0&&b("bs_caml_obj").caml_notequal(k[1],1)){k=b("MercuryServerRequests").getForFBID(a);var o=b("bs_js_null_undefined").fromOption(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_belt_Array").get(l,m-1|0),function(a){return C(j,a)}),function(a){return a.timestamp})),p=i[4][0];i[4][0]=p+1|0;i[3][0][String(p)]=[[c,d,e],f];if(b("bs_caml_obj").caml_equal([c,d,e],vb[0])){k.fetchThreadMessages(c,m,n,o,g,h);return 0}else return 0}else return b("bs_curry")._1(f,b("bs_belt_Array").keepMap(l,function(a){return C(j,a)}).slice(d,e))}};return b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[i])])])}function xb(a){var c=[0],d=function(d,a){c[0]=b("bs_caml_primitive").caml_int_min(Za(d,a),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT);return 0};b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c[0]}function yb(a){return b("bs_curry")._2(R,b("bs_js_primitive").some(a),[b("bs_block").__(1,[1])])}cb=b("ReasonReact.bs").wrapReasonForJs(Q[0],function(a){return b("bs_curry")._4(Q[1],void 0,void 0,b("bs_js_primitive").nullable_to_opt(a.fbid),a.children)});db=[Q[1]];f.fbid=a;f.deliveryReceipts=c;f.readReceiptsPerThread=d;f.ignoredIds=e;f.blockedIds=h;f.pendingFolderUnseenCount=i;f.typing=j;f.pendingReadStatusThreads=k;f.messages=l;f.localIDsMap=m;f.messagesWithUploadsInFlight=n;f.threadlistOrderMap=o;f.pinnedThreads=p;f.montage=q;f.orderedMessageLists=r;f.unreadCounts=s;f.initialUnreadCounts=t;f.unseenTimestamp=aa;f.threads=ca;f.send=R;f.compute=hb;f.getThreadMetaNow=S;f.getMultiThreadMeta=T;f.getThreadMeta=ib;f.createNewLocalThread=jb;f.createNewLocalThreadGenerateID=U;f.createNewLocalGroupGeneralThreadGenerateID=V;f.isEmptyLocalThread=W;f.isNewEmptyLocalThread=lb;f.getPinnedThreadlist=X;f.unsubscribeThread=Y;f.sendJS=Z;f.invalidateSearchedMessages=tb;f.hasLoadedNMessages=rb;f.hasLoadedAllMessages=sb;f.getCurrentlyLoadedMessages=pb;f.getServerMessageID=qb;f.getMessagesFromIDs=$;f.getThreadMessagesRange=wb;f.getThreadMessagesRangeNow=ub;f.processPollStickerVoted=nb;f.getUnseenUnreadCount=xb;f.markAsSeen=yb;f.processJSActions=ob;f.Provider=db;f.jsComponent=cb}),null);
__d("MercuryNotificationRenderer",["fbt","CurrentUser","MercuryAssert","MercuryIDs","MessengerParticipants.bs","MercuryViewer","MessagingGenericAdminTextType","MessengerState.bs"],(function(a,b,c,d,e,f,g){__p&&__p();var h="source:messenger_growth:event_upcoming_bump";function a(a,c){__p&&__p();b("MercuryAssert").isThreadID(a),b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(d){__p&&__p();b("MessengerState.bs").getThreadMessagesRange(b("CurrentUser").getID(),a,0,1,function(e){__p&&__p();e=e.length&&e[e.length-1];var f=[];e.tags!==void 0&&(f=f.concat(e.tags));e.log_message_data&&(e.log_message_data.message_type==b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST||e.log_message_data.message_type==b("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED)?c(g._("New contact added")):f.indexOf(h)!==-1?c(g._("You have an upcoming event.")):e&&e.author!=b("MercuryViewer").getID()?b("MessengerParticipants.bs").get(e.author,function(e){var f=e.short_name,h=d.custom_nickname;if(h){e=b("MercuryIDs").getUserIDFromParticipantID(e.id);h[e]&&(f=h[e])}d.name?c(g._("{senderName} messaged {groupName}",[g._param("senderName",f),g._param("groupName",d.name)])):b("MercuryIDs").isGroupChat(a)?c(g._("{name} messaged your group",[g._param("name",f)])):c(g._("{name} messaged you",[g._param("name",f)]))}):c(g._("New message!"))})})}e.exports={renderDocumentTitle:a}}),null);
__d("MercuryTimestampTracker",["MercuryActionType","MercuryDispatcher","MercuryPayloadSource","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$3=0,this.$2=b("MercuryDispatcher").getForFBID(this.$1),this.$2.subscribe("update-messages",this.$4.bind(this))}a.prototype.$4=function(a,c){if(!c.actions||!c.actions.length)return;if(c.payload_source===b("MercuryPayloadSource").CLIENT_SEND_MESSAGE||c.payload_source===b("MercuryPayloadSource").UNKNOWN)return;for(var a=0;a<c.actions.length;a++){var d=c.actions[a],e=d.action_type;e==b("MercuryActionType").USER_GENERATED_MESSAGE&&d.thread_id&&d.timestamp>this.$3&&(this.$3=d.timestamp)}};a.prototype.getLastUserMessageTimestamp=function(){return this.$3};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","JSLogger","MercuryThreadInformer","MercuryNotificationRenderer","PresenceState","MercuryTimestampTracker"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=b("MercuryThreadInformer").get();var g=b("MercuryTimestampTracker").get(),h=b("JSLogger").create("chat_title"),i=null,j=0,k=!1;function l(){if(i){i.stop();i=null;return!0}return!1}function m(a){a=a||g.getLastUserMessageTimestamp();j<=a&&(j=a,(l()||k)&&b("PresenceState").doSync())}f={blink:function(a,c){!i&&j<c&&b("MercuryNotificationRenderer").renderDocumentTitle(a,function(a){i||(i=b("DocumentTitle").blink(a))})},stopBlinking:function(){m()},blinkingElsewhere:function(){k=!0}};function n(a){a=b("PresenceState").verifyNumber(a.sb2);return!a||a<=j?null:a}function a(a){a=a&&n(a);a&&(j=a,h.debug("load",j),l(),k=!1)}function c(a){var b=n(a);b||(h.debug("store",j),a.sb2=j,k=!1);return a}b("PresenceState").registerStateStorer(c);b("PresenceState").registerStateLoader(a);d.subscribe("thread-read-changed",function(a,b){a=g.getLastUserMessageTimestamp();var c=0;for(var d in b)b[d].mark_as_read&&b[d].timestamp>=a&&b[d].timestamp>c&&(c=b[d].timestamp);c&&m(c)});b("ChatActivity").subscribe("activity",function(){return m()});c=b("PresenceState").getInitial();c&&(j=n(c)||0);e.exports=f}),null);
__d("FantaDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("FantaTabActions",["Bootloader","CurrentUser","FantaDispatcher","MercuryIDs","MessengerURIConstants","URI","WebMessengerThreadPermalinks","WorkGalahadSettings","WorkplaceChatHelper","gkx","goURI","ifRequired","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({BLUR_TAB:null,CLEAR_PAGE_INDICATOR_DESCRIPTION:null,CLOSE_ALL_TABS:null,CLOSE_AND_TAB_NEXT:null,CLOSE_TAB:null,DELETE_TAB:null,FOCUS_NEXT_TAB:null,FOCUS_PREVIOUS_TAB:null,FOCUS_TAB:null,HIGHLIGHT_NEW_MESSAGE:null,HOVERED_TAB:null,JUMP_TO_MESSAGE:null,LOAD_FROM_DATA:null,MINIMIZE_ALL_TABS:null,MINIMIZE_TAB:null,OPEN_TAB_WITH_INTERSTITIAL_DATA:null,OPEN_TAB:null,REPLACE_TAB:null,SCROLL_BOTTOM_CHANGED:null,SET_ALLOWED_RAISED_TABS:null,SET_MESSAGE_COUNT:null,SET_PAGE_INDICATOR_DESCRIPTION:null,SET_PERMANENT_URI:null,SHOW_UNSEEN_MESSAGES:null,UNHIGHLIGHT_NEW_MESSAGE:null,UNHOVERED_TAB:null,UNMINIMIZE_TAB:null,WIPE_JUMP_TO_MESSAGE:null,CREATE_NEW_NAMED_GROUP_CHAT:null});function h(a,c){var d=a?new(b("URI"))(b("WebMessengerThreadPermalinks").getThreadURIFromServerID(a)):new(b("URI"))(b("MessengerURIConstants").COMPOSE_SUBPATH);b("ifRequired")("BusinessURI.brands",function(a){return b("goURI")(a(d))},function(){return setTimeout(function(){i.openTab(a,c)},100)})}var i={Types:g,openNewMessageTab:function(a,b,c){i.openTab(a,b,c,!0)},openTab:function(a,c,d,e,f){__p&&__p();if(b("CurrentUser").isWorkUser()){if(b("WorkGalahadSettings").isGalahadEnabled){var i=b("ifRequired")("WorkGalahadChat",function(c){c.openThread(b("MercuryIDs").getThreadFBIDFromThreadID(a));return!0},function(){return!1});if(i)return}if(b("gkx")("678256")&&b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()){if(c==="jewel_new_message"){b("goURI")("workchat://new");return}if(!b("MercuryIDs").isLocalThread(a)||c!=="groupsync_fbgroupmall_chat_button"){b("goURI")("workchat://"+(a||""));return}}}b("ifRequired")("FantaTabsEagerBootloader",function(a){return a.bootload()});this.dispatchOrBootloadGetMessages(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB,tabID:a,entryPoint:c,defaultText:d,isNewMessageTab:e,defaultPreview:f}),b("ifRequired")("FantaTabsReactApp",function(b){this._tryLoadSlimApp(a,c)}.bind(this),function(){this._tryLoadSlimApp(a,c,function(){return h(a,c)})}.bind(this))}.bind(this))},openInterstitialTab:function(a,c,d){this.dispatchOrBootloadGetMessages(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:a,interstitialData:c,entryPoint:d}),b("ifRequired")("FantaTabsReactApp",function(b){this._tryLoadSlimAppWithInterstitialData(a,c,d)}.bind(this),function(){this._tryLoadSlimAppWithInterstitialData(a,c,d)}.bind(this))}.bind(this))},_tryLoadSlimApp:function(a,c,d){b("ifRequired")("FantaTabsSlimApp",function(d){b("ifRequired")("FantaAppStore",function(){},function(){d.getPumpedUp(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB,tabID:a,entryPoint:c})})})},function(){return d&&d(a)})},_tryLoadSlimAppWithInterstitialData:function(a,c,d){b("ifRequired")("FantaTabsSlimApp",function(e){b("ifRequired")("FantaAppStore",function(){},function(){e.getPumpedUp(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:a,interstitialData:c,entryPoint:d})})})})},replaceTab:function(a,c){b("FantaDispatcher").dispatch({type:g.REPLACE_TAB,tabID:a,newTabID:c})},minimizeTab:function(a){b("FantaDispatcher").dispatch({type:g.MINIMIZE_TAB,tabID:a})},minimizeAllTabs:function(){b("FantaDispatcher").dispatch({type:g.MINIMIZE_ALL_TABS})},unminimizeTab:function(a){b("FantaDispatcher").dispatch({type:g.UNMINIMIZE_TAB,tabID:a})},closeTab:function(a){b("FantaDispatcher").dispatch({type:g.CLOSE_TAB,tabID:a})},closeAllTabs:function(){b("FantaDispatcher").dispatch({type:g.CLOSE_ALL_TABS})},closeAndTabNext:function(a){b("FantaDispatcher").dispatch({type:g.CLOSE_AND_TAB_NEXT,tabID:a})},deleteTab:function(a){b("FantaDispatcher").dispatch({type:g.DELETE_TAB,tabID:a})},focusTab:function(a){b("FantaDispatcher").dispatch({type:g.FOCUS_TAB,tabID:a})},blurTab:function(a){b("FantaDispatcher").dispatch({type:g.BLUR_TAB,tabID:a})},hoveredTab:function(a){b("FantaDispatcher").dispatch({type:g.HOVERED_TAB,tabID:a})},unhoveredTab:function(a){b("FantaDispatcher").dispatch({type:g.UNHOVERED_TAB,tabID:a})},highlightNewMessage:function(a){b("FantaDispatcher").dispatch({type:g.HIGHLIGHT_NEW_MESSAGE,tabId:a})},unhighlightNewMessage:function(a){b("FantaDispatcher").dispatch({type:g.UNHIGHLIGHT_NEW_MESSAGE,tabId:a})},setAllowedRaisedTabs:function(a){b("FantaDispatcher").dispatch({type:g.SET_ALLOWED_RAISED_TABS,allowedRaisedTabs:a})},loadFromData:function(a){this.dispatchOrBootloadGetMessages(function(){a&&b("FantaDispatcher").dispatch({type:g.LOAD_FROM_DATA,tabData:a})})},focusNextTab:function(event){b("FantaDispatcher").dispatch({type:g.FOCUS_NEXT_TAB,event:event})},focusPreviousTab:function(event){b("FantaDispatcher").dispatch({type:g.FOCUS_PREVIOUS_TAB,event:event})},scrollBottomChanged:function(a,c,d){b("FantaDispatcher").dispatch({type:g.SCROLL_BOTTOM_CHANGED,isScrolledToBottom:c,tabID:a,showUnseenMessages:d})},jumpToMessage:function(a,c){b("FantaDispatcher").dispatch({type:g.JUMP_TO_MESSAGE,mid:c,tabID:a})},wipeJumpToMessage:function(a){b("FantaDispatcher").dispatch({type:g.WIPE_JUMP_TO_MESSAGE,tabID:a})},setPageIndicatorDescription:function(a,c){b("FantaDispatcher").dispatch({type:g.SET_PAGE_INDICATOR_DESCRIPTION,tabID:a,description:c})},clearPageIndicatorDescription:function(a){b("FantaDispatcher").dispatch({type:g.CLEAR_PAGE_INDICATOR_DESCRIPTION,tabID:a})},showUnseenMessages:function(a){b("FantaDispatcher").dispatch({type:g.SHOW_UNSEEN_MESSAGES,tabID:a})},setPermanentUri:function(a,c){b("FantaDispatcher").dispatch({type:g.SET_PERMANENT_URI,tabID:a,uri:c})},createNewNamedGroupChat:function(a,c){b("FantaDispatcher").dispatch({type:g.CREATE_NEW_NAMED_GROUP_CHAT,tabID:a,tokens:c})},dispatchOrBootloadGetMessages:function(a){b("ifRequired")("FantaReducersGetMessages",function(){a()},function(){b("ifRequired")("FantaAppStore",function(c){b("Bootloader").loadModules(["FantaReducersGetMessages"],function(b){c.addReducers(b),a()},"FantaTabActions")},function(){a()})})}};e.exports=i}),null);
__d("MercuryCanonicalGroupThreadManager",["Bootloader","KeyedCallbackManager","MercuryIDs","MercuryPayloadSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MessengerServerPayloadTransformer.bs","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$4={},this.$7(),this.$8(),this.$6={}}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.getCanonicalGroupThreadIDForParticipants=function(a,b){a=this.$9(a);var c=this.$10(a);c=this.$2.executeOrEnqueue(c,b);this.$11(a);return c};a.prototype.unsubscribe=function(a){a&&this.$2.unsubscribe(a)};a.prototype.$10=function(a){return a.sort().join(",")};a.prototype.$12=function(a,c){c=b("MercuryIDs").getThreadIDFromThreadFBID(c);this.$2.setResource(a,c);this.$4[c]=a};a.prototype.$11=function(a){var c=this.$10(a);c={canonical_group_key:c,participants:a};b("MercuryServerDispatcher").trySend("/ajax/mercury/search_canonical_groups.php",c,null,this.$1)};a.prototype.$7=function(){b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_canonical_groups.php":{request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){this.handleUpdate(a)}.bind(this)}})};a.prototype.$9=function(a){a.indexOf(this.$1)===-1&&a.push(this.$1);return a};a.prototype.handleUpdate=function(a){if(a.graphql_payload){var c=b("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,a.graphql_payload,a.for_page);this.$3.handleUpdate({threads:[c],payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}c=a.canonical_group;if(c)for(var d in c)this.$12(d,c[d])};a.prototype.getNow=function(a){a=this.$10(this.$9(a));return this.$2.getResource(a)};a.prototype.$8=function(){b("Bootloader").loadModules(["MercuryThreadInformer"],function(a){a=a.getForFBID(this.$1);var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(a.subscribe("threads-deleted",function(a,b){for(var c in b)this.$4[c]&&(this.$2.setResource(this.$4[c],void 0),delete this.$4[c])}.bind(this)));this.$5=c}.bind(this),"MercuryCanonicalGroupThreadManager")};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("FantaGetMessageActions",["FantaDispatcher","FantaTabActions","MercuryCanonicalGroupThreadManager","MercuryIDs","MercuryTypeaheadConstants","keyMirror","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("FantaAppStore",function(a){return g=a});var h=b("keyMirror")({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,FETCH_MORE_MESSAGES:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_PARTICIPANT_RESPONSE:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_MESSAGE_STORE_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,ON_GET_THREAD_HREF_RESPONSE:null,REFRESH_THREAD:null,THREADS_UPDATED:null});a={Types:h,addParticipants:function(a,c){__p&&__p();var d=c.length===1&&c[0].getInfo().render_type===b("MercuryTypeaheadConstants").THREAD_TYPE,e;if(d){d=c[0].getInfo().mercury_thread;d=b("MercuryIDs").getThreadIDFromThreadFBID(d.thread_fbid);b("FantaTabActions").replaceTab(a,d);return}if(c.length===1){d=c[0].info&&c[0].info.uid;d&&(e=b("MercuryIDs").getThreadIDFromUserID(d))}else if(c.length===0){b("FantaDispatcher").dispatch({type:h.CLEAR_PARTICIPANTS,tabID:a});return}else{var f=b("MercuryCanonicalGroupThreadManager").get();d=c.map(function(a){return a.info.uid});b("FantaDispatcher").dispatch({type:h.CLEAR_PREVIEW,tabID:a,tokens:c});var i=f.getCanonicalGroupThreadIDForParticipants(Array.from(d),function(d){f.unsubscribe(i);if(g){var e=g.getState();if(!e.tabGroup.tabs.get(a))return}d&&b("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:d,tabID:a,tokens:c})})}e&&b("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:e,tabID:a,tokens:c})},onBootloadTypeahead:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_BOOTLOAD_TYPEAHEAD,tabID:a,thread:c})},fetchMoreMessages:function(a){b("FantaDispatcher").dispatch({type:h.FETCH_MORE_MESSAGES,threadID:a})},refreshThread:function(a){b("FantaDispatcher").dispatch({type:h.REFRESH_THREAD,threadID:a})},onGetThreadResponse:function(a){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_RESPONSE,thread:a})},onGetThreadPreviewResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:a,thread:c})},onParticipantResponse:function(a){b("FantaDispatcher").dispatch({type:h.ON_GET_PARTICIPANT_RESPONSE,tabID:a})},onShowContextBannerTimer:function(a){b("FantaDispatcher").dispatch({type:h.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:a})},onMessageStoreResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_MESSAGE_STORE_RESPONSE,messages:a,tabID:c})},threadsUpdated:function(a){b("FantaDispatcher").dispatch({type:h.THREADS_UPDATED,threads:a})},onPrivacyStateChange:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_PRIVACY_STATE_CHANGE,threadID:a,privacyState:c})},onPageNullResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_PAGE_NULL_RESPONSE,threadID:a,nullStateCTA:c})},onGetThreadHrefResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_HREF_RESPONSE,tabID:a,href:c})}};e.exports=a}),null);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_APPOINTMENT_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null}),h=b("LogHistory").getInstance("fanta_sheets");function i(a){b("FantaDispatcher").dispatch(a),h.log(a.type,a.tabID)}a={Types:g,openUserFocusSheet:function(a){i({type:g.OPEN_USER_FOCUS_SHEET,tabID:a})},openBypassFocusSheet:function(a){i({type:g.OPEN_BYPASS_FOCUS_SHEET,tabID:a})},closeUserFocusAndBypassSheet:function(a){i({type:g.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:a})},openAddMoreFriendsSheet:function(a){i({type:g.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddMoreFriendsSheet:function(a){i({type:g.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddFriendsSheet:function(a){i({type:g.CLOSE_ADD_FRIENDS_SHEET,tabID:a})},openNameConversationSheet:function(a){i({type:g.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:a})},closeNameConversationSheet:function(a){i({type:g.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:a})},openReadOnlySheet:function(a){i({type:g.OPEN_READ_ONLY_SHEET,tabID:a})},closeReadOnlySheet:function(a){i({type:g.CLOSE_READ_ONLY_SHEET,tabID:a})},openReadOnlyPermanentSheet:function(a){i({type:g.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:a})},closeReadOnlyPermanentSheet:function(a){i({type:g.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:a})},openEmployeeAwaySheet:function(a){i({type:g.OPEN_EMPLOYEE_AWAY_SHEET,tabID:a})},openEmployeePersonalUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},closeEmployeePersonalUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},openEmployeeWorkUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:a})},closeEmployeeWorkUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:a})},openMentorshipProgramSheet:function(a){i({type:g.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:a})},onIsPageTab:function(a,b){i({type:g.ON_IS_PAGE_TAB,pageIndicator:b,tabID:a})},onBootloadEventReminder:function(a){i({type:g.ON_BOOTLOAD_EVENT_REMINDER,tabID:a})},openAppointmentBannerSheet:function(a){i({type:g.OPEN_APPOINTMENT_SHEET,tabID:a})},onWorkDoNotDisturbResponse:function(a,b,c){i({type:g.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:a,status:b,description:c})},onMentorshipProgramResponse:function(a,b,c){i({type:g.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:a,groupID:c,programName:b})}};e.exports=a}),null);
__d("MercurySheetPolicy",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={ChatThreadIsMutedTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatUserFocusSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserFocusBypassSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserBlockedTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatUploadWarningTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatThreadIsMessageBlockedSheet:{isPermanent:!0,isSheetWithInput:!1},ChatReadOnlyTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatReadOnlyPermanentTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatOfflineTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNoRecipientsTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNewMessagesTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatNameConversationTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatEmployeeAwaySheet:{isPermanent:!0,isSheetWithInput:!1},ChatEventReminderTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatAppointmentBanner:{isPermanent:!0,isSheetWithInput:!1},ChatMontageSheet:{isPermanent:!1,isSheetWithInput:!1},ChatJoinCallSheet:{isPermanent:!0,isSheetWithInput:!1},FantaAddFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},FantaAddMoreFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},ChatRoomAssociatedObjectSheet:{isPermanent:!1,isSheetWithInput:!1},ChatMentorshipProgramSheet:{isPermanent:!1,isSheetWithInput:!1},ChatGroupsSyncTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatGroupNameComposerTabSheet:{isPermanent:!0,isSheetWithInput:!0}};a={canReplaceOpenSheet:function(a,b){var c=this.getType(b),d=this.isPermanent(b);b=this.isSheetWithInput(b);var e=this.getType(a),f=this.isPermanent(a);a=this.isSheetWithInput(a);if(a)return!!(c!==e&&b);if(f&&!d)return!1;return e===this.sheets.ChatThreadIsMessageBlockedSheet?!1:!0},getType:function(a){var b=a.getType||a.type&&a.type.getType||function(){return a};b=b.call(a);return b},isPermanent:function(a){if(typeof a==="string"&&g[a])return g[a].isPermanent;var b=a.isPermanent||a.type&&a.type.isPermanent||function(){return!1};b=b.call(a);return b},isSheetWithInput:function(a){if(typeof a==="string"&&g[a])return g[a].isSheetWithInput;var b=a.isSheetWithInput||a.type&&a.type.isSheetWithInput||function(){return!1};b=b.call(a);return b},sheets:b("keyMirror")(g)};e.exports=a}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"})}),null);
__d("MessageThreadAssociatedObjectUtils",["TimeSpentRoomTypeEnum"],(function(a,b,c,d,e,f){"use strict";a={shouldRender:function(a){return a&&a.room_type===b("TimeSpentRoomTypeEnum").GROUP&&!a.is_workplace_community},isLinkedToGroupChat:function(a){return a&&a.room_type===b("TimeSpentRoomTypeEnum").GROUP&&!a.is_workplace_community}};e.exports=a}),null);
__d("MessengerGroupAdminModelStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUIRED:"required",OPTIONAL:"optional",NOT_SUPPORTED:"not_supported"})}),null);
__d("MessengerParticipantAddModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"})}),null);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingSourceEnum","MessengerApprovalModeTypes","MessengerGroupAdminModelStatus","MessengerGroupAdminType","MessengerJoinableModeType","MessengerParticipantAddModeTypes","QE2Logger","WorkModeConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="messenger_use_new_group_participant_suggestion_ranking",i="show_nullstate_chat_tab_group_chat",j={isJoinableAndOpenThread:function(a){return this.isJoinableThread(a)&&this.isApprovalOpenThread(a)},isJoinableAndApprovalRequiredThread:function(a){return!!(this.isJoinableThread(a)&&a&&a.approval_mode===b("MessengerApprovalModeTypes").APPROVALS)},isWorkSyncedGroupChat:function(a){return!!(a==null?void 0:a.work_associated_group)},isWorkFroup:function(a){return!!(b("gkx")("678597")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},isWorkSyncedChatThreadCreationMessage:function(a){return!!(a.log_message_data&&a.log_message_data.name&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_CREATION)!==-1)},isWorkSyncedChatThreadMemberSyncMessage:function(a){return!!(a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC)!==-1)},shouldAddToApprovalQueue:function(a,b){return!!(this.isJoinableAndApprovalRequiredThread(a)&&a&&!j.isAdmin(a.admins,b))},isJoinableThread:function(a){return!!(b("gkx")("678598")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)},isGroupChat:function(a){return!!(a&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},shouldInvite:function(a){return!!(b("gkx")("678598")&&a&&a.participant_add_mode===b("MessengerParticipantAddModeTypes").INVITE)},isApprovalOpenThread:function(a){return b("CurrentUser").isWorkUser()?!!(this.isWorkSyncedGroupChat(a)&&a&&a.approval_mode===b("MessengerApprovalModeTypes").OPEN):!!(b("gkx")("678598")&&a&&a.approval_mode===b("MessengerApprovalModeTypes").OPEN)},isAdminRequired:function(a){return!!(a&&a.admin_model_status===b("MessengerGroupAdminModelStatus").REQUIRED)},isOwner:function(a,b){return a&&(this.isJoinableThread(b)||this.isAdminRequired(b))},canSeeJoinableGroupOptions:function(a,c){var d=b("WorkModeConfig").is_work_user,e=j.showJoinableApprovalToggle(a,c);c=j.showApprovalQueue(a,c);return!d&&this.isJoinableThread(a)&&(c||e)},canSeeGroupOptionsSection:function(a,c){var d=b("WorkModeConfig").is_work_user;c=this.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return(a.work_associated_group||!d)&&c&&this.isAdminRequired(a)&&!e},canSeeBotsInGroupTypeahead:function(){var a=b("CurrentUser").isWorkUser();return a&&b("gkx")("678599")},canMakeOthersAdmins:function(a,b,c){return this.isOwner(a,c)&&!b},canMakeSelfAdmin:function(a,b){return(this.isJoinableThread(b)||this.isAdminRequired(b))&&Object.keys(b.admins).length===0&&a},canRemoveAdmin:function(a,c,d,e){if(this.isAdminRequired(e)&&Object.keys(e.admins).length===1)return!1;switch(d){case b("MessengerGroupAdminType").CHAT_SUPER_ADMIN:return!1;default:return this.isOwner(a,e)&&c}},canRemoveFromGroup:function(a,c,d){switch(c){case b("MessengerGroupAdminType").CHAT_SUPER_ADMIN:return!1;default:return this.isAdminRequired(d)||this.isWorkFroup(d)?a:this.isOwner(a,d)||!this.isJoinableThread(d)}},showJoinableApprovalToggle:function(a,b){if(a.associated_object&&!a.associated_object.approval_mode_toggleable)return!1;b=j.isAdmin(a.admins,b);return j.isOwner(b,a)},showApprovalQueue:function(a,b){b=j.isAdmin(a.admins,b);b=j.isOwner(b,a);var c=this.getPendingRequestNumber(a);if(a&&this.isAdminRequired(a))return this.isAdminRequired(a)&&b&&c>0;else{a=j.isJoinableAndApprovalRequiredThread(a);return a&&b&&c>0}},showParticipantsModal:function(a,b,c){return this.isJoinableThread(c)&&!a&&!b},useNewGroupMemberSuggestionRanking:function(){b("QE2Logger").logExposureForUser(h);return b("MercuryConfig").MNGPS},showDefaultListForNewPersonAddChatTab:function(){b("QE2Logger").logExposureForUser(i);return b("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function(){return b("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},canUpdateThreadDescription:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},isAdmin:function(a,c){if(!a)return!1;if(b("MercuryIDs").isValid(c)){var d=b("MercuryIDs").getUserIDFromParticipantID(c);return!!d&&a[d]!==void 0}return a[c]!==void 0},getLeaveGroupBodyText:function(a,b){a=this.isOwner(a,b);b=j.isWorkSyncedGroupChat(b);return!b?a?g._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):g._("You will stop receiving messages from this conversation and people will see that you left."):a?g._("Leaving this group will remove you as an owner and allow other members to manage the chat thread. You will no longer be able to send or receive new messages. You will also be removed from the group."):g._("You will stop receiving messages from this conversation and people will see that you left. You will also be removed from the group.")},getLeaveGroupTitleText:function(a,b){return j.isWorkSyncedGroupChat(b)?g._("Leave Group and Chat?"):this.isOwner(a,b)?g._("Leave this conversation?"):g._("Leave Conversation?")},getLeaveGroupButtonText:function(a,b){return this.isOwner(a,b)?g._("Leave conversation"):g._("Leave")},getMakeOwnerBodyText:function(a,b,c){if(a)return b?g._("As a group admin, you will be able to manage who can join and customize this conversation."):g._("As a group admin, \"{owner's name}\" will be able to manage who can join and customize this conversation.",[g._param("owner's name",c)]);else return b?g._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):g._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[g._param("owner's name",c)])},getMakeOwnerTitleText:function(a,b){if(a)return b?g._("Become group admin?"):g._("Add group admin?");else return b?g._("Become group owner?"):g._("Add group owner?")},getMakeOwnerButtonText:function(a,b){if(a)return b?g._("Become admin"):g._("Make admin");else return b?g._("Become owner"):g._("Make owner")},getRemoveOwnerBodyText:function(a,b,c,d){if(b&&c)return a?null:g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");else if(b&&!c)return a?g._("You will no longer be able to manage who can join and customize this conversation."):g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");else return a?g._("\"{owner's name}\" will no longer be able to manage who can join and customize this conversation.",[g._param("owner's name",d)]):g._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[g._param("owner's name",d)])},getRemoveOwnerTitleText:function(a){return a?g._("Remove as group admin?"):g._("Remove as group owner?")},getRemoveOwnerButtonText:function(a){return a?g._("Remove"):g._("Remove owner")},getPendingRequestNumber:function(a){if(a&&a.approval_queue_ids&&a.approval_queue_ids.length)return a.approval_queue_ids.length;else if(a&&this.isAdminRequired(a)&&a.group_approval_queue&&a.group_approval_queue.length)return a.group_approval_queue.length;return 0}};e.exports=j}),null);
__d("MessengerRoomPrivacyMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WHITELISTED_MODE:0,PUBLIC_MODE:1})}),null);
__d("FantaComposeViewReducers",["Bootloader","FantaGetMessageActions","FantaTabSheetActions","MercuryDataSourceWrapper","MercurySheetPolicy","MercuryTypeaheadConstants","MessengerAdminGroupUtils","MessengerRoomPrivacyMode","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaGetMessageActions").Types,h=b("FantaTabSheetActions").Types;function a(a,b){switch(b.type){case g.ON_GET_THREAD_RESPONSE:case g.ON_GET_THREAD_PREVIEW_RESPONSE:var c=b.thread;b=b.tabID||c.thread_id;a=i(a,c,b)}return a}function i(a,c,d){c.participants.length===0&&(a=j(a,d,c),a=l(a,d,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet));return a}function c(a,b){switch(b.type){case g.ON_BOOTLOAD_TYPEAHEAD:b=b.thread;var c=b.thread_id;a=j(a,c,b)}return a}function j(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c);if(!e||e.typeahead)return a;b("ifRequired")("ChatTabTypeaheadRenderer",function(f){__p&&__p();b("ifRequired")("ContextualTypeaheadView",function(g){__p&&__p();b("ifRequired")("MercuryTypeahead",function(h){__p&&__p();if(!a.mercury.tabContents.get(c))return;var i=!!(d&&d.participants&&d.participants.length===0),j=!!(d&&d.associated_object&&d.associated_object.privacy_mode===b("MessengerRoomPrivacyMode").WHITELISTED_MODE),k=i?b("MercuryDataSourceWrapper").chat_typeahead_source:j?b("MercuryDataSourceWrapper").chat_add_people_froup_source:b("MercuryDataSourceWrapper").chat_add_people_source;k.setShowThreads(i);i?k.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewChatTab()):j||k.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewPersonAddChatTab());j&&k.setQueryData({thread_id:d.thread_fbid});i=new h(k,g);i.setViewOption("renderer",f);i.setExcludedParticipantsFromThreadMeta(d);e=e.merge({typeahead:i});a=a.setIn(["mercury","tabContents",c],e)},function(){return k(c,d)})},function(){return k(c,d)})},function(){return k(c,d)});return a}function d(a,c){switch(c.type){case h.OPEN_ADD_MORE_FRIENDS_SHEET:var d=c.tabID,e=a.mercury.tabContents.get(d).thread;if(e){a=j(a,d,e);return l(a,c.tabID,b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}}return a}function k(a,c){b("Bootloader").loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","MercuryTypeahead"],function(d,e,f){b("FantaGetMessageActions").onBootloadTypeahead(a,c)},"FantaComposeViewReducers")}function l(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c),f=a.tabGroup.tabs.get(c);if(!f||!e)return a;f=e;f=f.openSheet;if(f&&!b("MercurySheetPolicy").canReplaceOpenSheet(f,d))return a;e=e.merge({openSheet:d});a=a.setIn(["mercury","tabContents",c],e);return a}function f(a,c){switch(c.type){case g.ADD_PARTICIPANTS:var d=c.tokens;c=c.tabID;d=d.length===1&&d[0].getInfo().render_type===b("MercuryTypeaheadConstants").THREAD_TYPE;if(!d)return l(a,c,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return a}e.exports={addParticipants:f,onBootloadTypeahead:c,onGetThreadResponse:a,openAddMoreFriends:d}}),null);
__d("FantaMessageActions",["Bootloader","CurrentUser","FantaDispatcher","MercuryConfig","MercuryIDs","MercuryLocalIDs","MercuryViewer","MessengerState.bs","emptyFunction","ifRequired","keyMirror","requireWeak","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("FantaAppStore",function(a){return g=a});var h=b("keyMirror")({ADD_GROUP_PARTICIPANTS:null,ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:null,ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:null,CANCEL_FILE_UPLOAD:null,CANCEL_REPLY_TO_MESSAGE:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,REPLY_TO_MESSAGE:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,UPDATE_GROUP_NAME:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null,SET_NEW_GROUP_NAME_LOCALLY:null});function i(){var a=document.createElement("form");a.action=b("MercuryConfig").upload_url;a.method="post";return a}function j(a,b){var c=document.createElement("input");c.type="file";c.name="attachment[]";c.multiple=!0;b&&(c.onchange=b);a.appendChild(c);return c}function k(a){__p&&__p();var c=b("MercuryViewer").getID();if(!a.length)return null;a=a.filter(function(a){return a!==c});var d;if(a.length===0)return null;else a.length===1?d=b("MercuryIDs").getThreadIDFromParticipantID(a[0]):(d=b("MercuryLocalIDs").generateThreadID(),a.unshift(c),b("MessengerState.bs").createNewLocalThread(b("CurrentUser").getID(),d,a));return d}var l={Types:h,prepareFilesForSend:function(a,c,d,e){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:h.PREPARE_FILES_FOR_SEND,tabID:a,files:c,composer:d}),e&&e()})},openUploadFilePicker:function(a,b){var c=i();c=j(c,function(){l.prepareFilesForSend(a,this.files,b)});c.click()},uploadedFile:function(a,c,d){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:h.UPLOADED_FILE,tabID:a,uploadID:c,payload:d})})},uploadFileFailed:function(a,c){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:h.UPLOAD_FILE_FAILED,tabID:a,uploadID:c})})},replyToMessage:function(a,c){b("FantaDispatcher").dispatch({type:h.REPLY_TO_MESSAGE,threadID:c,message:a})},cancelReplyToMessage:function(a){b("FantaDispatcher").dispatch({type:h.CANCEL_REPLY_TO_MESSAGE,threadID:a})},cancelFileUpload:function(a,c){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:h.CANCEL_FILE_UPLOAD,tabID:a,uploadID:c})})},linkPreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LINK_PREVIEW,tabID:a,uri:c})})},loadedShareData:function(a,c,d){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LOADED_SHARE_DATA,tabID:a,attachmentData:c,composer:d})})},loadingShareData:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LOADING_SHARE_DATA,composer:c,tabID:a})})},removeSharePreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.REMOVE_SHARE_PREVIEW,tabID:a,composer:c})})},receivedNewMessage:function(a,c){b("FantaDispatcher").dispatch({type:h.RECEIVED_NEW_MESSAGE,tabID:a,message:c})},updateGroupName:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.UPDATE_GROUP_NAME,threadID:a,newName:c})})},setNewGroupNameLocally:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SET_NEW_GROUP_NAME_LOCALLY,threadID:a,newName:c})})},addParticipants:function(a,c){__p&&__p();b("ifRequired")("FantaAppStore",function(d){__p&&__p();d=d.getState().mercury.tabContents.get(a);if(!d)return;var e=d.thread;d=d.typeahead;if(!d||!e)return;var f=b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a);if(e.is_canonical_user||f){f=d.getSelectedParticipantIDs();d=e.participants;d=k(d.concat(f));d?e.is_canonical_user?this.addGroupParticipantsAsOpenTab(d,a,c):this.addGroupParticipantsAsReplaceTab(d,a,c):this.addGroupParticipant(a,c)}else this.addGroupParticipant(a,c)}.bind(this))},addGroupParticipant:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS,threadID:a,onSendSuccess:c})})},addGroupParticipantsAsOpenTab:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB,fromTabID:c,onSendSuccess:d,tabID:a})})},addGroupParticipantsAsReplaceTab:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB,newTabID:a,onSendSuccess:d,tabID:c})})},sendMessage:function(a,c,d,e){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SEND_MESSAGE,threadID:a,message:c,composer:d,onSendSuccess:e})})},sendPhoto:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SEND_PHOTO,onSendSuccess:d,photoData:c,threadID:a})})},sendHotLike:function(a,c,d,e,f){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SEND_HOT_LIKE,emoji:c,onSendSuccess:f,size:d,source:e,threadID:a})})},sendSticker:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SEND_STICKER,threadID:a,stickerID:c,onSendSuccess:d})})},composerTextUpdate:function(a,c,d){c.length>0&&b("ifRequired")("FantaReducersSendMessages",b("emptyFunction"),function(){return this.dispatchOrBootloadSendMessages(b("emptyFunction"))}.bind(this)),this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.COMPOSER_TEXT_UPDATE,composer:d,message:c,threadID:a})})},dispatchOrBootloadSendMessages:function(a){b("ifRequired")("FantaReducersSendMessages",function(){b("setImmediate")(a)},function(){b("Bootloader").loadModules(["FantaReducersSendMessages"],function(c){g&&(g.addReducers(c),b("setImmediate")(a))},"FantaMessageActions")})},dispatchOrBootloadUploader:function(a){b("ifRequired")("FantaReducersFileUploader",function(){a()},function(){b("Bootloader").loadModules(["FantaReducersFileUploader"],function(b){g&&(g.addReducers(b),a())},"FantaMessageActions")})},dispatchOrBootloadSharePreview:function(a){b("ifRequired")("FantaReducersSharePreview",function(){a()},function(){b("Bootloader").loadModules(["FantaReducersSharePreview"],function(b){g&&(g.addReducers(b),a())},"FantaMessageActions")})}};e.exports=l}),null);
__d("FantaReducersCookie",["FantaMessageActions","FantaTabActions","PresenceState","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("throttle").acrossTransitions(b("PresenceState").doSync,500);function a(a,b){switch(b.type){case g.RECEIVED_NEW_MESSAGE:case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.REPLACE_TAB:case g.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:case g.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:case h.UNMINIMIZE_TAB:i();return j(a)}return a}function c(a,b){switch(b.type){case h.LOAD_FROM_DATA:var c=a.tabGroup;b=b.tabData;c=c.updatedTime;c=c>=b.updatedTime||b.updatedTime===void 0?c:b.updatedTime;return a.mergeIn(["tabGroup"],{updatedTime:c})}return a}function j(a){return a.mergeIn(["tabGroup"],{updatedTime:Date.now()})}e.exports={updateCookie:a,loadFromData:c}}),null);
__d("FantaReducersDockCalculator",["Arbiter","FantaMessageActions","FantaTabActions","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaMessageActions").Types,i=null;function j(a){i=a,b("setImmediate")(function(){b("Arbiter").inform("FantaReducersDockCalculator/shouldRecalculate")})}function k(a){if(!i||a.size!==i.size)j(a);else{var b=!1;a.forEach(function(a){var c=i&&i.get(a.id);(!c||a.isMinimized!==c.isMinimized)&&(b=!0)});b&&j(a)}}function a(a,b){var c=a.tabGroup.tabs;switch(b.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.MINIMIZE_ALL_TABS:case g.MINIMIZE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:case g.UNMINIMIZE_TAB:case h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:j(c);break;case g.LOAD_FROM_DATA:case h.RECEIVED_NEW_MESSAGE:k(c);break}return a}e.exports={recalculateDock:a}}),null);
__d("FantaReducersLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","gkx","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaMessageActions").Types,i=b("FantaTabSheetActions").Types;function a(a,c){__p&&__p();if(!b("gkx")("678592"))return a;switch(c.type){case i.OPEN_ADD_MORE_FRIENDS_SHEET:case g.OPEN_TAB:if(c.type===g.OPEN_TAB&&c.entryPoint!=="compose_link"&&c.entryPoint!=="jewel_new_message")return a;var d=a.mercury.tabContents.get(c.tabID);d&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger","MessengerSecondarySearchFunnelConstants"],function(a,b){var e;switch(c.entryPoint){case"compose_link":e=b.ENTRY_SURFACES.SIDEBAR;break;case"jewel_new_message":e=b.ENTRY_SURFACES.JEWEL;break;default:e=b.ENTRY_SURFACES.EXISTING_TAB}a.startFunnel(b.CLIENTS.WWW,b.SEARCH_SURFACES.OMNIPICKER,e,c.type===i.OPEN_ADD_MORE_FRIENDS_SHEET?d.id:null,d.loggingID)},"FantaReducersLogging");break}return a}function c(a,c){switch(c.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:b("requestIdleCallback")(function(){var c=a.tabGroup.allowedRaisedTabs,d=a.tabGroup.getRaisedandUnraisedTabs(),e=d.raisedTabs;d=d.unraisedTabs;var f=e.count(),g=f+d.count();b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(c).setOpenTabs(g).setVisibleTabs(f).log()},"FantaReducersLogging")})}return a}e.exports={updateVisibleTabs:c,logSearchEventsAfterAction:a}}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={isAvailable:function(a,c){var d;a=this.getStatus(a,c);c=b("MercuryIDs").getUserIDFromThreadID(c);c&&(d=b("ShortProfiles").getNow(c));return a===b("AvailableListConstants").ACTIVE&&(d===void 0||d===null||!d.is_messenger_only)},getStatus:function(a,c){__p&&__p();var d=b("AvailableListConstants").OFFLINE;c=b("MercuryIDs").getUserIDFromThreadID(c);if(c)d=b("PresenceStatus").get(c);else if(a&&a.participants){c=a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)});d=b("PresenceStatus").getGroup(c)}b("ChatVisibility").isOnline()||(d=b("AvailableListConstants").OFFLINE);return d}}}),null);
__d("FantaTypeJoinableThread",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:!1,isWorkpaceChat:!1,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeSharePreview",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={isLoading:!1,params:null,type:null,uri:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeFileUploader",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"});d={uploadedFiles:b("immutable").Map(),uploadingFiles:b("immutable").Map()};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;a.prototype.getTypeIDs=function(a){return this.uploadedFiles.reduce(function(b,c){c.type===a&&c.uploadedID&&(b=b.concat(c.uploadedID));return b},[])};function a(){g.apply(this,arguments)}a.fileTypes=c;e.exports=a}),null);
__d("FantaTypeComposer",["FantaTypeFileUploader","FantaTypeSharePreview","immutable"],(function(a,b,c,d,e,f){"use strict";var g,h=0;c={fileUploader:new(b("FantaTypeFileUploader"))(),sharePreview:new(b("FantaTypeSharePreview"))(),text:"",replyingToMessage:null,version:h};d=babelHelpers.inherits(a,b("immutable").Record(c));g=d&&d.prototype;function a(){g.constructor.call(this,{version:++h})}e.exports=a}),null);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","MercuryIDs","emptyFunction","immutable","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c={composer:new(b("FantaTypeComposer"))(),hasFetchedAll:!1,highlightNewMessage:!1,id:"",isMontageOpen:!1,isMultiCompany:null,isNewMessageTab:!1,isScrolledToBottom:!0,joinableInterstitialData:null,jumpToMessage:null,loggingID:null,membershipParticipants:null,messages:b("immutable").List(),messageStore:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,participants:null,privacyController:null,showContextBanner:!1,showUnseenMessages:b("emptyFunction"),signatureID:null,thread:null,threadHref:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,uri:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null,newGroupChatName:null};d=babelHelpers.inherits(a,b("immutable").Record(c));g=d&&d.prototype;function a(a){var c,d=b("MercuryIDs").getUserIDFromThreadID(a.id);d&&(c=new(b("ChatPrivacyActionController"))(d,function(c){b("setImmediate")(function(){b("FantaGetMessageActions").onPrivacyStateChange(a.id,c)})}));g.constructor.call(this,babelHelpers["extends"]({privacyController:c},a))}e.exports=a}),null);
__d("FantaReducersMercury",["Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FantaTypeJoinableThread","FantaTypeSharePreview","FantaTypeTabContents","JSLogger","MercuryIDs","MercuryThreadIDMap","TimeSlice","WebMessengerThreadPermalinks","getPageIDFromThreadID","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("JSLogger").create("FantaReducersMercury"),i=b("FantaMessageActions").Types,j=b("FantaTabActions").Types,k=b("FantaGetMessageActions").Types,l=1;function m(){return Math.floor(Math.random()*2147483648).toString(16)}function a(a,c){__p&&__p();switch(c.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:var d=c.tabID,e=c.defaultText,f=c.defaultPreview;b("ifRequired")("FantaTabsReactApp",function(c){!b("MercuryIDs").isValidThreadID(d)?(a=a.deleteIn(["tabGroup","tabs",d]),t(d)):A(a,d)},function(){return a=n(a,c.tabID)});a=o(a,d);var g=m(),h=a.mercury.tabContents.get(d);h=h.merge({isNewMessageTab:!!c.isNewMessageTab,loggingID:l++,signatureID:g});a=a.setIn(["mercury","tabContents",d],h);new(b("AsyncSignal"))("/ajax/chat/opentab_tracking.php",{threadID:d,userID:b("MercuryIDs").getUserIDFromThreadID(d),signatureID:g}).send();if(c.interstitialData){g=new(b("FantaTypeJoinableThread"))(c.interstitialData);h=h.merge({joinableInterstitialData:g});a=a.setIn(["mercury","tabContents",d],h)}e&&(a=a.setIn(["mercury","tabContents",d,"composer","text"],e));f&&(a=a.setIn(["mercury","tabContents",d,"composer","sharePreview"],new(b("FantaTypeSharePreview"))({params:null,type:null,uri:f})));b("Arbiter").inform("jewel/hide");return a}return a}function n(a,c){b("ifRequired")("FantaTabsSlimApp",function(d){!b("MercuryIDs").isValidThreadID(c)?(a=a.deleteIn(["tabGroup","tabs",c]),t(c)):A(a,c)},function(){A(a,c)});return a}function c(a,b){switch(b.type){case i.RECEIVED_NEW_MESSAGE:a=o(a,b.tabID)}return a}function o(a,c){__p&&__p();var d=a.mercury.tabContents.get(c);if(!d){var e=b("getPageIDFromThreadID")(c);e&&b("Bootloader").loadModules(["PagesMercuryChatTabIndicatorHandler"],function(a){var d=b("AvailableListConstants").OFFLINE,f=new a(e,d,function(a){b("setImmediate")(function(){return b("FantaTabActions").setPageIndicatorDescription(c,a)})},function(){b("setImmediate")(function(){return b("FantaTabActions").clearPageIndicatorDescription(c)})});b("setImmediate")(function(){b("FantaTabSheetActions").onIsPageTab(c,f)});f.checkResponsiveness()},"FantaReducersMercury");return a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c}))}return a}function d(a,b){switch(b.type){case j.SET_PAGE_INDICATOR_DESCRIPTION:var c=b.tabID;b=b.description;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({pageIndicatorDescription:b||""});a=a.setIn(["mercury","tabContents",c],d)}return a}function f(a,b){switch(b.type){case j.CLEAR_PAGE_INDICATOR_DESCRIPTION:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({pageIndicatorDescription:""});a=a.setIn(["mercury","tabContents",b],c)}return a}function p(a,b){switch(b.type){case j.REPLACE_TAB:case i.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:a=s(a,b.newTabID);a=o(a,b.newTabID);return a}return a}function q(a,b){__p&&__p();switch(b.type){case k.ADD_PARTICIPANTS:var c=b.tabID;b=b.previewTabID;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({threadPreviewID:b});a=a.setIn(["mercury","tabContents",c],d);return a}return a}function r(a,c){switch(c.type){case k.CLEAR_PARTICIPANTS:c=c.tabID;var d=a.mercury.tabContents.get(c),e=d?d.loggingID:null;d=d?d.isNewMessageTab:!1;a=a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c,isNewMessageTab:d,loggingID:e}))}return a}function s(a,c){b("ifRequired")("FantaTabsReactApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),t(c))},function(){b("ifRequired")("FantaTabsSlimApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),t(c))})});return a}function t(a){g.getClientIDFromServerID(a,function(c){return b("setImmediate")(function(){b("MercuryIDs").isValidThreadID(c)?b("FantaTabActions").openTab(c):h.error("invalid id",a)})})}function u(a,b){switch(b.type){case j.FOCUS_TAB:A(a,b.tabID)}return a}function v(a,b){switch(b.type){case j.CLOSE_TAB:b=b.tabID;a=x(a,b)}return a}function w(a,b){switch(b.type){case j.DELETE_TAB:b=b.tabID;a=x(a,b);a=a.deleteIn(["mercury","tabContents",b])}return a}function x(a,c){b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteThread(c)});return a}function y(a,c){switch(c.type){case j.CLOSE_ALL_TABS:b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteAllThreads()});return a}return a}function z(a,b){switch(b.type){case j.FOCUS_NEXT_TAB:case j.FOCUS_PREVIOUS_TAB:case j.CLOSE_AND_TAB_NEXT:b=a.tabGroup.focusedTabID;b&&A(a,b)}return a}function A(a,c){__p&&__p();var d=b("MercuryIDs").getUserIDFromThreadID(c);if(d){var e=function(){b("AvailableList").updateForID(d)};b("TimeSlice").guard(e,"superfluous request to first open DD",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()}e=a.mercury.tabContents.get(c);if(e){a=e.thread;e=e.pageIndicator;e&&e.notifyPageOnlineStatusChanged(b("FantaAvailableStatus").getStatus(a,c))}}function B(a,b){switch(b.type){case j.UNMINIMIZE_TAB:A(a,b.tabID)}return a}function C(a,b){__p&&__p();switch(b.type){case j.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=o(a,e)}}return a}function D(a,c){a=a.mercury.tabContents.get(c);(!a||!a.uri)&&b("WebMessengerThreadPermalinks").getThreadURI(c,function(a){b("setImmediate")(function(){return b("FantaTabActions").setPermanentUri(c,a)})})}function E(a,b){__p&&__p();switch(b.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.RECEIVED_NEW_MESSAGE:case i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:D(a,b.tabID);break;case j.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;D(o(a,e),e)}}return a}function F(a,b){switch(b.type){case j.SET_PERMANENT_URI:var c=b.tabID;b=b.uri;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({uri:b});a=a.setIn(["mercury","tabContents",c],d)}return a}e.exports={addParticipants:q,clearPageIndicatorDescription:f,clearParticipants:r,closeAllTabs:y,closeTab:v,deleteTab:w,focusTab:u,focusTabEvents:z,loadFromData:C,loadUri:E,openTab:a,receivedNewMessage:c,replaceTab:p,setPageIndicatorDescription:d,setUri:F,unminimizeTab:B}}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs","CurrentUser","bs_js_primitive","WorkForeignEntityInfo.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){d=d.participants.filter(function(c){return c!==b("MercuryIDs").getParticipantIDFromUserID(a)});return d.filter(function(a){return b("bs_belt_Set").has(c,a)!==!1})}function a(a,b,c){if(c.is_canonical)return!1;else return g(a,b,c).length>0}function c(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function d(a,c,d){var e=d.is_canonical;if(e){e=d.participants.filter(function(c){return b("bs_caml_obj").caml_notequal(c,b("MercuryIDs").getParticipantIDFromUserID(a))});return!e.every(function(a){return!b("bs_belt_Set").has(c,a)})}else return!1}function e(a,c,d){if(!a.is_canonical_user||b("bs_js_primitive").nullable_to_opt(a.other_user_fbid)===b("bs_js_primitive").some(c))return!1;else if(!b("CurrentUser").isWorkUser()||d==null)return!0;else if(d==null)return!1;else return!b("WorkForeignEntityInfo.bs").isCoworker(d)}f.findIntersection=g;f.isPresentInGroupThread=a;f.participantsInGroupThread=c;f.qualifiesAs=d;f.shouldShowBlock=e}),null);
__d("MercuryBrowserAlerts",["ArbiterMixin","Bootloader","ChatActivity","ChatConfig","ChatOptions","ChatTitleBarBlinker","CurrentUser","Event","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryThreadInfo","MercuryViewer","MessagingTag","MessengerState.bs","Sound","UserActivity","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=3,h=6e5,i=new Map(),j=null;function k(){return!b("UserActivity").isOnTab()&&!b("UserActivity").hasBeenInactive()}function l(){i=new Map()}function m(a){b("ChatOptions").getSetting("sound")&&!k()&&b("Sound").play([b("ChatConfig").get("sound.notif_ogg_url"),b("ChatConfig").get("sound.notif_mp3_url")],a,!1)}var n=Object.assign({init:function(){b("Event").listen(window,"focus",function(){l(),clearInterval(j)}),b("Event").listen(window,"blur",function(){j=setInterval(l,h)}),b("gkx")("678573")&&b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){this._availabilityStatusStore=a}.bind(this),"MercuryBrowserAlerts"))},messageReceived:function(a){__p&&__p();var c=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID()));if(c||a.author&&b("MercuryViewer").isViewer(a.author)||!a.is_unread||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;var d=a.thread_id,e=b("ChatActivity").isActive();if(e){var f=!1;n.inform("before-alert",{threadID:d,cancelAlert:function(){f=!0}})}b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),d,function(c){__p&&__p();var h=b("MercuryThreadInfo").isMuted(c),j=b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID());if(h)if(!b("MercuryThreadInfo").areMentionsMuted(c)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===j}))return}else return;var k=b("CurrentUser").getID();b("MessengerState.bs").compute(k,function(h){__p&&__p();h=h.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(k,h,c))return;h=a.timestamp;if(e)f||m(h);else{b("ChatTitleBarBlinker").blink(d,h);var j=i.get(d)||0;j<g&&(i.set(d,j+1),m(h))}b("ChatTitleBarBlinker").blinkingElsewhere()})})}},b("ArbiterMixin"));e.exports=n}),null);
__d("FantaReducersMessages",["CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeComposer","ImmutableObject","MercuryBrowserAlerts","MessengerParticipants.bs","WorkForeignEntityType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("FantaGetMessageActions").Types;function a(a,c){switch(c.type){case g.RECEIVED_NEW_MESSAGE:c=c.message;b("MercuryBrowserAlerts").messageReceived(c);return a}return a}function c(a,b){switch(b.type){case g.COMPOSER_TEXT_UPDATE:var c=b.composer,d=b.message;b=b.threadID;var e=a.mercury.tabContents.get(b);return!e||e&&e.composer.version!==c.version?a:a.mergeIn(["mercury","tabContents",b,"composer"],{text:d})}return a}function d(a,c){switch(c.type){case g.REPLY_TO_MESSAGE:var d=c.message;c=c.threadID;var e=a.mercury.tabContents.get(c);return!e?a:a.mergeIn(["mercury","tabContents",c,"composer"],{replyingToMessage:new(b("ImmutableObject"))(babelHelpers["extends"]({},d))})}return a}function f(a,b){switch(b.type){case g.CANCEL_REPLY_TO_MESSAGE:b=b.threadID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=null;return a.mergeIn(["mercury","tabContents",b,"composer"],{replyingToMessage:c})}return a}function j(a,c){switch(c.type){case h.CLOSE_TAB:case h.CLOSE_AND_TAB_NEXT:return!a.mercury.tabContents.get(c.tabID)?a:a.setIn(["mercury","tabContents",c.tabID,"composer"],new(b("FantaTypeComposer"))())}return a}function k(a,c){switch(c.type){case h.CLOSE_ALL_TABS:c=a.mercury.tabContents;c.forEach(function(c){c=c.id;a=a.setIn(["mercury","tabContents",c,"composer"],new(b("FantaTypeComposer"))())});return a}return a}function l(a,b){switch(b.type){case h.SCROLL_BOTTOM_CHANGED:var c=b.tabID,d=b.isScrolledToBottom;b=b.showUnseenMessages;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({isScrolledToBottom:d,showUnseenMessages:b});a=a.setIn(["mercury","tabContents",c],e)}return a}function m(a,b){switch(b.type){case h.JUMP_TO_MESSAGE:var c=b.tabID;b=b.mid;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({jumpToMessage:b});a=a.setIn(["mercury","tabContents",c],d)}return a}function n(a,b){switch(b.type){case h.WIPE_JUMP_TO_MESSAGE:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({jumpToMessage:null});a=a.setIn(["mercury","tabContents",b],c)}return a}function o(a,b){switch(b.type){case h.SHOW_UNSEEN_MESSAGES:b=b.tabID;b=a.mercury.tabContents.get(b);b&&b.showUnseenMessages()}return a}function p(a,c){__p&&__p();switch(c.type){case i.ON_GET_THREAD_RESPONSE:c=c.thread;var d=c.thread_id,e=a.mercury.tabContents.get(d);if(!e)return a;var f=null;b("CurrentUser").isWorkUser()&&c.participants&&(f=c.participants.map(b("MessengerParticipants.bs").getNow,b("MessengerParticipants.bs")).find(function(a){return((a=a)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a)===b("WorkForeignEntityType").FOREIGN})!==void 0);e=e.merge({thread:c,isMultiCompany:f});a=a.setIn(["mercury","tabContents",d],e);break}return a}function q(a,b){switch(b.type){case h.HIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!0)}return a}function r(a,b){switch(b.type){case h.UNHIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!1)}return a}e.exports={cancelReplyToMessage:f,closeAllTabs:k,closeTab:j,composerTextUpdate:c,highlightNewMessage:q,jumpToMessage:m,onGetThreadResponse:p,receivedNewMessage:a,replyToMessage:d,scrollBottomChanged:l,showUnseenMessages:o,unhighlightNewMessage:r,wipeJumpToMessage:n}}),null);
__d("MessengerSecondarySearchFunnelConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"});b=Object.freeze({ABANDON:"abandon",CREATE_GROUP:"create_group",ENTER_THREAD:"enter_thread",RESULT_SELECTED:"result_selected",SEND:"send",SINGLE_RESULT_SELECTED:"single_result_selected"});c=Object.freeze({ACTION:"action"});d=Object.freeze({EXISTING_TAB:"existing_tab",JEWEL:"jewel",SIDEBAR:"sidebar",COMPOSER:"composer"});f=Object.freeze({END:"end",IMPRESSIONS:"impressions",MICRO_SESSION_ENDED:"micro_session_ended",MICRO_SESSION_STARTED:"micro_session_started",QUERY_CHANGED:"query_changed",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start",TOKEN_REMOVED:"token_removed"});var g=Object.freeze({BROADCAST:"broadcast",GROUP_CREATION:"group_creation",OMNIPICKER:"omnipicker",SHARE:"share"}),h=Object.freeze({DIRECT_SEND:"direct_send",ADD:"add"}),i=Object.freeze({FINISHED:"finished",FAILED:"failed"}),j=Object.freeze({BROADCAST:9500,GROUP_CREATE:9501}),k=Object.freeze({QUERY:"query",NO_QUERY:"no_query"}),l=Object.freeze({BOOTSTRAP:"bootstrap",LOCAL:"local",LOCAL_AND_SERVER:"local_and_server",LOCAL_CONTACTS:"local_contacts",ORDERED_GCF_FRIENDLIST:"local_ordered_gcf_friendlist",QUERY_CACHE:"query_cache",SERVER:"server",SHORT_PROFILES:"local_short_profiles",SUGGESTED_RECIPIENTS:"local_suggested_recipients"});e.exports={FUNNEL_NAME:"MESSENGER_SECONDARY_SEARCH_FUNNEL",CLIENTS:a,END_ACTIONS:b,END_REASONS:c,ENTRY_SURFACES:d,EVENTS:f,SEARCH_SURFACES:g,SELECTION_TYPES:h,SOURCE_STATUSES:i,LOGGING_IDS:j,MICRO_SESSION_TYPES:k,SOURCES:l}}),null);
__d("FantaReducersPreLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","MessengerSecondarySearchFunnelConstants","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaTabSheetActions").Types,i=b("FantaMessageActions").Types;c=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var j=c.ABANDON,k=c.SEND,l=b("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION;function a(a,c){__p&&__p();if(!b("gkx")("678592"))return a;switch(c.type){case g.CLOSE_TAB:case g.CLOSE_AND_TAB_NEXT:case h.CLOSE_ADD_FRIENDS_SHEET:case h.CLOSE_ADD_MORE_FRIENDS_SHEET:a=m(a,c.tabID,l,j);break;case g.CLOSE_ALL_TABS:a.mercury.tabContents.forEach(function(b){a=m(a,b.id,l,j)});break;case i.ADD_GROUP_PARTICIPANTS:a=m(a,c.threadID,l,k,!0);break;case i.SEND_HOT_LIKE:case i.SEND_MESSAGE:case i.SEND_PHOTO:case i.SEND_STICKER:a=m(a,c.threadID,l,k);break}return a}function m(a,c,d,e,f){if(!b("gkx")("678592"))return a;var g=a.mercury.tabContents.get(c),h=g?g.loggingID:null,i=g?g.threadPreviewID:null;h&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(b){a=a.setIn(["mercury","tabContents",c],g.merge({loggingID:null}));var j;e===k&&(f===null||f===void 0)?j=g&&g.messages.size===0:j=f;b.endFunnel(d,e,h,i?i.split(":")[1]:c,j)},"FantaReducersPreLogging");return a}e.exports={logSearchEvents:a}}),null);
__d("FantaTypeTab",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={focusCounter:0,id:"",isHovered:!1,isMinimized:!1,openCounter:0,entryPoint:"unknown"};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeTabGroup",["FantaConst","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").OrderedMap({});c={allowedRaisedTabs:b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:b("immutable").Map({}),updatedTime:0};var i=function(a){return a.openCounter*-1},j=function(a){return a.focusCounter*-1};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;a.prototype.getRaisedandUnraisedTabs=function(){if(this.tabs.size===0||this.allowedRaisedTabs===0)return{raisedTabs:h,unraisedTabs:h};if(this.tabs.size===1&&this.allowedRaisedTabs>=1)return{raisedTabs:this.tabs.toOrderedMap(),unraisedTabs:h};var a=this.tabs.sortBy(j),b=a.slice(this.allowedRaisedTabs);a=a.take(this.allowedRaisedTabs).sortBy(i);return{raisedTabs:a,unraisedTabs:b}};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("isWebMessengerURI",[],(function(a,b,c,d,e,f){function a(a){return/^(\/messages)/.test(a.getPath())}e.exports=a}),null);
__d("FantaReducersTabs",["Bootloader","EventProfiler","FantaConst","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","LogHistory","MessengerDiscoveryEntryPoint","PinnedConversationNubsConfig","TimeSlice","URI","isWebMessengerURI","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i="tab_",j=b("LogHistory").getInstance("fanta_tabs"),k=1,l=1,m=1;function a(a,c){__p&&__p();switch(c.type){case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case g.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:j.debug(c.type,JSON.stringify({id:c.tabID}));if(l===1){b("EventProfiler").tagCurrentActiveInteractionsAs("FirstChatTabOpen");var d=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){a.markerStart(b.FIRSTCHATTABOPEN_WWW,0,d)},"FantaReducersTabs")}return q(a,c.tabID||i+m++,!0,c.entryPoint)}return a}function c(a,b){__p&&__p();switch(b.type){case h.REPLACE_TAB:case g.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:var c=b.tabID,d=b.newTabID,e=a.tabGroup;e=e.tabs;e=e.get(c);j.debug(b.type,JSON.stringify({id:c,isExisting:!!e,newID:d}));if(e){b=e.id===a.tabGroup.focusedTabID;a=a.setIn(["tabGroup","tabs",d],e.merge({id:d})).deleteIn(["tabGroup","tabs",c]);return q(a,d,b,"replace_tab")}return q(a,d,!1,"replace_tab")}return a}function d(a,b){switch(b.type){case h.MINIMIZE_TAB:return r(a,b.tabID,!0)}return a}function f(a,b){switch(b.type){case h.UNMINIMIZE_TAB:return r(a,b.tabID,!1)}return a}function n(a,b){switch(b.type){case h.FOCUS_TAB:b=b.tabID;return x(a,b)}return a}function o(a,b){switch(b.type){case h.BLUR_TAB:return y(a,b.tabID)}return a}function p(a,c){__p&&__p();switch(c.type){case g.RECEIVED_NEW_MESSAGE:var d=c.tabID,e=a.tabGroup.tabs.get(d);j.debug(c.type,JSON.stringify({id:d,isOpen:!!e}));if(!e){c=a.tabGroup.focusedTabID;a=q(a,d,!1,"message_received");var f=a.tabGroup.allowedRaisedTabs;e=a.tabGroup.getRaisedandUnraisedTabs();var h=e.raisedTabs;e=e.unraisedTabs;var i=h.count(),k=i+e.count();b("TimeSlice").guard(function(){b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(f).setOpenTabs(k).setVisibleTabs(i).log()},"FantaReducersTabs")},"name",{propagationType:b("TimeSlice").PropagationType.ORPHAN})();h=b("URI").getNextURI();if(b("isWebMessengerURI")(h))return a=r(a,d,!0);else if(c)return x(a,c)}}return a}function q(a,c,d,e){e===void 0&&(e="unknown");var f=a.tabGroup;f=f.tabs;f=f.get(c);!f?(f=new(b("FantaTypeTab"))({id:c,focusCounter:k,openCounter:l++,entryPoint:e}),a=a.setIn(["tabGroup","tabs",c],f)):f.isMinimized&&d&&(a=r(a,c,!1));return d?x(a,c):a}function r(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isMinimized:c}));return a}function s(a,b){__p&&__p();switch(b.type){case h.MINIMIZE_ALL_TABS:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=r(a,e,!0)}return a}return a}function t(a,b){switch(b.type){case h.CLOSE_TAB:case h.DELETE_TAB:var c=b.tabID;j.debug(b.type,JSON.stringify({id:c}));return u(a,c)}return a}function u(a,b){a=y(a,b);return a.deleteIn(["tabGroup","tabs",b]).deleteIn(["mercury","tabContents",b])}function v(a,b){switch(b.type){case h.CLOSE_ALL_TABS:j.debug(b.type);a=y(a,a.tabGroup.focusedTabID);return a.setIn(["tabGroup","tabs"],a.tabGroup.tabs.clear()).setIn(["mercury","tabContents"],a.mercury.tabContents.clear())}return a}function w(a,b){switch(b.type){case h.CLOSE_AND_TAB_NEXT:j.debug(b.type,JSON.stringify({id:b.tabID}));a=u(a,b.tabID);return G(a)}return a}function x(a,b,c){c===void 0&&(c=!1);var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{focusCounter:k++}));d=c?null:b;a=a.mergeIn(["tabGroup"],{focusedTabID:d});return a}function y(a,b){return a.tabGroup.focusedTabID===b?a.mergeIn(["tabGroup"],{focusedTabID:null}):a}function z(a,b){switch(b.type){case h.HOVERED_TAB:b=b.tabID;return B(a,b,!0)}return a}function A(a,b){switch(b.type){case h.UNHOVERED_TAB:b=b.tabID;return B(a,b,!1)}return a}function B(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isHovered:c}));return a}function C(a,c){__p&&__p();switch(c.type){case h.SET_ALLOWED_RAISED_TABS:var d=c.allowedRaisedTabs,e=a.tabGroup.allowedRaisedTabs;if(d!==e){j.debug(c.type,JSON.stringify({count:d}));b("PinnedConversationNubsConfig").chatTabTypingPriority||(d=Math.max(1,d));var f=a.tabGroup.tabs.count(),g=f>d?d:f;c=d>e&&f>e;e=d<e&&f>d;(c||e)&&b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(d).setOpenTabs(f).setVisibleTabs(g).log()},"FantaReducersTabs")}return D(a,d)}return a}function D(a,c){c===void 0&&(c=b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS);if(c===a.tabGroup.allowedRaisedTabs)return a;b("PinnedConversationNubsConfig").chatTabTypingPriority||(c=Math.max(1,c));return a.mergeIn(["tabGroup"],{allowedRaisedTabs:c})}function E(a,c){__p&&__p();switch(c.type){case h.LOAD_FROM_DATA:var d=a.tabGroup,e=c.tabData,f=d.updatedTime;if(f>=e.updatedTime||e.updatedTime===void 0)return a;a=D(a.set("tabGroup",new(b("FantaTypeTabGroup"))()),d.allowedRaisedTabs);var g=[];e.tabs.sort(function(a,b){return a.openCounter-b.openCounter}).forEach(function(c){g.push(c.id),a=q(a,c.id,!1,[b("MessengerDiscoveryEntryPoint").FB_HEADER_DOCK_LOADED_FROM_BROWSER_COOKIE]),c.isMinimized&&(a=r(a,c.id,c.isMinimized))});e.tabs.sort(function(a,b){return a.focusCounter-b.focusCounter}).forEach(function(b){a=x(a,b.id,!0)});j.debug(c.type,JSON.stringify({updatedTime:f,newerTime:e.updatedTime,opened:g}));a=e.focusedTabID?x(a,e.focusedTabID,!0):y(a)}return a}function F(a,b){switch(b.type){case h.FOCUS_NEXT_TAB:return G(a)}return a}function G(a){__p&&__p();var b=a.tabGroup.focusedTabID,c=a.tabGroup.getRaisedandUnraisedTabs();c=c.raisedTabs;var d=c.count();if(d===0)return a;else if(c.count()===1)return x(a,c.first().id);d=c.skipUntil(function(a){return a.id===b}).rest();if(d.count()===0)return x(a,c.first().id);else return x(a,d.first().id)}function H(a,b){__p&&__p();switch(b.type){case h.FOCUS_PREVIOUS_TAB:var c=a.tabGroup.focusedTabID;b=a.tabGroup.getRaisedandUnraisedTabs();b=b.raisedTabs;if(b.count()<2)return a;var d=b.reverse().skipUntil(function(a){return a.id===c}).rest();if(d.count()===0)return x(a,b.last().id);else return x(a,d.first().id)}return a}e.exports={blurTab:o,closeAllTabs:v,closeAndTabNext:w,closeTab:t,focusNextTab:F,focusPreviousTab:H,focusTab:n,hoveredTab:z,loadFromData:E,minimizAllTabs:s,minimizeTab:d,openTab:a,receivedNewMessage:p,replaceTab:c,setAllowedRaisedTabs:C,unhoveredTab:A,unminimizeTab:f}}),null);
__d("FantaTypeMercuryState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={tabContents:b("immutable").Map({})};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeAppState",["FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={tabGroup:new(b("FantaTypeTabGroup"))(),mercury:new(b("FantaTypeMercuryState"))()};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaAppStore",["FantaComposeViewReducers","FantaDispatcher","FantaReducersCookie","FantaReducersDockCalculator","FantaReducersLogging","FantaReducersMercury","FantaReducersMessages","FantaReducersPreLogging","FantaReducersTabs","FantaTypeAppState","FluxReduceStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[].concat(Object.values(b("FantaReducersPreLogging")),Object.values(b("FantaReducersTabs")),Object.values(b("FantaReducersMercury")),Object.values(b("FantaReducersMessages")),Object.values(b("FantaReducersDockCalculator")),Object.values(b("FantaReducersCookie")),Object.values(b("FantaComposeViewReducers")),Object.values(b("FantaReducersLogging")));g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("FantaTypeAppState"))()};a.prototype.ignoreReducer=function(a){var b=Object.values(a);h=h.filter(function(a){return!b.find(function(b){return b===a})})};a.prototype.addReducers=function(a){this.ignoreReducer(a),h=h.concat(Object.values(a))};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;c=new a(b("FantaDispatcher"));e.exports=c}),null);
__d("FantaCookieUtil",["CurrentUser","FantaConst","MercuryIDs","MessengerDiscoveryEntryPoint","MessengerState.bs","WorkModeConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={convertCookieData:function(a,c,d){__p&&__p();var e={tabs:[],focusedTabID:null,updatedTime:0,interstitialData:d};d=[];var f=this._getCookieKeys();a=a||{};a[f.tabs]&&(d=a[f.tabs]);d.forEach(function(a){e.tabs.push({id:a.i,isMinimized:!a.r,openCounter:a.o,focusCounter:a.f})});if(c)for(var d=c.tabs.values(),c=Array.isArray(d),g=0,d=c?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(c){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),h.id)&&e.tabs.push({id:h.id,isMinimized:h.isMinimized,openCounter:h.openCounter,focusCounter:h.focusCounter})}e.focusedTabID=a[f.focusedTabID];e.updatedTime=a[f.updatedTime];return e},createCookieData:function(a,c){__p&&__p();var d=[],e=this._getCookieKeys();if(c[e.updatedTime]>a.updatedTime)return c;for(var f=a.tabs.values(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;!b("MercuryIDs").isLocalThread(i.id)&&!this._shouldDisableForCookie(i.id,i.entryPoint)&&d.push({i:i.id,r:i.isMinimized?void 0:1,o:i.openCounter,f:i.focusCounter})}c[e.tabs]=d;c[e.focusedTabID]=a.focusedTabID;c[e.updatedTime]=a.updatedTime;return c},_shouldDisableForCookie:function(a,c){if(!c.includes(b("MessengerDiscoveryEntryPoint").FB_PAGE_USER_MESSAGE_PROMPT))return!1;c=b("MessengerState.bs").getThreadMessagesRangeNow(b("CurrentUser").getID(),a,0,1)[0];return c===void 0},_getCookieKeys:function(){var a=b("WorkModeConfig").is_work_user;return{tabs:a?b("FantaConst").cookieIDs.WORK_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:a?b("FantaConst").cookieIDs.WORK_FOCUS_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:a?b("FantaConst").cookieIDs.WORK_TIME_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_TIME_COOKIE_ID}}};e.exports=a}),null);
__d("FantaMercuryThreadEventsBootloaded",["Bootloader","CurrentUser","MercuryThreadInformer","MercuryViewer","MessengerState.bs","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadInformer").get();a={onMessagesReceived:function(a){__p&&__p();g.subscribe("messages-received",function(c,d){__p&&__p();if(!b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()){c=function(c){__p&&__p();var e=d[c],f=function(d){var f=e[d];if(f.author!=b("MercuryViewer").getID()){if(!f.is_unread)return"continue";b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),c,function(d){b("Bootloader").loadModules(["ChatTabPolicy"],function(b){b.messageIsAllowed(d,f,function(){a(c,f)})},"FantaMercuryThreadEventsBootloaded")})}};for(var g=0;g<e.length;g++){var h=f(g);if(h==="continue")continue}};for(var e in d)c(e)}})}};e.exports=a}),null);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","ifRequired","immutable","isWebMessengerURI","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("DockTabsViewportCalculator").getInstance(a);if(!c)return;c.registerFantaTabCallbacks({fantaTabModelStateGetter:function(){var a=b("immutable").Map({});b("ifRequired")("FantaAppStore",function(b){a=b.getState().tabGroup.tabs});return a},onAvailableWidthChanged:function(a){var c=b("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(a),d=function(){b("FantaTabActions").setAllowedRaisedTabs(c)};b("ifRequired")("FantaAppStore",function(a){a=a.getState().tabGroup.allowedRaisedTabs;c!==a&&b("setImmediate")(d)},function(){b("setImmediate")(d)})}});b("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){c.forceRecalculateChatTabs()});c.forceRecalculateFBDockWidth();b("Arbiter").subscribe("page_transition",function(a,c){b("isWebMessengerURI")(c.uri)&&b("setImmediate")(function(){return b("FantaTabActions").minimizeAllTabs()})})}e.exports={init:a}}),null);
__d("HotLikeSound",["MercurySoundsConfig","SoundPlayer","StickerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("MercurySoundsConfig").hot_like_grow_mp3_url,b("MercurySoundsConfig").hot_like_grow_ogg_url],h=[b("MercurySoundsConfig").hot_like_pop_mp3_url,b("MercurySoundsConfig").hot_like_pop_ogg_url],i=[b("MercurySoundsConfig").hot_like_outgoing_small_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_small_ogg_url],j=[b("MercurySoundsConfig").hot_like_outgoing_medium_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_medium_ogg_url],k=[b("MercurySoundsConfig").hot_like_outgoing_large_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_large_ogg_url],l=function(){return!1};a={setCheckSoundEnabledFunc:function(a){l=a},start:function(){this._play(g)},stop:function(){b("SoundPlayer").stop(g)},pop:function(){this.stop(),this._play(h)},snap:function(a){this.stop(),a===b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID&&this._play(i),a===b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID&&this._play(j),a===b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID&&this._play(k)},_play:function(a){l()&&b("SoundPlayer").play(a)}};e.exports=a}),null);
__d("MercuryDeliveryState",["MercuryConfig","MercuryIDs","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","UserActivity","debounceAcrossTransitions","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryConfig").delivery_timeout||12e4;a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$8=function(){if(this.$5.length===0&&Object.keys(this.$6).length===0)return;var a=this.$5.map(function(a){return a.message_id});a&&this.$2.sendDeliveryReceipts(a,this.$6);this.$6={};this.$5=[]}.bind(this),this.$1=a,this.$2=b("MercuryServerRequests").getForFBID(this.$1),this.$3=b("MercuryThreadInformer").getForFBID(this.$1),this.$4=b("MercuryThreadIDMap").getForFBID(this.$1),this.$5=[],this.$6={},this.$3.subscribe("messages-received",this.$7.bind(this)),b("UserActivity").subscribe(b("debounceAcrossTransitions")(this.$8,300,this))}a.prototype.$7=function(a,c){for(var d in c){a=c[d];a.forEach(function(a){this.$9(a)&&(this.$5.push(a),this.$4.getServerIDFromClientID(d,function(b){this.$6[b]||(this.$6[b]=[]),this.$6[b].push(a.message_id)}.bind(this)))}.bind(this))}(b("UserActivity").isActive(g)||b("gkx")("678665"))&&this.$8()};a.prototype.$9=function(a){var c=a.author?b("MercuryIDs").getUserIDFromParticipantID(a.author):null;if(c===this.$1)return!1;return!a.is_unread?!1:!0};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncEnvironment",["Arbiter","ChannelInitialData","CurrentUser","MercurySyncDeltaHandler","MessengerMQTTGating"],(function(a,b,c,d,e,f){"use strict";function a(){if(!b("ChannelInitialData").channelConfig&&!b("MessengerMQTTGating").isEnabled())return;b("MercurySyncDeltaHandler").get();b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:b("CurrentUser").getAccountID(),seqID:b("ChannelInitialData").channelConfig?b("ChannelInitialData").channelConfig.sequenceId:0})}e.exports={setUp:a}}),null);
__d("P2PSendMoneyDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=36,i;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),i=new Map(),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(c);this.emit("change");break;case b("P2PActionConstants").CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(c);this.emit("change");break}};a.prototype.getStateByThreadID=function(a){return i.get(a)};a.prototype.handleChatSendViewOpened=function(a){i.set(a.threadID,{amount:a.amount,groupSendRecipientUserIDs:a.groupSendRecipientUserIDs,groupSendReceiptDetails:a.groupSendReceiptDetails,groupThreadFBID:a.groupThreadFBID,onCompletion:a.onCompletion,openRequestTab:a.openRequestTab,memoText:a.memoText&&a.memoText.substr(0,h),platformData:a.platformData,referrer:a.referrer,paymentRequestID:a.paymentRequestID,sendMoneyDialogShown:!0,sendMoneyNUXDismissed:a.sendMoneyNUXDismissed,useModal:a.useModal})};a.prototype.handleChatSendViewClosed=function(a){i.set(a.threadID,{amount:"",groupSendRecipientUserIDs:[],groupSendReceiptDetails:null,groupThreadFBID:"",onCompletion:null,openRequestTab:!1,memoText:null,platformData:null,referrer:null,paymentRequestID:null,sendMoneyDialogShown:!1,sendMoneyNUXDismissed:!1,useModal:!1})};a.prototype.isAnyChatSendViewOpen=function(){__p&&__p();for(var a=i.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.sendMoneyDialogShown)return!0}return!1};e.exports=new a()}),null);
__d("FantaTabsAppBase",["Bootloader","ChatAppActions","ChatAppStore","ChatPerfInstrumentation","CSS","JSLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.init=function(a,c,d){__p&&__p();if(this.isInitialized()){b("JSLogger").create("chat_app").error("repeated_init");return}this.$1=a;this.tabsElem=c;var e=b("ChatAppStore").addListener(function(){var a=b("ChatAppStore").getPreviousState(),c=b("ChatAppStore").getState();a.initialDisplayDone===!1&&c.initialDisplayDone===!0&&(b("ChatPerfInstrumentation").logDisplayDone(),e.remove())});b("ChatPerfInstrumentation").init();this.$2(d);this.initializeFantaData(d.interstitial_data);this.initializeFantaUI();this.$3();b("ChatAppActions").tti();b("ChatPerfInstrumentation").logTTI()};a.prototype.isInitialized=function(){return!!b("ChatAppStore").getState().isInitialized};a.prototype.isHidden=function(){var a=b("ChatAppStore").getState();return!!(!a.isInitialized||a.isHidden)};a.prototype.hide=function(){if(this.isHidden())return;b("CSS").hide(this.$1);b("ChatAppActions").hide()};a.prototype.unhide=function(){var a=b("ChatAppStore").getState();a.isInitialized?a.isHidden&&(b("CSS").show(this.$1),d(["Dock"],function(a){a.resizeAllFlyouts()}),b("ChatAppActions").unhide()):a.isLoaded||(d(["UIPagelet"],function(a){a.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet"),a.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")}),b("ChatAppActions").load())};a.prototype.initializeFantaData=function(a){};a.prototype.initializeFantaUI=function(){};a.prototype.$2=function(a){d(["MercuryDeliveryState","MessengerParticipants.bs","MercuryServerPayloadPreprocessor","MessengerState.bs","MercurySyncEnvironment","P2PSendMoneyDialogStore"],function(c,d,e,f,g,h){c.get(),d,g.setUp(),b("ChatPerfInstrumentation").logInitStores(),a.graphql_payload?b("Bootloader").loadModules(["ChatInitialDataTransformer.bs"],function(b){var c=a.graphql_payload;b=b.transform(c);b.message_blocked_ids=c.message_blocked_ids;b.message_ignored_ids=c.message_ignored_ids;b.payload_source=c.payload_source;e.get().handleUpdate(b)},"FantaTabsAppBase"):e.get().handleUpdate(a.initial_data)})};a.prototype.$3=function(){d(["HotLikeSound","ChatOptions"],function(a,c){a.setCheckSoundEnabledFunc(function(){return c.getSetting("sound")}),b("ChatPerfInstrumentation").logInitSound()})};function a(){}e.exports=a}),null);
__d("ChatInitialDataTransformer.bs",["bs_array","bs_js_dict","bs_caml_array","bs_caml_format","bs_js_primitive","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.viewer,d=a.is_page,e=[],f=[],g={},h=[],i={},j=[];b("bs_array").iter(function(a){__p&&__p();if(a==null)return 0;else{var k=b("MessengerServerPayloadTransformer.bs").getThreadFBID(a),l=b("MessengerServerPayloadTransformer.bs").getOtherUserID(a),m=b("MessengerServerPayloadTransformer.bs").transformThread(c,a,d);e.push(m);var n=b("MessengerServerPayloadTransformer.bs").transformMessages(c,a,d);n!==void 0&&b("bs_array").iter(function(a){f.push(a);return 0},n);n=b("MessengerServerPayloadTransformer.bs").getMessagePageInfo(a);n!==void 0&&(b("bs_js_primitive").valFromOption(n).has_previous_page||(k==null?l==null||j.push({type:"thread",fbid:l}):j.push({type:"thread",fbid:k})));n=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(c,a);if(n!==void 0){n=b("bs_js_primitive").valFromOption(n);k==null||(g[k]=n);l==null||(g[l]=n)}k=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(a);if(k.length>=1){l=b("bs_caml_array").caml_array_get(k,0);if(m.is_canonical){n=m.other_user_fbid;n==null||h.push({other_user_fbid:n,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(l.timestamp_precise)})}else{k=m.thread_fbid;k==null||h.push({other_user_fbid:null,thread_fbid:k,time:b("bs_caml_format").caml_float_of_string(l.timestamp_precise)})}}n=b("MessengerServerPayloadTransformer.bs").transformParticipants(a);return b("bs_array").iter(function(a){i[a.fbid]=a;return 0},n)}},a.threads);return{threads:e,actions:f,roger:g,delivery_receipts:h,participants:b("bs_js_dict").values(i),end_of_history:j}}f.transform=a}),null);
__d("ImageReact.bs",["Image.react","ReasonReact.bs","bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){a={className:b("bs_js_null_undefined").fromOption(a),alt:b("bs_js_null_undefined").fromOption(c),src:b("bs_js_null_undefined").fromOption(f),height:b("bs_js_null_undefined").fromOption(g),title:b("bs_js_null_undefined").fromOption(h),width:b("bs_js_null_undefined").fromOption(i),style:b("bs_js_null_undefined").fromOption(j)};d!==void 0&&(a["aria-label"]=b("bs_js_primitive").valFromOption(d));e!==void 0&&(a["aria-busy"]=b("bs_js_primitive").valFromOption(e));return b("ReasonReact.bs").wrapJsForReason(b("Image.react"),a,k)}f.make=a}),null);
__d("LinkReact.bs",["Link.react","ReasonReact.bs","bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){d={"aria-label":b("bs_js_null_undefined").fromOption(d),"data-ft":b("bs_js_null_undefined").fromOption(f),"data-hover":b("bs_js_null_undefined").fromOption(g),"data-tooltip-content":b("bs_js_null_undefined").fromOption(h),"data-tooltip-alignh":b("bs_js_null_undefined").fromOption(i),"data-tooltip-position":b("bs_js_null_undefined").fromOption(j),className:b("bs_js_null_undefined").fromOption(e),href:b("bs_js_null_undefined").fromOption(k),linkRef:b("bs_js_null_undefined").fromOption(l),onClick:b("bs_js_null_undefined").fromOption(m),onMouseDown:b("bs_js_null_undefined").fromOption(n),onMouseEnter:b("bs_js_null_undefined").fromOption(o),role:b("bs_js_null_undefined").fromOption(p),rel:b("bs_js_null_undefined").fromOption(q),style:b("bs_js_null_undefined").fromOption(r),tabIndex:b("bs_js_null_undefined").fromOption(s),target:b("bs_js_null_undefined").fromOption(t),title:b("bs_js_null_undefined").fromOption(u)};a!==void 0&&(d["aria-expanded"]=b("bs_js_primitive").valFromOption(a));c!==void 0&&(d["aria-hidden"]=b("bs_js_primitive").valFromOption(c));return b("ReasonReact.bs").wrapJsForReason(b("Link.react"),d,v)}f.make=a}),null);
__d("PhotoStoreCore",[],(function(a,b,c,d,e,f){__p&&__p();var g={actions:{UPDATE:"update"},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(a){if(!this._photoCache[a])throw new Error("Photo cache requested for unknown set ID");return this._photoCache[a]},hasBeenCreated:function(a){return!!this._photoCache[a]},clearSetCache:function(a){delete this._photoCache[a],delete this._postCreateCallbacks[a]},getByIndex:function(a,b,c){this.getPhotoCache(a).getItemAtIndex(b,c)},getByIndexImmediate:function(a,b){return this._photoCache[a]?this._photoCache[a].getItemAtIndexImmediate(b):void 0},getItemsInAvailableRange:function(a){var b=this.getAvailableRange(a),c=[];for(var d=b.offset;d<b.length;d++)c.push(this.getByIndexImmediate(a,d));return c},getItemsAfterIndex:function(a,b,c,d){b=this.getCursorByIndexImmediate(a,b);this.fetchForward(a,b,c,d)},getAllByIDImmediate:function(a){var b=Object.keys(this._photoCache);return b.map(function(b){return this.getByIndexImmediate(b,this.getIndexForID(b,a))}.bind(this)).filter(function(a){return!!a})},getIndexForID:function(a,b){return this._photoCache[a]?this._photoCache[a].getIndexForID(b):void 0},getEndIndex:function(a){a=this.getAvailableRange(a);return a.offset+a.length-1},getCursorByIndexImmediate:function(a,b){b=this.getByIndexImmediate(a,b);return b?this._photoCache[a].getCursorForID(b.id):void 0},hasNextPage:function(a){var b=this.getCursorByIndexImmediate(a,this.getEndIndex(a));return this.getPhotoCache(a).hasNextPage(b)},getAvailableRange:function(a){return this.getPhotoCache(a).getAvailableRange()},hasLooped:function(a){return this.getPhotoCache(a).hasLooped()},fetchForward:function(a,b,c,d){this.getPhotoCache(a).getItemsAfterCursor(b,c,d)},fetchBackward:function(a,b,c,d){this.getPhotoCache(a).getItemsBeforeCursor(b,c,d)},executePostCreate:function(a,b){this._photoCache[a]?b&&b():this._postCreateCallbacks[a]=b},runPostCreateCallback:function(a){var b=this._postCreateCallbacks[a];b&&(b(),delete this._postCreateCallbacks[a])},setPreFetchCallback:function(a,b){this.getPhotoCache(a).setPreFetchCallback(b)},updateData:function(a){var b=a.set_id;!this._photoCache[b]?(this._photoCache[b]=new a.cache_class(a),this.runPostCreateCallback(b)):a.query_metadata.action==g.actions.UPDATE?this._photoCache[b].updateData(a):this._photoCache[b].addData(a)},updateFeedbackData:function(a){var b=Object.keys(a);b.forEach(function(b){return g.getAllByIDImmediate(b).forEach(function(c){c.feedback=a[b].feedback})})},reset:function(){Object.keys(this._photoCache).forEach(function(a){return this.clearSetCache(a)}.bind(this))}};e.exports=g}),null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],(function(a,b,c,d,e,f){b("Arbiter").subscribe("update-photos",function(a,c){b("PhotoStoreCore").updateData(c)}),e.exports=b("PhotoStoreCore")}),null);
__d("MercuryAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a={renderVideo:function(a){b("Bootloader").loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(c,d){b("MessagesViewer").renderVideo(b("React").createElement(c,babelHelpers["extends"]({},a,{forwardDialogComponent:d})))},"MercuryAttachmentViewer")},bootstrapWithConfig:function(a,c){b("Bootloader").loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(d,e){b("MessagesViewer").renderSpotlight(a,c,d,e)},"MercuryAttachmentViewer")},preload:function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],b("emptyFunction"),"MercuryAttachmentViewer")})}};e.exports=a}),null);
__d("MercuryThreadTitle.react",["fbt","MercuryIDs","MercuryParticipantListRenderer","MessengerParticipants.bs","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.state={participantNames:""},b}a.prototype.componentDidMount=function(){this.$1=!0,this.$2(this.props)};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.componentDidUpdate=function(a){a!==this.props&&this.$2(this.props)};a.prototype.render=function(){return b("React").createElement("span",{className:this.props.className},this.props.thread.name?this.$3():this.state.participantNames,this.props.children)};a.prototype.getTitle=function(){return this.state.participantNames};a.prototype.$3=function(){var a=this.props.thread,c=this.props.maxTitle?this.props.maxTitle<a.name.length?a.name.slice(0,this.props.maxTitle)+"...":a.name:a.name;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});return!a.unread_count||!this.props.showUnreadCount?c:this.$4(c,a.unread_count)};a.prototype.$2=function(a){__p&&__p();if(a.thread.name)return;this.setState({participantNames:""});var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=a.thread.participants||[];d.length>1&&(d=d.filter(function(a){return a!=c}));b("MessengerParticipants.bs").getMulti(d,function(c){__p&&__p();if(!this.$1)return;var e=d.map(function(a){return c[a]}),f=a.thread.custom_nickname?{}:null,g=b("MessengerTextWithEmoticons.react");if(f)for(var h in a.thread.custom_nickname)f[h]=b("React").createElement(g,{renderEmoticons:!0,renderEmoji:!0,text:a.thread.custom_nickname[h]});g=new(b("MercuryParticipantListRenderer"))().setUseShortName(a.useShortName).setUseAndSeparator(a.useAndSeparator).setIsNewThread(a.isNewThread).setNickname(f).renderParticipantList(e);f=a.showUnreadCount&&a.thread.unread_count?this.$4(g,a.thread.unread_count):g;this.setState({participantNames:f})}.bind(this))};a.prototype.$4=function(a,b){return g._("{conversation-title} ({unread-count})",[g._param("conversation-title",a),g._param("unread-count",b)])};a.defaultProps={isNewThread:!1,showUnreadCount:!1,useShortName:!1,useAndSeparator:!1};e.exports=a}),null);
__d("MercuryAudienceRestrictedTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.kanaNormalization=!0,a.maxResults=b("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX,a.minQueryLength=2,g.constructor.call(this,a),this.$MercuryAudienceRestrictedTypeaheadDataSource1=!1,this.$MercuryAudienceRestrictedTypeaheadDataSource2=!1,this.$MercuryAudienceRestrictedTypeaheadDataSource3={},this.$MercuryAudienceRestrictedTypeaheadDataSource4=!0,this.queryCache={},this.localCache={},this.queryIDs={}}a.prototype.dirty=function(){"use strict";return this};a.prototype.buildData=function(a){"use strict";return g.buildData.call(this,a)};a.prototype.query=function(a,b,c,d){"use strict";b=b||a.length===1;return g.query.call(this,a,b,c,d)};a.prototype.getQueryData=function(a,b){"use strict";return babelHelpers["extends"]({},g.getQueryData.call(this,a,b))};a.prototype.setEntry=function(a,b){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource3[a]=b};a.prototype.getEntry=function(a){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource3[a]||null};a.prototype.getCachedShortProfileIDs=function(){"use strict";var a=b("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var c=b("ShortProfiles").getNow(a);return a==b("CurrentUser").getID()||c&&(c.type===b("MercuryParticipantTypes").FRIEND||c.type===b("MercuryParticipantTypes").FB4C)});return a};a.prototype.isBootstrapped=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource1};a.prototype.isBootstrapping=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource2};a.prototype.processEntries=function(a,c){"use strict";a=a&&a.map(function(a){a.index==null&&(a.render_type===b("MercuryParticipantTypes").FRIEND||a.render_type===b("MercuryParticipantTypes").FB4C)&&(a.index=b("OrderedFriendsList").getActiveRank(a.uid));return a});return g.processEntries.call(this,a)};a.prototype.mergeUids=function(a,b,c,d){"use strict";b=b.sort(function(a,b){a=this.getEntry(a);b=this.getEntry(b);return a&&a.index&&b&&b.index?a.index-b.index:0}.bind(this));return g.mergeUids.call(this,a,b,c,d)};a.prototype.setQueryData=function(a,b){"use strict";return g.setQueryData.call(this,a)};a.prototype.respond=function(a,b,c){"use strict";return g.respond.call(this,a,b,c)};a.prototype.setShowThreads=function(a){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource4=a};e.exports=a}),null);
__d("MercuryTypingAnimation_DEPRECATED.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4a0v _1x3z",this.props.className)},b("React").createElement("div",{className:"_4b0g"},b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MercuryTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig"],(function(a,b,c,d,e,f){__p&&__p();var g,h=[],i={},j={},k={},l=[],m=[],n=[],o=!1,p=!1;c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.kanaNormalization=!0,g.constructor.call(this,a),this.showDefaultList=a.showDefaultList||!1}a.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=h;this.localCache=j;this.queryCache=i;this.queryIDs=k;this.defaultList=l;this.topEntryIDs=m;this.nullStateExclusions=n;return this};a.prototype.bootstrap=function(){"use strict";if(o||p)return!1;p=!0;b("ShortProfiles").fetchAll().then(function(){this.updateBootstrapData(),p=!1,o=!0,this.showDefaultList&&this.inform("show-default",{impressions:this.defaultList})}.bind(this),function(){}.bind(this));return!0};a.prototype.updateBootstrapData=function(){"use strict";__p&&__p();var a=this.getCachedShortProfileIDs(),c=b("WorkModeConfig").is_work_user?b("MercuryParticipantTypes").FB4C:b("MercuryParticipantTypes").FRIEND;a=a.map(function(a){var d=b("ShortProfiles").getNow(a),e=a==b("CurrentUser").getID()?c:d.type,f=[d.additionalName,d.alternateName].concat(d.searchTokens||[]).join(" "),g=d.name,h=null;return{uid:a,index:b("OrderedFriendsList").getActiveRank(a),text:g,subtext:h,tokens:f,localized_text:d.name,additional_text:d.additionalName,photo:d.thumbSrc,render_type:e,type:b("MercuryTypeaheadConstants").USER_TYPE}});a.length&&this.addEntries(a);if(!this.showDefaultList)return;m=a.sort(function(a,b){return a.index-b.index}).map(function(a){return a.uid});this.defaultList=this.buildData(m.slice(0,5));this.topEntryIDs=m};a.prototype.updateDefaultList=function(a){"use strict";if(!a)return;this.nullStateExclusions.includes(a)?this.nullStateExclusions=this.nullStateExclusions.filter(function(b){return b!==a}):this.nullStateExclusions.push(a);l=this.topEntryIDs.filter(function(a){return!this.nullStateExclusions.includes(a)}.bind(this));this.defaultList=this.buildData(l.slice(0,5))};a.prototype.query=function(a,b,c,d){"use strict";b=b||a.length===1;return g.query.call(this,a,b,c,d)};a.prototype.getQueryData=function(a,b){"use strict";return babelHelpers["extends"]({},g.getQueryData.call(this,a,b))};a.prototype.setEntry=function(a,b){"use strict";this.$MercuryTypeaheadDataSource1[a]=b};a.prototype.getEntry=function(a){"use strict";return this.$MercuryTypeaheadDataSource1[a]||null};a.prototype.getCachedShortProfileIDs=function(){"use strict";var a=b("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var c=b("ShortProfiles").getNow(a);return a==b("CurrentUser").getID()||c.type===b("MercuryParticipantTypes").FRIEND||c.type===b("MercuryParticipantTypes").FB4C});return a};a.prototype.isBootstrapped=function(){"use strict";return o};a.prototype.isBootstrapping=function(){"use strict";return p};a.prototype.processEntries=function(a,c){"use strict";a=a.map(function(a){a.index==null&&(a.render_type===b("MercuryParticipantTypes").FRIEND||a.render_type===b("MercuryParticipantTypes").FB4C)&&(a.index=b("OrderedFriendsList").getActiveRank(a.uid));return a});return g.processEntries.call(this,a)};a.prototype.mergeUids=function(a,b,c,d){"use strict";b=b.sort(function(a,b){return this.getEntry(a).index-this.getEntry(b).index}.bind(this));return g.mergeUids.call(this,a,b,c,d)};a.prototype.setShowDefaultList=function(a){"use strict";this.showDefaultList=a};e.exports=a}),null);
__d("ChatTabTypeaheadDataSource",["MercuryConfig","MercuryTypeaheadConstants","MercuryTypeaheadDataSource"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("MercuryTypeaheadDataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.maxResults=b("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX,a.showDefaultList=b("MercuryConfig").ChatComposer,g.constructor.call(this,a),this.$ChatTabTypeaheadDataSource1=!0}a.prototype.buildData=function(a){"use strict";__p&&__p();var c=[],d=[],e=[],f=[],h=[],i=[],j=[],k=!this.$ChatTabTypeaheadDataSource1;a.forEach(function(a){__p&&__p();var i=g.getEntry.call(this,a);switch(i.render_type){case b("MercuryTypeaheadConstants").FRIEND_TYPE:c.push(a);break;case b("MercuryTypeaheadConstants").THREAD_TYPE:this.$ChatTabTypeaheadDataSource1&&d.push(a);break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:e.push(a);break;case b("MercuryTypeaheadConstants").FB4C_TYPE:f.push(a);break;case b("MercuryTypeaheadConstants").PAGE_TYPE:k||h.push(a);break;case b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:i=!k||i.can_add_to_group_chat;i&&j.push(a);break;default:break}}.bind(this),this);a=i.concat(c,f,d,h,e,j);return g.buildData.call(this,a)};a.prototype.query=function(a,b,c,d){"use strict";return g.query.call(this,a,b,c,d)};a.prototype.respond=function(a,b,c){"use strict";return g.respond.call(this,a,b,c)};a.prototype.setShowThreads=function(a){"use strict";this.$ChatTabTypeaheadDataSource1=a};e.exports=a}),null);
__d("ContextualLayerAutoFlipHorizontal",["ContextualLayerAutoFlip"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("ContextualLayerAutoFlip"));g&&g.prototype;a.prototype.getValidPositions=function(a){"use strict";return[a.getPosition()]};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("ContextualLayerHideOnScrollOut",["Event","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a}a.prototype.enable=function(){"use strict";this.$4==null&&(this.$4=new(b("SubscriptionsHandler"))(),this.$4.addSubscriptions(this.$1.subscribe("contextchange",this.$5.bind(this)),this.$1.subscribe("show",this.$6.bind(this)),this.$1.subscribe("hide",this.$7.bind(this))))};a.prototype.disable=function(){"use strict";this.$4!=null&&(this.$4.release(),this.$4=null),this.$7()};a.prototype.$6=function(){"use strict";if(this.$2==null){this.$3=this.$1.getContextScrollParent();if(this.$3===window)return;this.$2=b("Event").listen(this.$3,"scroll",this.$8.bind(this))}};a.prototype.$7=function(){"use strict";this.$2&&(this.$2.remove(),this.$2=null,this.$3=null)};a.prototype.$8=function(){"use strict";var a=this.$3,b=this.$1;if(a==null||b==null)return;var c=b.getContent().getBoundingClientRect();a=a.getBoundingClientRect();var d=c.bottom<=a.top||c.top>=a.bottom;c=c.right<=a.left||c.left>=a.right;(d||c)&&b.hide()};a.prototype.$5=function(){"use strict";this.detach!==null&&this.detach(),this.attach!=null&&this.$1.isShown()&&this.attach()};e.exports=a}),null);
__d("DraftEditorTextNode.react",["invariant","React","ReactDOM","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("UserAgent").isBrowser("IE <= 11");function j(a){return i?a.textContent==="\n":a.tagName==="BR"}var k=i?b("React").createElement("span",{key:"A","data-text":"true"},"\n"):b("React").createElement("br",{key:"A","data-text":"true"}),l=i?b("React").createElement("span",{key:"B","data-text":"true"},"\n"):b("React").createElement("br",{key:"B","data-text":"true"});c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$1=!1}a.prototype.shouldComponentUpdate=function(a){var c=b("ReactDOM").findDOMNode(this),d=a.children==="";c instanceof Element||g(0,6158);return d?!j(c):c.textContent!==a.children};a.prototype.componentDidMount=function(){this.$1=!this.$1};a.prototype.componentDidUpdate=function(){this.$1=!this.$1};a.prototype.render=function(){return this.props.children===""?this.$1?k:l:b("React").createElement("span",{key:this.$1?"A":"B","data-text":"true"},this.props.children)};e.exports=a}),null);
__d("DraftEffects",["cx","BanzaiODS","CurrentUser","DraftEffectsPerSite","fbjs/lib/CSSCore","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("CurrentUser").isEmployee()?".employee":"",i=!1;a={initODS:function(){document.addEventListener("input",function(a){a.target.nodeType===1&&b("fbjs/lib/CSSCore").hasClass(a.target,"_5rpu")&&b("BanzaiODS").bumpEntityKey("draft_js","input_events"+h)})},handleExtensionCausedError:function(){b("BanzaiODS").bumpEntityKey("draft_js","extension_caused_errors"+h);if(i||!b("gkx")("676843"))return;i=!0;b("DraftEffectsPerSite").handleExtensionCausedError()}};e.exports=a}),null);
__d("DraftJsDebugLogging",["CurrentUser","DraftJsEventsTypedLogger","ScriptPath"],(function(a,b,c,d,e,f){"use strict";e.exports={logBlockedSelectionEvent:function(a){var c=a.anonymizedDom,d=a.extraParams;a=a.selectionState;new(b("DraftJsEventsTypedLogger"))().setEvent("blocked_selection_event").setAnonymizedDom(c).setExtraParams(d).setScriptPath(b("ScriptPath").getScriptPath()).setSelectionState(a).log()},logSelectionStateFailure:function(a){var c=a.anonymizedDom,d=a.extraParams;a=a.selectionState;b("CurrentUser").isEmployee()&&new(b("DraftJsEventsTypedLogger"))().setEvent("selection_state_failure").setAnonymizedDom(c).setExtraParams(d).setScriptPath(b("ScriptPath").getScriptPath()).setSelectionState(a).log()}}}),null);
__d("setDraftEditorSelection",["invariant","DraftEffects","DraftJsDebugLogging","containsNode","getActiveElement"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,b){if(!a)return"[empty]";a=i(a,b);if(a.nodeType===Node.TEXT_NODE)return a.textContent;a instanceof Element||g(0,3425);return a.outerHTML}function i(a,b){__p&&__p();var c=b!==void 0?b(a):[];if(a.nodeType===Node.TEXT_NODE){var d=a.textContent.length;return document.createTextNode("[text "+d+(c.length?" | "+c.join(", "):"")+"]")}d=a.cloneNode();d.nodeType===1&&c.length&&d.setAttribute("data-labels",c.join(", "));c=a.childNodes;for(var a=0;a<c.length;a++)d.appendChild(i(c[a],b));return d}function j(a,b){a=a;while(a)if(a instanceof Element&&a.hasAttribute("contenteditable"))return h(a,b);else a=a.parentNode;return"Could not find contentEditable parent of node"}function k(a){return a.nodeValue===null?a.childNodes.length:a.nodeValue.length}function c(c,d,e,f,g){__p&&__p();if(!b("containsNode")(document.documentElement,d))return;var h=a.getSelection(),i=c.getAnchorKey(),j=c.getAnchorOffset(),k=c.getFocusKey(),n=c.getFocusOffset(),o=c.getIsBackward();if(!h.extend&&o){var p=i,q=j;i=k;j=n;k=p;n=q;o=!1}p=i===e&&f<=j&&g>=j;q=k===e&&f<=n&&g>=n;if(p&&q){h.removeAllRanges();m(h,d,j-f,c);l(h,d,n-f,c);return}if(!o)p&&(h.removeAllRanges(),m(h,d,j-f,c)),q&&l(h,d,n-f,c);else{q&&(h.removeAllRanges(),m(h,d,n-f,c));if(p){i=h.focusNode;k=h.focusOffset;h.removeAllRanges();m(h,d,j-f,c);l(h,i,k,c)}}}function l(a,c,d,e){__p&&__p();var f=b("getActiveElement")();if(a.extend&&b("containsNode")(f,c)){d>k(c)&&b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c),extraParams:JSON.stringify({offset:d}),selectionState:JSON.stringify(e.toJS())});var g=c===a.focusNode;try{a.extend(c,d)}catch(h){b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c,function(b){var c=[];b===f&&c.push("active element");b===a.anchorNode&&c.push("selection anchor node");b===a.focusNode&&c.push("selection focus node");return c}),extraParams:JSON.stringify({activeElementName:f?f.nodeName:null,nodeIsFocus:c===a.focusNode,nodeWasFocus:g,selectionRangeCount:a.rangeCount,selectionAnchorNodeName:a.anchorNode?a.anchorNode.nodeName:null,selectionAnchorOffset:a.anchorOffset,selectionFocusNodeName:a.focusNode?a.focusNode.nodeName:null,selectionFocusOffset:a.focusOffset,message:h?""+h:null,offset:d},null,2),selectionState:JSON.stringify(e.toJS(),null,2)});throw h}}else{g=a.getRangeAt(0);g.setEnd(c,d);a.addRange(g.cloneRange())}}function m(a,c,d,e){var f=document.createRange();d>k(c)&&(b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c),extraParams:JSON.stringify({offset:d}),selectionState:JSON.stringify(e.toJS())}),b("DraftEffects").handleExtensionCausedError());f.setStart(c,d);a.addRange(f)}e.exports=c}),null);
__d("DraftEditorLeaf.react",["invariant","DraftEditorTextNode.react","React","ReactDOM","setDraftEditorSelection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(){__p&&__p();var a=this.props.selection;if(a==null||!a.getHasFocus())return;var c=this.props,d=c.block,e=c.start;c=c.text;d=d.getKey();c=e+c.length;if(!a.hasEdgeWithin(d,e,c))return;var f=b("ReactDOM").findDOMNode(this);f||g(0,5590);var h=f.firstChild;h||g(0,5591);var i;h.nodeType===Node.TEXT_NODE?i=h:h.tagName==="BR"?i=f:(i=h.firstChild,i||g(0,5592));b("setDraftEditorSelection")(a,i,d,e,c)};a.prototype.shouldComponentUpdate=function(a){var c=b("ReactDOM").findDOMNode(this.leaf);c||g(0,5593);c=c.textContent!==a.text||a.styleSet!==this.props.styleSet||a.forceSelection;return c};a.prototype.componentDidUpdate=function(){this.$1()};a.prototype.componentDidMount=function(){this.$1()};a.prototype.render=function(){__p&&__p();var a=this.props.block,c=this.props.text;c.endsWith("\n")&&this.props.isLast&&(c+="\n");var d=this.props,e=d.customStyleMap,f=d.customStyleFn,g=d.offsetKey;d=d.styleSet;var h=d.reduce(function(a,b){var c={};b=e[b];b!==void 0&&a.textDecoration!==b.textDecoration&&(c.textDecoration=[a.textDecoration,b.textDecoration].join(" ").trim());return Object.assign(a,b,c)},{});if(f){f=f(d,a);h=Object.assign(h,f)}return b("React").createElement("span",{"data-offset-key":g,ref:function(a){return this.leaf=a}.bind(this),style:h},b("React").createElement(b("DraftEditorTextNode.react"),null,c))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("DraftOffsetKey",[],(function(a,b,c,d,e,f){"use strict";var g="-";a={encode:function(a,b,c){return a+g+b+g+c},decode:function(a){a=a.split(g);var b=a[0],c=a[1];a=a[2];return{blockKey:b,decoratorKey:parseInt(c,10),leafKey:parseInt(a,10)}}};e.exports=a}),null);
__d("DraftEditorBlock.react",["cx","invariant","DraftEditorLeaf.react","DraftOffsetKey","React","ReactDOM","Scroll","Style","UnicodeBidi","UnicodeBidiDirection","getElementPosition","getScrollPosition","getViewportDimensions","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=10,k=function(a,b){return a.getAnchorKey()===b||a.getFocusKey()===b};i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.shouldComponentUpdate=function(a){return this.props.block!==a.block||this.props.tree!==a.tree||this.props.direction!==a.direction||k(a.selection,a.block.getKey())&&a.forceSelection};a.prototype.componentDidMount=function(){__p&&__p();var a=this.props.selection,c=a.getEndKey();if(!a.getHasFocus()||c!==this.props.block.getKey())return;a=b("ReactDOM").findDOMNode(this);c=b("Style").getScrollParent(a);var d=b("getScrollPosition")(c);if(c===window){var e=b("getElementPosition")(a);e=e.y+e.height;var f=b("getViewportDimensions")().height;e=e-f;e>0&&window.scrollTo(d.x,d.y+e+j)}else{a instanceof HTMLElement||h(0,4852);f=a.offsetHeight+a.offsetTop;a=c.offsetHeight+d.y;e=f-a;e>0&&b("Scroll").setTop(c,b("Scroll").getTop(c)+e+j)}};a.prototype.$1=function(){__p&&__p();var a=this.props.block,c=a.getKey(),d=a.getText(),e=this.props.tree.size-1,f=k(this.props.selection,c);return this.props.tree.map(function(g,h){__p&&__p();var i=g.get("leaves"),j=i.size-1,k=i.map(function(i,k){var l=b("DraftOffsetKey").encode(c,h,k),g=i.get("start");i=i.get("end");return b("React").createElement(b("DraftEditorLeaf.react"),{key:l,offsetKey:l,block:a,start:g,selection:f?this.props.selection:null,forceSelection:this.props.forceSelection,text:d.slice(g,i),styleSet:a.getInlineStyleAt(g),customStyleMap:this.props.customStyleMap,customStyleFn:this.props.customStyleFn,isLast:h===e&&k===j})}.bind(this)).toArray(),l=g.get("decoratorKey");if(l==null)return k;if(!this.props.decorator)return k;var m=b("nullthrows")(this.props.decorator),n=m.getComponentForKey(l);if(!n)return k;m=m.getPropsForKey(l);l=b("DraftOffsetKey").encode(c,h,0);var o=i.first().get("start");i=i.last().get("end");var p=d.slice(o,i);g=a.getEntityAt(g.get("start"));var q=b("UnicodeBidiDirection").getHTMLDirIfDifferent(b("UnicodeBidi").getDirection(p),this.props.direction);p={contentState:this.props.contentState,decoratedText:p,dir:q,key:l,start:o,end:i,blockKey:c,entityKey:g,offsetKey:l};return b("React").createElement(n,babelHelpers["extends"]({},m,p),k)}.bind(this)).toArray()};a.prototype.render=function(){var a=this.props,c=a.direction;a=a.offsetKey;c="_1mf"+(c==="LTR"?" _1mj":"")+(c==="RTL"?" _1mk":"");return b("React").createElement("div",{"data-offset-key":a,className:c},this.$1())};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorContents-core.react",["cx","DraftEditorBlock.react","DraftOffsetKey","React","joinClasses","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=function(a,b,c,d){return(a==="unordered-list-item"?"_3kpz":"")+(a==="ordered-list-item"?" _3kp_":"")+(c?" _3kq0":"")+(b===0?" _3kq1":"")+(b===1?" _3kq2":"")+(b===2?" _3kq3":"")+(b===3?" _3kq4":"")+(b>=4?" _3kq5":"")+(d==="LTR"?" _3kq6":"")+(d==="RTL"?" _3kq7":"")};h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){__p&&__p();var b=this.props.editorState;a=a.editorState;var c=b.getDirectionMap(),d=a.getDirectionMap();if(c!==d)return!0;c=b.getSelection().getHasFocus();d=a.getSelection().getHasFocus();if(c!==d)return!0;c=a.getNativelyRenderedContent();d=b.isInCompositionMode();var e=a.isInCompositionMode();if(b===a||c!==null&&a.getCurrentContent()===c||d&&e)return!1;c=b.getCurrentContent();var f=a.getCurrentContent();b=b.getDecorator();var g=a.getDecorator();return d!==e||c!==f||b!==g||a.mustForceSelection()};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.blockRenderMap,d=a.blockRendererFn,e=a.blockStyleFn,f=a.customStyleMap,g=a.customStyleFn,h=a.editorState,j=a.editorKey;a=a.textDirectionality;var k=h.getCurrentContent(),l=h.getSelection(),m=h.mustForceSelection(),n=h.getDecorator(),o=b("nullthrows")(h.getDirectionMap()),p=k.getBlocksAsArray(),q=[],r=null,s=null;for(var t=0;t<p.length;t++){var u=p[t],v=u.getKey(),w=u.getType(),x=d(u),y=void 0,z=void 0,A=void 0;x&&(y=x.component,z=x.props,A=x.editable);x=a?a:o.get(v);var B=b("DraftOffsetKey").encode(v,0,0);z={contentState:k,block:u,blockProps:z,blockStyleFn:e,customStyleMap:f,customStyleFn:g,decorator:n,direction:x,forceSelection:m,key:v,offsetKey:B,selection:l,tree:h.getBlockTree(v)};var C=c.get(w)||c.get("unstyled"),D=C.wrapper;C=C.element||c.get("unstyled").element;var E=u.getDepth(),F="";e&&(F=e(u));if(C==="li"){var G=s!==D||r===null||E>r;F=b("joinClasses")(F,i(w,E,G,x))}w=y||b("DraftEditorBlock.react");E={className:F,"data-block":!0,"data-editor":j,"data-offset-key":B,key:v};A!==void 0&&(E=babelHelpers["extends"]({},E,{contentEditable:A,suppressContentEditableWarning:!0}));G=b("React").createElement(C,E,b("React").createElement(w,z));q.push({block:G,wrapperTemplate:D,key:v,offsetKey:B});D?r=u.getDepth():r=null;s=D}x=[];for(var y=0;y<q.length;){F=q[y];if(F.wrapperTemplate){A=[];do A.push(q[y].block),y++;while(y<q.length&&q[y].wrapperTemplate===F.wrapperTemplate);C=b("React").cloneElement(F.wrapperTemplate,{key:F.key+"-wrap","data-offset-key":F.offsetKey},A);x.push(C)}else x.push(F.block),y++}return b("React").createElement("div",{"data-contents":"true"},x)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorDecoratedLeaves.react",["DraftOffsetKey","React","UnicodeBidi","UnicodeBidiDirection"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=this.props,c=a.block,d=a.children,e=a.contentState,f=a.decorator,g=a.decoratorKey,h=a.direction,i=a.leafSet;a=a.text;var j=c.getKey(),k=i.get("leaves"),l=f.getComponentForKey(g);f=f.getPropsForKey(g);j=b("DraftOffsetKey").encode(j,parseInt(g,10),0);g=a.slice(k.first().get("start"),k.last().get("end"));a=b("UnicodeBidiDirection").getHTMLDirIfDifferent(b("UnicodeBidi").getDirection(g),h);return b("React").createElement(l,babelHelpers["extends"]({},f,{contentState:e,decoratedText:g,dir:a,key:j,entityKey:c.getEntityAt(i.get("start")),offsetKey:j}),d)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorNode.react",["cx","DraftEditorDecoratedLeaves.react","DraftEditorLeaf.react","DraftOffsetKey","immutable","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("immutable").List;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.block,d=a.contentState,e=a.customStyleFn,f=a.customStyleMap,g=a.decorator,h=a.direction,i=a.forceSelection,j=a.hasSelection,k=a.selection;a=a.tree;var l=c.getKey(),m=c.getText(),n=a.size-1;a=this.props.children||a.map(function(a,o){var p=a.get("decoratorKey"),q=a.get("leaves"),r=q.size-1;q=q.map(function(a,d){var g=b("DraftOffsetKey").encode(l,o,d),h=a.get("start");a=a.get("end");return b("React").createElement(b("DraftEditorLeaf.react"),{key:g,offsetKey:g,block:c,start:h,selection:j?k:null,forceSelection:i,text:m.slice(h,a),styleSet:c.getInlineStyleAt(h),customStyleMap:f,customStyleFn:e,isLast:p===n&&d===r})}).toArray();return!p||!g?q:b("React").createElement(b("DraftEditorDecoratedLeaves.react"),{block:c,children:q,contentState:d,decorator:g,decoratorKey:p,direction:h,leafSet:a,text:m,key:o})}).toArray();return b("React").createElement("div",{"data-offset-key":b("DraftOffsetKey").encode(l,0,0),className:"_1mf"+(h==="LTR"?" _1mj":"")+(h==="RTL"?" _1mk":"")},a)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorBlockNode.react",["invariant","DraftEditorNode.react","DraftOffsetKey","React","ReactDOM","Scroll","Style","getElementPosition","getScrollPosition","getViewportDimensions","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=10;b("immutable").List;var j=function(a,b){return a.getAnchorKey()===b||a.getFocusKey()===b},k=function(a,b){var c=a.getNextSiblingKey();return c?b.getBlockForKey(c).getType()===a.getType():!1},l=function(a,c,d){__p&&__p();var e=[];for(var f=d.reverse(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;if(i.type!==c)break;e.push(i)}d.splice(d.indexOf(e[0]),e.length+1);i=e.reverse();c=i[0].key;d.push(b("React").cloneElement(a,{key:c+"-wrap","data-offset-key":b("DraftOffsetKey").encode(c,0,0)},i));return d},m=function(a,b){a=b.get(a.getType())||b.get("unstyled");var c=a.wrapper;a=a.element||b.get("unstyled").element;return{Element:a,wrapperTemplate:c}},n=function(a,b){b=b(a);if(!b)return{};a=b.component;var c=b.props;b=b.editable;return{CustomComponent:a,customProps:c,customEditable:b}},o=function(a,b,c,d,e){b={"data-block":!0,"data-editor":b,"data-offset-key":c,key:a.getKey()};c=d(a);c&&(b.className=c);e.customEditable!==void 0&&(b=babelHelpers["extends"]({},b,{contentEditable:e.customEditable,suppressContentEditableWarning:!0}));return b};h=babelHelpers.inherits(p,b("React").Component);h&&h.prototype;p.prototype.shouldComponentUpdate=function(a){var b=this.props,c=b.block,d=b.direction;b=b.tree;var e=!c.getChildKeys().isEmpty();c=c!==a.block||b!==a.tree||d!==a.direction||j(a.selection,a.block.getKey())&&a.forceSelection;return e||c};p.prototype.componentDidMount=function(){__p&&__p();var a=this.props.selection,c=a.getEndKey();if(!a.getHasFocus()||c!==this.props.block.getKey())return;a=b("ReactDOM").findDOMNode(this);c=b("Style").getScrollParent(a);var d=b("getScrollPosition")(c);if(c===window){var e=b("getElementPosition")(a);e=e.y+e.height;var f=b("getViewportDimensions")().height;e=e-f;e>0&&window.scrollTo(d.x,d.y+e+i)}else{a instanceof HTMLElement||g(0,4852);f=a.offsetHeight+a.offsetTop;a=c.offsetHeight+d.y;e=f-a;e>0&&b("Scroll").setTop(c,b("Scroll").getTop(c)+e+i)}};p.prototype.render=function(){__p&&__p();var a=this.props,c=a.block,d=a.blockRenderMap,e=a.blockRendererFn,f=a.blockStyleFn,g=a.contentState,h=a.decorator,i=a.editorKey,q=a.editorState,r=a.customStyleFn,s=a.customStyleMap,t=a.direction,u=a.forceSelection,v=a.selection;a=a.tree;var w=null;c.children.size&&(w=c.children.reduce(function(j,r){var a=b("DraftOffsetKey").encode(r,0,0),s=g.getBlockForKey(r),c=n(s,e),h=c.CustomComponent||p,t=m(s,d),u=t.Element;t=t.wrapperTemplate;var v=o(s,i,a,f,c);r=babelHelpers["extends"]({},this.props,{tree:q.getBlockTree(r),blockProps:c.customProps,offsetKey:a,block:s});j.push(b("React").createElement(u,v,b("React").createElement(h,r)));if(!t||k(s,g))return j;l(t,u,j);return j}.bind(this),[]));var x=c.getKey(),y=b("DraftOffsetKey").encode(x,0,0),z=n(c,e),A=z.CustomComponent;A=A!=null?b("React").createElement(A,babelHelpers["extends"]({},this.props,{tree:q.getBlockTree(x),blockProps:z.customProps,offsetKey:y,block:c})):b("React").createElement(b("DraftEditorNode.react"),{block:c,children:w,contentState:g,customStyleFn:r,customStyleMap:s,decorator:h,direction:t,forceSelection:u,hasSelection:j(v,x),selection:v,tree:a});if(c.getParentKey())return A;w=m(c,d);r=w.Element;s=o(c,i,y,f,z);return b("React").createElement(r,s,A)};function p(){h.apply(this,arguments)}e.exports=p}),null);
__d("DraftEditorContentsExperimental.react",["DraftEditorBlockNode.react","DraftOffsetKey","React","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.shouldComponentUpdate=function(a){__p&&__p();var b=this.props.editorState;a=a.editorState;var c=b.getDirectionMap(),d=a.getDirectionMap();if(c!==d)return!0;c=b.getSelection().getHasFocus();d=a.getSelection().getHasFocus();if(c!==d)return!0;c=a.getNativelyRenderedContent();d=b.isInCompositionMode();var e=a.isInCompositionMode();if(b===a||c!==null&&a.getCurrentContent()===c||d&&e)return!1;c=b.getCurrentContent();var f=a.getCurrentContent();b=b.getDecorator();var g=a.getDecorator();return d!==e||c!==f||b!==g||a.mustForceSelection()};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.blockRenderMap,d=a.blockRendererFn,e=a.blockStyleFn,f=a.customStyleMap,g=a.customStyleFn,h=a.editorState,i=a.editorKey;a=a.textDirectionality;var j=h.getCurrentContent(),k=h.getSelection(),l=h.mustForceSelection(),m=h.getDecorator(),n=b("nullthrows")(h.getDirectionMap()),o=j.getBlocksAsArray();o=o[0];var p=[];o=o;while(o){var q=o.getKey(),r={blockRenderMap:c,blockRendererFn:d,blockStyleFn:e,contentState:j,customStyleFn:g,customStyleMap:f,decorator:m,editorKey:i,editorState:h,forceSelection:l,selection:k,block:o,direction:a?a:n.get(q),tree:h.getBlockTree(q)},s=c.get(o.getType())||c.get("unstyled");s=s.wrapper;p.push({block:b("React").createElement(b("DraftEditorBlockNode.react"),babelHelpers["extends"]({key:q},r)),wrapperTemplate:s,key:q,offsetKey:b("DraftOffsetKey").encode(q,0,0)});r=o.getNextSiblingKey();o=r?j.getBlockForKey(r):null}s=[];for(var q=0;q<p.length;){r=p[q];if(r.wrapperTemplate){c=[];do c.push(p[q].block),q++;while(q<p.length&&p[q].wrapperTemplate===r.wrapperTemplate);d=b("React").cloneElement(r.wrapperTemplate,{key:r.key+"-wrap","data-offset-key":r.offsetKey},c);s.push(d)}else s.push(r.block),q++}return b("React").createElement("div",{"data-contents":"true"},s)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorContents.react",["gkx","DraftEditorContentsExperimental.react","DraftEditorContents-core.react"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("676842");e.exports=a?b("DraftEditorContentsExperimental.react"):b("DraftEditorContents-core.react")}),null);
__d("DefaultDraftBlockRenderMap",["cx","immutable","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("immutable").Map;c=b("React").createElement("ul",{className:"_1bv0"});d=b("React").createElement("ol",{className:"_1bv1"});f=b("React").createElement("pre",{className:"_1bv2"});g=a({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:c},"ordered-list-item":{element:"li",wrapper:d},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:f},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=g}),null);
__d("DefaultDraftInlineStyle",[],(function(a,b,c,d,e,f){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}}),null);
__d("getEntityKeyForSelection",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){__p&&__p();var c;if(b.isCollapsed()){var d=b.getAnchorKey(),e=b.getAnchorOffset();if(e>0){c=a.getBlockForKey(d).getEntityAt(e-1);return c!==a.getBlockForKey(d).getEntityAt(e)?null:g(a.getEntityMap(),c)}return null}d=b.getStartKey();e=b.getStartOffset();b=a.getBlockForKey(d);c=e===b.getLength()?null:b.getEntityAt(e);return g(a.getEntityMap(),c)}function g(a,b){if(b){a=a.__get(b);return a.getMutability()==="MUTABLE"?b:null}return null}e.exports=a}),null);
__d("isEventHandled",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a==="handled"||a===!0}e.exports=a}),null);
__d("isSelectionAtLeafStart",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var b=a.getSelection(),c=b.getAnchorKey();a=a.getBlockTree(c);var d=b.getStartOffset();c=!1;a.some(function(a){__p&&__p();if(d===a.get("start")){c=!0;return!0}return d<a.get("end")?a.get("leaves").some(function(a){a=a.get("start");if(d===a){c=!0;return!0}return!1}):!1});return c}e.exports=a}),null);
__d("DraftEditorCompositionHandler",["DraftModifier","EditorState","Keys","getEntityKeyForSelection","gkx","isEventHandled","isSelectionAtLeafStart"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=20,h=!1,i=!1,j="",k={onBeforeInput:function(a,b){j=(j||"")+b.data},onCompositionStart:function(a){i=!0},onCompositionEnd:function(a,b){h=!1,i=!1,setTimeout(function(){h||k.resolveComposition(a,b)},g)},onKeyDown:function(a,c){if(!i){k.resolveComposition(a,c);a._onKeyDown(c);return}(c.which===b("Keys").RIGHT||c.which===b("Keys").LEFT)&&c.preventDefault()},onKeyPress:function(a,c){c.which===b("Keys").RETURN&&c.preventDefault()},resolveComposition:function(a,event){__p&&__p();if(i)return;h=!0;var c=j;j="";var d=b("EditorState").set(a._latestEditorState,{inCompositionMode:!1}),e=d.getCurrentInlineStyle(),f=b("getEntityKeyForSelection")(d.getCurrentContent(),d.getSelection()),g=!c||b("isSelectionAtLeafStart")(d)||e.size>0||f!==null;g&&a.restoreEditorDOM();a.exitCurrentMode();if(c){if(b("gkx")("676846")&&a.props.handleBeforeInput&&b("isEventHandled")(a.props.handleBeforeInput(c,d,event.timeStamp)))return;c=b("DraftModifier").replaceText(d.getCurrentContent(),d.getSelection(),c,e,f);a.update(b("EditorState").push(d,c,"insert-characters"));return}g&&a.update(b("EditorState").set(d,{nativelyRenderedContent:null,forceSelection:!0}))}};e.exports=k}),null);
__d("getSelectionOffsetKeyForNode",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(a instanceof Element){var b=a.getAttribute("data-offset-key");if(b)return b;for(var b=0;b<a.childNodes.length;b++){var c=g(a.childNodes[b]);if(c)return c}}return null}e.exports=g}),null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a;while(a&&a!==document.documentElement){var c=b("getSelectionOffsetKeyForNode")(a);if(c!=null)return c;a=a.parentNode}return null}e.exports=a}),null);
__d("getTextContentFromFiles",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/\.textClipping$/,i={"text/plain":!0,"text/html":!0,"text/rtf":!0},j=5e3;function b(a,b){var c=0,d=[];a.forEach(function(e){k(e,function(e){c++,e&&d.push(e.slice(0,j)),c==a.length&&b(d.join("\r"))})})}function k(b,c){__p&&__p();if(!a.FileReader||b.type&&!(b.type in i)){c("");return}if(b.type===""){var d="";h.test(b.name)&&(d=b.name.replace(h,""));c(d);return}var e=new FileReader();e.onload=function(){var a=e.result;typeof a==="string"||g(0,1637);c(a)};e.onerror=function(){c("")};e.readAsText(b)}e.exports=b}),null);
__d("getUpdatedSelectionState",["DraftOffsetKey","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();var g=b("nullthrows")(a.getSelection());c=b("DraftOffsetKey").decode(c);var h=c.blockKey;c=a.getBlockTree(h).getIn([c.decoratorKey,"leaves",c.leafKey]);e=b("DraftOffsetKey").decode(e);var i=e.blockKey;e=a.getBlockTree(i).getIn([e.decoratorKey,"leaves",e.leafKey]);var j=c.get("start"),k=e.get("start"),l=c?j+d:null,m=e?k+f:null,n=g.getAnchorKey()===h&&g.getAnchorOffset()===l&&g.getFocusKey()===i&&g.getFocusOffset()===m;if(n)return g;if(h===i){n=c.get("end");c=e.get("end");k===j&&c===n?e=f<d:e=k<j}else{c=a.getCurrentContent().getBlockMap().keySeq().skipUntil(function(a){return a===h||a===i}).first();e=c===i}return g.merge({anchorKey:h,anchorOffset:l,focusKey:i,focusOffset:m,isBackward:e})}e.exports=a}),null);
__d("DraftEditorDragHandler",["DataTransfer","DraftModifier","EditorState","ReactDOM","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState","isEventHandled","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(event,a){__p&&__p();var c=null,d=null;if(typeof document.caretRangeFromPoint==="function"){var e=document.caretRangeFromPoint(event.x,event.y);c=e.startContainer;d=e.startOffset}else if(event.rangeParent)c=event.rangeParent,d=event.rangeOffset;else return null;c=b("nullthrows")(c);d=b("nullthrows")(d);e=b("nullthrows")(b("findAncestorOffsetKey")(c));return b("getUpdatedSelectionState")(a,e,d,e,d)}a={onDragEnd:function(a){a.exitCurrentMode(),h(a)},onDrop:function(a,c){__p&&__p();var d=new(b("DataTransfer"))(c.nativeEvent.dataTransfer),e=a._latestEditorState,f=g(c.nativeEvent,e);c.preventDefault();a._dragCount=0;a.exitCurrentMode();if(f==null)return;c=d.getFiles();if(c.length>0){if(a.props.handleDroppedFiles&&b("isEventHandled")(a.props.handleDroppedFiles(f,c)))return;b("getTextContentFromFiles")(c,function(b){b&&a.update(j(e,f,b))});return}c=a._internalDrag?"internal":"external";a.props.handleDrop&&b("isEventHandled")(a.props.handleDrop(f,d,c))||(a._internalDrag?a.update(i(e,f)):a.update(j(e,f,d.getText())));h(a)}};function h(a){a._internalDrag=!1;a=b("ReactDOM").findDOMNode(a);if(a){var c=new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0});a.dispatchEvent(c)}}function i(a,c){c=b("DraftModifier").moveText(a.getCurrentContent(),a.getSelection(),c);return b("EditorState").push(a,c,"insert-fragment")}function j(a,c,d){c=b("DraftModifier").insertText(a.getCurrentContent(),c,d,a.getCurrentInlineStyle());return b("EditorState").push(a,c,"insert-fragment")}e.exports=a}),null);
__d("editOnBeforeInput",["DraftModifier","EditorState","UserAgent","getEntityKeyForSelection","isEventHandled","isSelectionAtLeafStart","nullthrows","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="'",h="/",i=b("UserAgent").isBrowser("Firefox");function j(a){return i&&(a==g||a==h)}function k(a,c,d,e,f){c=b("DraftModifier").replaceText(a.getCurrentContent(),a.getSelection(),c,d,e);return b("EditorState").push(a,c,"insert-characters",f)}function c(c,d){__p&&__p();c._pendingStateFromBeforeInput!==void 0&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=void 0);var e=c._latestEditorState,f=d.data;if(!f)return;if(c.props.handleBeforeInput&&b("isEventHandled")(c.props.handleBeforeInput(f,e,d.timeStamp))){d.preventDefault();return}var g=e.getSelection(),h=g.getStartOffset(),i=g.getAnchorKey();if(!g.isCollapsed()){d.preventDefault();c.update(k(e,f,e.getCurrentInlineStyle(),b("getEntityKeyForSelection")(e.getCurrentContent(),e.getSelection()),!0));return}g=k(e,f,e.getCurrentInlineStyle(),b("getEntityKeyForSelection")(e.getCurrentContent(),e.getSelection()),!1);var l=!1;l||(l=b("isSelectionAtLeafStart")(c._latestCommittedEditorState));if(!l){var m=a.getSelection();if(m.anchorNode&&m.anchorNode.nodeType===Node.TEXT_NODE){m=m.anchorNode.parentNode;l=m.nodeName==="SPAN"&&m.firstChild.nodeType===Node.TEXT_NODE&&m.firstChild.nodeValue.indexOf("\t")!==-1}}if(!l){m=e.getBlockTree(i);var n=g.getBlockTree(i);l=m.size!==n.size||m.zip(n).some(function(a){var b=a[0];a=a[1];var c=b.get("start");c=c+(c>=h?f.length:0);var d=b.get("end");d=d+(d>=h?f.length:0);return b.get("decoratorKey")!==a.get("decoratorKey")||b.get("leaves").size!==a.get("leaves").size||c!==a.get("start")||d!==a.get("end")})}l||(l=j(f));l||(l=b("nullthrows")(g.getDirectionMap()).get(i)!==b("nullthrows")(e.getDirectionMap()).get(i));if(l){d.preventDefault();g=b("EditorState").set(g,{forceSelection:!0});c.update(g);return}g=b("EditorState").set(g,{nativelyRenderedContent:g.getCurrentContent()});c._pendingStateFromBeforeInput=g;b("setImmediate")(function(){c._pendingStateFromBeforeInput!==void 0&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=void 0)})}e.exports=c}),null);
__d("editOnBlur",["EditorState","containsNode","getActiveElement"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function c(c,d){__p&&__p();if(b("getActiveElement")()===document.body){var e=a.getSelection(),f=c.editor;e.rangeCount===1&&b("containsNode")(f,e.anchorNode)&&b("containsNode")(f,e.focusNode)&&e.removeAllRanges()}f=c._latestEditorState;e=f.getSelection();if(!e.getHasFocus())return;e=e.set("hasFocus",!1);c.props.onBlur&&c.props.onBlur(d);c.update(b("EditorState").acceptSelection(f,e))}e.exports=c}),null);
__d("editOnCompositionStart",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a.setMode("composite"),a.update(b("EditorState").set(a._latestEditorState,{inCompositionMode:!0})),a._onCompositionStart(c)}e.exports=a}),null);
__d("getFragmentFromSelection",["getContentStateFragment"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection();return c.isCollapsed()?null:b("getContentStateFragment")(a.getCurrentContent(),c)}e.exports=a}),null);
__d("editOnCopy",["getFragmentFromSelection"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=a._latestEditorState;d=d.getSelection();if(d.isCollapsed()){c.preventDefault();return}a.setClipboard(b("getFragmentFromSelection")(a._latestEditorState))}e.exports=a}),null);
__d("editOnCut",["DraftModifier","EditorState","Style","getFragmentFromSelection","getScrollPosition"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=a._latestEditorState,e=d.getSelection(),f=c.target,h;if(e.isCollapsed()){c.preventDefault();return}f instanceof Node&&(h=b("getScrollPosition")(b("Style").getScrollParent(f)));e=b("getFragmentFromSelection")(d);a.setClipboard(e);a.setMode("cut");setTimeout(function(){a.restoreEditorDOM(h),a.exitCurrentMode(),a.update(g(d))},0)}function g(a){var c=b("DraftModifier").removeRange(a.getCurrentContent(),a.getSelection(),"forward");return b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("editOnDragOver",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a.setMode("drag"),b.preventDefault()}e.exports=a}),null);
__d("editOnDragStart",[],(function(a,b,c,d,e,f){"use strict";function a(a){a._internalDrag=!0,a.setMode("drag")}e.exports=a}),null);
__d("editOnFocus",["EditorState","UserAgent"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a._latestEditorState,e=d.getSelection();if(e.getHasFocus())return;e=e.set("hasFocus",!0);a.props.onFocus&&a.props.onFocus(c);b("UserAgent").isBrowser("Chrome < 60.0.3081.0")?a.update(b("EditorState").forceSelection(d,e)):a.update(b("EditorState").acceptSelection(d,e))}e.exports=a}),null);
__d("editOnInput",["DraftModifier","DraftOffsetKey","EditorState","UserAgent","findAncestorOffsetKey","gkx","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UserAgent").isEngine("Gecko"),h="\n\n";function c(c){__p&&__p();c._pendingStateFromBeforeInput!==void 0&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=void 0);var d=a.getSelection(),e=d.anchorNode,f=d.isCollapsed,i=e.nodeType!==Node.TEXT_NODE,j=e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.ELEMENT_NODE;if(b("gkx")("676847")){if(i)return}else if(j)return;if(e.nodeType===Node.TEXT_NODE&&(e.previousSibling!==null||e.nextSibling!==null)){i=e.parentNode;e.nodeValue=i.textContent;for(var j=i.firstChild;j!==null;j=j.nextSibling)j!==e&&i.removeChild(j)}j=e.textContent;i=c._latestEditorState;e=b("nullthrows")(b("findAncestorOffsetKey")(e));e=b("DraftOffsetKey").decode(e);var k=e.blockKey,l=e.decoratorKey;e=e.leafKey;l=i.getBlockTree(k).getIn([l,"leaves",e]);e=l.start;l=l.end;var m=i.getCurrentContent();k=m.getBlockForKey(k);var n=k.getText().slice(e,l);j.endsWith(h)&&(j=j.slice(0,-1));if(j===n)return;var o=i.getSelection();l=o.merge({anchorOffset:e,focusOffset:l,isBackward:!1});var p=k.getEntityAt(e);p=p&&m.getEntity(p);p=p&&p.getMutability();p=p==="MUTABLE";var q=p?"spellcheck-change":"apply-entity";l=b("DraftModifier").replaceText(m,l,j,k.getInlineStyleAt(e),p?k.getEntityAt(e):null);if(g)p=d.anchorOffset,k=d.focusOffset,d=e+Math.min(p,k),e=d+Math.abs(p-k),p=d,k=e;else{j=j.length-n.length;d=o.getStartOffset();e=o.getEndOffset();p=f?e+j:d;k=e+j}n=l.merge({selectionBefore:m.getSelectionAfter(),selectionAfter:o.merge({anchorOffset:p,focusOffset:k})});c.update(b("EditorState").push(i,n,q))}e.exports=c}),null);
__d("KeyBindingUtil",["UserAgent"],(function(a,b,c,d,e,f){"use strict";var g=b("UserAgent").isPlatform("Mac OS X"),h={isCtrlKeyCommand:function(a){return!!a.ctrlKey&&!a.altKey},isOptionKeyCommand:function(a){return g&&a.altKey},usesMacOSHeuristics:function(){return g},hasCommandModifier:function(a){return g?!!a.metaKey&&!a.altKey:h.isCtrlKeyCommand(a)}};e.exports=h}),null);
__d("SecondaryClipboard",["DraftModifier","EditorState","getContentStateFragment","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;a={cut:function(a){__p&&__p();var c=a.getCurrentContent(),d=a.getSelection(),e=null;if(d.isCollapsed()){var f=d.getAnchorKey(),h=c.getBlockForKey(f).getLength();h===d.getAnchorOffset()?e=d.set("focusKey",c.getKeyAfter(f)).set("focusOffset",0):e=d.set("focusOffset",h)}else e=d;e=b("nullthrows")(e);g=b("getContentStateFragment")(c,e);f=b("DraftModifier").removeRange(c,e,"forward");return f===c?a:b("EditorState").push(a,f,"remove-range")},paste:function(a){if(!g)return a;var c=b("DraftModifier").replaceWithFragment(a.getCurrentContent(),a.getSelection(),g);return b("EditorState").push(a,c,"insert-fragment")}};e.exports=a}),null);
__d("getRangeClientRects",["invariant","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("UserAgent").isBrowser("Chrome");function a(a){__p&&__p();var b=a.cloneRange(),c=[];for(var d=a.endContainer;d!=null;d=d.parentNode){var e=d===a.commonAncestorContainer;e?b.setStart(a.startContainer,a.startOffset):b.setStart(b.endContainer,0);var f=Array.from(b.getClientRects());c.push(f);if(e){c.reverse();return(f=[]).concat.apply(f,c)}b.setEndBefore(d)}g(0,578)}d=c?a:function(a){return Array.from(a.getClientRects())};e.exports=d}),null);
__d("expandRangeToStartOfLine",["invariant","UnicodeUtils","getRangeClientRects"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){__p&&__p();a=getComputedStyle(a);var b=document.createElement("div");b.style.fontFamily=a.fontFamily;b.style.fontSize=a.fontSize;b.style.fontStyle=a.fontStyle;b.style.fontWeight=a.fontWeight;b.style.lineHeight=a.lineHeight;b.style.position="absolute";b.textContent="M";a=document.body;a||g(0,5725);a.appendChild(b);var c=b.getBoundingClientRect();a.removeChild(b);return c.height}function i(a,b){__p&&__p();var c=Infinity,d=Infinity,e=-Infinity,f=-Infinity;for(var g=0;g<a.length;g++){var h=a[g];if(h.width===0||h.width===1)continue;c=Math.min(c,h.top);d=Math.min(d,h.bottom);e=Math.max(e,h.top);f=Math.max(f,h.bottom)}return e<=d&&e-c<b&&f-d<b}function j(a){switch(a.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return a.length;default:return a.childNodes.length}}function a(a){__p&&__p();a.collapsed||g(0,5726);a=a.cloneRange();var c=a.startContainer;c.nodeType!==1&&(c=c.parentNode);c=h(c);var d=a.endContainer,e=a.endOffset;a.setStart(a.startContainer,0);while(i(b("getRangeClientRects")(a),c)){d=a.startContainer;e=a.startOffset;d.parentNode||g(0,5727);a.setStartBefore(d);if(d.nodeType===1&&getComputedStyle(d).display!=="inline")break}var f=d,k=e-1;do{var l=f.nodeValue,m=k;for(;m>=0;m--){if(l!=null&&m>0&&b("UnicodeUtils").isSurrogatePair(l,m-1))continue;a.setStart(f,m);if(i(b("getRangeClientRects")(a),c))d=f,e=m;else break}if(m===-1||f.childNodes.length===0)break;f=f.childNodes[m];k=j(f)}while(!0);a.setStart(d,e);return a}e.exports=a}),null);
__d("getDraftEditorSelectionWithNodes",["invariant","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c,d,e,f,g){var h=d.nodeType===Node.TEXT_NODE,i=f.nodeType===Node.TEXT_NODE;if(h&&i)return{selectionState:b("getUpdatedSelectionState")(a,b("nullthrows")(b("findAncestorOffsetKey")(d)),e,b("nullthrows")(b("findAncestorOffsetKey")(f)),g),needsRecovery:!1};var k=null,l=null,m=!0;h?(k={key:b("nullthrows")(b("findAncestorOffsetKey")(d)),offset:e},l=j(c,f,g)):i?(l={key:b("nullthrows")(b("findAncestorOffsetKey")(f)),offset:g},k=j(c,d,e)):(k=j(c,d,e),l=j(c,f,g),d===f&&e===g&&(m=!!d.firstChild&&d.firstChild.nodeName!=="BR"));return{selectionState:b("getUpdatedSelectionState")(a,k.key,k.offset,l.key,l.offset),needsRecovery:m}}function h(a){while(a.firstChild&&(a.firstChild instanceof Element&&a.firstChild.getAttribute("data-blocks")==="true"||b("getSelectionOffsetKeyForNode")(a.firstChild)))a=a.firstChild;return a}function i(a){while(a.lastChild&&(a.lastChild instanceof Element&&a.lastChild.getAttribute("data-blocks")==="true"||b("getSelectionOffsetKeyForNode")(a.lastChild)))a=a.lastChild;return a}function j(a,c,d){__p&&__p();c=c;var e=b("findAncestorOffsetKey")(c);e!=null||a&&(a===c||a.firstChild===c)||g(0,6007);a===c&&(c=c.firstChild,c instanceof Element&&c.getAttribute("data-contents")==="true"||g(0,6008),d>0&&(d=c.childNodes.length));if(d===0){if(e!=null)a=e;else{var f=h(c);a=b("nullthrows")(b("getSelectionOffsetKeyForNode")(f))}return{key:a,offset:0}}f=c.childNodes[d-1];a=null;if(!b("getSelectionOffsetKeyForNode")(f))a=b("nullthrows")(e),c=k(f);else{d=i(f);a=b("nullthrows")(b("getSelectionOffsetKeyForNode")(d));c=k(d)}return{key:a,offset:c}}function k(a){a=a.textContent;return a==="\n"?0:a.length}e.exports=a}),null);
__d("moveSelectionBackward",["warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=a.getSelection();b("warning")(!d.isCollapsed(),"moveSelectionBackward should only be called with a collapsed SelectionState");a=a.getCurrentContent();var e=d.getStartKey(),f=d.getStartOffset(),g=e,h=0;if(c>f){var i=a.getKeyBefore(e);if(i==null)g=e;else{g=i;e=a.getBlockForKey(i);h=e.getText().length}}else h=f-c;return d.merge({focusKey:g,focusOffset:h,isBackward:!0})}e.exports=a}),null);
__d("removeTextWithStrategy",["DraftModifier","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("676842");function a(a,c,d){__p&&__p();var e=a.getSelection(),f=a.getCurrentContent(),h=e,i=e.getAnchorKey(),j=e.getFocusKey(),k=f.getBlockForKey(i);if(g&&(d==="forward"&&i!==j))return f;if(e.isCollapsed()){if(d==="forward"){if(a.isSelectionAtEndOfContent())return f;if(g){j=e.getAnchorOffset()===f.getBlockForKey(i).getLength();if(j){i=f.getBlockForKey(k.nextSibling);if(!i||i.getLength()===0)return f}}}else if(a.isSelectionAtStartOfContent())return f;h=c(a);if(h===e)return f}return b("DraftModifier").removeRange(f,h,d)}e.exports=a}),null);
__d("keyCommandBackspaceToStartOfLine",["EditorState","expandRangeToStartOfLine","getDraftEditorSelectionWithNodes","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function c(c){var d=b("removeTextWithStrategy")(c,function(c){var d=c.getSelection();if(d.isCollapsed()&&d.getAnchorOffset()===0)return b("moveSelectionBackward")(c,1);d=a.getSelection();d=d.getRangeAt(0);d=b("expandRangeToStartOfLine")(d);return b("getDraftEditorSelectionWithNodes")(c,null,d.endContainer,d.endOffset,d.startContainer,d.startOffset).selectionState},"backward");return d===c.getCurrentContent()?c:b("EditorState").push(c,d,"remove-range")}e.exports=c}),null);
__d("DraftRemovableWord",["TokenizeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("TokenizeUtil").getPunctuation();c="['\u2018\u2019]";d="\\s|(?![_])"+a;f="^(?:"+d+")*(?:"+c+"|(?!"+d+").)*(?:(?!"+d+").)";var g=new RegExp(f);b="(?:(?!"+d+").)(?:"+c+"|(?!"+d+").)*(?:"+d+")*$";var h=new RegExp(b);function i(a,b){b=b?h.exec(a):g.exec(a);return b?b[0]:a}a={getBackward:function(a){return i(a,!0)},getForward:function(a){return i(a,!1)}};e.exports=a}),null);
__d("keyCommandBackspaceWord",["DraftRemovableWord","EditorState","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("removeTextWithStrategy")(a,function(a){var c=a.getSelection(),d=c.getStartOffset();if(d===0)return b("moveSelectionBackward")(a,1);c=c.getStartKey();var e=a.getCurrentContent();e=e.getBlockForKey(c).getText().slice(0,d);c=b("DraftRemovableWord").getBackward(e);return b("moveSelectionBackward")(a,c.length||1)},"backward");return c===a.getCurrentContent()?a:b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("moveSelectionForward",["warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=a.getSelection();b("warning")(!d.isCollapsed(),"moveSelectionForward should only be called with a collapsed SelectionState");var e=d.getStartKey(),f=d.getStartOffset();a=a.getCurrentContent();var g=e,h=a.getBlockForKey(e);c>h.getText().length-f?(g=a.getKeyAfter(e),h=0):h=f+c;return d.merge({focusKey:g,focusOffset:h})}e.exports=a}),null);
__d("keyCommandDeleteWord",["DraftRemovableWord","EditorState","moveSelectionForward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(a){var c=a.getSelection(),d=c.getStartOffset();c=c.getStartKey();var e=a.getCurrentContent();e=e.getBlockForKey(c).getText().slice(d);c=b("DraftRemovableWord").getForward(e);return b("moveSelectionForward")(a,c.length||1)},"forward");return c===a.getCurrentContent()?a:b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("keyCommandInsertNewline",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("DraftModifier").splitBlock(a.getCurrentContent(),a.getSelection());return b("EditorState").push(a,c,"split-block")}e.exports=a}),null);
__d("keyCommandMoveSelectionToEndOfBlock",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection(),d=c.getEndKey(),e=a.getCurrentContent();e=e.getBlockForKey(d).getLength();return b("EditorState").set(a,{selection:c.merge({anchorKey:d,anchorOffset:e,focusKey:d,focusOffset:e,isBackward:!1}),forceSelection:!0})}e.exports=a}),null);
__d("keyCommandMoveSelectionToStartOfBlock",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection(),d=c.getStartKey();return b("EditorState").set(a,{selection:c.merge({anchorKey:d,anchorOffset:0,focusKey:d,focusOffset:0,isBackward:!1}),forceSelection:!0})}e.exports=a}),null);
__d("keyCommandPlainBackspace",["EditorState","UnicodeUtils","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(c){var a=c.getSelection(),d=c.getCurrentContent(),e=a.getAnchorKey();a=a.getAnchorOffset();d=d.getBlockForKey(e).getText()[a-1];return b("moveSelectionBackward")(c,d?b("UnicodeUtils").getUTF16Length(d,0):1)},"backward");if(c===a.getCurrentContent())return a;var d=a.getSelection();return b("EditorState").push(a,c.set("selectionBefore",d),d.isCollapsed()?"backspace-character":"remove-range")}e.exports=a}),null);
__d("keyCommandPlainDelete",["EditorState","UnicodeUtils","moveSelectionForward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(c){var a=c.getSelection(),d=c.getCurrentContent(),e=a.getAnchorKey();a=a.getAnchorOffset();d=d.getBlockForKey(e).getText()[a];return b("moveSelectionForward")(c,d?b("UnicodeUtils").getUTF16Length(d,0):1)},"forward");if(c===a.getCurrentContent())return a;var d=a.getSelection();return b("EditorState").push(a,c.set("selectionBefore",d),d.isCollapsed()?"delete-character":"remove-range")}e.exports=a}),null);
__d("keyCommandTransposeCharacters",["DraftModifier","EditorState","getContentStateFragment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed())return a;var d=c.getAnchorOffset();if(d===0)return a;var e=c.getAnchorKey(),f=a.getCurrentContent();e=f.getBlockForKey(e);e=e.getLength();if(e<=1)return a;var g;d===e?(e=c.set("anchorOffset",d-1),g=c):(e=c.set("focusOffset",d+1),g=e.set("anchorOffset",d+1));c=b("getContentStateFragment")(f,e);d=b("DraftModifier").removeRange(f,e,"backward");f=d.getSelectionAfter();e=f.getAnchorOffset()-1;f=f.merge({anchorOffset:e,focusOffset:e});e=b("DraftModifier").replaceWithFragment(d,f,c);d=b("EditorState").push(a,e,"insert-fragment");return b("EditorState").acceptSelection(d,g)}e.exports=a}),null);
__d("keyCommandUndo",["EditorState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=b("EditorState").undo(c);if(c.getLastChangeType()==="spellcheck-change"){var f=e.getCurrentContent();d(b("EditorState").set(e,{nativelyRenderedContent:f}));return}a.preventDefault();if(!c.getNativelyRenderedContent()){d(e);return}d(b("EditorState").set(c,{nativelyRenderedContent:null}));setTimeout(function(){d(e)},0)}e.exports=a}),null);
__d("editOnKeyDown",["DraftModifier","EditorState","KeyBindingUtil","Keys","SecondaryClipboard","UserAgent","isEventHandled","keyCommandBackspaceToStartOfLine","keyCommandBackspaceWord","keyCommandDeleteWord","keyCommandInsertNewline","keyCommandMoveSelectionToEndOfBlock","keyCommandMoveSelectionToStartOfBlock","keyCommandPlainBackspace","keyCommandPlainDelete","keyCommandTransposeCharacters","keyCommandUndo"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("KeyBindingUtil").isOptionKeyCommand,h=b("UserAgent").isBrowser("Chrome");function i(a,c){__p&&__p();switch(a){case"redo":return b("EditorState").redo(c);case"delete":return b("keyCommandPlainDelete")(c);case"delete-word":return b("keyCommandDeleteWord")(c);case"backspace":return b("keyCommandPlainBackspace")(c);case"backspace-word":return b("keyCommandBackspaceWord")(c);case"backspace-to-start-of-line":return b("keyCommandBackspaceToStartOfLine")(c);case"split-block":return b("keyCommandInsertNewline")(c);case"transpose-characters":return b("keyCommandTransposeCharacters")(c);case"move-selection-to-start-of-block":return b("keyCommandMoveSelectionToStartOfBlock")(c);case"move-selection-to-end-of-block":return b("keyCommandMoveSelectionToEndOfBlock")(c);case"secondary-cut":return b("SecondaryClipboard").cut(c);case"secondary-paste":return b("SecondaryClipboard").paste(c);default:return c}}function a(a,c){__p&&__p();var d=c.which,e=a._latestEditorState;function f(b){b=a.props[b];if(b){b(c);return!0}else return!1}switch(d){case b("Keys").RETURN:c.preventDefault();if(a.props.handleReturn&&b("isEventHandled")(a.props.handleReturn(c,e)))return;break;case b("Keys").ESC:c.preventDefault();if(f("onEscape"))return;break;case b("Keys").TAB:if(f("onTab"))return;break;case b("Keys").UP:if(f("onUpArrow"))return;break;case b("Keys").RIGHT:if(f("onRightArrow"))return;break;case b("Keys").DOWN:if(f("onDownArrow"))return;break;case b("Keys").LEFT:if(f("onLeftArrow"))return;break;case b("Keys").SPACE:h&&g(c)&&c.preventDefault()}f=a.props.keyBindingFn(c);if(!f){if(d===b("Keys").SPACE&&h&&g(c)){d=b("DraftModifier").replaceText(e.getCurrentContent(),e.getSelection(),"\xa0");a.update(b("EditorState").push(e,d,"insert-characters"))}return}if(f==="undo"){b("keyCommandUndo")(c,e,a.update);return}c.preventDefault();if(a.props.handleKeyCommand&&b("isEventHandled")(a.props.handleKeyCommand(f,e,c.timeStamp)))return;d=i(f,e);d!==e&&a.update(d)}e.exports=a}),null);
__d("getSafeBodyFromHTML",["invariant","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=b("UserAgent").isBrowser("IE <= 9");function a(a){var b,c=null;!h&&document.implementation&&document.implementation.createHTMLDocument&&(b=document.implementation.createHTMLDocument("foo"),b.documentElement||g(0,1805),b.documentElement.innerHTML=a,c=b.getElementsByTagName("body")[0]);return c}e.exports=a}),null);
__d("convertFromHTMLToContentBlocks",["cx","invariant","CharacterMetadata","ContentBlock","ContentBlockNode","DefaultDraftBlockRenderMap","DraftEntity","immutable","URI","generateRandomKey","getSafeBodyFromHTML","gkx","sanitizeDraftText"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("immutable").Set,j=b("gkx")("676842"),k=b("immutable").List,l=b("immutable").OrderedSet;a="&nbsp;";var m=" ",n=4,o=new RegExp("\r","g"),p=new RegExp("\n","g"),q=new RegExp(a,"g"),r=new RegExp("&#13;?","g"),s=new RegExp("&#8203;?","g"),t=["bold","bolder","500","600","700","800","900"],u=["light","lighter","100","200","300","400"],v={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},w=(c={},c._3kq1=0,c._3kq2=1,c._3kq3=2,c._3kq4=3,c._3kq5=4,c),x=["className","href","rel","target","title"],y=["alt","className","height","src","width"],z,A={text:"",inlines:[],entities:[],blocks:[]},B={children:k(),depth:0,key:"",type:""},C=function(a,b){return a==="li"?b==="ol"?"ordered-list-item":"unordered-list-item":null},D=function(a){var b=a.get("unstyled").element,c=i([]);a.forEach(function(a){a.aliasedElements&&a.aliasedElements.forEach(function(a){c=c.add(a)}),c=c.add(a.element)});return c.filter(function(a){return a&&a!==b}).toArray().sort()},E=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(e)return e}return null},F=function(a,b,c){c=c.filter(function(b){return b.element===a||b.wrapper===a||b.aliasedElements&&b.aliasedElements.some(function(b){return b===a})}).keySeq().toSet().toArray().sort();switch(c.length){case 0:return"unstyled";case 1:return c[0];default:return E(a,b,[C])||"unstyled"}},G=function(a,b,c){__p&&__p();a=v[a];if(a)c=c.add(a).toOrderedSet();else if(b instanceof HTMLElement){var d=b;c=c.withMutations(function(a){var b=d.style.fontWeight,c=d.style.fontStyle,e=d.style.textDecoration;t.indexOf(b)>=0?a.add("BOLD"):u.indexOf(b)>=0&&a.remove("BOLD");c==="italic"?a.add("ITALIC"):c==="normal"&&a.remove("ITALIC");e==="underline"&&a.add("UNDERLINE");e==="line-through"&&a.add("STRIKETHROUGH");e==="none"&&(a.remove("UNDERLINE"),a.remove("STRIKETHROUGH"))}).toOrderedSet()}return c},H=function(a,b,c){var d=a.text.slice(-1),e=b.text.slice(0,1);d==="\r"&&e==="\r"&&!c&&(a.text=a.text.slice(0,-1),a.inlines.pop(),a.entities.pop(),a.blocks.pop());if(d==="\r")if(b.text===m||b.text==="\n")return a;else(e===m||e==="\n")&&(b.text=b.text.slice(1),b.inlines.shift(),b.entities.shift());return{text:a.text+b.text,inlines:a.inlines.concat(b.inlines),entities:a.entities.concat(b.entities),blocks:a.blocks.concat(b.blocks)}},I=function(a,b){return b.some(function(b){return a.indexOf("<"+b)!==-1})},J=function(a){a instanceof HTMLAnchorElement||h(0,5636);a=a.protocol;return a==="http:"||a==="https:"||a==="mailto:"},K=function(a){var b=new Array(1);a&&(b[0]=a);return babelHelpers["extends"]({},A,{text:m,inlines:[l()],entities:b})},L=function(){return babelHelpers["extends"]({},A,{text:"\n",inlines:[l()],entities:new Array(1)})},M=function(a){a===void 0&&(a={});return babelHelpers["extends"]({},B,a)},N=function(a,c,d){d===void 0&&(d=null);return{text:"\r",inlines:[l()],entities:new Array(1),blocks:[M({parent:d,key:b("generateRandomKey")(),type:a,depth:Math.max(0,Math.min(n,c))})]}},O=function(a,b){b===void 0&&(b=0);Object.keys(w).some(function(c){a.classList.contains(c)&&(b=w[c])});return b},P=function a(c,d,e,f,g,h,i,k,l,n){__p&&__p();var o=z,q=d.nodeName.toLowerCase(),r=c,s="unstyled",t=!1,u=g&&F(g,f,k),v=babelHelpers["extends"]({},A),w;if(q==="#text"){var B=d.textContent,C=B.trim();if(f&&C===""&&d.parentElement){var D=d.parentElement.nodeName.toLowerCase();if(D==="ol"||D==="ul")return{chunk:babelHelpers["extends"]({},A),entityMap:c}}if(C===""&&g!=="pre")return{chunk:K(l),entityMap:c};g!=="pre"&&(B=B.replace(p,m));z=q;return{chunk:{text:B,inlines:Array(B.length).fill(e),entities:Array(B.length).fill(l),blocks:[]},entityMap:c}}z=q;if(q==="br")return o==="br"&&(!g||u==="unstyled")?{chunk:N("unstyled",i,n),entityMap:c}:{chunk:L(),entityMap:c};if(q==="img"&&d instanceof HTMLImageElement&&d.attributes.getNamedItem("src")&&d.attributes.getNamedItem("src").value){var E=d,I={};y.forEach(function(a){var b=E.getAttribute(a);b&&(I[a]=b)});b("gkx")("676848")?d.getAttribute("role")!=="presentation"&&(d.textContent="\ud83d\udcf7"):d.textContent="\ud83d\udcf7";l=b("DraftEntity").__create("IMAGE","MUTABLE",I||{})}e=G(q,d,e);(q==="ul"||q==="ol")&&(f&&(i+=1),f=q);!j&&q==="li"&&d instanceof HTMLElement&&(i=O(d,i));D=F(q,f,k);C=f&&g==="li"&&q==="li";B=(!g||j)&&h.indexOf(q)!==-1;(C||B)&&(v=N(D,i,n),w=v.blocks[0].key,g=q,t=!j);C&&(s=f==="ul"?"unordered-list-item":"ordered-list-item");var M=d.firstChild;M!=null&&(q=M.nodeName.toLowerCase());o=null;while(M){M instanceof HTMLAnchorElement&&M.href&&J(M)?(function(){var c=M,a={};x.forEach(function(b){var d=c.getAttribute(b);d&&(a[b]=d)});a.url=new(b("URI"))(c.href).toString();o=b("DraftEntity").__create("LINK","MUTABLE",a||{})})():o=void 0;u=a(r,M,e,f,g,h,i,k,o||l,j?w:null);c=u.chunk;B=u.entityMap;D=c;r=B;v=H(v,D,j);C=M.nextSibling;!n&&C&&h.indexOf(q)>=0&&g&&(v=H(v,L()));C&&(q=C.nodeName.toLowerCase());M=C}t&&(v=H(v,N(s,i,n)));return{chunk:v,entityMap:r}},Q=function(a,b,c,d){__p&&__p();a=a.trim().replace(o,"").replace(q,m).replace(r,"").replace(s,"");var e=D(c);b=b(a);if(!b)return null;z=null;a=I(a,e)?e:["div"];e=P(d,b,l(),"ul",null,a,-1,c);d=e.chunk;b=e.entityMap;d.text.indexOf("\r")===0&&(d={text:d.text.slice(1),inlines:d.inlines.slice(1),entities:d.entities.slice(1),blocks:d.blocks});d.text.slice(-1)==="\r"&&(d.text=d.text.slice(0,-1),d.inlines=d.inlines.slice(0,-1),d.entities=d.entities.slice(0,-1),d.blocks.pop());d.blocks.length===0&&d.blocks.push(babelHelpers["extends"]({},A,{type:"unstyled",depth:0}));d.text.split("\r").length===d.blocks.length+1&&d.blocks.unshift({type:"unstyled",depth:0});return{chunk:d,entityMap:b}},R=function(a){__p&&__p();if(!a||!a.text||!Array.isArray(a.blocks))return null;var c={cacheRef:{},contentBlocks:[]},d=0,e=a.blocks,f=a.inlines,g=a.entities,h=j?b("ContentBlockNode"):b("ContentBlock");return a.text.split("\r").reduce(function(a,c,i){__p&&__p();c=b("sanitizeDraftText")(c);var j=e[i],l=d+c.length,m=f.slice(d,l),n=g.slice(d,l);m=k(m.map(function(c,a){c={style:c,entity:null};n[a]&&(c.entity=n[a]);return b("CharacterMetadata").create(c)}));d=l+1;l=j.depth;var o=j.type,p=j.parent;j=j.key||b("generateRandomKey")();var q=null;if(p){var r=a.cacheRef[p],s=a.contentBlocks[r];if(s.getChildKeys().isEmpty()&&s.getText()){var t=s.getCharacterList(),u=s.getText();q=b("generateRandomKey")();var v=new(b("ContentBlockNode"))({key:q,text:u,characterList:t,parent:p,nextSibling:j});a.contentBlocks.push(v);s=s.withMutations(function(a){a.set("characterList",k()).set("text","").set("children",s.children.push(v.getKey()))})}a.contentBlocks[r]=s.set("children",s.children.push(j))}u=new h({key:j,parent:p,type:o,depth:l,text:c,characterList:m,prevSibling:q||(i===0||e[i-1].parent!==p?null:e[i-1].key),nextSibling:i===e.length-1||e[i+1].parent!==p?null:e[i+1].key});a.contentBlocks.push(u);a.cacheRef[u.key]=i;return a},c).contentBlocks};d=function(a,c,d){c===void 0&&(c=b("getSafeBodyFromHTML"));d===void 0&&(d=b("DefaultDraftBlockRenderMap"));a=Q(a,c,d,b("DraftEntity"));if(a==null)return null;c=a.chunk;d=a.entityMap;a=R(c);return{contentBlocks:a,entityMap:d}};e.exports=d}),null);
__d("convertFromHTMLToContentBlocks2",["cx","CharacterMetadata","ContentBlock","ContentBlockNode","DefaultDraftBlockRenderMap","DraftEntity","immutable","URI","generateRandomKey","getSafeBodyFromHTML","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List,i=b("immutable").Map,j=b("immutable").OrderedSet,k=b("gkx")("676842");a="&nbsp;";var l=" ",m=new RegExp("\r","g"),n=new RegExp("\n","g"),o=new RegExp(a,"g"),p=new RegExp("&#13;?","g"),q=new RegExp("&#8203;?","g"),r=["bold","bolder","500","600","700","800","900"],s=["light","lighter","100","200","300","400"],t=["className","href","rel","target","title"],u=["alt","className","height","src","width"],v=(c={},c._3kq1=0,c._3kq2=1,c._3kq3=2,c._3kq4=3,c._3kq5=4,c),w=i({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"}),x=function(a){var b={};a.mapKeys(function(a,c){var d=[c.element];c.aliasedElements!==void 0&&d.push.apply(d,c.aliasedElements);d.forEach(function(c){b[c]===void 0?b[c]=a:typeof b[c]==="string"?b[c]=[b[c],a]:b[c].push(a)})});return i(b)},y=function(a,b){b===void 0&&(b=0);Object.keys(v).some(function(c){a.classList.contains(c)&&(b=v[c])});return b},z=function(a){return!!(a instanceof HTMLAnchorElement&&a.href&&(a.protocol==="http:"||a.protocol==="https:"||a.protocol==="mailto:"))},A=function(a){return!!(a instanceof HTMLImageElement&&a.attributes.getNamedItem("src")&&a.attributes.getNamedItem("src").value)},B=function(a){return a==="ul"||a==="ol"};function C(a,b){this.clear(),this.blockTypeMap=a,this.disambiguate=b}C.prototype.clear=function(){this.characterList=h(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=-1,this.currentEntity=null,this.currentStyle=j(),this.currentText="",this.entityMap=b("DraftEntity"),this.wrapper="ul",this.contentBlocks=[]};C.prototype.addDOMNode=function(a){var b;this.contentBlocks=[];(b=this.blockConfigs).push.apply(b,this.$1([a]));this.$2();this.currentText!==""&&this.blockConfigs.push(this.$3());return this};C.prototype.getContentBlocks=function(){this.contentBlocks.length===0&&(k?this.$4(this.blockConfigs):this.$5(this.blockConfigs));return{contentBlocks:this.contentBlocks,entityMap:this.entityMap}};C.prototype.addStyle=function(a){this.currentStyle=this.currentStyle.add(a)};C.prototype.removeStyle=function(a){this.currentStyle=this.currentStyle.remove(a)};C.prototype.$3=function(a){a===void 0&&(a={});var c=a.key||b("generateRandomKey")();c=babelHelpers["extends"]({key:c,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:Math.max(0,this.currentDepth),parent:null,children:h(),prevSibling:null,nextSibling:null,childConfigs:[]},a);this.characterList=h();this.currentBlockType="unstyled";this.currentDepth=-1;this.currentText="";return c};C.prototype.$1=function(a){__p&&__p();var c=[];for(var d=0;d<a.length;d++){var e=a[d],f=e.nodeName.toLowerCase();if(f==="body"||B(f)){this.$2();this.currentText!==""&&c.push(this.$3());var g=this.currentDepth,h=this.wrapper;B(f)&&(this.wrapper=f,B(h)&&this.currentDepth++);c.push.apply(c,this.$1(Array.from(e.childNodes)));this.currentDepth=g;this.wrapper=h;continue}g=this.blockTypeMap.get(f);if(g!==void 0){this.$2();this.currentText!==""&&c.push(this.$3());h=this.currentDepth;var i=this.wrapper;this.wrapper=f==="pre"?"pre":this.wrapper;typeof g!=="string"&&(g=this.disambiguate(f,this.wrapper)||g[0]||"unstyled");!k&&e instanceof HTMLElement&&(g==="unordered-list-item"||g==="ordered-list-item")&&(this.currentDepth=y(e,this.currentDepth));var j=b("generateRandomKey")(),l=this.$1(Array.from(e.childNodes));this.$2();c.push(this.$3({key:j,childConfigs:l,type:g}));this.currentDepth=h;this.wrapper=i;continue}if(f==="#text"){this.$6(e);continue}if(A(e)){this.$7(e);continue}if(z(e)){this.$8(e,c);continue}j=w.get(f);j!==void 0&&this.addStyle(j);c.push.apply(c,this.$1(Array.from(e.childNodes)));j!==void 0&&this.removeStyle(j);this.$9(e)}return c};C.prototype.$10=function(a){var c;this.currentText+=a;var d=b("CharacterMetadata").create({style:this.currentStyle,entity:this.currentEntity});this.characterList=(c=this.characterList).push.apply(c,Array(a.length).fill(d))};C.prototype.$2=function(){var a=this.currentText.length,b=a-this.currentText.trimLeft().length,c=this.currentText.trimRight().length,d=this.characterList.findEntry(function(a){return a.getEntity()!==null});b=d!==void 0?Math.min(b,d[0]):b;d=this.characterList.reverse().findEntry(function(a){return a.getEntity()!==null});c=d!==void 0?Math.max(c,a-d[0]):c;b>c?(this.currentText="",this.characterList=h()):(this.currentText=this.currentText.slice(b,c),this.characterList=this.characterList.slice(b,c))};C.prototype.$6=function(a){a=a.textContent;var b=a.trim();b===""&&this.wrapper!=="pre"&&(a=" ");this.wrapper!=="pre"&&(a=a.replace(n,l));this.$10(a)};C.prototype.$7=function(a){if(!(a instanceof HTMLImageElement))return;var c=a,d={};u.forEach(function(a){var b=c.getAttribute(a);b&&(d[a]=b)});this.currentEntity=this.entityMap.__create("IMAGE","MUTABLE",d);b("gkx")("676848")?a.getAttribute("role")!=="presentation"&&this.$10("\ud83d\udcf7"):this.$10("\ud83d\udcf7");this.currentEntity=null};C.prototype.$8=function(a,c){__p&&__p();if(!(a instanceof HTMLAnchorElement))return;var d=a,e={};t.forEach(function(a){var b=d.getAttribute(a);b&&(e[a]=b)});e.url=new(b("URI"))(d.href).toString();this.currentEntity=this.entityMap.__create("LINK","MUTABLE",e||{});c.push.apply(c,this.$1(Array.from(a.childNodes)));this.currentEntity=null};C.prototype.$9=function(a){__p&&__p();if(!(a instanceof HTMLElement))return;a=a;var b=a.style.fontWeight,c=a.style.fontStyle;a=a.style.textDecoration;r.indexOf(b)>=0?this.addStyle("BOLD"):s.indexOf(b)>=0&&this.removeStyle("BOLD");c==="italic"?this.addStyle("ITALIC"):c==="normal"&&this.removeStyle("ITALIC");a==="underline"&&this.addStyle("UNDERLINE");a==="line-through"&&this.addStyle("STRIKETHROUGH");a==="none"&&(this.removeStyle("UNDERLINE"),this.removeStyle("STRIKETHROUGH"))};C.prototype.$4=function(a,c){__p&&__p();c===void 0&&(c=null);var d=a.length-1;for(var e=0;e<=d;e++){var f=a[e];f.parent=c;f.prevSibling=e>0?a[e-1].key:null;f.nextSibling=e<d?a[e+1].key:null;f.children=h(f.childConfigs.map(function(a){return a.key}));this.contentBlocks.push(new(b("ContentBlockNode"))(babelHelpers["extends"]({},f)));this.$4(f.childConfigs,f.key)}};C.prototype.$5=function(a){var c=a.length-1;for(var d=0;d<=c;d++){var e=a[d],f=this.$11(e.childConfigs),g=f.text;f=f.characterList;this.contentBlocks.push(new(b("ContentBlock"))(babelHelpers["extends"]({},e,{text:e.text+g,characterList:e.characterList.concat(f)})))}};C.prototype.$11=function(a){__p&&__p();var b=a.length-1,c="",d=h();for(var e=0;e<=b;e++){var f=a[e];c+=f.text;d=d.concat(f.characterList);c!==""&&f.blockType!=="unstyled"&&(c+="\n",d=d.push(d.last()));f=this.$11(f.childConfigs);c+=f.text;d=d.concat(f.characterList)}return{text:c,characterList:d}};d=function(a,c,d){__p&&__p();c===void 0&&(c=b("getSafeBodyFromHTML"));d===void 0&&(d=b("DefaultDraftBlockRenderMap"));a=a.trim().replace(m,"").replace(o,l).replace(p,"").replace(q,"");c=c(a);if(!c)return null;a=x(d);d=function(a,b){return a==="li"?b==="ol"?"ordered-list-item":"unordered-list-item":null};return new C(a,d).addDOMNode(c).getContentBlocks()};e.exports=d}),null);
__d("DraftPasteProcessor",["ContentBlock","ContentBlockNode","convertFromHTMLToContentBlocks","convertFromHTMLToContentBlocks2","generateRandomKey","getSafeBodyFromHTML","gkx","immutable","sanitizeDraftText"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=b("immutable").Repeat,i=b("gkx")("676842"),j=i?b("ContentBlockNode"):b("ContentBlock");a=b("gkx")("676850");var k=a?b("convertFromHTMLToContentBlocks2"):b("convertFromHTMLToContentBlocks");c={processHTML:function(a,c){return k(a,b("getSafeBodyFromHTML"),c)},processText:function(a,c,d){__p&&__p();return a.reduce(function(a,e,f){__p&&__p();e=b("sanitizeDraftText")(e);var k=b("generateRandomKey")();e={key:k,type:d,text:e,characterList:g(h(c,e.length))};if(i&&f!==0){f=f-1;f=a[f]=a[f].merge({nextSibling:k});e=babelHelpers["extends"]({},e,{prevSibling:f.getKey()})}a.push(new j(e));return a},[])}};e.exports=c}),null);
__d("adjustBlockDepthForContentState",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c,d){var e=b.getStartKey(),f=b.getEndKey(),g=a.getBlockMap(),h=g.toSeq().skipUntil(function(a,b){return b===e}).takeUntil(function(a,b){return b===f}).concat([[f,g.get(f)]]).map(function(a){var b=a.getDepth()+c;b=Math.max(0,Math.min(b,d));return a.set("depth",b)});g=g.merge(h);return a.merge({blockMap:g,selectionBefore:b,selectionAfter:b})}e.exports=a}),null);
__d("RichTextEditorUtil",["DraftModifier","EditorState","adjustBlockDepthForContentState","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={currentBlockContainsLink:function(a){var b=a.getSelection();a=a.getCurrentContent();var c=a.getEntityMap();return a.getBlockForKey(b.getAnchorKey()).getCharacterList().slice(b.getStartOffset(),b.getEndOffset()).some(function(a){a=a.getEntity();return!!a&&c.__get(a).getType()==="LINK"})},getCurrentBlockType:function(a){var b=a.getSelection();return a.getCurrentContent().getBlockForKey(b.getStartKey()).getType()},getDataObjectForLinkURL:function(a){return{url:a.toString()}},handleKeyCommand:function(a,b,c){switch(b){case"bold":return g.toggleInlineStyle(a,"BOLD");case"italic":return g.toggleInlineStyle(a,"ITALIC");case"underline":return g.toggleInlineStyle(a,"UNDERLINE");case"code":return g.toggleCode(a);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return g.onBackspace(a);case"delete":case"delete-word":case"delete-to-end-of-block":return g.onDelete(a);default:return null}},insertSoftNewline:function(a){var c=b("DraftModifier").insertText(a.getCurrentContent(),a.getSelection(),"\n",a.getCurrentInlineStyle(),null);a=b("EditorState").push(a,c,"insert-characters");return b("EditorState").forceSelection(a,c.getSelectionAfter())},onBackspace:function(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed()||c.getAnchorOffset()||c.getFocusOffset())return null;var d=a.getCurrentContent(),e=c.getStartKey();e=d.getBlockBefore(e);if(e&&e.getType()==="atomic"){e=d.getBlockMap()["delete"](e.getKey());e=d.merge({blockMap:e,selectionAfter:c});if(e!==d)return b("EditorState").push(a,e,"remove-range")}c=g.tryToRemoveBlockStyle(a);return c?b("EditorState").push(a,c,"change-block-type"):null},onDelete:function(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed())return null;var d=a.getCurrentContent(),e=c.getStartKey(),f=d.getBlockForKey(e);f=f.getLength();if(c.getStartOffset()<f)return null;f=d.getBlockAfter(e);if(!f||f.getType()!=="atomic")return null;e=c.merge({focusKey:f.getKey(),focusOffset:f.getLength()});c=b("DraftModifier").removeRange(d,e,"forward");return c!==d?b("EditorState").push(a,c,"remove-range"):null},onTab:function(event,a,c){__p&&__p();var d=a.getSelection(),e=d.getAnchorKey();if(e!==d.getFocusKey())return a;var f=a.getCurrentContent();e=f.getBlockForKey(e);var g=e.getType();if(g!=="unordered-list-item"&&g!=="ordered-list-item")return a;event.preventDefault();g=e.getDepth();if(!event.shiftKey&&g===c)return a;e=b("adjustBlockDepthForContentState")(f,d,event.shiftKey?-1:1,c);return b("EditorState").push(a,e,"adjust-depth")},toggleBlockType:function(a,c){__p&&__p();var d=a.getSelection(),e=d.getStartKey(),f=d.getEndKey(),g=a.getCurrentContent(),h=d;if(e!==f&&d.getEndOffset()===0){var i=b("nullthrows")(g.getBlockBefore(f));f=i.getKey();h=h.merge({anchorKey:e,anchorOffset:d.getStartOffset(),focusKey:f,focusOffset:i.getLength(),isBackward:!1})}d=g.getBlockMap().skipWhile(function(a,b){return b!==e}).reverse().skipWhile(function(a,b){return b!==f}).some(function(a){return a.getType()==="atomic"});if(d)return a;i=g.getBlockForKey(e).getType()===c?"unstyled":c;return b("EditorState").push(a,b("DraftModifier").setBlockType(g,h,i),"change-block-type")},toggleCode:function(a){var b=a.getSelection(),c=b.getAnchorKey(),d=b.getFocusKey();return b.isCollapsed()||c!==d?g.toggleBlockType(a,"code-block"):g.toggleInlineStyle(a,"CODE")},toggleInlineStyle:function(a,c){var d=a.getSelection(),e=a.getCurrentInlineStyle();if(d.isCollapsed())return b("EditorState").setInlineStyleOverride(a,e.has(c)?e.remove(c):e.add(c));var f=a.getCurrentContent();e.has(c)?e=b("DraftModifier").removeInlineStyle(f,d,c):e=b("DraftModifier").applyInlineStyle(f,d,c);return b("EditorState").push(a,e,"change-inline-style")},toggleLink:function(a,c,d){c=b("DraftModifier").applyEntity(a.getCurrentContent(),c,d);return b("EditorState").push(a,c,"apply-entity")},tryToRemoveBlockStyle:function(a){__p&&__p();var c=a.getSelection(),d=c.getAnchorOffset();if(c.isCollapsed()&&d===0){d=c.getAnchorKey();a=a.getCurrentContent();var e=a.getBlockForKey(d);e=e.getType();d=a.getBlockBefore(d);if(e==="code-block"&&d&&d.getType()==="code-block"&&d.getLength()!==0)return null;if(e!=="unstyled")return b("DraftModifier").setBlockType(a,c,"unstyled")}return null}};e.exports=g}),null);
__d("editOnPaste",["BlockMapBuilder","CharacterMetadata","DataTransfer","DraftModifier","DraftPasteProcessor","EditorState","RichTextEditorUtil","getEntityKeyForSelection","getTextContentFromFiles","isEventHandled","splitTextIntoTextBlocks"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();c.preventDefault();c=new(b("DataTransfer"))(c.clipboardData);if(!c.isRichText()){var d=c.getFiles(),e=c.getText();if(d.length>0){if(a.props.handlePastedFiles&&b("isEventHandled")(a.props.handlePastedFiles(d)))return;b("getTextContentFromFiles")(d,function(d){__p&&__p();d=d||e;if(!d)return;var c=a._latestEditorState;d=b("splitTextIntoTextBlocks")(d);var f=b("CharacterMetadata").create({style:c.getCurrentInlineStyle(),entity:b("getEntityKeyForSelection")(c.getCurrentContent(),c.getSelection())}),g=b("RichTextEditorUtil").getCurrentBlockType(c);d=b("DraftPasteProcessor").processText(d,f,g);f=b("BlockMapBuilder").createFromArray(d);g=b("DraftModifier").replaceWithFragment(c.getCurrentContent(),c.getSelection(),f);a.update(b("EditorState").push(c,g,"insert-fragment"))});return}}d=[];var f=c.getText(),i=c.getHTML(),j=a._latestEditorState;if(a.props.handlePastedText&&b("isEventHandled")(a.props.handlePastedText(f,i,j)))return;f&&(d=b("splitTextIntoTextBlocks")(f));if(!a.props.stripPastedStyles){var k=a.getClipboard();if(c.isRichText()&&k){if(i.indexOf(a.getEditorKey())!==-1||d.length===1&&k.size===1&&k.first().getText()===f){a.update(g(a._latestEditorState,k));return}}else if(k&&c.types.includes("com.apple.webarchive")&&!c.types.includes("text/html")&&h(d,k)){a.update(g(a._latestEditorState,k));return}if(i){f=b("DraftPasteProcessor").processHTML(i,a.props.blockRenderMap);if(f){c=f.contentBlocks;k=f.entityMap;if(c){i=b("BlockMapBuilder").createFromArray(c);a.update(g(a._latestEditorState,i,k));return}}}a.setClipboard(null)}if(d.length){f=b("CharacterMetadata").create({style:j.getCurrentInlineStyle(),entity:b("getEntityKeyForSelection")(j.getCurrentContent(),j.getSelection())});c=b("RichTextEditorUtil").getCurrentBlockType(j);i=b("DraftPasteProcessor").processText(d,f,c);k=b("BlockMapBuilder").createFromArray(i);a.update(g(a._latestEditorState,k))}}function g(a,c,d){c=b("DraftModifier").replaceWithFragment(a.getCurrentContent(),a.getSelection(),c);return b("EditorState").push(a,c.set("entityMap",d),"insert-fragment")}function h(a,b){return a.length===b.size&&b.valueSeq().every(function(b,c){return b.getText()===a[c]})}e.exports=a}),null);
__d("getDraftEditorSelection",["getDraftEditorSelectionWithNodes"],(function(a,b,c,d,e,f){"use strict";function c(c,d){var e=a.getSelection();return e.rangeCount===0?{selectionState:c.getSelection().set("hasFocus",!1),needsRecovery:!1}:b("getDraftEditorSelectionWithNodes")(c,d,e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}e.exports=c}),null);
__d("editOnSelect",["invariant","DraftJsDebugLogging","EditorState","ReactDOM","getDraftEditorSelection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();if(a._blockSelectEvents||a._latestEditorState!==a.props.editorState){if(a._blockSelectEvents){var c=a.props.editorState;c=c.getSelection();b("DraftJsDebugLogging").logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:new Error().stack}),selectionState:JSON.stringify(c.toJS())})}return}c=a.props.editorState;var d=b("ReactDOM").findDOMNode(a.editorContainer);d||g(0,4998);d.firstChild instanceof HTMLElement||g(0,4999);d=b("getDraftEditorSelection")(c,d.firstChild);var e=d.selectionState;e!==c.getSelection()&&(d.needsRecovery?c=b("EditorState").forceSelection(c,e):c=b("EditorState").acceptSelection(c,e),a.update(c))}e.exports=a}),null);
__d("DraftEditorEditHandler",["editOnBeforeInput","editOnBlur","editOnCompositionStart","editOnCopy","editOnCut","editOnDragOver","editOnDragStart","editOnFocus","editOnInput","editOnKeyDown","editOnPaste","editOnSelect"],(function(a,b,c,d,e,f){"use strict";a={onBeforeInput:b("editOnBeforeInput"),onBlur:b("editOnBlur"),onCompositionStart:b("editOnCompositionStart"),onCopy:b("editOnCopy"),onCut:b("editOnCut"),onDragOver:b("editOnDragOver"),onDragStart:b("editOnDragStart"),onFocus:b("editOnFocus"),onInput:b("editOnInput"),onKeyDown:b("editOnKeyDown"),onPaste:b("editOnPaste"),onSelect:b("editOnSelect")};e.exports=a}),null);
__d("DraftEditorPlaceholder.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){return this.props.text!==a.text||this.props.editorState.getSelection().getHasFocus()!==a.editorState.getSelection().getHasFocus()};a.prototype.render=function(){var a=this.props.editorState.getSelection().getHasFocus();a="_1p1t"+(a?" _1p1u":"");var c={whiteSpace:"pre-wrap"};return b("React").createElement("div",{className:a},b("React").createElement("div",{className:"_1p1v",id:this.props.accessibilityID,style:c},this.props.text))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("getDefaultKeyBinding",["KeyBindingUtil","Keys","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UserAgent").isPlatform("Mac OS X"),h=g&&b("UserAgent").isBrowser("Firefox < 29"),i=b("KeyBindingUtil").hasCommandModifier,j=b("KeyBindingUtil").isCtrlKeyCommand;function k(a){return g&&a.altKey||j(a)}function l(a){return!i(a)?null:a.shiftKey?"redo":"undo"}function m(a){return!g&&a.shiftKey?null:k(a)?"delete-word":"delete"}function n(a){return i(a)&&g?"backspace-to-start-of-line":k(a)?"backspace-word":"backspace"}function a(a){__p&&__p();switch(a.keyCode){case 66:return i(a)?"bold":null;case 68:return j(a)?"delete":null;case 72:return j(a)?"backspace":null;case 73:return i(a)?"italic":null;case 74:return i(a)?"code":null;case 75:return g&&j(a)?"secondary-cut":null;case 77:return j(a)?"split-block":null;case 79:return j(a)?"split-block":null;case 84:return g&&j(a)?"transpose-characters":null;case 85:return i(a)?"underline":null;case 87:return g&&j(a)?"backspace-word":null;case 89:return j(a)?g?"secondary-paste":"redo":null;case 90:return l(a)||null;case b("Keys").RETURN:return"split-block";case b("Keys").DELETE:return m(a);case b("Keys").BACKSPACE:return n(a);case b("Keys").LEFT:return h&&i(a)?"move-selection-to-start-of-block":null;case b("Keys").RIGHT:return h&&i(a)?"move-selection-to-end-of-block":null;default:return null}}e.exports=a}),null);
__d("DraftEditor.react",["cx","invariant","DefaultDraftBlockRenderMap","DefaultDraftInlineStyle","DraftEditorCompositionHandler","DraftEditorContents.react","DraftEditorDragHandler","DraftEditorEditHandler","DraftEditorPlaceholder.react","DraftEffects","EditorState","React","ReactDOM","Scroll","Style","UserAgent","emptyFunction","generateRandomKey","getDefaultKeyBinding","getScrollPosition","gkx","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=b("UserAgent").isBrowser("IE"),l=!k,m={edit:b("DraftEditorEditHandler"),composite:b("DraftEditorCompositionHandler"),drag:b("DraftEditorDragHandler"),cut:null,render:null},n=!1;i=babelHelpers.inherits(o,b("React").Component);i&&i.prototype;o.prototype.render=function(){return null};o.prototype.componentDidMount=function(){this._update()};o.prototype.componentDidUpdate=function(){this._update()};o.prototype._update=function(){var a=this.props.editor;a._latestEditorState=this.props.editorState;a._blockSelectEvents=!0};function o(){i.apply(this,arguments)}c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.focus=function(a){__p&&__p();var c=this.props.editorState,d=c.getSelection().getHasFocus(),e=b("ReactDOM").findDOMNode(this.editor);if(!e)return;var f=b("Style").getScrollParent(e);a=a||b("getScrollPosition")(f);var g=a.x;a=a.y;e instanceof HTMLElement||h(0,2355);e.focus();f===window?window.scrollTo(g,a):b("Scroll").setTop(f,a);d||this.update(b("EditorState").forceSelection(c,c.getSelection()))}.bind(this),this.blur=function(){var a=b("ReactDOM").findDOMNode(this.editor);a instanceof HTMLElement||h(0,2355);a.blur()}.bind(this),this.setMode=function(a){this._handler=m[a]}.bind(this),this.exitCurrentMode=function(){this.setMode("edit")}.bind(this),this.restoreEditorDOM=function(a){this.setState({contentsKey:this.state.contentsKey+1},function(){this.focus(a)}.bind(this))}.bind(this),this.setClipboard=function(a){this._clipboard=a}.bind(this),this.getClipboard=function(){return this._clipboard}.bind(this),this.update=function(a){this._latestEditorState=a,this.props.onChange(a)}.bind(this),this.onDragEnter=function(){this._dragCount++}.bind(this),this.onDragLeave=function(){this._dragCount--,this._dragCount===0&&this.exitCurrentMode()}.bind(this),this._blockSelectEvents=!1,this._clipboard=null,this._handler=null,this._dragCount=0,this._editorKey=a.editorKey||b("generateRandomKey")(),this._placeholderAccessibilityID="placeholder-"+this._editorKey,this._latestEditorState=a.editorState,this._latestCommittedEditorState=a.editorState,this._onBeforeInput=this._buildHandler("onBeforeInput"),this._onBlur=this._buildHandler("onBlur"),this._onCharacterData=this._buildHandler("onCharacterData"),this._onCompositionEnd=this._buildHandler("onCompositionEnd"),this._onCompositionStart=this._buildHandler("onCompositionStart"),this._onCopy=this._buildHandler("onCopy"),this._onCut=this._buildHandler("onCut"),this._onDragEnd=this._buildHandler("onDragEnd"),this._onDragOver=this._buildHandler("onDragOver"),this._onDragStart=this._buildHandler("onDragStart"),this._onDrop=this._buildHandler("onDrop"),this._onInput=this._buildHandler("onInput"),this._onFocus=this._buildHandler("onFocus"),this._onKeyDown=this._buildHandler("onKeyDown"),this._onKeyPress=this._buildHandler("onKeyPress"),this._onKeyUp=this._buildHandler("onKeyUp"),this._onMouseDown=this._buildHandler("onMouseDown"),this._onMouseUp=this._buildHandler("onMouseUp"),this._onPaste=this._buildHandler("onPaste"),this._onSelect=this._buildHandler("onSelect"),this.getEditorKey=function(){return this._editorKey}.bind(this),this.state={contentsKey:0}}a.prototype._buildHandler=function(a){var c=b("ReactDOM").unstable_flushControlled;return function(b){if(!this.props.readOnly){var d=this._handler&&this._handler[a];d&&(c?c(function(){return d(this,b)}.bind(this)):d(this,b))}}.bind(this)};a.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()};a.prototype._renderPlaceholder=function(){if(this._showPlaceholder()){var a={text:b("nullthrows")(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return b("React").createElement(b("DraftEditorPlaceholder.react"),a)}return null};a.prototype.render=function(){var a=this.props,c=a.blockRenderMap,d=a.blockRendererFn,e=a.blockStyleFn,f=a.customStyleFn,g=a.customStyleMap,h=a.editorState,i=a.readOnly,j=a.textAlignment;a=a.textDirectionality;j="_5rp7"+(j==="left"?" _5rp8":"")+(j==="right"?" _5rp9":"")+(j==="center"?" _5rpa":"");var k={outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},m=this.props.role||"textbox",n=m==="combobox"?!!this.props.ariaExpanded:null;c={blockRenderMap:c,blockRendererFn:d,blockStyleFn:e,customStyleMap:babelHelpers["extends"]({},b("DefaultDraftInlineStyle"),g),customStyleFn:f,editorKey:this._editorKey,editorState:h,key:"contents"+this.state.contentsKey,textDirectionality:a};return b("React").createElement("div",{className:j},this._renderPlaceholder(),b("React").createElement("div",{className:"_5rpb",ref:function(a){return this.editorContainer=a}.bind(this)},b("React").createElement("div",{"aria-activedescendant":i?null:this.props.ariaActiveDescendantID,"aria-autocomplete":i?null:this.props.ariaAutoComplete,"aria-controls":i?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":i?null:n,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":i?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:(i?"":"notranslate")+" _5rpu",contentEditable:!i,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(a){return this.editor=a}.bind(this),role:i?null:m,spellCheck:l&&this.props.spellCheck,style:k,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},b("React").createElement(o,{editor:this,editorState:h}),b("React").createElement(b("DraftEditorContents.react"),c))))};a.prototype.componentDidMount=function(){this._blockSelectEvents=!1,!n&&b("gkx")("676845")&&(n=!0,b("DraftEffects").initODS()),this.setMode("edit"),k&&document.execCommand("AutoUrlDetect",!1,!1)};a.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState};a.defaultProps={blockRenderMap:b("DefaultDraftBlockRenderMap"),blockRendererFn:b("emptyFunction").thatReturnsNull,blockStyleFn:b("emptyFunction").thatReturns(""),keyBindingFn:b("getDefaultKeyBinding"),readOnly:!1,spellCheck:!1,stripPastedStyles:!1};e.exports=a}),null);
__d("GroupTypeaheadTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:"user",PAGE:"page",APP:"app",GROUP:"group",EVENT:"event",PLACE:"place",GROUP_RULE:"group_rule"})}),null);
__d("replaceSelectionWithMention",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){e=e(c.getCurrentContent(),a);var g=e.getLastCreatedEntityKey();f=f?f(a):a.getTitle();a=b("DraftModifier").replaceText(e,d,f,c.getCurrentInlineStyle(),g);return b("EditorState").push(c,a,"insert-fragment")}e.exports=a}),null);
__d("replaceMentionedTextInEditorState",["GroupTypeaheadTypeEnum","gkx","replaceSelectionWithMention"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="@\uff20\ufe68";function a(a,c,d,e){var f=c.getSelection(),g=c.getCurrentContent(),j=f.getAnchorKey(),k=f.getAnchorOffset();g=g.getBlockMap().get(j);j=f.getStartOffset();j=g.getText().substr(j-d,d);var l=h(a,j);j=k-i(g.getText().substr(0,k),l,d);return b("replaceSelectionWithMention")(a,c,f.set("anchorOffset",j),e,function(){return l})}function h(a,c){__p&&__p();if(a.getType()===b("GroupTypeaheadTypeEnum").GROUP_RULE)return a.getSubtitle();if(!b("gkx")("676844"))return a.getTitle();c=c.toLowerCase();g.includes(c.substring(0,1))&&(c=c.substring(1,c.length));if(a.getTitle().toLowerCase().startsWith(c))return a.getTitle();else if(a.getSubtitle().toLowerCase().startsWith(c))return"@"+a.getSubtitle();else if(a.getTitle().toLowerCase().includes(c))return a.getTitle();else if(a.getSubtitle().toLowerCase().includes(c))return"@"+a.getSubtitle();return a.getTitle()}function i(a,b,c){for(var d=c;d<=b.length;d++)a.substr(-d)==b.substr(0,d)&&(c=d);return c}e.exports=a}),null);
__d("AbstractMentionsTextEditor.react",["DraftEditor.react","React","TypeaheadNavigation","clearImmediate","getOrCreateDOMID","replaceMentionedTextInEditorState","setImmediate","uniqueID"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React").PropTypes;d=5;var h="handled",i="not-handled";f=babelHelpers.inherits(a,b("React").Component);g=f&&f.prototype;function a(a,c){"use strict";__p&&__p();g.constructor.call(this,a,c),this.__onShowMentions=function(a,b,c){__p&&__p();if(!this.$2)return;b=b||0;if(!a||!a.length){var d=this.state.mentionableEntries;if(d&&d.length&&d[0].getDataType()!==(c||""))return;this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return}d=this.props.typeaheadViewProps;c=a;d&&d.mentionSortFn&&c.sort(d.mentionSortFn);c=a.slice(0,this.props.maxResults);d=null;(this.props.autoHighlight||this.state.highlightedMentionable!==null)&&(d=c[0]);this.setState({highlightedMentionable:d,mentionableEntries:c,characterOffset:b});this.props.onShowMentions&&this.props.onShowMentions(c,b)}.bind(this),this.$8=function(a){this.setState(this.$12()),this.props.onBlur&&this.props.onBlur(a)}.bind(this),this.$7=function(a){this.props.mentionsSource&&this.props.mentionsSource.bootstrap(),this.props.assistantTypeaheadSource&&this.props.assistantTypeaheadSource.bootstrap(),this.props.onFocus&&this.props.onFocus(a)}.bind(this),this.$13=function(a,b){if(this.state.highlightedMentionable){this.$10(this.state.highlightedMentionable,a);return h}else if(this.props.handleContentReturn&&this.props.handleContentReturn(a,b))return h;return i}.bind(this),this.$6=function(a){var b=this.state.highlightedMentionable;b?(a.preventDefault(),this.$10(b,a)):this.props.onTab&&this.props.onTab(a)}.bind(this),this.$5=function(a){this.props.onEscape&&this.props.onEscape(a),this.state.mentionableEntries&&(a.stopPropagation(),a.nativeEvent.isPropagationStopped=!0,this.setState(this.$12()))}.bind(this),this.$11=function(a){var c=this.state.mentionableEntries;c?(a.preventDefault(),b("TypeaheadNavigation").moveUp(c,this.state.highlightedMentionable,this.$9)):this.props.onUpArrow&&this.props.onUpArrow(a)}.bind(this),this.$4=function(a){var c=this.state.mentionableEntries;c?(a.preventDefault(),b("TypeaheadNavigation").moveDown(c,this.state.highlightedMentionable,this.$9)):this.props.onDownArrow&&this.props.onDownArrow(a)}.bind(this),this.$9=function(a){this.setState({highlightedMentionable:a})}.bind(this),this.$14=function(a){a=b("getOrCreateDOMID")(a);this.setState({ariaActiveDescendantID:a})}.bind(this),this.$10=function(a,c){__p&&__p();var d=a.getDataType(),e=this.props.mentionCreationForContentStateFn;d==="ASSISTANT_TYPEAHEAD"&&this.props.mentionTypeaheadCreationForContentStateFn&&(e=this.props.mentionTypeaheadCreationForContentStateFn);d=this.props.onMentionSelect;d=d==null?b("replaceMentionedTextInEditorState"):d;d=d(a,this.props.editorState,this.state.characterOffset,e);this.props.onChange(d);this.setState(this.$12());e=this.props.onAddMention;d=this.state.mentionableEntries;if(e&&d){d=d.indexOf(a);e(a,d,c)}}.bind(this),this.__onShowMentions=this.__onShowMentions.bind(this),this.$4=this.$4.bind(this),this.$5=this.$5.bind(this),this.$6=this.$6.bind(this),this.$7=this.$7.bind(this),this.$8=this.$8.bind(this),this.$9=this.$9.bind(this),this.$10=this.$10.bind(this),this.$11=this.$11.bind(this),this.state=this.$12()}a.prototype.UNSAFE_componentWillMount=function(){"use strict";this.$2=!0,this.$1=b("uniqueID")(),this.$3=[]};a.prototype.componentWillUnmount=function(){"use strict";this.$2=!1,this.$3.forEach(function(a){return b("clearImmediate")(a)}),this.$3=[]};a.prototype.$12=function(){"use strict";return{highlightedMentionable:null,mentionableEntries:null,characterOffset:0}};a.prototype.shouldComponentUpdate=function(a,b){"use strict";return this.props.editorState!==a.editorState||this.props.placeholder!==a.placeholder||this.props.readOnly!==a.readOnly||this.props.className!==a.className||this.state.mentionableEntries!==b.mentionableEntries||this.state.highlightedMentionable!==b.highlightedMentionable||this.state.ariaActiveDescendantID!==b.ariaActiveDescendantID};a.prototype.componentDidUpdate=function(a){"use strict";__p&&__p();var c=this.props.editorState;if(c===a.editorState)return;var d=c.getSelection();if(d.getHasFocus()&&d.isCollapsed()){var e=c.getCurrentContent(),f=this.props.mentionsSource;f&&this.$3.push(b("setImmediate")(function(){f.search(e,d,this.__onShowMentions)}.bind(this)));var g=this.props.assistantTypeaheadSource;g&&this.$3.push(b("setImmediate")(function(){g.search(e,d,this.__onShowMentions)}.bind(this)))}};a.prototype.blur=function(){"use strict";this.refs.abstractTextEditor.blur()};a.prototype.focus=function(){"use strict";this.refs.abstractTextEditor.focus()};a.prototype.$15=function(){"use strict";var a=this.state.mentionableEntries;if(!a||!a.length)return null;var c=this.props.mentionResultsComponent;return b("React").createElement(c,babelHelpers["extends"]({},this.props.mentionResultsProps,{viewID:this.$1,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:a||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this.$10,onMentionHighlight:this.$9,onMentionRenderHighlight:this.$14}))};a.prototype.exitCurrentMode=function(){"use strict";this.refs.abstractTextEditor&&this.refs.abstractTextEditor.exitCurrentMode()};a.prototype.render=function(){"use strict";var a=this.state.mentionableEntries;a=!!(a&&a.length);var c=this.props.readOnly?null:"-1",d=this.props.role||"combobox",e=this.props.ariaAutoComplete||"list";return b("React").createElement("div",{ref:"container",className:this.props.className,tabIndex:c},b("React").createElement(b("DraftEditor.react"),babelHelpers["extends"]({},this.props,{ref:"abstractTextEditor",role:d,ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:e,ariaControls:this.$1,ariaExpanded:a,ariaHasPopup:a,editorState:this.props.editorState,onBlur:this.$8,onChange:this.props.onChange,onFocus:this.$7,onTab:this.$6,onEscape:this.$5,onDownArrow:this.$4,onUpArrow:this.$11,handleReturn:this.$13})),this.$15())};a.prototype.isShowingMentionables=function(){"use strict";return!!this.state.mentionableEntries};a.defaultProps=babelHelpers["extends"]({},b("DraftEditor.react").defaultProps,{autoHighlight:!0,maxResults:d});a.propTypes={mentionsSource:c.object,assistantTypeaheadSource:c.object,mentionCreationForContentStateFn:c.func.isRequired,mentionTypeaheadCreationForContentStateFn:c.func,mentionResultsComponent:c.func.isRequired,mentionResultsProps:c.object,excludedEntries:c.object,handleContentReturn:c.func,onAddMention:c.func,onShowMentions:c.func,autoHighlight:c.bool,maxResults:c.number,webDriverTestID:c.string};e.exports=a}),null);
__d("MercuryTimePassed",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TODAY:0,WEEK_AGO:1,MONTH_AGO:2,CURRENT_YEAR:3,OTHER_YEAR:4})}),null);
__d("MessengerGroupCreationEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_TAB:"chat_tab_add_people",JEWEL:"jewel_new_message",CHAT_SIDEBAR:"chat_sidebar_new_message",GCF_JEWEL:"jewel_new_group",GCF_CHAT_SIDEBAR:"chat_sidebar_new_group",GCF_SHARE_FLOW:"chat_share_message_to_messenger",CHAT_POLL:"chat_poll_button",WORK_CHAT_HEADER_NEW_GROUP_BUTTON:"work_chat_header_new_group_button"})}),null);
__d("VideoCallWebDriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACCEPT_ESCALATION_CALL_BUTTON:"acceptEscalationButton",ADD_GROUP_MEMBERS_BUTTON:"addGroupMembersButton",ANSWER_CALL_BUTTON:"answerCallButton",DOMINANT_SPEAKER_SWITCH_BUTTON:"dominantSpeakerSwitchButton",END_CALL_BUTTON:"endCallButton",ESCALATE_CALL_BUTTON:"escalateCallButton",FULL_SCREEN_BUTTON:"fullScreenButton",GRID_SWITCH_BUTTON:"gridSwitchButton",IGNORE_CALL_BUTTON:"ignoreCallButton",INCALL_VIDEO_CONTAINER:"incallVideoContainer",REDIAL_BUTTON:"rediallButton",REJECT_CALL_BUTTON:"rejectCallButton",REMOTE_VIEW_THUMBNAIL:"remoteViewThumbnail",RTC_APP_VIEW_START_CALL_BUTTON:"RTCAppViewStartCallButton",RTC_INCALL_VIDEO:"RTCIncallVideo",RTC_PICKER_DIALOG_CALL_BUTTON:"RTCPickerDialogCallButton",RTC_PICKER_DIALOG_CANCEL_BUTTON:"RTCPickerDialogCancelButton",RTC_PICKER_DIALOG_CONTACT_LIST_ITEM:"RTCPickerDialogContactListItem",RTC_PICKER_DIALOG_RING_BUTTON:"RTCPickerDialogRingButton",RTC_SELF_VIEW:"RTCSelfView",STAR_RATING_VIEW:"starRatingView",STAR_RATING_NOT_NOW_BUTTON:"starRatingNotNowButton",START_VIDEO_CALL:"startVideoCall",START_VOICE_CALL:"startVoiceCall",TOGGLE_AUDIO_BUTTON:"toggleAudioButton",TOGGLE_VIDEO_BUTTON:"toggleVideoButton",TOGGLE_CHAT_BUTTON:"toggleChatButton",CLOSE_CHAT_BUTTON:"closeChatButton",SETTINGS_BUTTON:"settingsButton",SAVE_SETTINGS_BUTTON:"saveSettingsButton",CLOSE_CALL_WINDOW_BUTTON:"closeCallWindowButton",CHAT_TAB_VIDEO_BUTTON:"chatTabVideoButton",CHAT_TAB_VOICE_BUTTON:"chatTabVoiceButton",PROFILE_DROPDOWN_MENU:"profileDropdownMenu",RTC_CALL_ACTION_LINK:"RTCCallActionLink",STAR_RATING_SUBMIT_BUTTON:"submitStarRatingButton"})}),null);
__d("BootloadOnInteraction.react",["BootloadOnRender.react","React"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.$1=function(){this.setState({hadUserInteraction:!0})}.bind(this),this.state={hadUserInteraction:!1}}a.prototype.render=function(){"use strict";if(!this.state.hadUserInteraction)return b("React").cloneElement(this.props.placeholder,{onFocus:this.$1,onMouseOver:this.$1,onClick:this.$1});var a=this.props,c=a.loader,d=a.component;a=a.placeholder;return b("React").createElement(b("BootloadOnRender.react"),{placeholder:a,loader:c,component:d})};e.exports=a}),null);
__d("MercuryTimestamp",["fbt","MercuryTimePassed","formatDate"],(function(a,b,c,d,e,f,g){__p&&__p();a=864e5;var h=6*a,i={getFormatedTimestamp:function(a){var b=a/1e3;return i.getFormattedTimestampByBucket(b,this.getTimeBucket(a))},getAbsoluteTimestamp:function(a){if(a==null)return null;else{a=i.getFormatedTimestamp(a);return a.absolute}},getRelativeTimestamp:function(a){a=i.getFormatedTimestamp(a);return a.relative},getFormattedTimestampByBucket:function(a,c){switch(c){case b("MercuryTimePassed").TODAY:return{absolute:g._("Today"),relative:b("formatDate")(a,"g:ia")};case b("MercuryTimePassed").WEEK_AGO:return{absolute:b("formatDate")(a,"l"),relative:b("formatDate")(a,"D")};case b("MercuryTimePassed").CURRENT_YEAR:return{absolute:b("formatDate")(a,"F j"),relative:b("formatDate")(a,"M j")};default:return{absolute:b("formatDate")(a,"F j, Y"),relative:b("formatDate")(a,"n/j/y")}}},getTimeBucket:function(a){__p&&__p();a=new Date(a);var c=new Date();c=new Date(c.getFullYear(),c.getMonth(),c.getDate());if(c<a)return b("MercuryTimePassed").TODAY;else if(c-h<a)return b("MercuryTimePassed").WEEK_AGO;else if(c.getFullYear()===a.getFullYear())return b("MercuryTimePassed").CURRENT_YEAR;else return b("MercuryTimePassed").OTHER_YEAR},getPreciseTimestamp:function(a){return b("formatDate")(new Date(a),i.getPreciseFormat(a))},getPreciseFormat:function(a){a=i.getTimeBucket(a);switch(a){case b("MercuryTimePassed").TODAY:return"g:ia";case b("MercuryTimePassed").WEEK_AGO:return"l g:ia";case b("MercuryTimePassed").CURRENT_YEAR:return"F jS, g:ia";case b("MercuryTimePassed").OTHER_YEAR:default:return"F j, Y g:i a"}}};e.exports=i}),null);
__d("QuickLogConfigHelper",["QuickLogConfig"],(function(a,b,c,d,e,f){a.prototype.getEventDetails=function(a){"use strict";var c=null;b("QuickLogConfig").qpl_events?c=b("QuickLogConfig").qpl_events[a]:b("QuickLogConfig").qpl_events_static&&(c=b("QuickLogConfig").qpl_events_static[a]);return c};function a(){"use strict"}e.exports=new a()}),null);
__d("QuickLogEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({655575:{moduleName:"FEED",name:"CONSUMPTION_RESTORATION_WWW",sampleRate:1},655576:{moduleName:"FEED",name:"IMAGE_LOAD_WWW",sampleRate:5e3},655584:{moduleName:"FEED",name:"NOTIFICATION_INTERACTION_WWW",sampleRate:1},655585:{moduleName:"FEED",name:"COMMENT_TTL_WWW",sampleRate:250},655595:{moduleName:"FEED",name:"MAIN_THREAD_PERFORMANCE",sampleRate:1},655596:{moduleName:"FEED",name:"LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW",sampleRate:50},655597:{moduleName:"FEED",name:"LOAD_STORY_PERMALINK_FROM_ANYWHERE_WWW",sampleRate:100},3735589:{moduleName:"UFI",name:"UFI_OPTIMISTIC_COMMENT",sampleRate:100},3735590:{moduleName:"UFI",name:"UFI2_OPTIMISTIC_COMMENT",sampleRate:1},3735591:{moduleName:"UFI",name:"UFI_PERSISTED_COMMENT",sampleRate:100},3735592:{moduleName:"UFI",name:"UFI2_PERSISTED_COMMENT",sampleRate:1},3735593:{moduleName:"UFI",name:"UFI2_OPTIMISTIC_COMMENT_EDIT",sampleRate:1},3735594:{moduleName:"UFI",name:"UFI2_PERSISTED_COMMENT_EDIT",sampleRate:1},3735595:{moduleName:"UFI",name:"UFI_TOP_LEVEL_COMMENTS_PAGINATION",sampleRate:100},3735596:{moduleName:"UFI",name:"UFI2_TOP_LEVEL_COMMENTS_PAGINATION",sampleRate:1},3735597:{moduleName:"UFI",name:"UFI2_REPLY_COMMENTS_PAGINATION",sampleRate:1},3735598:{moduleName:"UFI",name:"UFI_SHARE_DIALOG_OPENS",sampleRate:100},3735599:{moduleName:"UFI",name:"UFI2_SHARE_DIALOG_OPENS",sampleRate:1},3735600:{moduleName:"UFI",name:"UFI_COMPOSER_INPUT_FOCUS",sampleRate:100},3735601:{moduleName:"UFI",name:"UFI_STORY_REACTION",sampleRate:100},3735602:{moduleName:"UFI",name:"UFI2_STORY_REACTION",sampleRate:1},3735603:{moduleName:"UFI",name:"UFI2_COMMENT_REACTION",sampleRate:1},3735604:{moduleName:"UFI",name:"UFI_COMMENT_REACTION",sampleRate:100},3735605:{moduleName:"UFI",name:"UFI_COMPOSER_KEYPRESS_LATENCY",sampleRate:100},3735606:{moduleName:"UFI",name:"UFI2_COMPOSER_KEYPRESS_LATENCY",sampleRate:1},3735608:{moduleName:"UFI",name:"UFI_SHARE_TOOLTIP_OPENS",sampleRate:250},3735609:{moduleName:"UFI",name:"UFI2_SHARE_TOOLTIP_OPENS",sampleRate:250},3735610:{moduleName:"UFI",name:"UFI_STORY_TOP_REACTIONS_TOOLTIP_OPENS",sampleRate:250},3735611:{moduleName:"UFI",name:"UFI2_STORY_TOP_REACTIONS_TOOLTIP_OPENS",sampleRate:250},3735612:{moduleName:"UFI",name:"UFI_STORY_REACTIONS_COUNT_TOOLTIP_OPENS",sampleRate:250},3735613:{moduleName:"UFI",name:"UFI2_STORY_REACTIONS_COUNT_TOOLTIP_OPENS",sampleRate:250},3735614:{moduleName:"UFI",name:"UFI_COMMENT_TOP_REACTIONS_TOOLTIP_OPENS",sampleRate:250},3735615:{moduleName:"UFI",name:"UFI2_COMMENT_TOP_REACTIONS_TOOLTIP_OPENS",sampleRate:250},3735616:{moduleName:"UFI",name:"UFI_COMMENT_COUNT_TOOLTIP_OPENS",sampleRate:250},3735617:{moduleName:"UFI",name:"UFI2_COMMENT_COUNT_TOOLTIP_OPENS",sampleRate:250},7733270:{moduleName:"ADS_MANAGER",name:"ADS_CHANGE_LEVEL_WWW",sampleRate:null},7733271:{moduleName:"ADS_MANAGER",name:"OPTIMAL_STRATEGY_ELIGIBLE_CAMPAIGNS_TTI",sampleRate:1},7995396:{moduleName:"RELAY",name:"UNSAFE_SUBSCRIPTIONS_TEST",sampleRate:100},7995398:{moduleName:"RELAY",name:"UNSAFE_SYNC_TEST",sampleRate:100},7995399:{moduleName:"RELAY",name:"UNSAFE_ASYNC_TEST",sampleRate:100},7995400:{moduleName:"RELAY",name:"RUNTIME_SUBSCRIPTIONS",sampleRate:1},7995401:{moduleName:"RELAY",name:"NETWORK_FETCH_QUERY",sampleRate:1},7995402:{moduleName:"RELAY",name:"RUNTIME_GC",sampleRate:1},7995403:{moduleName:"RELAY",name:"RUNTIME_NOTIFY",sampleRate:100},7995404:{moduleName:"RELAY",name:"RESPONSE_NORMALIZER_NORMALIZE",sampleRate:100},7995408:{moduleName:"RELAY",name:"LOAD_ALL_PROJECTS_AIP",sampleRate:100},11075606:{moduleName:"MARKETPLACE",name:"REACT_TTI_WWW",sampleRate:100},11075638:{moduleName:"MARKETPLACE",name:"BROWSE_FEED_PAGINATION_WWW",sampleRate:1},12517384:{moduleName:"ABOUTPAGE",name:"Z_AMPERANDY_TEST_WWW",sampleRate:0},12845073:{moduleName:"NATIVE_TEMPLATES",name:"MTOUCH_REACT_RENDER",sampleRate:1},12845074:{moduleName:"NATIVE_TEMPLATES",name:"MTOUCH_REACT_ASYNC_ACTION",sampleRate:1},12845075:{moduleName:"NATIVE_TEMPLATES",name:"MTOUCH_ASYNC_ACTION",sampleRate:null},13238313:{moduleName:"STORIES",name:"STORY_VIEWER_LOAD_TTI_WWW",sampleRate:100},13238314:{moduleName:"STORIES",name:"STORY_VIEWER_LOAD_FIRST_TIME_WWW",sampleRate:100},14549005:{moduleName:"LIVE",name:"VIDEO_COMPONENT_TTL",sampleRate:null},19202053:{moduleName:"PAGES_INSIGHTS",name:"OVERVIEW_CARD_WWW",sampleRate:100},19202054:{moduleName:"PAGES_INSIGHTS",name:"OVERVIEW_TAB_PAGE_SUMMARY_WWW",sampleRate:1},19202055:{moduleName:"PAGES_INSIGHTS",name:"OVERVIEW_TAB_MOST_RECENT_POST_WWW",sampleRate:10},19202056:{moduleName:"PAGES_INSIGHTS",name:"POSTS_TAB_ALL_POSTS_PUBLISHED_WWW",sampleRate:10},19202057:{moduleName:"PAGES_INSIGHTS",name:"POSTS_TAB_WHEN_FANS_ONLINE_WWW",sampleRate:10},19202058:{moduleName:"PAGES_INSIGHTS",name:"POSTS_TAB_BEST_POSTS_WWW",sampleRate:10},19202059:{moduleName:"PAGES_INSIGHTS",name:"POST_TAB_PAGE_YOU_WATCH_WWW",sampleRate:10},19202060:{moduleName:"PAGES_INSIGHTS",name:"LIKES_TAB_LOAD_WWW",sampleRate:10},19202061:{moduleName:"PAGES_INSIGHTS",name:"LIKES_TAB_UPDATE_WWW",sampleRate:10},19202062:{moduleName:"PAGES_INSIGHTS",name:"REACH_TAB_LOAD_WWW",sampleRate:10},19202063:{moduleName:"PAGES_INSIGHTS",name:"REACH_TAB_UPDATE_WWW",sampleRate:10},19202064:{moduleName:"PAGES_INSIGHTS",name:"REACH_TAB_REACTION_LOAD_WWW",sampleRate:10},19202065:{moduleName:"PAGES_INSIGHTS",name:"REACH_TAB_REACTION_UPDATE_WWW",sampleRate:10},19202066:{moduleName:"PAGES_INSIGHTS",name:"POSTS_TAB_ALL_POSTS_SEE_MORE_WWW",sampleRate:10},19202067:{moduleName:"PAGES_INSIGHTS",name:"OVERVIEW_TAB_NEW_PAGE_SUMMARY_WWW",sampleRate:1},19202068:{moduleName:"PAGES_INSIGHTS",name:"INSIGHTS_TAB_SWITCHING_WWW",sampleRate:10},19202069:{moduleName:"PAGES_INSIGHTS",name:"INSIGHTS_TAB_SWITCHING_UPDATED_WWW",sampleRate:100},19202070:{moduleName:"PAGES_INSIGHTS",name:"INSIGHTS_TAB_SWITCHING_TARGET_WWW",sampleRate:100},20578316:{moduleName:"GROUPS_ADMIN",name:"MEMBER_REQUESTS_TTI_WWW",sampleRate:0},22347782:{moduleName:"STORIES_ARCHIVE",name:"ARCHIVE_GRID_TTI_WWW",sampleRate:100},23265284:{moduleName:"CHECKOUT_PURCHASE_EXPERIENCES",name:"CHECKOUT_FLOW_WWW",sampleRate:1},23265285:{moduleName:"CHECKOUT_PURCHASE_EXPERIENCES",name:"CHECKOUT_LAUNCH_BY_PRODUCT_WWW",sampleRate:1},23265286:{moduleName:"CHECKOUT_PURCHASE_EXPERIENCES",name:"PAY_FLOW_WWW",sampleRate:1},23265287:{moduleName:"CHECKOUT_PURCHASE_EXPERIENCES",name:"CHECKOUT_INFORMATION_API",sampleRate:1},23855105:{moduleName:"UNIDASH",name:"INIT_LOAD_WWW",sampleRate:1},23855106:{moduleName:"UNIDASH",name:"WIDGET_LOAD_START_WWW",sampleRate:1},23855107:{moduleName:"UNIDASH",name:"WIDGET_LOAD_END_WWW",sampleRate:1},23855108:{moduleName:"UNIDASH",name:"PAGE_LOAD_END_WWW",sampleRate:1},23855109:{moduleName:"UNIDASH",name:"TAB_NAV_START_WWW",sampleRate:1},23855110:{moduleName:"UNIDASH",name:"CLEAN_LOAD_WWW",sampleRate:1},23855111:{moduleName:"UNIDASH",name:"WIDGET_LOAD_WWW",sampleRate:1},23855112:{moduleName:"UNIDASH",name:"TAB_NAV_WWW",sampleRate:1},24117249:{moduleName:"SRT",name:"TIME_TO_FIRST_JOB_WWW",sampleRate:1},24117250:{moduleName:"SRT",name:"PAGE_NAVIGATION_START_WWW",sampleRate:0},24117251:{moduleName:"SRT",name:"TIME_TO_NEXT_JOB_WWW",sampleRate:1},25296897:{moduleName:"MESSENGER_WEB",name:"FIRSTCHATTABOPEN_WWW",sampleRate:1},25296898:{moduleName:"MESSENGER_WEB",name:"GROUP_INPUT_TAB_OPEN_WWW",sampleRate:0},25296899:{moduleName:"MESSENGER_WEB",name:"GROUP_INPUT_INDIVIDUAL_TAB_OPEN_WWW",sampleRate:null},25296900:{moduleName:"MESSENGER_WEB",name:"COMPOSER_INTERACTION",sampleRate:null},25296901:{moduleName:"MESSENGER_WEB",name:"PAGE_LOAD_MDOTCOM_WWW",sampleRate:1},25296902:{moduleName:"MESSENGER_WEB",name:"THREAD_LOAD_MDOTCOM_WWW",sampleRate:1},25296903:{moduleName:"MESSENGER_WEB",name:"SEND_MESSAGE",sampleRate:null},25296904:{moduleName:"MESSENGER_WEB",name:"FETCH_THREAD_INFO",sampleRate:null},25296905:{moduleName:"MESSENGER_WEB",name:"FETCH_THREAD_LIST",sampleRate:null},25296906:{moduleName:"MESSENGER_WEB",name:"FETCH_MORE_THREAD_LIST",sampleRate:null},25493505:{moduleName:"TAHOE",name:"TAHOE_MEDIA_DONE",sampleRate:null},25493506:{moduleName:"TAHOE",name:"TAHOE_DISPLAY_DONE",sampleRate:null},25952260:{moduleName:"NAVIGATION",name:"ASYNC_NAVIGATION_MTOUCH",sampleRate:1},26476545:{moduleName:"WWW_PROFILE",name:"TIMELINE_TAIL_LOAD_WWW",sampleRate:1},26804227:{moduleName:"WIKTORK_TEST",name:"WIKTORK_TEST_THREE",sampleRate:0},26869761:{moduleName:"CREATOR_STUDIO",name:"CREATOR_STUDIO_INITIAL_LOAD",sampleRate:1},26869762:{moduleName:"CREATOR_STUDIO",name:"CREATOR_STUDIO_FEED_LOAD",sampleRate:1},26869763:{moduleName:"CREATOR_STUDIO",name:"CREATOR_STUDIO_CONTEXT_SWITCH",sampleRate:1},26869764:{moduleName:"CREATOR_STUDIO",name:"CREATOR_STUDIO_LOADING_EVENT",sampleRate:0},27459585:{moduleName:"IG_WEB",name:"IG_FEED_LOAD",sampleRate:1e4},27459586:{moduleName:"IG_WEB",name:"IG_FEED_LOAD_MORE",sampleRate:1e4},27459587:{moduleName:"IG_WEB",name:"EMBED_LOAD",sampleRate:1e3},27459588:{moduleName:"IG_WEB",name:"APP_START",sampleRate:1e3},27983873:{moduleName:"COMET_VISUAL_COMPLETION",name:"COMET_VISUALLY_COMPLETE_WWW",sampleRate:1},27983874:{moduleName:"COMET_VISUAL_COMPLETION",name:"COMET_SPEED_INDEX_WWW",sampleRate:1},27983875:{moduleName:"COMET_VISUAL_COMPLETION",name:"BLUE_VISUALLY_COMPLETE_WWW",sampleRate:1},27983876:{moduleName:"COMET_VISUAL_COMPLETION",name:"BLUE_SPEED_INDEX_WWW",sampleRate:1},28377089:{moduleName:"DELTOID_METRIC_MONITOR",name:"QUERY_RESULTS",sampleRate:1},28770305:{moduleName:"NEWPULSE",name:"THRIFT_CALL_WWW",sampleRate:0},29294593:{moduleName:"QE",name:"QE2_LOAD",sampleRate:1},29818881:{moduleName:"COMET_STARTUP",name:"INITIAL_LOAD",sampleRate:1},29818882:{moduleName:"COMET_STARTUP",name:"NAVIGATION",sampleRate:1},29818883:{moduleName:"COMET_STARTUP",name:"INITIAL_LOAD_SERVER",sampleRate:1},29818884:{moduleName:"COMET_STARTUP",name:"TAIL_LOAD",sampleRate:1},29884421:{moduleName:"NPX",name:"NUX_FRIEND_SUGGESTIONS_LOAD_TIME_MTOUCH",sampleRate:1e3},29884422:{moduleName:"NPX",name:"NUX_FRIEND_REQUESTS_LOAD_TIME_MTOUCH",sampleRate:100},29884423:{moduleName:"NPX",name:"NUX_PROFILE_PICTURE_LOAD_TIME_MTOUCH",sampleRate:1e3},29884424:{moduleName:"NPX",name:"NUX_APP_INSTALL_LOAD_TIME_MTOUCH",sampleRate:1e3},29949953:{moduleName:"ADS_INTEGRATION_PORTAL",name:"LOAD_ALL_PROJECTS_WWW",sampleRate:1},29949954:{moduleName:"ADS_INTEGRATION_PORTAL",name:"LOAD_ALL_PROJCTS_WWW",sampleRate:1},29949955:{moduleName:"ADS_INTEGRATION_PORTAL",name:"LOAD_PROJECTS_TABLE_WWW",sampleRate:1},30408705:{moduleName:"TASKS",name:"GRAPHQL_MUTATION_WWW",sampleRate:10},30605313:{moduleName:"COMET_INTERACTION_TRACING",name:"HOME_FEED_TAILLOAD",sampleRate:1},30605314:{moduleName:"COMET_INTERACTION_TRACING",name:"NOTIFICATION_PAGINATION",sampleRate:1},30605315:{moduleName:"COMET_INTERACTION_TRACING",name:"TIMELINE_FEED_TAILLOAD",sampleRate:1}})}),null);
__d("QuickPerformanceLoggerBase",["Arbiter","Banzai","Bootloader","Env","PerfXSharedFields","QuickLogConfig","QuickLogConfigHelper","Random","gkx","performanceAbsoluteNow","performanceNavigationStart","requireCond","cr:682175"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("performanceAbsoluteNow")();function a(a){a===void 0&&(a={}),this.$1={},this.$2={},this.$3=100,this.loomProviderId="QPL",this.$4=a,b("cr:682175")&&b("cr:682175").addProvider(this)}a.prototype.$7=function(a,c){if(b("QuickLogConfig").killswitch)return null;a=this.$1[a];if(!a)return null;a=a[c];return!a?null:a};a.prototype.markerStart=function(a,c,d){__p&&__p();c===void 0&&(c=0);d===void 0&&(d=this.currentTimestamp());if(b("QuickLogConfig").killswitch)return;var e=b("QuickLogConfigHelper").getEventDetails(a);if(!e)return;if(b("cr:682175")&&!this.$5){var f=a+"_"+c,g=new Set(["QPL"]);b("cr:682175").startTrace(f,g)}this.$5&&this.$5.buffer.addEvent({type:"QPL_START",action:"START",markerId:a,instanceKey:c},d);f=this.$6===a?1:this.$2[a]||e.sampleRate||this.$3;g=b("Env").enable_qplinspector||b("Random").coinflip(f);e=this.$1[a];e||(this.$1[a]={});this.$1[a][c]={passesSampling:g,timestamp:d,sampleRate:f,points:{}};if(g){e=this.$4.onMarkerStart;e&&e(a,c,d)}};a.prototype.markerStartFromNavStart=function(a,c){c===void 0&&(c=0);var d=b("performanceNavigationStart")();this.markerStart(a,c,d);if(b("performanceNavigationStart").isPolyfilled){d=this.$7(a,c);d&&(d.timestampIsApproximate=!0)}};a.prototype.annotateMarkerString=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotations||{};f[b]=c;e.annotations=f};a.prototype.annotateMarkerStringArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsStringArray||{};f[b]=c;e.annotationsStringArray=f};a.prototype.annotateMarkerInt=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsInt||{};f[b]=c;e.annotationsInt=f};a.prototype.annotateMarkerIntArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsIntArray||{};f[b]=c;e.annotationsIntArray=f};a.prototype.annotateMarkerDouble=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsDouble||{};f[b]=c;e.annotationsDouble=f};a.prototype.annotateMarkerDoubleArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsDoubleArray||{};f[b]=c;e.annotationsDoubleArray=f};a.prototype.markerPoint=function(a,b,c,d,e){d===void 0&&(d=0);e===void 0&&(e=this.currentTimestamp());a=this.$7(a,d);if(!a)return;a.points[b]={data:c,timeSinceStart:e-a.timestamp}};a.prototype.markerEnd=function(a,c,d,e){__p&&__p();d===void 0&&(d=0);e===void 0&&(e=this.currentTimestamp());var f=Date.now(),h=b("QuickLogConfigHelper").getEventDetails(a);if(!h)return;var i=this.$5;if(i){i.buffer.addEvent({type:"QPL_END",action:c,markerId:a,instanceKey:d},e);var j=a+"_"+d;b("cr:682175")&&i.triggerId===j&&b("cr:682175").endTraceWithTimeout(j,3e4)}i=this.$7(a,d);if(!i)return;if(i.passesSampling){j=this.$4.onMarkerEnd;j&&j(a,d,e);j=e-i.timestamp;f=f-j;var k=i.points;this.$8({event_is_intermediate_marker:"false",instance_id:d,quicklog_module:h.moduleName,quicklog_event:h.name,quicklog_action:c,sample_rate:i.sampleRate,trace_tags:"",value:i.timestampIsApproximate?null:j,annotations:i.annotations,annotations_double:i.annotationsDouble,annotations_double_array:i.annotationsDoubleArray,annotations_int:i.annotationsInt,annotations_int_array:i.annotationsIntArray,annotations_string_array:i.annotationsStringArray,points:Object.keys(k).map(function(a){return{data:k[a].data,name:a,timeSinceStart:k[a].timeSinceStart}}),metadata:{application_analytics:{time_since_qpl_module_init:e-g}}},f);this.$6===a&&(console.timeStamp("QPLDebug MarkerEnd, "+this.currentTimestamp()+", "+f+", "+j),b("Arbiter").inform("qpl_debugger_finished"))}delete this.$1[a][d]};a.prototype.markerDrop=function(a,b){b===void 0&&(b=0);a=this.$1[a];a&&delete a[b]};a.prototype.dropAllMarkers=function(){this.$1={}};a.prototype.setAlwaysOnSampleRate=function(a,b){this.$2[a]=b};a.prototype.setSampleRateForInstance=function(a,b,c){c===void 0&&(c=0);a=this.$1[a][c];a&&(a.sampleRate=b)};a.prototype.currentTimestamp=function(){return b("performanceAbsoluteNow")()};a.prototype.$8=function(event,a){event=this.$9(event);var c=this.$10(event,a);b("Env").enable_qplinspector&&b("Bootloader").loadModules(["QPLInspector"],function(a){a.appendLog(c)},"QuickPerformanceLoggerBase");b("gkx")("708253")?b("Banzai").post("perf",c,b("Banzai").VITAL):b("Banzai").post("perf",c)};a.prototype.$9=function(event){var a=b("PerfXSharedFields").getCommonData();event.metadata=babelHelpers["extends"]({},event.metadata,{memory_stats:{total_mem:a.ram_gb?a.ram_gb*1073741824:null},network_stats:{downlink_megabits:a.downlink_megabits,network_subtype:a.effective_connection_type,rtt_ms:a.rtt_ms}});return event};a.prototype.$10=function(event,a){a=Math.floor(a/1e3);return{appversion:"0 (web)",clienttime:a,rawclienttime:a,deviceid:"0",extra:event}};a.prototype.loomTraceDidBegin=function(a){this.$5=a};a.prototype.loomTraceWillEnd=function(){this.$5=null};a.prototype.enableDebug=function(a){this.$6=parseInt(a,10)};a.prototype.disableDebug=function(){this.$6=null};e.exports=a}),null);
__d("QuickPerformanceLoggerImpl",["EventProfiler","QuickLogConfig","QuickPerformanceLoggerBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={},i={onMarkerStart:function(a,c,d){var e=b("QuickLogConfig").qpl_to_interaction[a];if(e){a=a+" : "+c;h[a]=b("EventProfiler").markManualStart([e.name],e.eventType,d)}},onMarkerEnd:function(a,b,c){a=a+" : "+b;h[a]&&h[a].markManualEnd(c)}};c=babelHelpers.inherits(a,b("QuickPerformanceLoggerBase"));g=c&&c.prototype;function a(){g.constructor.call(this,i)}e.exports=new a()}),null);
__d("ReactDOMRe.bs",["React","ReactDOM","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=document.getElementsByClassName(c);if(d.length!==0){b("ReactDOM").render(a,d[0]);return 0}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"ReactDOMRe.renderToElementWithClassName: no element of class "+(c+" found in the HTML.")]}function c(a,c){var d=document.getElementById(c);if(d==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"ReactDOMRe.renderToElementWithId : no element of id "+(c+" found in the HTML.")];else{b("ReactDOM").render(a,d);return 0}}function d(a,c){var d=document.getElementsByClassName(c);if(d.length!==0){b("ReactDOM").hydrate(a,d[0]);return 0}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"ReactDOMRe.hydrateToElementWithClassName: no element of class "+(c+" found in the HTML.")]}function e(a,c){var d=document.getElementById(c);if(d==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"ReactDOMRe.hydrateToElementWithId : no element of id "+(c+" found in the HTML.")];else{b("ReactDOM").hydrate(a,d);return 0}}function g(a,c,d){a=[a,c].concat(d);return b("React").createElement.apply(null,a)}function h(a,b){return Object.assign(Object.assign({},a),b)}function i(a,b,c){var d={};d[b]=c;return h(a,d)}i=[h,i];f.renderToElementWithClassName=a;f.renderToElementWithId=c;f.hydrateToElementWithClassName=d;f.hydrateToElementWithId=e;f.createElementVariadic=g;f.Style=i}),null);
__d("isEventSupported",["fbjs/lib/ExecutionEnvironment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("fbjs/lib/ExecutionEnvironment").canUseDOM&&(g=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function a(a,c){__p&&__p();if(!b("fbjs/lib/ExecutionEnvironment").canUseDOM||c&&!("addEventListener"in document))return!1;c="on"+a;var d=c in document;if(!d){var e=document.createElement("div");e.setAttribute(c,"return;");d=typeof e[c]==="function"}!d&&g&&a==="wheel"&&(d=document.implementation.hasFeature("Events.wheel","3.0"));return d}e.exports=a}),null);