if (self.CavalryLogger) { CavalryLogger.start_js(["RcuBC"]); }

__d("CampfireCharacters",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({EMBED:"\ud83d\uddbc",PHOTO:"\ud83d\udcf7",VIDEO:"\ud83d\udcf9"});e.exports=a}),null);
__d("calculateMenuTop",["DOMVector","Style"],(function(a,b,c,d,e,f){__p&&__p();function c(c,d){__p&&__p();var e=a.getSelection(),f=e.anchorNode;e=e.focusNode;if(f===null||e===null)return null;c=c.getIsBackward()?e:f;while(c&&(!c.getAttribute||!c.getAttribute("data-block")))c=c.parentNode;if(!c)return null;e=b("DOMVector").getElementPosition(c,"viewport").y;f=b("DOMVector").getElementPosition(d,"viewport").y;d=b("Style").getFloat(c,"paddingTop");c=b("Style").getFloat(c,"lineHeight");e=e+d+c/2;return Math.floor(e-f)}e.exports=c}),null);
__d("FBAmbientPulseNUXBody.react",["cx","React","SUIButton.react","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.children,d=a.className,e=a.footerButtons;a=a.onAcknowledge;a=a?b("React").createElement(b("SUIButton.react"),{label:"Dismiss",onClick:a}):null;return b("React").createElement("div",{className:b("joinClasses")("_2b-b",d)},b("React").createElement("div",{className:"_2b-c"}),b("React").createElement("div",{className:"_2ph_"},c,b("React").createElement("div",{className:"_3-8y _2b-e"},e?e:a)))};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("FBPulse.react",["cx","fbt","React","SUIBusinessTheme","SUITooltip.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.getHoverTooltipLabel=function(){return this.props.hoverTooltipText||h._("Click to learn about this new feature.")};a.prototype.render=function(){var a=this.props,c=a.ariaLabel,d=a.className,e=a.isSelected,f=a.onClick,g=a.showTooltip,h=a.size,i=a.style,j=a.onMouseOver;a=a.onMouseLeave;return b("React").createElement("a",{className:b("joinClasses")("_68uq"+(e?" _68ur":"")+(this.props.hasFixedSize?" _6dr7":""),d),style:babelHelpers["extends"]({height:h,width:h},i),href:"#","aria-label":c,onClick:f,onMouseOver:j,onMouseLeave:a,role:"button"},b("React").createElement(b("SUITooltip.react"),{alignment:"center",theme:b("SUIBusinessTheme"),tooltip:g&&j==null?this.getHoverTooltipLabel():null},b("React").createElement("div",{className:"_68us"}),b("React").createElement("div",{className:"_68ut"})))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBAmbientPulseNUX.react",["cx","fbt","FBAmbientPulseNUXBody.react","FBPulse.react","React","ReactAbstractContextualDialog","ReactLayer","SUIBusinessThemeContainer.react","XUIAmbientNUXTheme","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({displayName:"FBAmbientPulseNUX",theme:b("XUIAmbientNUXTheme")})),k="above",l="below",m="center",n="left",o="right",p=10,q=Math.round(p/2);d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=b("uniqueID")(),this.$2=b("uniqueID")(),this.state={showDialog:!1},c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.dialogShown!==this.props.dialogShown&&this.setState({showDialog:a.shown&&a.dialogShown})};a.prototype.componentWillUnmount=function(){this.state.showDialog&&this.props.onDismiss&&this.props.onDismiss()};a.prototype.$3=function(){return h._("Learn about this new feature")};a.prototype.$4=function(){__p&&__p();var a=this.props,b=a.alignment,c=a.position,d=a.pulseOffsetX;a=a.pulseOffsetY;var e=-1*q,f={};d=d!=null?d+e:e;switch(c){case n:case o:case l:c===n?f.right=d:f.left=d;f.top=a!=null?a+e:e;break;case k:f.left=d;f.top=a!=null?"calc(100% - "+(a+q)+"px)":"calc(100% - "+q+"px)";break}switch(b){case o:f.left="calc(100% - "+q+"px)";break;case m:[k,l].includes(c)&&(f.left="calc(50% - "+q+"px)");break}return f};a.prototype.render=function(){__p&&__p();var a=this.state.showDialog,c=this.props,d=c.dialogFooterButtons,e=c.hoverTooltipText,f=c.onDismiss,g=c.onAcknowledge,h=c.onSelect,i=c.onMouseOver,k=c.onMouseLeave;c=this.props.labelledBy;var l=null;c||(l=b("React").createElement("div",{"aria-label":this.props.label||this.$3(),id:this.$2,key:this.$2}),c=this.$2);e=b("React").createElement(b("FBPulse.react"),{ariaLabel:this.$3(),className:"_369j",hasFixedSize:this.props.hasFixedSize,hoverTooltipText:e,isSelected:a,style:this.$4(),onClick:function(a){return h&&h()},onMouseOver:function(b){function a(a){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(a){return i&&i()}),onMouseLeave:function(b){function a(a){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(a){return k&&k()}),showTooltip:!a,size:p});d=b("React").createElement(b("FBAmbientPulseNUXBody.react"),{className:a?"":"_36bi",footerButtons:d,onDismiss:f,onAcknowledge:g},this.props.children,l);return b("React").createElement(j,{alignment:this.props.alignment,arrowBehavior:a?null:function(a){return{enable:function(a){},disable:function(a){}}},autoFocus:!1,behaviors:this.props.behaviors,context:this.props.context,contextRef:this.props.contextRef,dialogRole:"region",focusContextOnHide:!1,hasActionableContext:this.props.hasActionableContext,insertParent:this.props.insertParent,keepInViewport:!1,labelledBy:c,offsetX:this.props.offsetX,offsetY:this.props.offsetY,onBeforeHide:this.props.onBeforeHide,position:this.props.position,shown:this.props.shown,width:a?this.props.width:1},b("React").createElement(b("SUIBusinessThemeContainer.react"),null,b("React").createElement("span",{className:"_36bj"},e,d)))};a.propTypes={alignment:c.oneOf(["left","center","right"]),behaviors:c.object,className:c.string,context:c.object,contextRef:c.func,dialogShown:c.bool,hasActionableContext:c.bool,insertParent:c.object,label:c.object,labelledBy:c.string,offsetX:c.number,offsetY:c.number,onBeforeHide:c.func,onDismiss:c.func,onAcknowledge:c.func,onSelect:c.func,position:c.oneOf(["above","below","left","right"]),shown:c.bool,width:c.number};e.exports=a}),null);
__d("XNotesUserEmbedsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notes/composer/embeds/",{original_src:{type:"String",required:!0}})}),null);
__d("NotesEmbed.react",["cx","fbt","ActorURI","AsyncRequest","CurrentUser","Keys","React","XNotesUserEmbedsController","XUIButton.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIText.react","XUITextInput.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={error:null,loading:!1,src:""},this.$1=function(){this.refs.src.focusInput()}.bind(this),this.$2=function(){__p&&__p();if(this.state.loading)return;if(this.state.src.trim()===""){this.setState({error:"Please enter a URL."},this.$1);return}var a=function(){var a=b("XNotesUserEmbedsController").getURIBuilder().setString("original_src",this.state.src).getURI();a=b("ActorURI").create(a,this.props.ownerID);new(b("AsyncRequest"))(a).setHandler(function(a){a=a.getPayload();a=a.embedData;this.props.onEmbed(a);this.props.onClose()}.bind(this)).setErrorHandler(function(a){a=a.errorDescription;this.setState({error:a,loading:!1},this.$1)}.bind(this)).send()}.bind(this);this.setState({loading:!0},a)}.bind(this),this.$3=function(a){this.setState({error:null,src:a.target.value})}.bind(this),this.$4=function(a){switch(a.which){case b("Keys").RETURN:a.preventDefault(),this.$2()}}.bind(this),c}a.prototype.componentDidMount=function(){"use strict";setTimeout(this.$1,0)};a.prototype.render=function(){"use strict";var a=h._("Paste in the URL for the media you want to insert into your note...");return b("React").createElement("div",null,b("React").createElement(b("XUIDialogTitle.react"),null,h._("Embed photos, videos, and more")),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement(b("XUITextInput.react"),{className:"_ipd",onChange:this.$3,onKeyDown:this.$4,placeholder:a,ref:"src",xuiError:this.state.error}),b("React").createElement(b("XUIText.react"),{className:"_ipe",display:"block"},b("CurrentUser").isWorkUser()?h._("We currently support embedding from Facebook, Workplace, Giphy, Instagram, SoundCloud, Twitter, Vimeo, Vine, and YouTube."):h._("We currently support embedding from Facebook, Giphy, Instagram, SoundCloud, Twitter, Vimeo, Vine, and YouTube."))),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIButton.react"),{disabled:this.state.loading,label:h._("Insert"),onClick:this.$2,use:"confirm"})))};a.propTypes={onClose:c.func.isRequired,onEmbed:c.func.isRequired,ownerID:c.string.isRequired};e.exports=a}),null);
__d("NotesEmbedDialog",["DialogX","NotesEmbed.react","React","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$2=a.onEmbed,this.$3=a.onEmbedCancel||b("emptyFunction"),this.$4=a.ownerID,this.$1=new(b("DialogX"))({width:500},b("React").createElement(b("NotesEmbed.react"),{onClose:function(){return this.hide()}.bind(this),onEmbed:this.$2,ownerID:this.$4})),this.$1.subscribe("cancel",function(){return this.$3()}.bind(this))}a.prototype.hide=function(){"use strict";this.$1.hide()};a.prototype.show=function(){"use strict";this.$1.show()};e.exports=a}),null);
__d("XNotesUserPhotosController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notes/composer/photos/",{thumb_height:{type:"Int",required:!0},thumb_width:{type:"Int",required:!0}})}),null);
__d("NotesPhotoPicker.react",["ix","cx","fbt","glyph","ActorURI","AsyncRequest","CssBackgroundImage.react","FileInput.react","Grid.react","Image.react","React","ScrollableArea.react","XNotesUserPhotosController","XUIButton.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUISpinner.react","getObjectValues"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("Grid.react").GridItem;c=b("React").PropTypes;var m=338,n=116,o=149;d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state={photoData:null},this.renderThumbnailGrid=function(){if(!this.state.photoData)return b("React").createElement("div",{className:"_5tki",style:{height:m+"px"}},b("React").createElement(b("XUISpinner.react"),{className:"_5tkj",size:"large"}));var a=b("getObjectValues")(this.state.photoData).map(function(a){var c=function(){this.props.onPhotoPicked(a),this.props.onClose()}.bind(this);return b("React").createElement(l,{key:"thumbnail_"+a.originalPhotoData.id,onClick:c},b("React").createElement("div",{className:"_5tkk"},b("React").createElement(b("CssBackgroundImage.react"),{imageURI:a.thumbnailSrc,className:"_5tkl",height:n+"px",width:o+"px"})))}.bind(this));return b("React").createElement(b("Grid.react"),{cols:4,spacing:"_2phz"},a)}.bind(this),this.onFileInputChange=function(event){this.props.onPhotoUpload(event.target),this.props.onClose()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){"use strict";var a=b("XNotesUserPhotosController").getURIBuilder().setInt("thumb_height",n).setInt("thumb_width",o).getURI();a=b("ActorURI").create(a,this.props.ownerID);new(b("AsyncRequest"))(a).setHandler(function(a){a=a.payload.photoData;a&&this.setState({photoData:a})}.bind(this)).send()};a.prototype.render=function(){"use strict";var a=i._("Add Photo To Note");this.props.isDoc?a=i._("Add Photo To Doc"):this.props.isPageStory&&(a=i._("Add Photo To Story"));return b("React").createElement("div",null,b("React").createElement(b("XUIDialogTitle.react"),null,a),b("React").createElement(b("XUIDialogBody.react"),{className:"_5tkf"},b("React").createElement(b("ScrollableArea.react"),{height:m,shadow:!1},this.renderThumbnailGrid())),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("FileInput.react"),{name:"file",onChange:this.onFileInputChange,accept:"image/*"},b("React").createElement(b("XUIButton.react"),{image:b("React").createElement(b("Image.react"),{src:g("101456")}),href:{url:"#"},label:i._("Upload New Photo")})),b("React").createElement(b("XUIButton.react"),{className:"_5tkg layerCancel",label:i._("Close"),use:"confirm"})))};a.propTypes={onClose:c.func.isRequired,onPhotoPicked:c.func.isRequired,onPhotoUpload:c.func.isRequired,isDoc:c.bool,isPageStory:c.bool};e.exports=a}),null);
__d("NotesPhotoPickerDialog",["invariant","DialogX","NotesPhotoPicker.react","React","emptyFunction"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this.$1=null,this.$2=a.onPhotoPicked,this.$3=a.onPhotoUpload,this.$4=a.onPhotoCancel||b("emptyFunction"),this.$5=a.ownerID,this.$6=a.isDoc,this.$7=a.isPageStory,this.$6&&this.$7&&g(0,5153)}a.prototype.hide=function(){"use strict";this.$1&&this.$1.hide()};a.prototype.show=function(){"use strict";this.$1||(this.$1=new(b("DialogX"))({width:690},b("React").createElement(b("NotesPhotoPicker.react"),{onClose:function(){return this.hide()}.bind(this),onPhotoPicked:this.$2,onPhotoUpload:this.$3,ownerID:this.$5,isDoc:this.$6,isPageStory:this.$7})),this.$1.subscribe("cancel",function(){return this.$4()}.bind(this))),this.$1.show()};e.exports=a}),null);
__d("XNotesUserVideosController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notes/composer/videos/",{is_from_cover:{type:"Bool",defaultValue:!1}})}),null);
__d("NotesVideoPicker.react",["cx","fbt","ActorURI","AsyncRequest","Grid.react","React","ScrollableArea.react","XNotesUserVideosController","XUIDialogBody.react","XUIDialogTitle.react","XUISpinner.react","cssURL"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("Grid.react").GridItem;c=b("React").PropTypes;var k=400;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={videoData:null},this.renderThumbnailGrid=function(){if(!this.state.videoData)return b("React").createElement("div",{className:"_29vm"},b("React").createElement(b("XUISpinner.react"),{className:"_29vo",size:"large"}));var a=Object.keys(this.state.videoData).map(function(a,c){var d=this.state.videoData[a];c=function(){this.props.onVideoPicked(d),this.props.onClose()}.bind(this);return b("React").createElement(j,{key:"thumbnail_"+d.id,onClick:c},b("React").createElement("div",{className:"_29vp"},b("React").createElement("div",{className:"_29vq",style:{backgroundImage:b("cssURL")(d.posterSrc)}})),b("React").createElement("div",{className:"_29vr"},d.title))}.bind(this));return b("React").createElement(b("Grid.react"),{cols:2,spacing:"_2phz"},a)}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){"use strict";var a=b("XNotesUserVideosController").getURIBuilder().getURI();a=b("ActorURI").create(a,this.props.ownerID);new(b("AsyncRequest"))(a).setHandler(function(a){a=a.getPayload().videoData;a&&this.setState({videoData:a})}.bind(this)).send()};a.prototype.render=function(){"use strict";return b("React").createElement("div",null,b("React").createElement(b("XUIDialogTitle.react"),null,h._("Add Video")),b("React").createElement(b("XUIDialogBody.react"),{className:"_29vl"},b("React").createElement(b("ScrollableArea.react"),{height:k,shadow:!1},this.renderThumbnailGrid())))};a.propTypes={onClose:c.func.isRequired,onVideoPicked:c.func.isRequired};e.exports=a}),null);
__d("NotesVideoPickerDialog",["DialogX","NotesVideoPicker.react","React","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=null,this.$2=a.onVideoPicked,this.$3=a.onVideoCancel||b("emptyFunction"),this.$4=a.ownerID}a.prototype.hide=function(){"use strict";this.$1&&this.$1.hide()};a.prototype.show=function(){"use strict";this.$1||(this.$1=new(b("DialogX"))({width:690},b("React").createElement(b("NotesVideoPicker.react"),{onClose:function(){return this.hide()}.bind(this),onVideoPicked:this.$2,ownerID:this.$4})),this.$1.subscribe("cancel",function(){return this.$3()}.bind(this))),this.$1.show()};e.exports=a}),null);
__d("ReactComposerWorkFileActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({RESET:null,SAVE_FILE:null,SET_FILE_CONFIG:null},"ReactComposerWorkFileActionType")}),null);
__d("ReactComposerWorkFileStoreImpl",["fbt","ReactComposerStoreBase","ReactComposerWorkFileActionType"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));h=c&&c.prototype;function a(){"use strict";__p&&__p();var a;h.constructor.call(this,function(){return{canViewerUploadFiles:!0,file:null,maxFileUploadString:null,selectedFileName:a&&a.$ReactComposerWorkFileStore1(),shouldShowUploadFileNux:!1}},function(c){switch(c.type){case b("ReactComposerWorkFileActionType").RESET:a&&a.$ReactComposerWorkFileStore2(c);break;case b("ReactComposerWorkFileActionType").SAVE_FILE:a&&a.$ReactComposerWorkFileStore3(c);break;case b("ReactComposerWorkFileActionType").SET_FILE_CONFIG:a&&a.$ReactComposerWorkFileStore4(c);break}});a=this}a.prototype.getFile=function(a){"use strict";return this.getComposerData(a).file};a.prototype.getCanViewerUploadFiles=function(a){"use strict";return this.getComposerData(a).canViewerUploadFiles};a.prototype.getMaxFileUploadSize=function(a){"use strict";return this.getComposerData(a).maxFileUploadSize};a.prototype.getMaxFileUploadString=function(a){"use strict";return this.getComposerData(a).maxFileUploadString};a.prototype.getSelectedFileName=function(a){"use strict";return this.getComposerData(a).selectedFileName};a.prototype.getURI=function(a){"use strict";return"/ajax/groups/files/upload"};a.prototype.getShouldShowUploadFileNux=function(a){"use strict";return this.getComposerData(a).shouldShowUploadFileNux};a.prototype.hasFile=function(a){"use strict";return!!this.getComposerData(a).file};a.prototype.isFileSelected=function(a){"use strict";return this.hasFile(a)};a.prototype.$ReactComposerWorkFileStore1=function(){"use strict";return g._("No file chosen")};a.prototype.$ReactComposerWorkFileStore2=function(a){"use strict";var b=this.validateAction(a,"composerID");b=this.getComposerData(b);b.file=null;b.selectedFileName=this.$ReactComposerWorkFileStore1();this.emitChange(a.composerID)};a.prototype.$ReactComposerWorkFileStore3=function(a){"use strict";var b=this.validateAction(a,["composerID","file","name"]),c=b[0],d=b[1];b=b[2];c=this.getComposerData(c);c.file=d;c.selectedFileName=b;this.emitChange(a.composerID)};a.prototype.$ReactComposerWorkFileStore4=function(a){"use strict";var b=this.validateAction(a,["composerID","config"]),c=b[0];b=b[1];c=this.getComposerData(c);c.canViewerUploadFiles=b.canViewerUploadFiles;c.maxFileUploadSize=b.maxFileUploadSize;c.maxFileUploadString=b.maxFileUploadString;c.shouldShowUploadFileNux=b.shouldShowUploadFileNux;this.emitChange(a.composerID)};e.exports=new a()}),null);
__d("moveBlockInContentState",["invariant","ContentBlockNode","getNextDelimiterBlockKey","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").OrderedMap,i=b("immutable").List,j=function(a,b,c){if(!a)return;var d=b.get(a);if(!d)return;b.set(a,c(d))},k=function(a,b,c,d,e){__p&&__p();if(!e)return a;var f=d==="after",g=b.getKey(),h=c.getKey(),k=b.getParentKey(),l=b.getNextSiblingKey(),m=b.getPrevSiblingKey(),n=c.getParentKey(),o=f?c.getNextSiblingKey():h,p=f?h:c.getPrevSiblingKey();return a.withMutations(function(a){__p&&__p();j(k,a,function(a){var b=a.getChildKeys();return a.merge({children:b["delete"](b.indexOf(g))})}),j(m,a,function(a){return a.merge({nextSibling:l})}),j(l,a,function(a){return a.merge({prevSibling:m})}),j(o,a,function(a){return a.merge({prevSibling:g})}),j(p,a,function(a){return a.merge({nextSibling:g})}),j(n,a,function(a){var b=a.getChildKeys(),c=b.indexOf(h);c=f?c+1:c!==0?c-1:0;b=b.toArray();b.splice(c,0,g);return a.merge({children:i(b)})}),j(g,a,function(a){return a.merge({nextSibling:o,prevSibling:p,parent:n})})})};a=function(a,c,d,e){__p&&__p();e!=="replace"||g(0,2804);var f=d.getKey(),i=c.getKey();i!==f||g(0,2805);var j=a.getBlockMap(),l=c instanceof b("ContentBlockNode"),m=[c],n=j["delete"](i);l&&(m=[],n=j.withMutations(function(a){var d=c.getNextSiblingKey(),e=b("getNextDelimiterBlockKey")(c,a);a.toSeq().skipUntil(function(a){return a.getKey()===i}).takeWhile(function(a){var b=a.getKey(),c=b===i,f=d&&b!==d;a=!d&&a.getParentKey()&&(!e||b!==e);return!!(c||f||a)}).forEach(function(b){m.push(b),a["delete"](b.getKey())})}));j=n.toSeq().takeUntil(function(a){return a===d});n=n.toSeq().skipUntil(function(a){return a===d}).skip(1);var o=m.map(function(a){return[a.getKey(),a]}),p=h();if(e==="before"){var q=a.getBlockBefore(f);!q||q.getKey()!==c.getKey()||g(0,2805);p=j.concat([].concat(o,[[f,d]]),n).toOrderedMap()}else if(e==="after"){q=a.getBlockAfter(f);!q||q.getKey()!==i||g(0,2805);p=j.concat([[f,d]].concat(o),n).toOrderedMap()}return a.merge({blockMap:k(p,c,d,e,l),selectionBefore:a.getSelectionAfter(),selectionAfter:a.getSelectionAfter().merge({anchorKey:i,focusKey:i})})};e.exports=a}),null);
__d("AtomicBlockUtils",["BlockMapBuilder","CharacterMetadata","ContentBlock","ContentBlockNode","DraftModifier","EditorState","generateRandomKey","gkx","immutable","moveBlockInContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("676842"),h=g?b("ContentBlockNode"):b("ContentBlock"),i=b("immutable").List,j=b("immutable").Repeat;a={insertAtomicBlock:function(a,c,d){__p&&__p();var e=a.getCurrentContent(),f=a.getSelection();e=b("DraftModifier").removeRange(e,f,"backward");var k=e.getSelectionAfter();e=b("DraftModifier").splitBlock(e,k);k=e.getSelectionAfter();e=b("DraftModifier").setBlockType(e,k,"atomic");c=b("CharacterMetadata").create({entity:c});c={key:b("generateRandomKey")(),type:"atomic",text:d,characterList:i(j(c,d.length))};d={key:b("generateRandomKey")(),type:"unstyled"};g&&(c=babelHelpers["extends"]({},c,{nextSibling:d.key}),d=babelHelpers["extends"]({},d,{prevSibling:c.key}));c=[new h(c),new h(d)];d=b("BlockMapBuilder").createFromArray(c);c=b("DraftModifier").replaceWithFragment(e,k,d);e=c.merge({selectionBefore:f,selectionAfter:c.getSelectionAfter().set("hasFocus",!0)});return b("EditorState").push(a,e,"insert-fragment")},moveAtomicBlock:function(a,c,d,e){__p&&__p();var f=a.getCurrentContent(),g=a.getSelection();if(e==="before"||e==="after"){var h=f.getBlockForKey(e==="before"?d.getStartKey():d.getEndKey());h=b("moveBlockInContentState")(f,c,h,e)}else{e=b("DraftModifier").removeRange(f,d,"backward");f=e.getSelectionAfter();d=e.getBlockForKey(f.getFocusKey());if(f.getStartOffset()===0)h=b("moveBlockInContentState")(e,c,d,"before");else if(f.getEndOffset()===d.getLength())h=b("moveBlockInContentState")(e,c,d,"after");else{d=b("DraftModifier").splitBlock(e,f);e=d.getSelectionAfter();f=d.getBlockForKey(e.getFocusKey());h=b("moveBlockInContentState")(d,c,f,"before")}}e=h.merge({selectionBefore:g,selectionAfter:h.getSelectionAfter().set("hasFocus",!0)});return b("EditorState").push(a,e,"move-block")}};e.exports=a}),null);
__d("RichComposedTextEditorBlock.react",["DraftEditorBlock.react","React"],(function(a,b,c,d,e,f){a=function(a){return b("React").createElement(b("DraftEditorBlock.react"),babelHelpers["extends"]({contentEditable:"inherit"},a.blockProps,a),a.children)};e.exports=a}),null);
__d("getVisibleSelectionRect",["getRangeBoundingClientRect"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(c){c=c.getSelection();if(!c.rangeCount)return null;c=c.getRangeAt(0);c=b("getRangeBoundingClientRect")(c);var d=c.top,e=c.right,f=c.bottom,g=c.left;return d===0&&e===0&&f===0&&g===0?null:c}e.exports=a}),null);
__d("RichComposedTextEditorInlineStyleMenu.react",["cx","fbt","invariant","ComposedLinkEntityProperties","ContextualLayerAutoFlip","EditorState","Keys","LeftRight.react","React","ReactFragment","Rect","SelectionState","TooltipData","URI","XUICloseButton.react","XUIContextualDialog.react","XUIError.react","getVisibleSelectionRect","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("immutable").OrderedSet;c=b("React").PropTypes;var k={ContextualLayerAutoFlip:b("ContextualLayerAutoFlip")},l={bold:h._("Bold"),italic:h._("Italic"),link:h._("Link"),mono:h._("Code"),linkPlaceholder:h._("Paste or type a link...")},m=["http","https","mailto"];function n(a){return m.indexOf(a)>=0}d=b("React").createClass({displayName:"RichComposedTextEditorInlineStyleMenu",propTypes:{editorState:c.instanceOf(b("EditorState")).isRequired,onRemoveLink:c.func.isRequired,onAddLink:c.func.isRequired,onCancelLink:c.func.isRequired,onToggle:c.func.isRequired},getInitialState:function(){return{addingLink:!1,flyoutState:"style",bounds:null,targetSelection:null,linkText:"",linkErrorMessage:null}},componentDidUpdate:function(){this.state.addingLink&&setTimeout(function(){return this.refs.linkInput.focus()}.bind(this),0)},_toggleBold:function(a){a.preventDefault(),this.props.onToggle("BOLD")},_toggleItalic:function(a){a.preventDefault(),this.props.onToggle("ITALIC")},_toggleMono:function(a){a.preventDefault(),this.props.onToggle("CODE")},_toggleLink:function(a){a.preventDefault(),this._toggleLinkImpl()},_toggleLinkImpl:function(){if(this._alreadyContainsLink()){this.props.onRemoveLink();return}this.setState({addingLink:!0,flyoutState:"link",bounds:o(),targetSelection:this.props.editorState.getSelection(),linkText:""})},toggleLink:function(){if(!this._canAddLink())return!1;this._toggleLinkImpl();return!0},_onLinkValueChange:function(a){a=a.target;a instanceof HTMLInputElement||i(0,2261);this.setState({linkText:a.value})},_onLinkValueKeydown:function(a){__p&&__p();switch(a.which){case b("Keys").RETURN:a.preventDefault();if(this.state.linkText){var c=new(b("URI"))(this.state.linkText),d=c.getProtocol();if(!d)c.setProtocol("http");else if(!n(d))return;if(!b("URI").isValidURI(c.toString())){this.setState({linkErrorMessage:"Invalid link"});return}else this.setState({linkErrorMessage:null});d=this.props.editorState.getCurrentContent();d=d.createEntity("LINK","MUTABLE",p(c));c=d.getLastCreatedEntityKey();this.props.onAddLink(this.state.targetSelection,c);this.setState(this.getInitialState())}return;case b("Keys").ESC:a.preventDefault();this._cancelLink();return;default:this.setState({linkErrorMessage:null})}},reset:function(a){this.setState(this.getInitialState(),a)},resetToStyles:function(a){this.setState(Object.assign(this.getInitialState(),{targetSelection:this.props.editorState.getSelection(),bounds:this.state.bounds}),a)},_cancelLink:function(){var a=this.state.targetSelection;this.props.onCancelLink(a);setTimeout(function(){return this.resetToStyles()}.bind(this),0)},_renderBold:function(a){a="_4q5h"+(a.has("BOLD")?" _u4r":"");return b("React").createElement("li",babelHelpers["extends"]({className:a,onMouseDown:this._toggleBold},b("TooltipData").propsFor(l.bold)))},_renderItalic:function(a){a="_4q5j"+(a.has("ITALIC")?" _u4r":"");return b("React").createElement("li",babelHelpers["extends"]({className:a,onMouseDown:this._toggleItalic},b("TooltipData").propsFor(l.italic)))},_renderMono:function(a){a="_4q5k"+(a.has("CODE")?" _u4r":"");return b("React").createElement("li",babelHelpers["extends"]({className:a,onMouseDown:this._toggleMono},b("TooltipData").propsFor(l.mono)))},_canAddLink:function(){var a=this.props.editorState;a=this._getSelectionWithoutTrailingNewline(a);return!a.isCollapsed()&&a.getAnchorKey()===a.getFocusKey()},_alreadyContainsLink:function(){var a=this.props.editorState,b=this._getSelectionWithoutTrailingNewline(a);return a.getCurrentContent().getBlockForKey(b.getAnchorKey()).getCharacterList().slice(b.getStartOffset(),b.getEndOffset()).some(function(b){b=b.getEntity();var c=a.getCurrentContent();return b&&c.getEntity(b).getType()==="LINK"})},_getSelectionWithoutTrailingNewline:function(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed()&&c.getEndOffset()===0){a=a.getCurrentContent();var d=a.getKeyBefore(c.getEndKey());if(d){a=a.getBlockForKey(d).getLength();var e=c.getIsBackward();if(e)return new(b("SelectionState"))({anchorKey:d,anchorOffset:a,focusKey:c.getFocusKey(),focusOffset:c.getFocusOffset(),isBackward:!0});else return new(b("SelectionState"))({anchorKey:c.getAnchorKey(),anchorOffset:c.getAnchorOffset(),focusKey:d,focusOffset:a,isBackward:!1})}}return c},_renderLink:function(){if(!this._canAddLink())return null;var a=this._alreadyContainsLink();a="_4q5l"+(a?" _u4r":"");return b("React").createElement("li",babelHelpers["extends"]({className:a,onMouseDown:this._toggleLink},b("TooltipData").propsFor(l.link)))},_renderStyleBody:function(a){return b("React").createElement("ul",{className:"_u4s clearfix"},this._renderBold(a),this._renderItalic(a),this._renderMono(a),this._renderLink())},_renderLinkBody:function(){return b("React").createElement(b("LeftRight.react"),{className:"_u4u"},b("React").createElement(b("XUIError.react"),{xuiError:this.state.linkErrorMessage},b("React").createElement("input",{className:"_u4v",type:"text",ref:"linkInput",placeholder:l.linkPlaceholder,value:this.state.linkText,onChange:this._onLinkValueChange,onKeyDown:this._onLinkValueKeydown})),b("React").createElement(b("XUICloseButton.react"),{className:"_u4w",size:"medium",shade:"dark",onClick:this._cancelLink}))},renderLayers:function(){__p&&__p();var a=!1,c=!1,d=null,e=this.props.editorState;if(this.state.flyoutState==="link")a=!0,d=this.state.bounds;else{var f=!e.getSelection().isCollapsed();d=f?o():null;c=!!(f&&d)}f=c?e.getCurrentInlineStyle():j();return b("ReactFragment").create({style:b("React").createElement(b("XUIContextualDialog.react"),{autoFocus:!1,shown:c,alignment:"center",contextBounds:d,behaviors:k,contextRef:function(){return this.refs.inlineStyle}.bind(this)},this._renderStyleBody(f)),link:b("React").createElement(b("XUIContextualDialog.react"),{hideOnEscape:!1,autoFocus:!1,shown:a,alignment:"center",contextBounds:d,behaviors:k,contextRef:function(){return this.refs.inlineStyle}.bind(this)},this._renderLinkBody())})},render:function(){return b("React").createElement("span",null,b("React").createElement("div",{ref:"inlineStyle"}),this.renderLayers())}});function o(){var c=b("getVisibleSelectionRect")(a);if(c==null)return null;var d=c.top,e=c.right,f=c.bottom;c=c.left;return new(b("Rect"))(d,e,f,c,"viewport").convertTo("document")}function p(a){var c={};c[b("ComposedLinkEntityProperties").URL]=a.toString();return c}e.exports=d}),null);
__d("RichComposedTextEditorMenu.react",["cx","fbt","ContextualLayerAutoFlip","EditorState","NotesEmbedDialog","NotesPhotoPickerDialog","NotesVideoPickerDialog","React","ReactDOM","ReactFragment","XUIContextualDialog.react","XUIContextualDialogBody.react","calculateMenuTop","clearImmediate","keyMirror","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=b("keyMirror")({STYLE:null,ATTACH:null}),k={ContextualLayerAutoFlip:b("ContextualLayerAutoFlip")},l={embed:h._("Embed"),photo:h._("Photo"),video:h._("Video")};d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={top:null,visibleMenu:null},this.$2=function(){this.$1&&b("clearImmediate")(this.$1),this.$1=null}.bind(this),this.$3=function(){this.props.editorState.getCurrentContent();var a=this.props.editorState.getSelection();a=b("calculateMenuTop")(a,b("ReactDOM").findDOMNode(this.refs.container));this.state.top!==a&&this.setState({top:a,visibleMenu:null})}.bind(this),this.$4=function(a){a.preventDefault(),this.state.visibleMenu===j.ATTACH?this.setState({visibleMenu:null}):this.setState({visibleMenu:j.ATTACH})}.bind(this),this.$5=function(a){a.preventDefault(),this.state.visibleMenu===j.STYLE?this.setState({visibleMenu:null}):this.setState({visibleMenu:j.STYLE})}.bind(this),this.$6=function(){var a=this.props.editorState,b=a.getSelection();return a.getCurrentContent().getBlockForKey(b.getStartKey()).getType()}.bind(this),this.$7=function(a){a.preventDefault()},this.$10=function(){var a=this.props.editorState;a=a.getSelection();var b=this.$6();return this.state.top!==null&&b!=="atomic"&&a.getHasFocus()}.bind(this),this.$11=function(a){a.preventDefault(),this.props.onToggleBlockType("header-one")}.bind(this),this.$12=function(a){a.preventDefault(),this.props.onToggleBlockType("header-two")}.bind(this),this.$13=function(a){a.preventDefault(),this.props.onToggleBlockType("unordered-list-item")}.bind(this),this.$14=function(a){a.preventDefault(),this.props.onToggleBlockType("ordered-list-item")}.bind(this),this.$15=function(a){a.preventDefault(),this.props.onToggleBlockType("blockquote")}.bind(this),this.$16=function(a){a.preventDefault(),this.props.onToggleBlockType("code-block")}.bind(this),this.$17=function(a){a.preventDefault(),setTimeout(function(){var a=function(a){this.props.onAddEmbed(m(a,this.props.editorState.getCurrentContent()))}.bind(this);new(b("NotesEmbedDialog"))({onEmbed:a,ownerID:this.props.ownerID}).show()}.bind(this),200)}.bind(this),this.$9=function(a){a.preventDefault(),setTimeout(function(){var a=this.props.compositionID,c=this.props.editorState.getCurrentContent(),d=function(b){this.props.onAddPhoto(n(babelHelpers["extends"]({},b,{compositionID:a}),c))}.bind(this),e=function(b){this.props.onAddPhoto(n({compositionID:a,fileInput:b},c))}.bind(this),f=function(){this.props.onCancelPhoto()}.bind(this);new(b("NotesPhotoPickerDialog"))({onPhotoPicked:d,onPhotoUpload:e,onPhotoCancel:f,ownerID:this.props.ownerID,isPageStory:this.props.isPageStory}).show()}.bind(this),200)}.bind(this),this.$18=function(a){a.preventDefault(),setTimeout(function(){var a=this.props.compositionID,c=function(b){this.props.onAddVideo(o(babelHelpers["extends"]({},b,{compositionID:a}),this.props.editorState.getCurrentContent()))}.bind(this);new(b("NotesVideoPickerDialog"))({onVideoPicked:c,ownerID:this.props.ownerID}).show()}.bind(this),200)}.bind(this),c}a.prototype.componentDidMount=function(){this.$2(),this.$1=b("setImmediate")(function(){return this.$3()}.bind(this))};a.prototype.componentDidUpdate=function(){this.$2(),this.$1=b("setImmediate")(function(){return this.$3()}.bind(this))};a.prototype.componentWillUnmount=function(){this.$2()};a.prototype.$8=function(){var a=this.$6(),c={top:this.state.top?this.state.top+"px":void 0},d;this.props.canAttachVideo||this.props.canAttachEmbed?d=b("React").createElement("li",{className:"_15_2",ref:"attach"}):this.props.canAttachPhoto?d=b("React").createElement("li",{className:"_15_4",onClick:this.$9}):d=null;a="_15_5"+(a==="unstyled"?" _15_6":"")+(a==="header-one"?" _15_7":"")+(a==="header-two"?" _15_8":"")+(a==="unordered-list-item"?" _15_9":"")+(a==="ordered-list-item"?" _15_a":"")+(a==="blockquote"?" _15_b":"")+(a==="code-block"?" _15_c":"");return b("React").createElement("ul",{style:c,className:"clearfix _15r2",onMouseDown:this.$7},d,b("React").createElement("li",{className:a,ref:"style"}))};a.prototype.$19=function(a){a="_15_7"+(a==="header-one"?" _15_e":"");return b("React").createElement("li",{className:a,onMouseDown:this.$11})};a.prototype.$20=function(a){a="_15_8"+(a==="header-two"?" _15_e":"");return b("React").createElement("li",{className:a,onMouseDown:this.$12})};a.prototype.$21=function(a){a="_15_9"+(a==="unordered-list-item"?" _15_e":"");return b("React").createElement("li",{className:a,onMouseDown:this.$13})};a.prototype.$22=function(a){a="_15_a"+(a==="ordered-list-item"?" _15_e":"");return b("React").createElement("li",{className:a,onMouseDown:this.$14})};a.prototype.$23=function(a){a="_15_b"+(a==="blockquote"?" _15_e":"");return b("React").createElement("li",{className:a,onMouseDown:this.$15})};a.prototype.$24=function(a){a="_15_c"+(a==="code-block"?" _15_e":"");return b("React").createElement("li",{className:a,onMouseDown:this.$16})};a.prototype.$25=function(){return!this.props.canAttachEmbed?null:b("React").createElement("li",{className:"_15_o",onMouseDown:this.$17},l.embed)};a.prototype.$26=function(){var a="_15_r";return b("React").createElement("li",{className:a,onMouseDown:this.$9},l.photo)};a.prototype.$27=function(){if(!this.props.canAttachVideo)return null;var a="_15_s";return b("React").createElement("li",{className:a,onMouseDown:this.$18},l.video)};a.prototype.renderLayers=function(){var a=this.$10(),c=this.$6();return b("ReactFragment").create({attach:b("React").createElement(b("XUIContextualDialog.react"),{autoFocus:!1,contextRef:function(){return this.refs.attach}.bind(this),hoverContextRef:function(){return this.refs.attach}.bind(this),hoverHideDelay:0,alignment:"center",offsetY:-2,behaviors:k,shown:a&&this.state.visibleMenu===j.ATTACH},b("React").createElement(b("XUIContextualDialogBody.react"),null,b("React").createElement("ul",{className:"_15_t clearfix"},this.$26(),this.$27(),this.$25()))),style:b("React").createElement(b("XUIContextualDialog.react"),{autoFocus:!1,contextRef:function(){return this.refs.style}.bind(this),hoverContextRef:function(){return this.refs.style}.bind(this),hoverHideDelay:40,alignment:"center",behaviors:k,shown:a&&this.state.visibleMenu===j.STYLE},b("React").createElement(b("XUIContextualDialogBody.react"),null,b("React").createElement("ul",{className:"_15_u clearfix"},this.$19(c),this.$20(c),this.$21(c),this.$22(c),this.$23(c),this.$24(c))))})};a.prototype.render=function(){var a="_15_v"+(this.$10()?" _15_w":"");return b("React").createElement("span",null,b("React").createElement("div",{className:a,ref:"container"},b("React").createElement("div",{className:"_40eu"},this.$8())),this.renderLayers())};a.propTypes={editorState:c.instanceOf(b("EditorState")).isRequired,compositionID:c.string.isRequired,onToggleBlockType:c.func.isRequired,onAddPhoto:c.func.isRequired,onAddVideo:c.func.isRequired,onCancelPhoto:c.func.isRequired,ownerID:c.string.isRequired,isPageStory:c.bool};function m(a,b){b=b.createEntity("EMBED","IMMUTABLE",a);return b.getLastCreatedEntityKey()}function n(a,b){b=b.createEntity("IMAGE","IMMUTABLE",a);return b.getLastCreatedEntityKey()}function o(a,b){b=b.createEntity("VIDEO","IMMUTABLE",a);return b.getLastCreatedEntityKey()}e.exports=a}),null);
__d("RichTextEditorMarkdownUtil",["CharacterMetadata","ContentBlock","ContentState","DraftModifier","EditorState","SelectionState","distinctArrayBy","flattenArray","generateRandomKey","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=4,h=[{text:"# ",type:"header-one"},{text:"## ",type:"header-two"},{text:"* ",type:"unordered-list-item"},{text:"- ",type:"unordered-list-item"},{text:"+ ",type:"unordered-list-item"},{text:"1. ",type:"ordered-list-item"},{text:"1) ",type:"ordered-list-item"},{text:"> ",type:"blockquote"},{text:"```",type:"code-block"},{text:"    ",type:"code-block"},{text:"[] ",type:"checkbox-list-item",data:{isChecked:!1}},{text:"[ ] ",type:"checkbox-list-item",data:{isChecked:!1}},{text:"[x] ",type:"checkbox-list-item",data:{isChecked:!0}},{text:"[X] ",type:"checkbox-list-item",data:{isChecked:!0}}];function i(a){var c,d=(c=a==null?void 0:a.enableCheckboxes)!=null?c:!1;a=(c=a==null?void 0:a.markdownReplacementOverrides)!=null?c:[];return b("distinctArrayBy")([].concat(a,h),function(a){a=a.text;return a}).filter(function(a){a=a.type;return a!="ignore"&&(d?!0:a!=="checkbox-list-item")})}function j(a,c,d){d===void 0&&(d=c);a=a.getSelection().getAnchorKey();return new(b("SelectionState"))({anchorKey:a,anchorOffset:c,focusKey:a,focusOffset:d,isBackward:!1,hasFocus:!1})}function k(a,c){var d=a.getCurrentContent();a=j(a,0,c.text.length);d=b("DraftModifier").replaceText(b("DraftModifier").setBlockType(d,a,c.type),a,"");return c.type==="checkbox-list-item"?b("DraftModifier").setBlockData(d,a,b("immutable").Map(c.data)):d}var l="replaced-markdown-text-with-block-style";function m(a,c){__p&&__p();var d=a.getSelection(),e=a.getCurrentContent().getBlockForKey(a.getSelection().getStartKey());c=i(c);if(d.isCollapsed()&&d.getStartOffset()<=g&&e.getType()==="unstyled")for(var c=c,f=Array.isArray(c),h=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(f){if(h>=c.length)break;m=c[h++]}else{h=c.next();if(h.done)break;m=h.value}m=m;if(d.getStartOffset()===m.text.length&&e.getText().startsWith(m.text))return b("EditorState").forceSelection(b("EditorState").push(a,k(a,m),l),j(a,0))}return null}function a(a,c){__p&&__p();var d=i(c);c=b("flattenArray")(a.getCurrentContent().getBlocksAsArray().map(function(a){__p&&__p();for(var c=d,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;if(a.getText().startsWith(g.text)){var h=a.getText().substring(g.text.length);return new(b("ContentBlock"))({key:b("generateRandomKey")(),type:g.type,text:h,characterList:b("immutable").List(b("immutable").Repeat(b("CharacterMetadata").EMPTY,h.length)),depth:0,data:b("immutable").Map(g.type==="checkbox-list-item"?g.data:{})})}}return a}));return b("EditorState").createWithContent(b("ContentState").createFromBlockArray(c))}function c(a,b){return a.getLastChangeType()==="insert-characters"?m(a,b):null}function d(a,c){__p&&__p();a=a==="backspace"||a==="backspace-word"||a==="backspace-to-start-of-line";if(!a)return null;a=c.getLastChangeType()===l;if(!a)return null;a=c.getSelection().isCollapsed()&&c.getSelection().getStartOffset()===0;if(!a)return null;a=c.getUndoStack().size&&c.getSelection().getStartKey()===c.getUndoStack().first().getSelectionAfter().getStartKey();return!a?null:b("EditorState").undo(c)}e.exports={_getReplacements_FOR_TESTING_USE_ONLY:i,_textToBlockStyle_FOR_TESTING_USE_ONLY:m,blockStyleToText:d,formatWithStyles:a,textToBlockStyle:c}}),null);
__d("RichComposedTextEditor.react",["cssVar","cx","AbstractMentionsTextEditor.react","AtomicBlockUtils","CampfireCharacters","CampfireCommands","DraftModifier","EditorState","MentionsLayer.react","React","RichComposedTextEditorBlock.react","RichComposedTextEditorInlineStyleMenu.react","RichComposedTextEditorMenu.react","RichTextEditorMarkdownUtil","RichTextEditorUtil","XUITypeaheadView.react","createMentionEntityForContentState","isSoftNewlineEvent","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=b("CampfireCharacters").EMBED,k=b("CampfireCharacters").PHOTO,l=b("CampfireCharacters").VIDEO,m=4,n={CODE:{backgroundColor:"#f6f7f9",fontFamily:"Menlo, Consolas, Monaco, monospace",fontSize:"14px",padding:4}};d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){this.props.onChange(b("RichTextEditorUtil").onTab(a,this.props.editorState,m))}.bind(this),this.$2=function(a,c){__p&&__p();if(this.props.handleContentReturn&&this.props.handleContentReturn(a,c))return!0;if(b("isSoftNewlineEvent")(a)){this.props.onChange(b("RichTextEditorUtil").insertSoftNewline(c));return!0}a=b("RichTextEditorUtil").tryToRemoveBlockStyle(c);if(a){this.props.onChange(b("EditorState").push(c,a,"change-block-type"));return!0}a=o(c);if(a){this.props.onChange(b("EditorState").push(c,a,"change-block-type"));return!0}return!1}.bind(this),this.$3=function(a,c){__p&&__p();if(a===b("CampfireCommands").SAVE_DRAFT){this.props.onSave();return"handled"}else if(a===b("CampfireCommands").TOGGLE_LINK){var d=this.refs.inlineStyleMenu;return d.toggleLink()}else{d=b("RichTextEditorMarkdownUtil").blockStyleToText(a,c);if(d){this.props.onChange(d);return"handled"}}d=b("RichTextEditorUtil").handleKeyCommand(c,a);if(d){this.props.onChange(d);return"handled"}return"not-handled"}.bind(this),this.$4=function(a){this.props.onChange(b("RichTextEditorMarkdownUtil").textToBlockStyle(a)||a)}.bind(this),this.$5=function(a){this.props.onChange(b("RichTextEditorUtil").toggleBlockType(this.props.editorState,a))}.bind(this),this.$6=function(a){this.props.onChange(b("RichTextEditorUtil").toggleInlineStyle(this.props.editorState,a))}.bind(this),this.$7=function(){var a=this.props.editorState;this.props.onChange(b("RichTextEditorUtil").toggleLink(a,a.getSelection(),null))}.bind(this),this.$8=function(a,c){this.props.onChange(b("RichTextEditorUtil").toggleLink(this.props.editorState,a,c))}.bind(this),this.$9=function(a){this.props.onChange(b("EditorState").forceSelection(this.props.editorState,a))}.bind(this),this.$10=function(a,c){if(this.props.canAttachPhoto){var d=b("EditorState").forceSelection(this.props.editorState,a);return this.$11(d,c)?"handled":"not-handled"}else if(this.props.handleDroppedFiles)return this.props.handleDroppedFiles(a,c)?"handled":"not-handled";return"not-handled"}.bind(this),this.$12=function(a){if(this.props.canAttachPhoto)return this.$11(this.props.editorState,a)?"handled":"not-handled";else if(this.props.handlePastedFiles)return this.props.handlePastedFiles(a)?"handled":"not-handled";return"not-handled"}.bind(this),this.$13=function(a){this.props.onChange(q(this.props.editorState,a,k))}.bind(this),this.$14=function(a){this.props.onChange(q(this.props.editorState,a,l))}.bind(this),this.$15=function(a){this.props.onChange(q(this.props.editorState,a,j))}.bind(this),this.$16=function(){this.props.onChange(b("EditorState").forceSelection(this.props.editorState,this.props.editorState.getSelection()))}.bind(this),this.focus=function(){this.refs.inlineStyleMenu.reset(),this.refs.editor.focus()}.bind(this),c}a.prototype.$11=function(a,c){__p&&__p();var d=c[0];if(!d||d.type!="image/png"&&d.type!="image/jpeg")return!1;c=new FileReader();c.onload=function(c){__p&&__p();c=c.target.result;var e=new Image();e.src=c;e.onload=function(){var e=this.props.compositionID,c={photo:d};c={files:c,compositionID:e};e=this.props.editorState.getCurrentContent();e=e.createEntity("IMAGE","IMMUTABLE",c);c=e.getLastCreatedEntityKey();e=b("EditorState").set(a,{currentContent:e});this.props.onChange(q(e,c,k))}.bind(this)}.bind(this);c.readAsDataURL(d);return!0};a.prototype.blur=function(){this.refs.editor.blur()};a.prototype.shouldComponentUpdate=function(a){return a.editorState!==this.props.editorState||a.readOnly!==this.props.readOnly||a.className!==this.props.className};a.prototype.render=function(){__p&&__p();var a=this.props.editorState.getCurrentContent(),c=!1;if(!a.hasText()){a=a.getBlockMap().first().getType();c=a!=="unstyled"}a=b("joinClasses")(this.props.className,"_4u4d"+(c?" _4u4e":""));c=null;var d=null;this.props.readOnly||(c=b("React").createElement(b("RichComposedTextEditorMenu.react"),{editorState:this.props.editorState,canAttachVideo:this.props.canAttachVideo,canAttachPhoto:this.props.canAttachPhoto,canAttachEmbed:this.props.canAttachEmbed,compositionID:this.props.compositionID,onToggleBlockType:this.$5,onAddEmbed:this.$15,onAddPhoto:this.$13,onAddVideo:this.$14,onCancelPhoto:this.$16,ownerID:this.props.ownerID,isPageStory:this.props.isPageStory}),d=b("React").createElement(b("RichComposedTextEditorInlineStyleMenu.react"),{ref:"inlineStyleMenu",editorState:this.props.editorState,onToggle:this.$6,onRemoveLink:this.$7,onAddLink:this.$8,onCancelLink:this.$9}));var e=this.props,f=e.editorState;e.handleDroppedFiles;e.handlePastedFiles;e=babelHelpers.objectWithoutProperties(e,["editorState","handleDroppedFiles","handlePastedFiles"]);return b("React").createElement("div",{className:a,onClick:this.focus,role:"presentation"},b("React").createElement(b("AbstractMentionsTextEditor.react"),babelHelpers["extends"]({},e,{ref:"editor",editorState:f,blockRendererFn:this.props.blockRendererFn,customStyleMap:this.props.customStyleMap||n,mentionResultsComponent:b("MentionsLayer.react"),blockStyleFn:r,blockComponent:b("RichComposedTextEditorBlock.react"),onTab:this.$1,handleKeyCommand:this.$3,handleContentReturn:this.$2,handleDroppedFiles:this.$10,handlePastedFiles:this.$12,onChange:this.$4})),c,d)};a.propTypes={editorState:c.instanceOf(b("EditorState")).isRequired,canAttachVideo:c.bool,canAttachPhoto:c.bool,canAttachEmbed:c.bool,blockRendererFn:c.func,onSave:c.func.isRequired,ownerID:c.string.isRequired,isPageStory:c.bool,customStyleMap:c.object};a.defaultProps={mentionResultsProps:{typeaheadView:b("XUITypeaheadView.react")},mentionCreationForContentStateFn:b("createMentionEntityForContentState")};function o(a){var c=a.getSelection(),d=c.getAnchorOffset();a=a.getCurrentContent();var e=a.getBlockForKey(c.getAnchorKey());if(c.isCollapsed()&&e.getLength()===d&&p(e.getType())){d=b("DraftModifier").splitBlock(a,c);return b("DraftModifier").setBlockType(d,d.getSelectionAfter(),"unstyled")}return null}function p(a){return a==="blockquote"||a==="header-one"||a==="header-two"}function q(a,c,d){return b("AtomicBlockUtils").insertAtomicBlock(a,c,d)}function r(a){a=a.getType();return"_2cuy"+(a==="unstyled"?" _3dgx":"")+(a==="blockquote"?" _509u":"")+(a==="header-one"?" _509y":"")+(a==="header-two"?" _50a1":"")+(a==="code-block"?" _19ii":"")+(a==="unordered-list-item"?" _509q":"")+(a==="ordered-list-item"?" _509s":"")+(a==="atomic"?" _4nuy":"")}e.exports=a}),null);