if (self.CavalryLogger) { CavalryLogger.start_js(["I5IFK"]); }

__d("AdsSponsoredMessageUtils",["AdsAPIAdgroupObjectStorySpecRecord","AdsAPIAdgroupPaths","AdsAPIBidStrategies","AdsAPIBillingEvents","AdsAPICampaignPaths","AdsAPIMessengerPosition","AdsAPIObjectives","AdsAPIOptimizationGoals","AdsAPITargetFields","AdsCallToActionTypes","AdsCampaignUtils","AdsCFAdgroupPluginConstants","AdsMessengerBidAmountUtils","AdsMessengerConstants","AdsMessengerPlacementUtils","AdsMessengerReducerUtils","AdsPlacementAPISpecReaderUtils","AdsPromotedObjectTypes","ApiAdCreativeFields","ApiAdCreativeStorySpecFields","ApiAdObjectTypes","ApiCallToActionFields","ApiObjectStorySpecLinkFields","CallToActionAppDestination","CallToActionValueFields","getByPath","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsPlacementAPISpecReaderUtils").convertCampaignToPlacementSpec,h=b("AdsCFAdgroupPluginConstants").EMPTY_ADGROUP_WITH_OBJECT_STORY_SPEC,i={isNewVersionSponsoredMessage:function(a,c){return b("AdsCampaignUtils").isMessengerThreadSelected(c)},getDefaultImageObjectStorySpec:function(){var a,c,d,e,f;return new(b("AdsAPIAdgroupObjectStorySpecRecord"))((f={},f[b("ApiAdCreativeFields").OBJECT_STORY_SPEC]=(e={},e[b("ApiAdCreativeStorySpecFields").LINK_DATA]=(d={},d[b("ApiObjectStorySpecLinkFields").CALL_TO_ACTION]=(c={},c[b("ApiCallToActionFields").VALUE]=(a={},a[b("CallToActionValueFields").APP_DESTINATION]=b("CallToActionAppDestination").MESSENGER,a),c[b("ApiCallToActionFields").TYPE]=b("AdsCallToActionTypes").TYPES.MESSAGE_PAGE.name,c),d[b("ApiObjectStorySpecLinkFields").LINK]=b("AdsMessengerConstants").EMPTY_MESSENGER_LINK,d),e),f))},isMessengerSponsoredMessageSelectedFromCampaign:function(a){if(!a)return!1;a=g(a);return b("AdsMessengerPlacementUtils").isMessengerThreadSelected(a)},isMessengerSponsoredMessageAndPageSelected:function(a){a=a.toJS();var c=a.targeting;a=a.promoted_object;return a!=null&&a.page_id&&c.messenger_positions!=null&&Array.isArray(c.messenger_positions)&&c.messenger_positions.length>0&&c.messenger_positions[0]===b("AdsAPIMessengerPosition").MESSENGER_THREAD},setOptimizationForSponsoredMessage:function(a,c,d){return a.setIn(b("AdsAPICampaignPaths").IS_AUTOBID,!1).setIn(b("AdsAPICampaignPaths").BILLING_EVENT,b("AdsAPIBillingEvents").IMPRESSIONS).setIn(b("AdsAPICampaignPaths").OPTIMIZATION_GOAL,b("AdsAPIOptimizationGoals").IMPRESSIONS).setIn(b("AdsAPICampaignPaths").BID_AMOUNT,b("AdsMessengerBidAmountUtils").getDefaultBidAmount(c,d))},setOptimizationForMessengerPromotedObject:function(a,c){if(c===b("AdsAPIObjectives").MESSAGES){c=a.setIn(b("AdsAPICampaignPaths").IS_AUTOBID,!0).setIn(b("AdsAPICampaignPaths").BILLING_EVENT,b("AdsAPIBillingEvents").IMPRESSIONS).setIn(b("AdsAPICampaignPaths").OPTIMIZATION_GOAL,b("AdsAPIOptimizationGoals").REPLIES).deleteIn(b("AdsAPICampaignPaths").BID_AMOUNT);return b("AdsCampaignUtils").isCampaignGroupBudget(c)?c:c.setIn(b("AdsAPICampaignPaths").BID_STRATEGY,b("AdsAPIBidStrategies").LOWEST_COST_WITHOUT_CAP)}return a},isPromotedObjectTypeSponsoredMessage:function(a,c){return c===b("AdsAPIObjectives").MESSAGES&&a===b("AdsPromotedObjectTypes").SPONSORED_MESSAGES},getDefaultAdgroupSpecForSponsoredMessage:function(a){return h.deleteIn(b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.path).setIn(b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_TYPE,b("ApiAdObjectTypes").SHARE).setIn(b("AdsAPIAdgroupPaths").CREATIVE.MESSENGER_SPONSORED_MESSAGE,b("AdsMessengerReducerUtils").getDefaultMessengerSponsoredMessage()).setIn(b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_ID,b("getByPath")(a,b("AdsAPICampaignPaths").PROMOTED_OBJECT.PAGE_ID))},removeGeoLocationsForSponsoredMessage:function(a){return a.deleteIn(b("AdsAPICampaignPaths").TARGETING.GEO_LOCATIONS.COUNTRIES)},setBidForSponsoredMessage:function(a){return a.setIn(b("AdsAPICampaignPaths").BID_STRATEGY,b("AdsAPIBidStrategies").LOWEST_COST_WITH_BID_CAP)},isTargetingSpecSponsoredMessage:function(a){a=a[b("AdsAPITargetFields").MESSENGER_POSITIONS];return!!a&&a.includes(b("AdsAPIMessengerPosition").MESSENGER_THREAD)},setCountryForMessengerPromotedObject:function(a,c){return c&&!b("getByPath")(a,b("AdsAPICampaignPaths").TARGETING.GEO_LOCATIONS.COUNTRIES)?a.setIn(b("AdsAPICampaignPaths").TARGETING.GEO_LOCATIONS.COUNTRIES,b("immutable").List([c])):a},someAreSponsoredMessages:function(a){return a.getValues().some(function(a){return a===b("AdsPromotedObjectTypes").SPONSORED_MESSAGES})},isSponsoredMessageFromSpec:function(a){return!!b("getByPath")(a,b("AdsAPIAdgroupPaths").CREATIVE.MESSENGER_SPONSORED_MESSAGE)},setDefaultBudgetForMessengerPromotedObject:function(a,c,d){var e=b("AdsCampaignUtils").getDefaultStartDate();return a.setIn(b("AdsAPICampaignPaths").DAILY_BUDGET,d).setIn(b("AdsAPICampaignPaths").LIFETIME_BUDGET,0).setIn(b("AdsAPICampaignPaths").START_TIME,b("AdsCampaignUtils").getISODateTimeString(e,c)).deleteIn(b("AdsAPICampaignPaths").END_TIME)},setDefaultBudgetForSponsoredMessage:function(a,c,d){var e=b("AdsCampaignUtils").getDefaultStartDate(),f=i.getDeliveryEndtimeForSponsoredMessage(e);return a.setIn(b("AdsAPICampaignPaths").DAILY_BUDGET,0).setIn(b("AdsAPICampaignPaths").LIFETIME_BUDGET,d).setIn(b("AdsAPICampaignPaths").START_TIME,b("AdsCampaignUtils").getISODateTimeString(e,c)).setIn(b("AdsAPICampaignPaths").END_TIME,b("AdsCampaignUtils").getISODateTimeString(f,c))},getDeliveryEndtimeForSponsoredMessage:function(a){var b=new Date(a);b.setDate(a.getDate()+7);return b}};e.exports=i}),null);