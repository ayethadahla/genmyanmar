if (self.CavalryLogger) { CavalryLogger.start_js(["fcSl6"]); }

__d("ReactComposerBreakingNewsBannerPreview.react",["ix","cx","fbt","Image.react","React","ReactComposerBreakingNewsUtils","ReactComposerLoggingName","ReactComposerScrapedAttachmentStore","ReactComposerTaggerActions","ReactComposerTaggerType","ReactDOM","ShimButton.react","Timestamp.react","Tooltip","Tooltip.react","asset","ifRequired"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=250,l=function(a){return b("React").createElement("div",{className:"_2j7-"},b("React").createElement("div",{className:"___a"},b("React").createElement("div",{className:"_roq ___f _ror"},b("ReactComposerBreakingNewsUtils").getBreakingLabelFBT()),b("React").createElement("div",{className:"_roq ___n _ror"},a.breakingSince?b("React").createElement(b("Timestamp.react"),{key:"timestamp",autoUpdate:!0,time:a.breakingSince,shorten:!0}):b("ReactComposerBreakingNewsUtils").getBreakingNowFBT())))};c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$5=function(a){a.preventDefault(),b("ReactComposerTaggerActions").selectTagger(this.props.composerID,b("ReactComposerLoggingName").BREAKING_NEWS,b("ReactComposerTaggerType").BREAKING_NEWS)}.bind(this),this.$8=function(){if(!this.$2)return;b("Tooltip").show(b("ReactDOM").findDOMNode(this.$2))}.bind(this),c}a.prototype.$4=function(){__p&&__p();var a=b("ReactComposerScrapedAttachmentStore").getMarkup(this.props.composerID);if(!a||typeof a.getRootNode!=="function")return null;var c=a.parentElement;if(!c)return null;a=null;b("ifRequired")("LitestandShareAttachment",function(b){a=b.getDetailsBreakingNewsPlaceholder(c)});return a};a.prototype.$6=function(){if(!this.$1)return;this.$1=!1;this.$7()};a.prototype.$7=function(){this.$3=setTimeout(this.$8,k)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=this.props.taggerData.expirationTime;a=a.taggerData.expirationTime;a!==0&&a!==b&&(this.$1=!0)};a.prototype.componentDidMount=function(){this.$7()};a.prototype.componentDidUpdate=function(){this.$6()};a.prototype.componentWillUnmount=function(){clearTimeout(this.$3)};a.prototype.render=function(){__p&&__p();var a=this.$4();if(!a)return null;var c=this.props.taggerData;if(!c.expirationTime)return null;c=b("ReactComposerBreakingNewsUtils").getFBTForSeconds(c.expirationTime);c=i._("Marked as breaking news for {time}",[i._param("time",c)]);c=b("React").createElement(b("Tooltip.react"),{tooltip:c,alignH:"center",display:"block",ref:function(a){return this.$2=a}.bind(this),className:"lfloat"},b("React").createElement(l,{breakingSince:this.props.taggerData.breakingSince}));var d=b("React").createElement("div",{className:"_2j7_"},b("React").createElement(b("Image.react"),{src:g("477825")}));c=b("React").createElement("div",{className:"clearfix _2j7z"},b("React").createElement(b("ShimButton.react"),{form:"link",onClick:this.$5},c,d));return b("ReactDOM").createPortal(c,a)};e.exports=a}),null);
__d("ReactComposerBreakingNewsButton.react",["cx","React","ReactComposerBreakingNewsUtils","ReactComposerLoggingName","ReactComposerTaggerButtonMixin","ReactComposerTaggerType"],(function(a,b,c,d,e,f,g){"use strict";a=b("React").createClass({displayName:"ReactComposerBreakingNewsButton",mixins:[b("ReactComposerTaggerButtonMixin")],statics:{taggerID:b("ReactComposerTaggerType").BREAKING_NEWS,loggingName:b("ReactComposerLoggingName").BREAKING_NEWS},getTitle:function(){return b("ReactComposerBreakingNewsUtils").getDefaultTooltip(this.context.composerID)},getTooltip:function(){return b("ReactComposerBreakingNewsUtils").getDefaultTooltip(this.context.composerID)},getClassName:function(){return"_r2r"},getRef:function(){return"fbReactComposerBreakingTaggerButton"}});e.exports=a}),null);
__d("ReactComposerBreakingNewsComponent.react",["cx","Grid.react","ReactComposerBreakingNewsUtils","ReactComposerTaggerPresenter","ReactComposerTaggerViewStyles","React","XUITypeahead.react","emptyFunction"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("Grid.react").GridItem;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={selectedEntry:null,query:"",searchSource:this.props.searchSource},this.$4=function(a,event){this.setState({selectedEntry:a,query:a.getTitle()}),this.props.onSelect&&this.props.onSelect(a)}.bind(this),this.$2=function(event){this.setState({query:event.target.value})}.bind(this),this.$1=function(event){this.$3()}.bind(this),this.$3=function(){this.setState({selectedEntry:null,query:""}),this.props.onClear&&this.props.onClear()}.bind(this),b}a.prototype.componentDidMount=function(){"use strict";var a=this.getSearchableEntry();this.setState({selectedEntry:a,query:a?a.getTitle():""})};a.prototype.render=function(){"use strict";return b("React").createElement(b("Grid.react"),{cols:2,className:"_5esl"},b("React").createElement(i,{key:"label",className:"_5esm"},this.props.selectLabel),b("React").createElement(i,{key:"tokenizer",className:"_5esw"},b("React").createElement("div",null,b("React").createElement(b("XUITypeahead.react"),{alwaysShowPlaceholder:!0,className:"_5esx _45om",clearable:!0,focusedOnInit:this.props.autoFocus,highlightOnSelect:!0,initialEntry:this.state.selectedEntry,onBackspace:this.$1,onChange:this.$2,onClear:this.$3,onSelectAttempt:this.$4,placeholder:this.props.selectPlaceholder,presenter:this.$5(),queryString:this.state.query,searchSource:this.state.searchSource,selectedEntry:this.state.selectedEntry,showEntriesOnFocus:!0,tallInput:!1}))))};a.prototype.$5=function(){"use strict";var a={taggerViewStyle:b("ReactComposerTaggerViewStyles").DEFAULT};return Object.assign({},b("ReactComposerTaggerPresenter"),{layerPosition:this.props.layerPosition||void 0,extraRendererProps:a,maxEntries:20})};a.prototype.getSearchableEntry=function(){"use strict";var a=null,c=this.props,d=c.expirationTime;c=c.searchSource;c&&d>0&&c.searchImpl(b("ReactComposerBreakingNewsUtils").getFBTForSeconds(d).toString(),function(b,c,d){b&&(a=b[0])},null);return a};a.propTypes={autoFocus:c.bool,composerID:c.string,selectPlaceholder:c.object,selectLabel:c.object,onSelect:c.func,onClear:c.func,expirationTime:c.number,searchSource:c.object};a.defaultProps={autoFocus:!0,composerID:"",onSelect:b("emptyFunction"),onClear:b("emptyFunction"),expirationTime:0,searchSource:null};e.exports=a}),null);
__d("ReactComposerBreakingNewsStringUtils",["fbt","FbtResultBase"],(function(a,b,c,d,e,f,g){"use strict";a={getSelectorPlaceholder:function(){return g._("How long?")},getSelectorLabel:function(){return g._("Breaking news for")}};e.exports=a}),null);
__d("ReactComposerBreakingNewsContainer.react",["cx","CurrentUser","React","ReactComposerBreakingNewsBannerPreview.react","ReactComposerBreakingNewsComponent.react","ReactComposerBreakingNewsComponentConfig","ReactComposerBreakingNewsStringUtils","ReactComposerBreakingNewsUtils","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","ReactComposerTaggerStore","ReactComposerTaggerType","XUINotice.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").createClass({displayName:"ReactComposerBreakingNewsContainer",statics:{taggerID:b("ReactComposerTaggerType").BREAKING_NEWS,loggingName:b("ReactComposerLoggingName").BREAKING_NEWS,enableHideOnEscape:!0,webDriverTestID:"breaking-news-tagger-component"},mixins:[b("ReactComposerTaggerContainerStateMixin")()],render:function(){__p&&__p();var a=this.state,c=a.isSelected;a=a.taggerData;var d=a.isAttachmentBreaking;a=a.expirationTime;var e=null;c&&(e=b("React").createElement("div",{"data-testid":this.constructor.webDriverTestID},b("React").createElement(b("ReactComposerBreakingNewsComponent.react"),{autoFocus:this.state.autoFocus,composerID:this.context.composerID,expirationTime:a,onSelect:this._onSelect,onClear:this._onClear,selectPlaceholder:b("ReactComposerBreakingNewsStringUtils").getSelectorPlaceholder(),selectLabel:b("ReactComposerBreakingNewsStringUtils").getSelectorLabel(),searchSource:this._getSearchSource()})));var f=null,g=null,h=null;if(d&&a){f=b("React").createElement(b("ReactComposerBreakingNewsBannerPreview.react"),{composerID:this.context.composerID,taggerData:this.state.taggerData});var i=b("ReactComposerBreakingNewsUtils").getInfoDisplay(this.context.composerID);i&&(g=b("React").createElement("div",{className:"_2ph-"},b("React").createElement(b("XUINotice.react"),{use:i[0],size:"small"},i[1])))}b("CurrentUser").isEmployee()&&(c||d&&a)&&(h=b("React").createElement("div",{className:"_4l_j"},b("React").createElement(b("XUINotice.react"),{use:"warn",style:{fontWeight:"bolder"}},"[FB-Only] BE CAREFUL! This will change the breaking status in prod even if you are on a FB-Only test page. Do not use unless you know what you are doing.")));return b("React").createElement("div",null,h,e,f,g)},_onSelect:function(a){this._onTaggerDataChanged({isAttachmentBreaking:!0,expirationTime:Number(a.getUniqueID()),breakingSince:this.state.taggerData.breakingSince})},_onClear:function(){this._onTaggerDataChanged({isAttachmentBreaking:!0,expirationTime:0,breakingSince:this.state.taggerData.breakingSince})},_onTaggerDataChanged:function(a){b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,this.constructor.loggingName,this.constructor.taggerID,a),a.expirationTime>0&&b("ReactComposerTaggerActions").deselectCurrentTagger(this.context.composerID,this.constructor.loggingName)},_getSearchSource:function(){var a=b("ReactComposerTaggerStore").getTaggersConfig(this.context.composerID,b("ReactComposerTaggerType").BREAKING_NEWS);a=a?a.breakingSince:0;var c=b("ReactComposerBreakingNewsComponentConfig").expirationIntervalInSecs,d=b("ReactComposerBreakingNewsComponentConfig").expirationMaxInSecs;return b("ReactComposerBreakingNewsUtils").getSearchSource(c,d,a)}});e.exports=a}),null);