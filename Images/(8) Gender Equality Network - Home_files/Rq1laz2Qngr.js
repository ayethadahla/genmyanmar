if (self.CavalryLogger) { CavalryLogger.start_js(["3H4xt"]); }

__d("AdsBlueTip.react",["cx","CSS","LayerFadeOnShow","React","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=1e3;d=b("LayerFadeOnShow").forDuration(c);var h={BlueTipFadeOnShow:d};f=b("React").createClass({displayName:"AdsBlueTip",propTypes:{behaviors:a.object,context:a.object.isRequired,highlightContext:a.bool,insertParent:a.object,shown:a.bool,useDarkMode:a.bool,onClose:a.func,onImpression:a.func},getDefaultProps:function(){return{shown:!0}},onClose:function(){this.props.onClose&&this.props.onClose()},UNSAFE_componentWillMount:function(){var a=this.props.context.getAttribute("tabIndex");this._contextHasTabIndex=!!a||a===0},UNSAFE_componentWillReceiveProps:function(a){var c=this.props,d=c.context,e=c.highlightContext;c=c.shown;a.context!==d&&e&&c&&b("CSS").removeClass(d,"_z8p")},componentDidMount:function(){this._removeTabIndex(),this.props.onImpression&&this.props.onImpression()},componentDidUpdate:function(){window.setTimeout(this._removeTabIndex,0)},componentWillUnmount:function(){b("CSS").removeClass(this.props.context,"_z8p")},_removeTabIndex:function(){this.isMounted()&&!this._contextHasTabIndex&&this.props.context.removeAttribute("tabIndex")},renderLayers:function(){var a=this.props.behaviors?this.props.behaviors:h;return b("React").createElement(b("XUIAmbientNUX.react"),babelHelpers["extends"]({},this.props,{behaviors:a,onCloseButtonClick:this.onClose,key:"blueTip"}),this.props.children)},render:function(){this.props.highlightContext&&this.props.shown?b("CSS").addClass(this.props.context,"_z8p"):b("CSS").removeClass(this.props.context,"_z8p");return b("React").createElement("span",null,this.renderLayers())}});e.exports=f}),null);
__d("AdsMessengerJSONPaths",["AdsMessengerJSONFields","AdsMessengerWelcomeMessageFields","generatePaths"],(function(a,b,c,d,e,f){"use strict";a=[{pathKeys:[],expandsTo:b("AdsMessengerWelcomeMessageFields")},{pathKeys:["MESSAGE"],expandsTo:{ATTACHMENT:"attachment",QUICK_REPLIES:"quick_replies",TEXT:"text"}},{pathKeys:["TEXT_FORMAT"],expandsTo:{CUSTOMER_ACTION_TYPE:"customer_action_type",MESSAGE:"message"}},{pathKeys:["IMAGE_FORMAT"],expandsTo:{CUSTOMER_ACTION_TYPE:"customer_action_type",MESSAGE:"message"}},{pathKeys:["VIDEO_FORMAT"],expandsTo:{CUSTOMER_ACTION_TYPE:"customer_action_type",MESSAGE:"message"}},{pathKeys:["MESSAGE","ATTACHMENT"],expandsTo:{PAYLOAD:"payload",TYPE:"type"}},{pathKeys:["TEXT_FORMAT","MESSAGE"],expandsTo:{ATTACHMENT:"attachment",QUICK_REPLIES:"quick_replies",TEXT:"text",SECOND_TEXT:"second_text",ICE_BREAKERS:"ice_breakers"}},{pathKeys:["IMAGE_FORMAT","MESSAGE"],expandsTo:{ATTACHMENT:"attachment",QUICK_REPLIES:"quick_replies",TEXT:"text"}},{pathKeys:["VIDEO_FORMAT","MESSAGE"],expandsTo:{ATTACHMENT:"attachment",QUICK_REPLIES:"quick_replies",TEXT:"text"}},{pathKeys:["MESSAGE","ATTACHMENT","PAYLOAD"],expandsTo:b("AdsMessengerJSONFields")},{pathKeys:["TEXT_FORMAT","MESSAGE","ATTACHMENT"],expandsTo:{PAYLOAD:"payload",TYPE:"type"}},{pathKeys:["IMAGE_FORMAT","MESSAGE","ATTACHMENT"],expandsTo:{PAYLOAD:"payload",TYPE:"type"}},{pathKeys:["VIDEO_FORMAT","MESSAGE","ATTACHMENT"],expandsTo:{PAYLOAD:"payload",TYPE:"type"}},{pathKeys:["TEXT_FORMAT","MESSAGE","ATTACHMENT","PAYLOAD"],expandsTo:b("AdsMessengerJSONFields")},{pathKeys:["IMAGE_FORMAT","MESSAGE","ATTACHMENT","PAYLOAD"],expandsTo:b("AdsMessengerJSONFields")},{pathKeys:["VIDEO_FORMAT","MESSAGE","ATTACHMENT","PAYLOAD"],expandsTo:b("AdsMessengerJSONFields")}];c=b("generatePaths")(a);e.exports=c}),null);
__d("MessengerAttachmentFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHONE_NUMBER:"phone_number",WEB_URL:"web_url",EXTENSION:"extension",POSTBACK:"postback",ACCOUNT_LINK:"account_link",ACCOUNT_UNLINK:"account_unlink",PAGE_SHARE:"page_share",ELEMENT_SHARE:"element_share",PAYMENT:"payment",NESTED:"nested",GAME_PLAY:"game_play",OPEN_NATIVE:"open_native",BRANDED_CAMERA:"branded_camera",PAGE_FEEDBACK:"page_feedback"})}),null);
__d("MessengerAttachmentParamFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TYPE:"type",PAYLOAD:"payload",TITLE:"title",URL:"url",STICKER_ID:"sticker_id",IS_REUSABLE:"is_reusable",IMAGE_ASPECT_RATIO:"image_aspect_ratio",MESSENGER_STICKER_ID:"messenger_sticker_id"})}),null);
__d("AdsMessengerDataModelUtils",["invariant","AdsImageIDUtils","AdsMessengerJSONFields","AdsMessengerJSONMediaFormatType","AdsMessengerJSONPaths","AdsMessengerJSONTemplateType","AdsMessengerVisualEditorCustomerActionType","AdsMessengerVisualEditorLandingScreenType","AdsMessengerVisualEditorUtils","AdsMessengerWelcomeMessageFields","MessengerAttachmentFields","MessengerAttachmentParamFields","MessengerContentEditorSurface","deleteByPath","getByPath","mergeDeepInto","setByPath"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=(i={},i[b("AdsMessengerJSONFields").TYPE]=b("AdsMessengerJSONFields").TEMPLATE,i[b("AdsMessengerJSONFields").PAYLOAD]=(h={},h[b("AdsMessengerJSONFields").TEMPLATE_TYPE]=b("AdsMessengerJSONTemplateType").BUTTON,h[b("AdsMessengerJSONFields").ELEMENT_BUTTONS]=[null],h),i),k=(h={},h[b("AdsMessengerJSONFields").TITLE]=null,h);function l(a){var c={};b("mergeDeepInto")(c,a);return c}function m(a){return b("getByPath")(a,b("AdsMessengerJSONPaths").MEDIA_TYPE)}function n(a,c){var d=m(a);switch(d){case b("AdsMessengerJSONMediaFormatType").IMAGE:return b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.TEXT;case b("AdsMessengerJSONMediaFormatType").TEXT:return C(a)==b("MessengerContentEditorSurface").BUSINESS_TOOLS?b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.TEXT:c&&!V(a)?b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.TEXT:b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.TEXT;case b("AdsMessengerJSONMediaFormatType").VIDEO:return b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.TEXT;default:return null}}function o(a){var c=b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS;a=b("getByPath")(a,c);return a&&a[0]}function p(a){a=o(a);return a&&a.image_hash}function q(a){return a.landing_screen_type||b("AdsMessengerVisualEditorLandingScreenType").WELCOME_MESSAGE}function a(a,c){b("setByPath")(a,b("AdsMessengerJSONPaths").LANDING_SCREEN_TYPE,c);return a}function r(a,c){__p&&__p();var d=F(a),e=d||[null],f=B(a),g=f||[null],h=l(a);b("setByPath")(h,b("AdsMessengerJSONPaths").MEDIA_TYPE,b("AdsMessengerJSONMediaFormatType").TEXT);a=$(a);if(a===b("AdsMessengerVisualEditorCustomerActionType").QUICK_REPLIES||f){h=W(h,c);z(h);Y(h,a);return u(h,g)}else(a===b("AdsMessengerVisualEditorCustomerActionType").BUTTONS||d&&d.length)&&(V(h)&&(h=U(X(h,c)),z(h)),Y(h,a),b("setByPath")(h,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENT_BUTTONS,e));return h}function s(a){__p&&__p();var c=F(a),d=c||[null],e=B(a),f=e||[null],g=l(a),h=o(g)||{buttons:[]};a=$(a);b("setByPath")(g,b("AdsMessengerJSONPaths").MEDIA_TYPE,b("AdsMessengerJSONMediaFormatType").IMAGE);b("setByPath")(g,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.TYPE,"template");b("setByPath")(g,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.TEMPLATE_TYPE,b("AdsMessengerJSONTemplateType").GENERIC);b("setByPath")(g,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS,[h]);if(a===b("AdsMessengerVisualEditorCustomerActionType").QUICK_REPLIES||e){Y(g,b("AdsMessengerVisualEditorCustomerActionType").QUICK_REPLIES);return u(T(g),f)}else if(a===b("AdsMessengerVisualEditorCustomerActionType").BUTTONS||c){Y(g,b("AdsMessengerVisualEditorCustomerActionType").BUTTONS);h.buttons=d;b("setByPath")(g,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS,[h]);return U(g)}return g}function t(a,c){c=B(a);var d=c||[null];a=l(a);b("setByPath")(a,b("AdsMessengerJSONPaths").MEDIA_TYPE,b("AdsMessengerJSONMediaFormatType").VIDEO);b("setByPath")(a,b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.ATTACHMENT.TYPE,"video");Y(a,b("AdsMessengerVisualEditorCustomerActionType").QUICK_REPLIES);return c?u(a,d):a}function u(a,c){var d=v(a);if(!d)return a;a=l(a);!c.length?b("deleteByPath")(a,d):b("setByPath")(a,d,c);return a}function v(a){a=m(a);switch(a){case b("AdsMessengerJSONMediaFormatType").IMAGE:return b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.QUICK_REPLIES;case b("AdsMessengerJSONMediaFormatType").VIDEO:return b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.QUICK_REPLIES;case b("AdsMessengerJSONMediaFormatType").TEXT:return b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.QUICK_REPLIES;default:return null}}function c(a,c,d){var e=x(a),f=l(a);if(e){a=b("getByPath")(a,e);if(a&&a.length>c){a[c]=(c={},c[b("AdsMessengerJSONFields").TITLE]=d,c)}b("setByPath")(f,e,a)}return f}function d(a,c,d){var e=x(a),f=l(a);if(e){a=b("getByPath")(a,e);a&&a.length>c&&(a[c]=d);b("setByPath")(f,e,a)}return f}function f(a,c){var d=x(a);if(d){a=b("getByPath")(a,d);if(a&&a.length>c)return a[c].title}return null}function w(a,c){var d=x(a);if(d){a=b("getByPath")(a,d);if(a&&a.length>c)return a[c]||k}return k}function x(a){a=m(a);if(a===b("AdsMessengerJSONMediaFormatType").TEXT)return b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ICE_BREAKERS;else return null}function y(a){var c=m(a);if(c===b("AdsMessengerJSONMediaFormatType").TEXT)return b("getByPath")(a,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ICE_BREAKERS);else return null}function z(a){if(m(a)===b("AdsMessengerJSONMediaFormatType").TEXT){var c=x(a);c&&b("deleteByPath")(a,c)}}function A(a,c){c=n(a,c);return c?b("getByPath")(a,c):null}function B(a){var c=m(a);switch(c){case b("AdsMessengerJSONMediaFormatType").IMAGE:return b("getByPath")(a,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.QUICK_REPLIES);case b("AdsMessengerJSONMediaFormatType").VIDEO:return b("getByPath")(a,b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.QUICK_REPLIES);case b("AdsMessengerJSONMediaFormatType").TEXT:return b("getByPath")(a,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.QUICK_REPLIES);default:return null}}function C(a){return b("getByPath")(a,b("AdsMessengerJSONPaths").SURFACE)}function D(a){a=o(a);return a&&a.title}function E(a){a=o(a);return a&&a.subtitle}function F(a){var c=m(a);switch(c){case b("AdsMessengerJSONMediaFormatType").IMAGE:c=o(a);return c&&c.buttons;case b("AdsMessengerJSONMediaFormatType").TEXT:c=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENT_BUTTONS;return b("getByPath")(a,c);default:return null}}function G(a){var c=m(a);switch(c){case b("AdsMessengerJSONMediaFormatType").IMAGE:return b("getByPath")(a,[b("AdsMessengerWelcomeMessageFields").IMAGE_FORMAT,b("AdsMessengerJSONFields").MESSAGE,b("AdsMessengerJSONFields").ATTACHMENT,b("AdsMessengerJSONFields").PAYLOAD]);case b("AdsMessengerJSONMediaFormatType").TEXT:return b("getByPath")(a,[b("AdsMessengerWelcomeMessageFields").TEXT_FORMAT,b("AdsMessengerJSONFields").MESSAGE,b("AdsMessengerJSONFields").ATTACHMENT,b("AdsMessengerJSONFields").PAYLOAD]);case b("AdsMessengerJSONMediaFormatType").VIDEO:return b("getByPath")(a,[b("AdsMessengerWelcomeMessageFields").VIDEO_FORMAT,b("AdsMessengerJSONFields").MESSAGE,b("AdsMessengerJSONFields").ATTACHMENT,b("AdsMessengerJSONFields").PAYLOAD]);default:return null}}function H(a){var c=m(a);switch(c){case b("AdsMessengerJSONMediaFormatType").IMAGE:return b("getByPath")(a,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.TYPE);case b("AdsMessengerJSONMediaFormatType").TEXT:return b("getByPath")(a,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.TYPE);case b("AdsMessengerJSONMediaFormatType").VIDEO:return b("getByPath")(a,b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.ATTACHMENT.TYPE);default:return null}}function I(a){__p&&__p();a=p(a);if(!a)return null;a=a&&a.split(":");var c=a&&a[0];a=a&&a[1];if(!a||!c)return null;c=c.trim();a=a.trim();return b("AdsImageIDUtils").getImageID({accountID:c,hash:a})}function J(a){switch(q(a)){case b("AdsMessengerVisualEditorLandingScreenType").CTM_LEAD_GEN:return b("getByPath")(a,b("AdsMessengerJSONPaths").TEMPLATE_ID);case b("AdsMessengerVisualEditorLandingScreenType").CTM_LEAD_GEN_NEW:return b("getByPath")(a,b("AdsMessengerJSONPaths").CTM_LEAD_GEN_TEMPLATE_ID);case b("AdsMessengerVisualEditorLandingScreenType").WELCOME_MESSAGE:case b("AdsMessengerVisualEditorLandingScreenType").GET_STARTED:default:return null}}function K(a){var c=V(a)?b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.SECOND_TEXT:b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.TEXT;return b("getByPath")(a,c)}function L(a){a=b("getByPath")(a,b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ATTACHMENT_ID);return a?String(a):null}function M(a){__p&&__p();var c=m(a),d=F(a)||[];d.push(null);var e=null;switch(c){case b("AdsMessengerJSONMediaFormatType").IMAGE:c=o(a)||{};c.buttons=d;e=b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS;var f=l(a);b("setByPath")(f,e,[c]);return f;case b("AdsMessengerJSONMediaFormatType").TEXT:e=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENT_BUTTONS;c=l(a);b("setByPath")(c,e,d);return c;default:return a}}function N(a){__p&&__p();var c=B(a)||[];c.push(null);var d=m(a);switch(d){case b("AdsMessengerJSONMediaFormatType").IMAGE:d=l(a);b("setByPath")(d,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.QUICK_REPLIES,c);return d;case b("AdsMessengerJSONMediaFormatType").VIDEO:d=l(a);b("setByPath")(d,b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.QUICK_REPLIES,c);return d;case b("AdsMessengerJSONMediaFormatType").TEXT:d=l(a);b("setByPath")(d,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.QUICK_REPLIES,c);return d;default:return a}}function O(a,c,d){__p&&__p();d=d.getValue();var e=F(a)||[],f=m(a),g=null;switch(f){case b("AdsMessengerJSONMediaFormatType").IMAGE:f=o(a)||{};e[c]?(e[c].title=d,!d&&!e[c].url&&(e[c]=null)):e[c]={type:"web_url",url:"",title:d};f.buttons=e;e.length||delete f.buttons;g=b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS;var h=l(a);b("setByPath")(h,g,[f]);return h;case b("AdsMessengerJSONMediaFormatType").TEXT:e[c]?(e[c].title=d,!d&&!e[c].url&&(e[c]=null)):e[c]={type:"web_url",url:"",title:d};g=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENT_BUTTONS;f=l(a);!e.length?b("deleteByPath")(f,g):b("setByPath")(f,g,e);return f;default:return a}}function P(a,c,d){__p&&__p();d=d.getValue();var e,f=null,h=F(a)||[];c<=h.length||g(0,2111);var i=m(a),j=null;switch(i){case b("AdsMessengerJSONMediaFormatType").IMAGE:i=o(a)||{};var k=h[c];e=k?k.type:b("MessengerAttachmentFields").WEB_URL;f=k?k.title:"";if(e===b("MessengerAttachmentFields").WEB_URL){h[c]=(k={},k[b("MessengerAttachmentParamFields").TYPE]=b("MessengerAttachmentFields").WEB_URL,k[b("MessengerAttachmentParamFields").URL]=d,k[b("MessengerAttachmentParamFields").TITLE]=f,k)}else{h[c]=(k={},k[b("MessengerAttachmentParamFields").TYPE]=b("MessengerAttachmentFields").POSTBACK,k[b("MessengerAttachmentParamFields").PAYLOAD]=d,k[b("MessengerAttachmentParamFields").TITLE]=f,k)}!d&&!f&&(h[c]=null);i.buttons=h;h.length||delete i.buttons;j=b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS;k=l(a);b("setByPath")(k,j,[i]);return k;case b("AdsMessengerJSONMediaFormatType").TEXT:e=h[c]?h[c].type:b("MessengerAttachmentFields").WEB_URL;f=h[c]?h[c].title:"";if(e===b("MessengerAttachmentFields").WEB_URL){h[c]=(i={},i[b("MessengerAttachmentParamFields").TYPE]=b("MessengerAttachmentFields").WEB_URL,i[b("MessengerAttachmentParamFields").URL]=d,i[b("MessengerAttachmentParamFields").TITLE]=f,i)}else{h[c]=(k={},k[b("MessengerAttachmentParamFields").TYPE]=b("MessengerAttachmentFields").POSTBACK,k[b("MessengerAttachmentParamFields").PAYLOAD]=d,k[b("MessengerAttachmentParamFields").TITLE]=f,k)}!d&&!f&&(h[c]=null);j=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENT_BUTTONS;e=l(a);!h.length?b("deleteByPath")(e,j):b("setByPath")(e,j,h);return e;default:return a}}function Q(a,c,d){__p&&__p();var e,f=F(a)||[],g=m(a),h=null,i=null;switch(g){case b("AdsMessengerJSONMediaFormatType").IMAGE:g=o(a)||{};i=f[c]?f[c].title:"";f[c]=d===b("MessengerAttachmentFields").WEB_URL?(e={},e[b("MessengerAttachmentParamFields").TYPE]=d,e[b("MessengerAttachmentParamFields").URL]="",e[b("MessengerAttachmentParamFields").TITLE]=i,e):(e={},e[b("MessengerAttachmentParamFields").TYPE]=d,e[b("MessengerAttachmentParamFields").PAYLOAD]="",e[b("MessengerAttachmentParamFields").TITLE]=i,e);g.buttons=f;h=b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS;e=l(a);b("setByPath")(e,h,[g]);return e;case b("AdsMessengerJSONMediaFormatType").TEXT:i=f[c]?f[c].title:"";f[c]=d===b("MessengerAttachmentFields").WEB_URL?(g={},g[b("MessengerAttachmentParamFields").TYPE]=d,g[b("MessengerAttachmentParamFields").URL]="",g[b("MessengerAttachmentParamFields").TITLE]=i,g):(e={},e[b("MessengerAttachmentParamFields").TYPE]=d,e[b("MessengerAttachmentParamFields").PAYLOAD]="",e[b("MessengerAttachmentParamFields").TITLE]=i,e);h=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENT_BUTTONS;c=l(a);b("setByPath")(c,h,f);return c;default:return a}}function R(a,c,d,e){switch(c){case b("AdsMessengerJSONMediaFormatType").TEXT:return r(a,e);case b("AdsMessengerJSONMediaFormatType").IMAGE:return s(a);case b("AdsMessengerJSONMediaFormatType").VIDEO:return t(a,d);default:return a}}function S(a,c,d){__p&&__p();d=d&&d[0];if(!d)return a;var e=o(a)||{};if(d.hash)e.image_hash=c+":"+d.hash;else return a;c=l(a);b("setByPath")(c,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS,[e]);return c}function aa(a,c){var d=l(a);a=o(a)||{};a.image_hash=c;b("setByPath")(d,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS,[a]);return d}function ba(a,c,d){var e;d=d.getValue();var f=B(a)||[],g=b("getByPath")(f,[String(c),"payload"]);f[c]=(e={},e[b("AdsMessengerJSONFields").CONTENT_TYPE]=b("AdsMessengerJSONFields").TEXT,e[b("AdsMessengerJSONFields").PAYLOAD]=g,e[b("AdsMessengerJSONFields").TITLE]=d,e);!d&&!g&&(f[c]=null);return u(a,f)}function ca(a,c,d){var e;d=d.getValue();var f=B(a)||[],g=b("getByPath")(f,[String(c),"title"]);f[c]=(e={},e[b("AdsMessengerJSONFields").CONTENT_TYPE]=b("AdsMessengerJSONFields").TEXT,e[b("AdsMessengerJSONFields").PAYLOAD]=d,e[b("AdsMessengerJSONFields").TITLE]=g,e);!g&&!d&&(f[c]=null);return u(a,f)}function da(a,c){Y(a,b("AdsMessengerVisualEditorCustomerActionType").BUTTONS);z(a);if(V(a))return U(X(a,c));else return U(a)}function ea(a,c){var d=m(a);if(d===b("AdsMessengerJSONMediaFormatType").TEXT){Y(a,b("AdsMessengerVisualEditorCustomerActionType").ICE_BREAKERS);d=b("AdsMessengerVisualEditorUtils").getDefaultIceBreakers(c);b("setByPath")(a,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ICE_BREAKERS,d);return U(W(a,!0))}return a}function fa(a,c,d){Y(a,b("AdsMessengerVisualEditorCustomerActionType").QUICK_REPLIES);var e=m(a);if(e===b("AdsMessengerJSONMediaFormatType").TEXT){z(a);return u(W(a,d),c||[])}else return u(T(a),c||[])}function ga(a,c){__p&&__p();var d=b("getByPath")(a,b("AdsMessengerJSONPaths").MESSAGE.ATTACHMENT.PAYLOAD.TEMPLATE_TYPE);d=F(a)||[];var e=m(a),f=null;switch(e){case b("AdsMessengerJSONMediaFormatType").IMAGE:e=o(a)||{};d.splice(c,1);e.buttons=d;d.length||delete e.buttons;f=b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS;var g=l(a);b("setByPath")(g,f,[e]);return g;case b("AdsMessengerJSONMediaFormatType").TEXT:d.splice(c,1);f=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENT_BUTTONS;e=l(a);!d.length?b("deleteByPath")(e,f):b("setByPath")(e,f,d);return e;default:return a}}function ha(a,c){__p&&__p();var d=B(a)||[];d&&d.splice(c,1);d.filter(function(a){return!!a});c=v(a);if(!c)return a;var e=l(a);!d.length?C(a)!==b("MessengerContentEditorSurface").BUSINESS_TOOLS&&b("deleteByPath")(e,c):b("setByPath")(e,c,d);return e}function ia(a,c){c=c.getValue();var d=V(a)?b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.SECOND_TEXT:b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.TEXT;a=l(a);b("setByPath")(a,d,c);return a}function ja(a,c){c=c.getValue();var d=o(a)||{};d.title=c;c=l(a);b("setByPath")(c,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS,[d]);return c}function ka(a,c){c=c.getValue();var d=o(a)||{};d.subtitle=c;c=l(a);b("setByPath")(c,b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS,[d]);return c}function la(a,c){var d=b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ATTACHMENT_ID;a=l(a);b("setByPath")(a,d,c);return a}function ma(a,c,d){__p&&__p();var e=c.getValue();if(e===A(a,d))return a;c=b("getByPath")(a,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.path);d=d&&!!c?b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.TEXT:b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.TEXT;C(a)===b("MessengerContentEditorSurface").BUSINESS_TOOLS&&(d=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.TEXT);c=[b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.TEXT,d,b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.TEXT];var f=l(a);c.forEach(function(a){b("setByPath")(f,a,e)});return f}function T(a){__p&&__p();var c=m(a),d=null;switch(c){case b("AdsMessengerJSONMediaFormatType").IMAGE:c=o(a)||{};c.buttons=[];d=b("AdsMessengerJSONPaths").IMAGE_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENTS;var e=l(a);b("setByPath")(e,d,[c]);return e;case b("AdsMessengerJSONMediaFormatType").TEXT:d=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ELEMENT_BUTTONS;c=l(a);b("setByPath")(c,d,[null]);return c;default:return a}}function U(a){return u(a,[])}function V(a){var c=m(a);return c===b("AdsMessengerJSONMediaFormatType").TEXT?!b("getByPath")(a,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.path):!1}function na(a){if(V(a)){var c=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.SECOND_TEXT;return b("getByPath")(a,c)}return null}function W(a,c){var d=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT,e=l(a),f=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.SECOND_TEXT,g=d.PAYLOAD.TEXT;if(c){c=A(a,c);b("setByPath")(e,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.TEXT,c)}else b("setByPath")(e,f,b("getByPath")(a,g));b("deleteByPath")(e,d.path);return e}function X(a,c){__p&&__p();if(!V(a))return a;var d=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.SECOND_TEXT,e=b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT,f=e.PAYLOAD.TEXT,g=l(a);b("setByPath")(g,e.path,j);if(c){e=A(a,c);b("setByPath")(g,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.TEXT,e);b("deleteByPath")(g,b("AdsMessengerJSONPaths").TEXT_FORMAT.MESSAGE.TEXT)}else b("setByPath")(g,f,b("getByPath")(a,d));b("deleteByPath")(g,d);return g}function Y(a,c){var d=Z(a);d&&b("setByPath")(a,d,c)}function Z(a){switch(m(a)){case b("AdsMessengerJSONMediaFormatType").TEXT:return b("AdsMessengerJSONPaths").TEXT_FORMAT.CUSTOMER_ACTION_TYPE;case b("AdsMessengerJSONMediaFormatType").IMAGE:return b("AdsMessengerJSONPaths").IMAGE_FORMAT.CUSTOMER_ACTION_TYPE;case b("AdsMessengerJSONMediaFormatType").VIDEO:return b("AdsMessengerJSONPaths").VIDEO_FORMAT.CUSTOMER_ACTION_TYPE;default:return null}}function $(a){var c=Z(a),d=b("getByPath")(a,[b("AdsMessengerWelcomeMessageFields").SURFACE])===b("MessengerContentEditorSurface").VISUAL_EDITOR_NEW;if(c&&d)return b("getByPath")(a,c);if(B(a)||V(a))return b("AdsMessengerVisualEditorCustomerActionType").QUICK_REPLIES;else return b("AdsMessengerVisualEditorCustomerActionType").BUTTONS}e.exports={getActionType:$,getMediaFormat:m,getWelcomeMessagePath:n,getWelcomeMessage:A,getQuickReplies:B,getGenericTitle:D,getGenericSubtitle:E,getCTAs:F,getPayload:G,getGenericElement:o,getIceBreaker:w,getIceBreakers:y,getIceBreakerTitle:f,getIceBreakerPath:x,getImageHash:p,getTemplateType:H,getTemplateIDForCTMLeadGen:J,getImageID:I,getAttachmentText:K,getQRPath:v,getVideoID:L,getSecondText:na,getSurface:C,getLandingScreenType:q,isTextWithQR:V,addCTA:M,addQuickReply:N,addButtonTemplate:X,defaultTextAttachment:j,setActionType:Y,setCTATitle:O,setCTAURL:P,setCTAType:Q,setTextFormat:r,setImageFormat:s,setVideoFormat:t,setQR:u,changeFormat:R,selectImage:S,setIceBreaker:d,setIceBreakerTitle:c,setImageHash:aa,setQRTitle:ba,setQRPayload:ca,switchToButtons:da,switchToIceBreakers:ea,switchToQuickReplies:fa,removeCTA:ga,removeIceBreakers:z,removeQuickReply:ha,setAttachmentText:ia,setGenericTitle:ja,setGenericSubtitle:ka,setVideo:la,setWelcomeMessage:ma,setLandingScreenType:a,removeAllCTA:T,removeAllQR:U,removeButtonTemplate:W}}),null);
__d("AdsVideoUploadConsts",[],(function(a,b,c,d,e,f){"use strict";a="video_upload_0";e.exports={DEFAULT_UPLOADER_KEY:a}}),null);
__d("AdsVideoUploadEvents",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({UPLOAD_SUCCESS:null,UPLOAD_ERROR:null,UPLOAD_PROGRESS:null,ENCODING_SUCCESS:null,ENCODING_ERROR:null});e.exports=a}),null);
__d("AdsVideoUploadStoreState",["AdsVideoUploadConsts","AdsVideoUploadStatus","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=b("immutable").Record({__internalUploader:null,encodingTime:null,errorMessage:null,newlyUploadedVideoErrors:null,progress:0,recentUploadedVideoID_DO_NOT_USE:null,status:b("AdsVideoUploadStatus").NONE,title:"",uploaderKey:b("AdsVideoUploadConsts").DEFAULT_UPLOADER_KEY,uploadTime:null,videoBackgroundUploadInfo:null,videoUploadPACInfo:null,videoUploadDLOInfo:null});g=babelHelpers.inherits(a,c);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("AdsVideoUploadUtil",["invariant","AdsGraphAPI","AdsVideoUploadConsts","AdsVideoUploadStatus","AdsVideoUploadStoreState","URI","ads-lib-connect_DEPRECATED","immutable","memoizeWithArgsCapped"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ads-lib-connect_DEPRECATED").FB;c=20;function a(a,b,c){return String(a)+String(b)+String(c)}var i={generateUploaderKey:function(a){return"video_upload_"+a},generateCustomUploaderKey:function(a,b){return b+"_"+a},getVideoTitle:function(a){a=a.name;var b=a.lastIndexOf("\\");b===-1&&(b=a.lastIndexOf("/"));return b===-1?a:a.substring(b+1)},getPostEndpoint:function(a,c,d){var e="/v"+b("AdsGraphAPI").getVersion();e=new(b("URI"))(h.url(e+"/act_"+c+"/advideos",d?{title:d}:null,a));e.getSubdomain()==="graph"||g(0,3032,e.getSubdomain());e.setSubdomain("graph-video");return e.toString()},atLeastOneVideoUploading:function(a){return!!a&&a.some(function(a){return a.status===b("AdsVideoUploadStatus").UPLOADING||a.status===b("AdsVideoUploadStatus").ENCODING})},getDLOVideoUploadingForLanguage:function(a,b){return a.find(function(a){return a.videoUploadDLOInfo&&a.videoUploadDLOInfo.language===b})},getFirstErrorMessage:function(a){a=a&&a.find(function(a){return!!a.errorMessage});return a&&a.errorMessage},normalizeProgress:function(a){return a>=0&&a<=1?Math.round(a*100):a},generateFileMap:function(a,b,c){var d=new Map();c.forEach(function(c,e){d.set(i.generateCustomUploaderKey(a+e,b),c)});return d},isBulkVideoUploadComplete:function(a,c){a=a.filter(function(a,b){return c.has(b)});return a.size===c.size&&a.every(function(a,c){return b("AdsVideoUploadStatus").ERROR===a.status||null!=a.recentUploadedVideoID_DO_NOT_USE})},calculateBulkVideoUploadProgress:function(a,b){if(b.size===0)return 0;a=a.reduce(function(a,c,d){return b.has(d)?a+c.progress:a},0);return a/b.size},wrapLegacyUploadInfoAsImmMap:b("memoizeWithArgsCapped")(function(a,c,d){var e;return b("immutable").Map((e={},e[b("AdsVideoUploadConsts").DEFAULT_UPLOADER_KEY]=new(b("AdsVideoUploadStoreState"))({title:a||"",progress:c||0,status:d||b("AdsVideoUploadStatus").NONE}),e))},a,c)};e.exports=i}),null);
__d("InstreamVideoAdBreak",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a.instreamPlacement,this.$2=a.index,this.$3=a.timeOffsetInMs,this.$4=a.adBreakDurationInMs,this.$5=a.isAdBreakAutoInserted,this.$6=a.naturalnessScore,this.$7=a.midSpeechScore}a.prototype.getInstreamPlacement=function(){return this.$1};a.prototype.getIndex=function(){return this.$2};a.prototype.getTimeOffsetInMs=function(){return this.$3};a.prototype.getAdBreakDurationInMs=function(){return this.$4};a.prototype.getIsAdBreakAutoInserted=function(){return this.$5};a.prototype.getNaturalnessScore=function(){return this.$6};a.prototype.getMidSpeechScore=function(){return this.$7};e.exports=a}),null);
__d("FDSCloseButton.react",["fbt","React","SUICloseButton.react","SUICloseButtonUniform.fds","makeFDSStandardComponent","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("makeSUIFDSPrivateTheme")("FDSCloseButton",{SUICloseButton:b("SUICloseButtonUniform.fds")});h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props;return b("React").createElement(b("SUICloseButton.react"),{"data-hover":a.tooltipContent!==null&&a.tooltipContent!==void 0?"tooltip":null,"data-testid":a["data-testid"],"data-tooltip-content":a.tooltipContent,"data-tooltip-position":a.tooltipPosition,disabled:a.isDisabled,id:a.id,label:a.label,layerCancel:a.layerCancel,margin:a.margin,onClick:a.onClick,onFocus:a.onFocus,onMouseDown:a.onMouseDown,onMouseUp:a.onMouseUp,shade:a.shade,size:a.size,theme:i})};function a(){h.apply(this,arguments)}a.defaultProps={isDisabled:!1,label:g._("Close"),shade:"dark",size:"small"};e.exports=b("makeFDSStandardComponent")("FDSCloseButton",a)}),null);
__d("PagesComposerAudiencesConstants",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a={SELECTOR_OPTIONS:b("keyMirror")({PUBLIC:null,GATING:null,TARGETING:null,WOODHENGE:null,VIDEO_CREATOR_TOP_FAN:null,NEWS_SUBSCRIBERS:null}),TABS:b("keyMirror")({TARGETING:null,GATING:null,WOODHENGE:null}),ExportToDefaultSpecMap:{age_max:"ageMax",age_min:"ageMin",geo_locations:"geoLocations",relationship_statuses:"relationshipStatuses",education_statuses:"educationStatuses",education_majors:"educationMajors",education_schools:"educationSchools",work_employers:"workEmployers",work_positions:"workPositions"}};e.exports=a}),null);
__d("SUICardFooter.react",["cx","React","SUIComponent","SUITheme"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("SUIComponent"));h&&h.prototype;a.prototype.render=function(){var a=b("SUITheme").get(this).SUICard.footer,c=a.typeStyle;a=babelHelpers.objectWithoutProperties(a,["typeStyle"]);var d=this.props,e=d.children;d=d.rightContent;e=b("React").Children.count(e)>1?b("React").createElement("div",null,e):e;return b("React").createElement("div",{className:"_5h8z"+(e==null&&d?" _3r0r":""),style:babelHelpers["extends"]({},a,c)},e,d)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("AdsVideoUploadAsyncRequest",["fbt","AsyncResponse","emptyFunction","forEachObject"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(){this.$1={},this.$2={},this.$3=null,this.$4=b("emptyFunction"),this.$5=b("emptyFunction"),this.$6=b("emptyFunction"),this.$7=b("emptyFunction")}a.prototype.setURI=function(a){this.$8=a;return this};a.prototype.setData=function(a){this.$1=a;return this};a.prototype.setRawData=function(a){this.$3=a;return this};a.prototype.setRequestHeader=function(a,b){this.$2[a]=b;return this};a.prototype.setHandler=function(a){this.$4=a;return this};a.prototype.setErrorHandler=function(a){this.$9=a;return this};a.prototype.setTransportErrorHandler=function(a){this.$6=a;return this};a.prototype.setUploadProgressHandler=function(a){this.$7=a;return this};a.prototype.setAllowCrossOrigin=function(a){return this};a.prototype.send=function(){this.$10=new XMLHttpRequest();this.$11();this.$10.open("POST",this.$8,!0);var a=this.$10;b("forEachObject")(this.$2,function(b,c){a.setRequestHeader(c,b)});this.$10.send(this.$12())};a.prototype.abort=function(){this.$13(),this.$10.abort()};a.prototype.$11=function(){this.$10.addEventListener("load",function(event){return this.$14(event)}.bind(this)),this.$10.addEventListener("error",function(event){return this.$15(event)}.bind(this)),this.$10.upload.addEventListener("progress",function(event){return this.$16(event)}.bind(this))};a.prototype.$14=function(event){var a=JSON.parse(this.$10.responseText),c=new(b("AsyncResponse"))(null,a);if(this.$17(this.$10.status))this.$4(c);else{var d=1,e=g._("An unknown error occurred"),f=null,h=!1,i;(i=a.error)?(d=i.error_subcode||i.code,e=i.error_user_title||i.message,f=i.error_user_msg,f&&(f+=" (#"+d+") "),h=i.is_transient):a.error_code!=null&&(d=a.error_code,e=a.error_msg);f||(f=e);Object.assign(c,{error:d,errorSummary:e,errorDescription:f,transientError:h});this.$9(c)}};a.prototype.$15=function(event){__p&&__p();var a=JSON.parse(this.$10.responseText);a=new(b("AsyncResponse"))(null,a);if(navigator.onLine){var c=g._("Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.");Object.assign(a,{error:1004,errorSummary:c,errorDescription:c,transientError:!0})}else{a.setError(1006);var d=g._("The browser went offline");Object.assign(a,{error:1006,errorSummary:d,errorDescription:d,transientError:!0});a.setErrorDescription(c);a.setErrorSummary(c)}this.$6(a)};a.prototype.$16=function(event){this.$7(event)};a.prototype.$13=function(){this.$10.removeEventListener("load",this.__successHandler),this.$10.removeEventListener("error",this.__errorHandler),this.$10.upload.removeEventListener("progress",this.__uploadProgressHandler)};a.prototype.$17=function(a){return a>=200&&a<=299};a.prototype.$12=function(){var a=this.$3===null?new FormData():this.$3;b("forEachObject")(this.$1,function(b,c){a.append(c,b)});return a};e.exports=a}),null);
__d("AdsVideoUploadRequest",["AdsVideoUploadAsyncRequest","VideoUploadRequest"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("VideoUploadRequest"));g&&g.prototype;a.prototype.__getAsyncRequest=function(){return new(b("AdsVideoUploadAsyncRequest"))()};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("AdsVideoUploadRequestContext",["VideoUploadRequestContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(a,b("VideoUploadRequestContext"));h=g&&g.prototype;a.prototype.setChunkSessionID=function(a){this.$AdsVideoUploadRequestContext1=a;return this};a.prototype.getChunkSessionID=function(){return this.$AdsVideoUploadRequestContext1};a.prototype.reset=function(){h.reset.call(this),this.$AdsVideoUploadRequestContext1=null};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("AdsVideoUploadPostRequestManager",["AdsVideoUploadRequest","AdsVideoUploadUtil","VideoUploadPostRequestManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("VideoUploadPostRequestManager"));g&&g.prototype;a.prototype.__getVideoUploadRequest=function(a){return new(b("AdsVideoUploadRequest"))(a)};a.prototype.__createRequestData=function(a){return{waterfall_id:a.getWaterfallID(),upload_session_id:a.getChunkSessionID(),upload_phase:"finish",title:b("AdsVideoUploadUtil").getVideoTitle(a.getFile().getFile())}};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("AdsVideoUploadReceiveRequestManager",["AdsVideoUploadRequest","VideoUploadReceiveRequestManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(a,b("VideoUploadReceiveRequestManager"));h=g&&g.prototype;a.prototype.__getVideoUploadRequest=function(a){return new(b("AdsVideoUploadRequest"))(a)};a.prototype.__createRequestData=function(a){if(a.getUseParallelChunks())return{start_offset:a.getStartOffset(),end_offset:a.getEndOffset(),waterfall_id:a.getWaterfallID(),upload_session_id:a.getChunkSessionID(),upload_phase:"transfer",partition_start_offset:a.getPartitionStartOffset(),partition_end_offset:a.getPartitionEndOffset(),upload_speed:a.getLastKnownUploadSpeed().toString()};else return{start_offset:a.getStartOffset(),waterfall_id:a.getWaterfallID(),upload_session_id:a.getChunkSessionID(),upload_phase:"transfer"}};a.prototype.__handleSuccessResponse=function(a){var b=a.getPayload();b.start_offset=parseInt(b.start_offset,10);b.end_offset=parseInt(b.end_offset,10);h.__handleSuccessResponse.call(this,a)};a.prototype.__handleServerFailureResponse=function(a){if(h.__hasInvalidStartOffsetAndHasRetries.call(this,a.getError())){var b=a.getPayload();b.start_offset=b.error.error_data.start_offset;b.end_offset=b.error.error_data.end_offset}h.__handleServerFailureResponse.call(this,a)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("AdsVideoUploadStartRequestManager",["AdsVideoUploadRequest","VideoCreatorProductType","VideoUploadStartRequestManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("VideoUploadStartRequestManager"));g&&g.prototype;a.prototype.__getVideoUploadRequest=function(a){return new(b("AdsVideoUploadRequest"))(a)};a.prototype.__getDataToSend=function(a){var c=Object.keys(b("VideoCreatorProductType")),d=c[0];c.forEach(function(c){b("VideoCreatorProductType")[c]===a.getCreatorProduct()&&(d=c)});if(a.getUseParallelChunks())return{file_size:a.getFile().getSize(),waterfall_id:a.getWaterfallID(),upload_phase:"start",partition_start_offset:a.getPartitionStartOffset(),partition_end_offset:a.getPartitionEndOffset(),creator_product:d};else return{file_size:a.getFile().getSize(),waterfall_id:a.getWaterfallID(),upload_phase:"start",creator_product:d}};a.prototype.__getSuccessInformData=function(a){return{session_id:a.upload_session_id,video_id:a.video_id,start_offset:parseInt(a.start_offset,10),end_offset:parseInt(a.end_offset,10)}};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ApiVideoStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({READY:"ready",PROCESSING:"processing",ERROR:"error",EXPIRED:"expired"})}),null);
__d("AdsVideoEncodingAsyncNotifier",["AdsVideoFetcher","ApiVideoStatus","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1e3;function a(a){this.$1=0,this.$2=0,this.$4=a,this.$3=0,this.$5=b("emptyFunction"),this.$6=b("emptyFunction"),this.$7=b("emptyFunction")}a.prototype.start=function(){this.$1=Date.now(),this.$8()};a.prototype.getEncodingElapsedTime=function(){return this.$2};a.prototype.setOnStatusUpdateListener=function(a){this.$6=a};a.prototype.setOnFailedListener=function(a){this.$5=a};a.prototype.setOnSuccessListener=function(a){this.$7=a};a.prototype.$8=function(){var a=this.$3+g;a=Math.max(0,a-Date.now());setTimeout(function(){return this.$9()}.bind(this),a)};a.prototype.$9=function(){this.$3=Date.now(),b("promiseDone")(b("AdsVideoFetcher").genVideoStatus(this.$4),function(a){return this.$10(a)}.bind(this))};a.prototype.$10=function(a){a=typeof a==="string"?a:a.video_status;a===b("ApiVideoStatus").PROCESSING?(this.$6(),this.$8()):a===b("ApiVideoStatus").ERROR?this.$5():a===b("ApiVideoStatus").READY&&b("promiseDone")(b("AdsVideoFetcher").genSingleVideo(this.$4),function(a){this.$2=Date.now()-this.$1,this.$7(a)}.bind(this),function(){this.$5()}.bind(this))};e.exports=a}),null);
__d("AdsVideoUploadSession",["AdsVideoEncodingAsyncNotifier","AdsVideoUploadEvents","AdsVideoUploadPostRequestManager","AdsVideoUploadReceiveRequestManager","AdsVideoUploadRequestContext","AdsVideoUploadStartRequestManager","VideoUploadLogger","VideoUploadSession"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(a,b("VideoUploadSession"));h=g&&g.prototype;a.prototype.start=function(a){this.$AdsVideoUploadSession1=!1,h.start.call(this,a)};a.prototype.cancel=function(){this.$AdsVideoUploadSession1=!0,h.cancel.call(this)};a.prototype.abandon=function(){this.$AdsVideoUploadSession1=!0,h.abandon.call(this)};a.prototype.getEncodingTime=function(){return this.$AdsVideoUploadSession2.getEncodingElapsedTime()};a.prototype.__handlePostRequestFinished=function(event,a){h.__handlePostRequestFinished.call(this,event,a),this.$AdsVideoUploadSession3=!1,this.$AdsVideoUploadSession4=!1,this.$AdsVideoUploadSession2=new(b("AdsVideoEncodingAsyncNotifier"))(this.getVideoID()),this.$AdsVideoUploadSession2.setOnStatusUpdateListener(function(){return this.$AdsVideoUploadSession5()}.bind(this)),this.$AdsVideoUploadSession2.setOnFailedListener(function(){return this.$AdsVideoUploadSession6()}.bind(this)),this.$AdsVideoUploadSession2.setOnSuccessListener(function(a){return this.$AdsVideoUploadSession7(a)}.bind(this)),this.$AdsVideoUploadSession2.start()};a.prototype.__createReceiveRequestContext=function(a,c,d){d=new(b("AdsVideoUploadRequestContext"))();this.__setupReceiveRequestContext(d,a,c);return d};a.prototype.__setupReceiveRequestContext=function(a,b,c,d){h.__setupReceiveRequestContext.call(this,a,b,c),this.$AdsVideoUploadSession8=b.session_id,a.setChunkSessionID(this.$AdsVideoUploadSession8)};a.prototype.__createPostRequestContext=function(a){var c=new(b("AdsVideoUploadRequestContext"))();this.__setupPostRequestContext(c,a);return c};a.prototype.__setupPostRequestContext=function(a,b){h.__setupPostRequestContext.call(this,a,b),a.setChunkSessionID(this.$AdsVideoUploadSession8)};a.prototype.$AdsVideoUploadSession7=function(a){if(this.$AdsVideoUploadSession1){this.__logEvent(b("VideoUploadLogger").EVENT_ENCODING_FAIL_OBSERVED);return}this.$AdsVideoUploadSession3||(this.$AdsVideoUploadSession3=!0,this.__logEvent(b("VideoUploadLogger").EVENT_ENCODING_SUCCESS_OBSERVED,{elapsed_time:Math.round(this.getEncodingTime())}),this.inform(b("AdsVideoUploadEvents").ENCODING_SUCCESS,a))};a.prototype.$AdsVideoUploadSession5=function(){if(this.$AdsVideoUploadSession1){this.__logEvent(b("VideoUploadLogger").EVENT_ENCODING_FAIL_OBSERVED);return}this.$AdsVideoUploadSession4||(this.__logEvent(b("VideoUploadLogger").EVENT_ENCODING_START_OBSERVED),this.$AdsVideoUploadSession4=!0)};a.prototype.$AdsVideoUploadSession6=function(){this.__logEvent(b("VideoUploadLogger").EVENT_ENCODING_FAIL_OBSERVED),this.inform(b("AdsVideoUploadEvents").ENCODING_ERROR)};a.prototype.__getVideoUploadStartRequestManager=function(a){return new(b("AdsVideoUploadStartRequestManager"))(a,0,0,0,!1,0,0,0)};a.prototype.__getVideoUploadReceiveRequestManager=function(a,c){return new(b("AdsVideoUploadReceiveRequestManager"))(a,c.max_transport_retries,null,c.max_server_retries,!1,0,0,c.transport_retry_interval_base,c.server_retry_interval_base,!1,c.access_token,c.resumability_enabled,c.resumability_async_enabled,null,null,0,!1,!1,!1)};a.prototype.__getVideoUploadPostRequestManager=function(a){return new(b("AdsVideoUploadPostRequestManager"))(a,0,0,0,0)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VideoUploadTargetType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EVENT:"event",SELF:"self",GROUP:"group",PAGE:"page",FRIEND:"friend",PAYMENT_ACCOUNT:"payment_account",ADMARKET_ACCOUNT:"admarket_account",ATLAS_CREATIVE_SET:"atlas_creative_set",APP_SUBMISSION:"app_submission",APPLICATION:"application",INSTANT_APPLICATION:"instant_application",QUICK_PROMOTION:"quick_promotion",FUNDRAISER:"fundraiser",MARKETPLACE:"marketplace",PRODUCT_CATALOG:"product_catalog",JOB_APPLICATION:"job_application",PIXELCLOUD:"pixelcloud",PROTON:"proton",LEARN:"learn",MESSAGING_PAGE_SUBMISSION:"messaging_page_submission",CRISIS:"CRISIS",SHARED_ALBUM:"shared_album",PHOTO_ALBUM:"photo_album",OBJ_STATIC_PHOTO_SET:"obj_static_photo_set",CIVIC_PROPOSAL:"civic_proposal",LIVING_ROOM:"living_room"})}),null);
__d("SphericalMediaCanvasPool",["invariant","DOM"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=1,i="default",j=function(a,b){return a+b};function a(){this.$2=new Map(),this.$3=new Map(),this.$1=null}a.prototype.setLimit=function(a,b){b===void 0&&(b=i);var c=this.$3.get(b)||{queue:[],limit:1};c.limit=a;this.$3.set(b,c)};a.prototype.release=function(a,b){__p&&__p();b===void 0&&(b=i);a=j(a,b);var c=this.$2.get(a);if(!c)return!1;b=this.$3.get(b);if(!b||b.queue.length===0)return!1;b.queue.splice(b.queue.indexOf(a),1);c.canvas.parentNode&&c.canvas.parentNode.removeChild(c.canvas);return this.$2["delete"](a)};a.prototype.get=function(a,c,d){__p&&__p();d===void 0&&(d=i);var e=babelHelpers["extends"]({},c.canvasAttrs);if(!a||!c.beforeCanvasLost)throw new Error("Missing required arguments.");var f=j(a,d);e["data-id"]=e["data-id"]||a;a=this.$2.get(f);if(a)return a.canvas;a=this.$3.get(d)||{queue:[],limit:h};var g;if(a.queue.length<a.limit)g=b("DOM").create("canvas",e);else{var k=a.queue.shift(),l=this.$2.get(k);if(!l)throw new Error("Canvas pool could not find the item",k);g=l.canvas;l.beforeCanvasLost();this.$2["delete"](k);g.className=e.className;g.height=e.height;g.width=e.width;g.tabIndex=e.tabIndex;g.setAttribute("data-id",e["data-id"])}if(!g)throw new Error("Failed to get a canvas.");a.queue.push(f);this.$3.set(d,a);this.$2.set(f,{canvas:g,beforeCanvasLost:c.beforeCanvasLost});return g};e.exports=new a()}),null);